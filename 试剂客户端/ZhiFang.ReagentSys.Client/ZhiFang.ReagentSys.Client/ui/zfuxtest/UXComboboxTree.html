<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
    <title>部门下拉树</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <link rel="stylesheet" type="text/css" href="../extjs/resources/css/ext-all.css"/>    
    <script type="text/javascript" src="../extjs/bootstrap.js" charset="utf-8"></script>
    <script type="text/javascript" src="../extjs/locale/ext-lang-zh_CN.js" charset="utf-8"></script>
	 <link rel="stylesheet" type="text/css" href="../css/icon.css"/> 
    <script type="text/javascript" src="../util/util.js"></script>
    <script src="../extjs/ux/TreePicker.js" type="text/javascript"></script>

    <script type="text/javascript">
	Ext.onReady(function() {
		  var store = Ext.create('Ext.data.TreeStore', {  
	         proxy : {  
	             type : 'ajax',  
	             url : 'server/check-nodes.json'  
	         },  
	         // 设置根节点  
	         root : {  
	             expanded: true 
	             
	         },
	         sorters: [{
	             property: 'leaf',
	             direction: 'ASC'
	         }, {
	             property: 'text',
	             direction: 'ASC'
	        }] 
	     }); 
     
	     //一 生成组件
	     var vartestobj=Ext.create('Ext.ux.TreePicker', {
	         renderTo: Ext.getBody(),
	         margin :  '11 10 10 10',
		     displayField : 'text',//这个地方也需要注意一下，这个是告诉源码tree用json数据里面的什么字段来显示，我测试出来是只能写'text'才有效果  
		     fieldLabel : '部门',  
		     labelAlign :'right',
		     labelWidth:60,
		     value:1,
		     id:'test',
		     forceSelection : true,// 只能选择下拉框里面的内容  
      	     editable : false,// 不能编辑  
             store :store, //这个store必须是在controller里面动态创建出来的，如果用引入controller时加载的那种store会报错  
             listeners:{
                 select:function(){
                    //alert("daaf");
                 }
             }
		});
	
	    //属性设置:设置文本
		var fieldLabel  =Ext.create('Ext.toolbar.Toolbar', {
		    width   : 300,
			height:25,
			bodyCls:'bg-white',//控件主体背景样式,默认值'bg-white',为"css/icon.css"里的.bg-white
			cls:'bg-white',//控件样式设置,默认值'bg-white',为"css/icon.css"里的.bg-white
			border : 0,//边框线显示 true,或隐藏false
		    items: [
		        { xtype : 'textfield',id:"L2",emptyText: '设置文本'},
			    { xtype : 'button', text: '文本',border : true,//边框线显示 true,或隐藏false
			     handler: function() {
				     var mytest=Ext.getCmp('test');
					 var setWidth=Ext.getCmp('L2').value;
					 mytest.fieldLabel=setWidth;
					
				 }
		        }
		    ]
		});	
	
		 //属性设置:设置文本宽度
		var labelWidth =Ext.create('Ext.toolbar.Toolbar', {
		    width   : 300,
			height:25,
			bodyCls:'bg-white',//控件主体背景样式,默认值'bg-white',为"css/icon.css"里的.bg-white
			cls:'bg-white',//控件样式设置,默认值'bg-white',为"css/icon.css"里的.bg-white
			border : 0,//边框线显示 true,或隐藏false
		    items: [
		        {xtype : 'textfield',id:"my_setHeight",emptyText: '设置文本宽度'},
				{ xtype: 'button',text: '设置文本宽度',border : true,//边框线显示 true,或隐藏false
				handler: function() {
			         var mytest=Ext.getCmp('test');
					 var setWidth=Ext.getCmp('my_setHeight').getValue();
					 mytest.labelWidth=parseInt(setWidth);
					
					}
		        }
	        ]
		});	
		//属性设置:文本对齐方式
		var  labelAlign=Ext.create('Ext.toolbar.Toolbar', {
		    width   :300,
			height:25,
			bodyCls:'bg-white',//控件主体背景样式,默认值'bg-white',为"css/icon.css"里的.bg-white
			cls:'bg-white',//控件样式设置,默认值'bg-white',为"css/icon.css"里的.bg-white
			border : 0,//边框线显示 true,或隐藏false
		    items: [
		        { xtype    : 'textfield',id:"L5",emptyText: '设置文本对齐方式'},
			    { xtype: 'button', text: '文本对齐方式',border : true,//边框线显示 true,或隐藏false
			     handler: function() {
					 var mytest=Ext.getCmp('test');
					 var setWidth=Ext.getCmp('L5').value;
					 mytest.labelAlign=setWidth;
				 }
		        }
		    ]
		});	

		//属性设置:下拉树的最大高
		var  maxPickerHeight=Ext.create('Ext.toolbar.Toolbar', {
		    width   : 300,
			height:25,
			bodyCls:'bg-white',//控件主体背景样式,默认值'bg-white',为"css/icon.css"里的.bg-white
			cls:'bg-white',//控件样式设置,默认值'bg-white',为"css/icon.css"里的.bg-white
			border : 0,//边框线显示 true,或隐藏false
		    items: [
		        { xtype    : 'textfield',id:"L6",emptyText: '下拉树的最大高'},
			    { xtype: 'button', text: '下拉树的最大高',border : true,//边框线显示 true,或隐藏false
			     handler: function() {
			    
				    var mytest=Ext.getCmp('test');
					 var setWidth=Ext.getCmp('L6').getValue();
					 mytest.maxPickerHeight=parseInt(setWidth);
					 alert(setWidth);
					 //mytest.insert();

				
				 }
		        }
		    ]
		});	
		
		//属性设置:下拉树的最小高度
		var  minPickerHeight=Ext.create('Ext.toolbar.Toolbar', {
		    width   : 300,
			height:25,
			bodyCls:'bg-white',//控件主体背景样式,默认值'bg-white',为"css/icon.css"里的.bg-white
			cls:'bg-white',//控件样式设置,默认值'bg-white',为"css/icon.css"里的.bg-white
			border : 0,//边框线显示 true,或隐藏false
		    items: [
		        { xtype  : 'textfield',id:"L7",emptyText: '下拉树的最小高度'},
			    { xtype  : 'button', text: '下拉树的最小高度',border : true,//边框线显示 true,或隐藏false
			     handler : function() {
				     var mytest=Ext.getCmp('test');
					 var setWidth=Ext.getCmp('L7').getValue();
					 mytest.minPickerHeight=parseInt(setWidth);
					 alert(setWidth);
				 }
		        }
		    ]
		});	
		
		//属性设置:默认选中值
		var  value=Ext.create('Ext.toolbar.Toolbar', {
		    width   : 300,
			height:25,
			bodyCls:'bg-white',//控件主体背景样式,默认值'bg-white',为"css/icon.css"里的.bg-white
			cls:'bg-white',//控件样式设置,默认值'bg-white',为"css/icon.css"里的.bg-white
			border : 0,//边框线显示 true,或隐藏false
		    items: [
		        { xtype    : 'textfield',id:"L8",emptyText: '默认值'},
			    { xtype: 'button', text: '默认值',border : true,//边框线显示 true,或隐藏false
			     handler: function() {
				     var mytest=Ext.getCmp('test');
					 var setWidth=Ext.getCmp('L8').getValue();
					 mytest.minPickerHeight=setWidth;
					 //alert(setWidth);
				 }
		        }
		    ]
		});	
	
	    //属性设置:设置数据源
		var  store=Ext.create('Ext.toolbar.Toolbar', {
		    width   : 300,
			height:25,
			bodyCls:'bg-white',//控件主体背景样式,默认值'bg-white',为"css/icon.css"里的.bg-white
			cls:'bg-white',//控件样式设置,默认值'bg-white',为"css/icon.css"里的.bg-white
			border : 0,//边框线显示 true,或隐藏false
		    items: [
		        { xtype    : 'textfield',id:"L9",emptyText: '设置数据源'},
			    { xtype: 'button', text: '数据源',border : true,//边框线显示 true,或隐藏false
			     handler: function() {
				     var mytest=Ext.getCmp('test');
					 var setWidth=Ext.getCmp('L9').getValue();
					 mytest.store=setWidth;
				 }
		        }
		    ]
		});	
	
	    
	    //属性设置:只能选择下拉框里面的内容  true
		var  forceSelection =Ext.create('Ext.toolbar.Toolbar', {
		    width   : 300,
			height:25,
			bodyCls:'bg-white',//控件主体背景样式,默认值'bg-white',为"css/icon.css"里的.bg-white
			cls:'bg-white',//控件样式设置,默认值'bg-white',为"css/icon.css"里的.bg-white
			border : 0,//边框线显示 true,或隐藏false
		    items: [
		        { xtype    : 'textfield',id:"L0",emptyText: '只能选择下拉框里面的内容'},
			    { xtype: 'button', text: '只能选择下拉框里面的内容',border : true,//边框线显示 true,或隐藏false
			     handler: function() {
				     var mytest=Ext.getCmp('test');
					 var setWidth=Ext.getCmp('L10').getValue();
					 mytest.forceSelection=setWidth;

				 }
		        }
		    ]
		});	
		
		  //属性设置:是否可编辑
		var  editable  =Ext.create('Ext.toolbar.Toolbar', {
		    width   : 300,
			height:25,
			bodyCls:'bg-white',//控件主体背景样式,默认值'bg-white',为"css/icon.css"里的.bg-white
			cls:'bg-white',//控件样式设置,默认值'bg-white',为"css/icon.css"里的.bg-white
			border : 0,//边框线显示 true,或隐藏false
		    items: [
		        { xtype    : 'textfield',id:"L11",emptyText: '是否可编辑'},
			    { xtype: 'button', text: '是否可编辑',border : true,//边框线显示 true,或隐藏false
			     handler: function() {
				     var mytest=Ext.getCmp('test');
					 var setWidth=Ext.getCmp('L11').getValue();
					 mytest.editable=setWidth;
					}
		        }
		    ]
		});	
	   //方法设置:获取选择的值
		var ReLoad =Ext.create('Ext.toolbar.Toolbar', {
		    width   : 300,
			height:25,
			bodyCls:'bg-white',//控件主体背景样式,默认值'bg-white',为"css/icon.css"里的.bg-white
			cls:'bg-white',//控件样式设置,默认值'bg-white',为"css/icon.css"里的.bg-white
			border : 0,//边框线显示 true,或隐藏false
		    items: [ 
				{xtype: 'button',text: '获取选择的值',border : true,//边框线显示 true,或隐藏false
				   handler: function() {
				       var t=Ext.getCmp('test');
                       alert('绑定的值为第'+t.getValue()+'节点');
					 }
			     }
			]
		});	
		
		 //方法设置:设置值
		var GetCol =Ext.create('Ext.toolbar.Toolbar', {
		    width   : 300,
			height:25,
			bodyCls:'bg-white',//控件主体背景样式,默认值'bg-white',为"css/icon.css"里的.bg-white
			cls:'bg-white',//控件样式设置,默认值'bg-white',为"css/icon.css"里的.bg-white
			border : 0,//边框线显示 true,或隐藏false
		    items: [ 
				{xtype: 'button',text: '设置',border : true,//边框线显示 true,或隐藏false
				   handler: function() {
				       var t= Ext.getCmp('test');
                       t.setValue(3);
					 }
			     }
			]
		});	
		
		
		//三:呈现视图
		var viewport=Ext.create("Ext.container.Viewport",{
			layout:  'border',//Border布局
			bodyCls:'bg-white',//控件主体背景样式,默认值'bg-white',为"css/icon.css"里的.bg-white
			cls:'bg-white',//控件样式设置,默认值'bg-white',为"css/icon.css"里的.bg-white
			border : false,//边框线显示 true,或隐藏false
	        items: [
			   {region: 'center',border : false,//边框线显示 true,或隐藏false
			   layout:'column',
			       items:[
				       { xtype:vartestobj}
				    ]
	           },{
				region: 'east',layout: 'accordion', frame: true,collapsible: true,split: true,width: 320,border : true,//边框线显示 true,或隐藏false
				items:[
				    {xtype: 'form',id: 'formtest_Property',autoScroll: true,bodyPadding: 10,collapsed: true,
					layout: 'column',title: '属性设置',
			        items: [
		              
				       {xtype:fieldLabel,anchor: '100%'},
				       {xtype:labelWidth,anchor: '100%'},
				       {xtype:labelAlign,anchor: '100%'},
				       {xtype:maxPickerHeight,anchor: '100%'},
				       {xtype:minPickerHeight,anchor: '100%'},
				       {xtype:value,anchor: '100%'},
				       {xtype:store,anchor: '100%'},
				       {xtype:forceSelection,anchor: '100%'},
				       {xtype:editable,anchor: '100%'}
				    ]},
				   {xtype: 'form',id: 'formtest_Method',autoScroll: true,bodyPadding: 10,collapsed: true,title: '方法设置',
			        items: [
						
						{xtype:ReLoad,anchor: '100%'},
						{xtype:GetCol,anchor: '100%'}
					]
					},//事件设置
			        {xtype: 'form',id: 'formtest_Event',autoScroll: true,bodyPadding: 10,collapsed: true, title: '事件设置',
			        items: [
			           
					]}
				]}
			]
	    });
				
	
	});
   
    </script>

</head>
<body>
</body>
</html>
