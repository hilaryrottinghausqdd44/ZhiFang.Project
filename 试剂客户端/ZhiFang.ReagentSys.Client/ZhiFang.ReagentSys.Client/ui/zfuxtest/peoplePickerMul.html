<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
 <title>部门人员选择器组件多个人员选择'</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <link rel="stylesheet" type="text/css" href="../extjs/resources/css/ext-all.css"/>    
    <script type="text/javascript" src="../extjs/bootstrap.js" charset="utf-8"></script>
    <script type="text/javascript" src="../extjs/locale/ext-lang-zh_CN.js" charset="utf-8"></script>
	 <link rel="stylesheet" type="text/css" href="../css/icon.css"/> 
    <script type="text/javascript" src="../util/util.js"></script>
	
 <script src="../zhifangux/PeoplePicker.js" type="text/javascript"></script>
<script language="javascript" type="text/javascript">
Ext.onReady(function(){
 //一 生成组件
var vartestobj=Ext.create('Ext.zhifangux.PeoplePicker', {
    title: '',//标题
	id:'vartestobj_id',
	titleAlign :"center",
	 bodyCls:'bg-white',//控件主体背景样式,默认值'bg-white',为"css/icon.css"里的.bg-white
    cls:'bg-white',//控件样式设置,默认值'bg-white',为"css/icon.css"里的.bg-white
	autoScroll : true,
	height:520,        //容器高度像素
    width:580,       //容器宽度像素
	multiSelect:true,//单选或多选开关; false:单选,true:多选
	simpleSelect:true,//单选或多选开关;false:单选,true:多选,必须要设置该值,单选或多选才生效
	//margin :  '11 10 10 10',
	DataServerUrl: 'server/PeoplePicker.json', //人员后台查询服务地址
	DeptDataServerUrl:'server/PeoplePicker2.json', //部门后台服务地址
	//SaveServerUrl:  'server/SortList.json', //后台服务地址//后台保存服务地址
	 DeptId:'DeptpId',      //人员部门Id
    DeptpName:'DeptpName',   //人员部门名称
	    ValueField:[
        { text: '部门Id',dataIndex: 'DeptpId',hidden:true},
        { text: '所属部门',dataIndex: 'DeptpName'},
		 { text: '帐号',  dataIndex: 'userId'},
        { text: '姓名',  dataIndex: 'name'},
        { text: 'Email', dataIndex: 'email'},
        { text: '联系电话', dataIndex: 'phone'}
        ],//人员部门数据列表值字段,可以是外面做好数据适配后传进来
		 DeptValueField:[
        { text: 'DeptpId',  dataIndex: 'DeptpId'},
        { text: 'DeptpName',dataIndex: 'DeptpName'}
        ],//部门数据列表值字段,可以是外面做好数据适配后传进来
        
		UserRoot:'ResultDataValue',//部门人员获取/读取后台数据时的根节点
		DeptRoot:'ResultDataValue',//部门获取/读取后台数据时的根节点
		listeners:{
				//公开的事件
				onOKCilck:function(o){
				//获取设置当前控件的文字属性结果值
				var mytest=Ext.getCmp("vartestobj_id");
					alert(Ext.encode(mytest.getAllValue()));
				}
			}
	});
	
	
		//属性设置:设置标题
		var buttonmytitle=Ext.create('Ext.Button', {
		text: '设置标题',
		width:60,
		border : true,//边框线显示 true,或隐藏false
		handler: function() {
		var mytest=Ext.getCmp("vartestobj_id");
		var mytitle=Ext.getCmp("my_title").getValue();
		mytest.border=false; 
		 mytest.setTitle(mytitle); 
    }
});

 
  //属性设置:标题
	var mysetTitle=Ext.create('Ext.toolbar.Toolbar', {
    width   : 260,
	height:25,
	bodyCls:'bg-white',//控件主体背景样式,默认值'bg-white',为"css/icon.css"里的.bg-white
	cls:'bg-white',//控件样式设置,默认值'bg-white',为"css/icon.css"里的.bg-white
	border : 0,//边框线显示 true,或隐藏false
    items: [
        {
            xtype    : 'textfield',
            name     : 'field1',
			id:"my_title",
            emptyText: '请输入标题'
        },
		 {
              xtype: buttonmytitle,
        }
    ]
	});	
	
	  //属性设置:设置组件宽度
	var mysetWidth =Ext.create('Ext.toolbar.Toolbar', {
    width   : 260,
	height:25,
	bodyCls:'bg-white',//控件主体背景样式,默认值'bg-white',为"css/icon.css"里的.bg-white
	cls:'bg-white',//控件样式设置,默认值'bg-white',为"css/icon.css"里的.bg-white
	border : 0,//边框线显示 true,或隐藏false
    items: [
        {
            xtype    : 'textfield',
			id:"my_setWidth",
            emptyText: '设置组件宽度'
        },
		 {
       xtype: 'button',
	   text: '设置组件宽度',

		border : true,//边框线显示 true,或隐藏false
		handler: function() {
		var mytest=Ext.getCmp("vartestobj_id");
		var setWidth=Ext.getCmp("my_setWidth").getValue();
		 mytest.width=parseInt(setWidth);
		 mytest.insert();
			}
        }
    ]
	});	
	
	 //属性设置:设置组件高度
	var mysetHeight =Ext.create('Ext.toolbar.Toolbar', {
    width   : 260,
	height:25,
	bodyCls:'bg-white',//控件主体背景样式,默认值'bg-white',为"css/icon.css"里的.bg-white
	cls:'bg-white',//控件样式设置,默认值'bg-white',为"css/icon.css"里的.bg-white
	border : 0,//边框线显示 true,或隐藏false
    items: [
        {
            xtype    : 'textfield',
			id:"my_setHeight",
            emptyText: '设置组件高度'
        },
		 {
       xtype: 'button',
	   text: '设置组件高度',

		border : true,//边框线显示 true,或隐藏false
		handler: function() {
		var mytest=Ext.getCmp("vartestobj_id");
		var setHeight=Ext.getCmp("my_setHeight").getValue();
		 mytest.height=parseInt(setHeight);
		 mytest.insert();
			}
        }
    ]
	});	
	
	
		//方法设置:设置组件标题
	var mysetTitleM =Ext.create('Ext.toolbar.Toolbar', {
    width   : 260,
	height:25,
	bodyCls:'bg-white',//控件主体背景样式,默认值'bg-white',为"css/icon.css"里的.bg-white
	cls:'bg-white',//控件样式设置,默认值'bg-white',为"css/icon.css"里的.bg-white
	border : 0,//边框线显示 true,或隐藏false
    items: [
        {
            xtype    : 'textfield',
			id:"my_setTitleM",
            emptyText: '设置组件标题'
        },
		 {
       xtype: 'button',
	   text: '设置组件标题',

		border : true,//边框线显示 true,或隐藏false
		handler: function() {
		var mytest=Ext.getCmp("vartestobj_id");
		var setTitle =Ext.getCmp("my_setTitleM").getValue();
		 mytest.setTitle(parseInt(setTitle ));
			}
        }
    ]
	});	
	
	
	
	//方法设置:设置组件宽度
	var mysetWidthM =Ext.create('Ext.toolbar.Toolbar', {
    width   : 260,
	height:25,
	bodyCls:'bg-white',//控件主体背景样式,默认值'bg-white',为"css/icon.css"里的.bg-white
	cls:'bg-white',//控件样式设置,默认值'bg-white',为"css/icon.css"里的.bg-white
	border : 0,//边框线显示 true,或隐藏false
    items: [
        {
            xtype    : 'textfield',
			id:"my_setWidthM",
            emptyText: '设置组件宽度'
        },
		 {
       xtype: 'button',
	   text: '设置组件宽度',

		border : true,//边框线显示 true,或隐藏false
		handler: function() {
		var mytest=Ext.getCmp("vartestobj_id");
		var setWidth=Ext.getCmp("my_setWidthM").getValue();
		 mytest.setWidth(parseInt(setWidth));
		 //mytest.insert();
			}
        }
    ]
	});	
	
	//方法设置:设置组件高度
	var mysetHeightM =Ext.create('Ext.toolbar.Toolbar', {
    width   : 260,
	height:25,
	bodyCls:'bg-white',//控件主体背景样式,默认值'bg-white',为"css/icon.css"里的.bg-white
	cls:'bg-white',//控件样式设置,默认值'bg-white',为"css/icon.css"里的.bg-white
	border : 0,//边框线显示 true,或隐藏false
    items: [
        {
            xtype    : 'textfield',
			id:"my_setHeightM",
            emptyText: '设置组件高度'
        },
		 {
       xtype: 'button',
	   text: '设置组件高度',

		border : true,//边框线显示 true,或隐藏false
		handler: function() {
		var mytest=Ext.getCmp("vartestobj_id");
		var setHeight=Ext.getCmp("my_setHeightM").getValue();
		 mytest.setHeight(parseInt(setHeight));
		 //mytest.insert();
			}
        }
    ]
	});	
	
			//方法设置:返回组件结果值
	var mygetValueM =Ext.create('Ext.toolbar.Toolbar', {
    width   : 260,
	height:25,
	bodyCls:'bg-white',//控件主体背景样式,默认值'bg-white',为"css/icon.css"里的.bg-white
	cls:'bg-white',//控件样式设置,默认值'bg-white',为"css/icon.css"里的.bg-white
	border : 0,//边框线显示 true,或隐藏false
    items: [
        
		 {
       xtype: 'button',
	   text: '返回组件结果值',
		border : true,//边框线显示 true,或隐藏false
		handler: function() {
		var mytest=Ext.getCmp("vartestobj_id");
		 var values=mytest.getValue();
		 alert(values);
			}
        }
    ]
	});	
	
		//三:呈现视图
		var viewport=Ext.create("Ext.container.Viewport",{
				layout:  'border',//Border布局
				bodyCls:'bg-white',//控件主体背景样式,默认值'bg-white',为"css/icon.css"里的.bg-white
				cls:'bg-white',//控件样式设置,默认值'bg-white',为"css/icon.css"里的.bg-white
				border : false,//边框线显示 true,或隐藏false
		        items: [
				{
		        	region: 'center',
					border : false,//边框线显示 true,或隐藏false
					   items:[
					   {
					 xtype:vartestobj
					}]
		        },
				
				//east
					{
					region: 'east',
					layout: 'accordion',
			         frame: true,
					collapsible: true,
					split: true,
					width: 280,
					border : true,//边框线显示 true,或隐藏false
					
		            items:[
					//eastitems
					{
		xtype: 'form',
		id: 'formtest_Property',
		autoScroll: true,
        bodyPadding: 10,
        collapsed: true,
		layout: 'column',
        title: '属性设置',
        items: [
		  {
				xtype: mysetTitle,
				anchor: '100%'
				},
                {
				xtype:mysetHeight,
				anchor: '100%'
				},
				{
				xtype:mysetWidth,
				anchor: '100%'
				}
                 
				]
				//eastitems-end
				},
				//方法设置
				{
		xtype: 'form',
		id: 'formtest_Method',
		autoScroll: true,
        bodyPadding: 10,
        collapsed: true,
        title: '方法设置',
        items: [
				  {
				xtype: mysetTitleM,
				anchor: '100%'
				},
                {
				xtype:mysetHeightM,
				anchor: '100%'
				},
				{
				xtype:mysetWidthM,
				anchor: '100%'
				},
				{
				xtype:mygetValueM,
				anchor: '100%'
				}
				]
				//eastitems-end
				},//方法设置-end
				
				//事件设置
				{
		xtype: 'form',
		id: 'formtest_Event',
		autoScroll: true,
        bodyPadding: 10,
        collapsed: true,
        title: '事件设置',
        items: [
              {
            xtype: 'textfield',fieldLabel: '标题ID',name: 'Form_Id',
            labelWidth: 55,anchor: '100%',value:"333"+Ext.id()
				},
                {
            xtype: 'textfield',fieldLabel: '标题名称',name: 'Title2',
            labelWidth: 55,anchor: '100%',value: '表单'
				}
				]
				//eastitems-end
				}
				//事件设置-end
				]
				//east-end
				}

				]});
				
});
		
		
    </script>

	</head>
<body >

</body>
</html>