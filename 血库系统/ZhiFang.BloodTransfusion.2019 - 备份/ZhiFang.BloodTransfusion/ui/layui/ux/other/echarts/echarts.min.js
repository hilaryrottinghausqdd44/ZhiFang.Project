(function(t,e){typeof exports==="object"&&typeof module!=="undefined"?e(exports):typeof define==="function"&&define.amd?define(["exports"],e):window.layui&&layui.define?layui.define(function(t){t("echarts",e(t))}):e(t.echarts={})})(this,function(t){"use strict";var e;if(typeof window!=="undefined"){e=window.__DEV__}else if(typeof global!=="undefined"){e=global.__DEV__}if(typeof e==="undefined"){e=true}var D=e;var r=2311;var i=function(){return r++};var a={};if(typeof wx==="object"&&typeof wx.getSystemInfoSync==="function"){a={browser:{},os:{},node:false,wxa:true,canvasSupported:true,svgSupported:false,touchEventsSupported:true,domSupported:false}}else if(typeof document==="undefined"&&typeof self!=="undefined"){a={browser:{},os:{},node:false,worker:true,canvasSupported:true,domSupported:false}}else if(typeof navigator==="undefined"){a={browser:{},os:{},node:true,worker:false,canvasSupported:true,svgSupported:true,domSupported:false}}else{a=n(navigator.userAgent)}var y=a;function n(t){var e={};var r={};var i=t.match(/Firefox\/([\d.]+)/);var a=t.match(/MSIE\s([\d.]+)/)||t.match(/Trident\/.+?rv:(([\d.]+))/);var n=t.match(/Edge\/([\d.]+)/);var o=/micromessenger/i.test(t);if(i){r.firefox=true;r.version=i[1]}if(a){r.ie=true;r.version=a[1]}if(n){r.edge=true;r.version=n[1]}if(o){r.weChat=true}return{browser:r,os:e,node:false,canvasSupported:!!document.createElement("canvas").getContext,svgSupported:typeof SVGRect!=="undefined",touchEventsSupported:"ontouchstart"in window&&!r.ie&&!r.edge,pointerEventsSupported:"onpointerdown"in window&&(r.edge||r.ie&&r.version>=11),domSupported:typeof document!=="undefined"}}var s={"[object Function]":1,"[object RegExp]":1,"[object Date]":1,"[object Error]":1,"[object CanvasGradient]":1,"[object CanvasPattern]":1,"[object Image]":1,"[object Canvas]":1};var l={"[object Int8Array]":1,"[object Uint8Array]":1,"[object Uint8ClampedArray]":1,"[object Int16Array]":1,"[object Uint16Array]":1,"[object Int32Array]":1,"[object Uint32Array]":1,"[object Float32Array]":1,"[object Float64Array]":1};var u=Object.prototype.toString;var o=Array.prototype;var h=o.forEach;var f=o.filter;var c=o.slice;var v=o.map;var d=o.reduce;var p={};function g(t,e){if(t==="createCanvas"){w=null}p[t]=e}function P(t){if(t==null||typeof t!=="object"){return t}var e=t;var r=u.call(t);if(r==="[object Array]"){if(!et(t)){e=[];for(var i=0,a=t.length;i<a;i++){e[i]=P(t[i])}}}else if(l[r]){if(!et(t)){var n=t.constructor;if(t.constructor.from){e=n.from(t)}else{e=new n(t.length);for(var i=0,a=t.length;i<a;i++){e[i]=P(t[i])}}}}else if(!s[r]&&!et(t)&&!Z(t)){e={};for(var o in t){if(t.hasOwnProperty(o)){e[o]=P(t[o])}}}return e}function m(t,e,r){if(!F(e)||!F(t)){return r?P(e):t}for(var i in e){if(e.hasOwnProperty(i)){var a=t[i];var n=e[i];if(F(n)&&F(a)&&!B(n)&&!B(a)&&!Z(n)&&!Z(a)&&!W(n)&&!W(a)&&!et(n)&&!et(a)){m(a,n,r)}else if(r||!(i in t)){t[i]=P(e[i],true)}}}return t}function x(t,e){var r=t[0];for(var i=1,a=t.length;i<a;i++){r=m(r,t[i],e)}return r}function N(t,e){for(var r in e){if(e.hasOwnProperty(r)){t[r]=e[r]}}return t}function C(t,e,r){for(var i in e){if(e.hasOwnProperty(i)&&(r?e[i]!=null:t[i]==null)){t[i]=e[i]}}return t}var _=function(){return p.createCanvas()};p.createCanvas=function(){return document.createElement("canvas")};var w;function b(){if(!w){w=_().getContext("2d")}return w}function S(t,e){if(t){if(t.indexOf){return t.indexOf(e)}for(var r=0,i=t.length;r<i;r++){if(t[r]===e){return r}}}return-1}function M(t,e){var r=t.prototype;function i(){}i.prototype=e.prototype;t.prototype=new i;for(var a in r){t.prototype[a]=r[a]}t.prototype.constructor=t;t.superClass=e}function I(t,e,r){t="prototype"in t?t.prototype:t;e="prototype"in e?e.prototype:e;C(t,e,r)}function E(t){if(!t){return}if(typeof t==="string"){return false}return typeof t.length==="number"}function L(t,e,r){if(!(t&&e)){return}if(t.forEach&&t.forEach===h){t.forEach(e,r)}else if(t.length===+t.length){for(var i=0,a=t.length;i<a;i++){e.call(r,t[i],i,t)}}else{for(var n in t){if(t.hasOwnProperty(n)){e.call(r,t[n],n,t)}}}}function A(t,e,r){if(!(t&&e)){return}if(t.map&&t.map===v){return t.map(e,r)}else{var i=[];for(var a=0,n=t.length;a<n;a++){i.push(e.call(r,t[a],a,t))}return i}}function T(t,e,r,i){if(!(t&&e)){return}if(t.reduce&&t.reduce===d){return t.reduce(e,r,i)}else{for(var a=0,n=t.length;a<n;a++){r=e.call(i,r,t[a],a,t)}return r}}function O(t,e,r){if(!(t&&e)){return}if(t.filter&&t.filter===f){return t.filter(e,r)}else{var i=[];for(var a=0,n=t.length;a<n;a++){if(e.call(r,t[a],a,t)){i.push(t[a])}}return i}}function k(t,e,r){if(!(t&&e)){return}for(var i=0,a=t.length;i<a;i++){if(e.call(r,t[i],i,t)){return t[i]}}}function R(t,e){var r=c.call(arguments,2);return function(){return t.apply(e,r.concat(c.call(arguments)))}}function z(t){var e=c.call(arguments,1);return function(){return t.apply(this,e.concat(c.call(arguments)))}}function B(t){return u.call(t)==="[object Array]"}function V(t){return typeof t==="function"}function G(t){return u.call(t)==="[object String]"}function F(t){var e=typeof t;return e==="function"||!!t&&e==="object"}function W(t){return!!s[u.call(t)]}function H(t){return!!l[u.call(t)]}function Z(t){return typeof t==="object"&&typeof t.nodeType==="number"&&typeof t.ownerDocument==="object"}function U(t){return t!==t}function X(t){for(var e=0,r=arguments.length;e<r;e++){if(arguments[e]!=null){return arguments[e]}}}function Y(t,e){return t!=null?t:e}function j(t,e,r){return t!=null?t:e!=null?e:r}function q(){return Function.call.apply(c,arguments)}function K(t){if(typeof t==="number"){return[t,t,t,t]}var e=t.length;if(e===2){return[t[0],t[1],t[0],t[1]]}else if(e===3){return[t[0],t[1],t[2],t[1]]}return t}function $(t,e){if(!t){throw new Error(e)}}function J(t){if(t==null){return null}else if(typeof t.trim==="function"){return t.trim()}else{return t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}}var Q="__ec_primitive__";function tt(t){t[Q]=true}function et(t){return t[Q]}function rt(t){var r=B(t);this.data={};var i=this;t instanceof rt?t.each(e):t&&L(t,e);function e(t,e){r?i.set(t,e):i.set(e,t)}}rt.prototype={constructor:rt,get:function(t){return this.data.hasOwnProperty(t)?this.data[t]:null},set:function(t,e){return this.data[t]=e},each:function(t,e){e!==void 0&&(t=R(t,e));for(var r in this.data){this.data.hasOwnProperty(r)&&t(this.data[r],r)}},removeKey:function(t){delete this.data[t]}};function it(t){return new rt(t)}function at(t,e){var r=new t.constructor(t.length+e.length);for(var i=0;i<t.length;i++){r[i]=t[i]}var a=t.length;for(i=0;i<e.length;i++){r[i+a]=e[i]}return r}function nt(){}var ot=(Object.freeze||Object)({$override:g,clone:P,merge:m,mergeAll:x,extend:N,defaults:C,createCanvas:_,getContext:b,indexOf:S,inherits:M,mixin:I,isArrayLike:E,each:L,map:A,reduce:T,filter:O,find:k,bind:R,curry:z,isArray:B,isFunction:V,isString:G,isObject:F,isBuiltInObject:W,isTypedArray:H,isDom:Z,eqNaN:U,retrieve:X,retrieve2:Y,retrieve3:j,slice:q,normalizeCssArray:K,assert:$,trim:J,setAsPrimitive:tt,isPrimitive:et,createHashMap:it,concatArray:at,noop:nt});var st=typeof Float32Array==="undefined"?Array:Float32Array;function lt(t,e){var r=new st(2);if(t==null){t=0}if(e==null){e=0}r[0]=t;r[1]=e;return r}function ut(t,e){t[0]=e[0];t[1]=e[1];return t}function ht(t){var e=new st(2);e[0]=t[0];e[1]=t[1];return e}function ft(t,e,r){t[0]=e;t[1]=r;return t}function ct(t,e,r){t[0]=e[0]+r[0];t[1]=e[1]+r[1];return t}function vt(t,e,r,i){t[0]=e[0]+r[0]*i;t[1]=e[1]+r[1]*i;return t}function dt(t,e,r){t[0]=e[0]-r[0];t[1]=e[1]-r[1];return t}function pt(t){return Math.sqrt(mt(t))}var gt=pt;function mt(t){return t[0]*t[0]+t[1]*t[1]}var yt=mt;function xt(t,e,r){t[0]=e[0]*r[0];t[1]=e[1]*r[1];return t}function _t(t,e,r){t[0]=e[0]/r[0];t[1]=e[1]/r[1];return t}function wt(t,e){return t[0]*e[0]+t[1]*e[1]}function bt(t,e,r){t[0]=e[0]*r;t[1]=e[1]*r;return t}function St(t,e){var r=pt(e);if(r===0){t[0]=0;t[1]=0}else{t[0]=e[0]/r;t[1]=e[1]/r}return t}function Mt(t,e){return Math.sqrt((t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1]))}var It=Mt;function Tt(t,e){return(t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1])}var At=Tt;function Dt(t,e){t[0]=-e[0];t[1]=-e[1];return t}function Ct(t,e,r,i){t[0]=e[0]+i*(r[0]-e[0]);t[1]=e[1]+i*(r[1]-e[1]);return t}function Lt(t,e,r){var i=e[0];var a=e[1];t[0]=r[0]*i+r[2]*a+r[4];t[1]=r[1]*i+r[3]*a+r[5];return t}function kt(t,e,r){t[0]=Math.min(e[0],r[0]);t[1]=Math.min(e[1],r[1]);return t}function Pt(t,e,r){t[0]=Math.max(e[0],r[0]);t[1]=Math.max(e[1],r[1]);return t}var Nt=(Object.freeze||Object)({create:lt,copy:ut,clone:ht,set:ft,add:ct,scaleAndAdd:vt,sub:dt,len:pt,length:gt,lenSquare:mt,lengthSquare:yt,mul:xt,div:_t,dot:wt,scale:bt,normalize:St,distance:Mt,dist:It,distanceSquare:Tt,distSquare:At,negate:Dt,lerp:Ct,applyTransform:Lt,min:kt,max:Pt});function Ot(){this.on("mousedown",this._dragStart,this);this.on("mousemove",this._drag,this);this.on("mouseup",this._dragEnd,this);this.on("globalout",this._dragEnd,this)}Ot.prototype={constructor:Ot,_dragStart:function(t){var e=t.target;if(e&&e.draggable){this._draggingTarget=e;e.dragging=true;this._x=t.offsetX;this._y=t.offsetY;this.dispatchToElement(Et(e,t),"dragstart",t.event)}},_drag:function(t){var e=this._draggingTarget;if(e){var r=t.offsetX;var i=t.offsetY;var a=r-this._x;var n=i-this._y;this._x=r;this._y=i;e.drift(a,n,t);this.dispatchToElement(Et(e,t),"drag",t.event);var o=this.findHover(r,i,e).target;var s=this._dropTarget;this._dropTarget=o;if(e!==o){if(s&&o!==s){this.dispatchToElement(Et(s,t),"dragleave",t.event)}if(o&&o!==s){this.dispatchToElement(Et(o,t),"dragenter",t.event)}}}},_dragEnd:function(t){var e=this._draggingTarget;if(e){e.dragging=false}this.dispatchToElement(Et(e,t),"dragend",t.event);if(this._dropTarget){this.dispatchToElement(Et(this._dropTarget,t),"drop",t.event)}this._draggingTarget=null;this._dropTarget=null}};function Et(t,e){return{target:t,topTarget:e&&e.topTarget}}var Rt=Array.prototype.slice;var zt=function(t){this._$handlers={};this._$eventProcessor=t};zt.prototype={constructor:zt,one:function(t,e,r,i){return Vt(this,t,e,r,i,true)},on:function(t,e,r,i){return Vt(this,t,e,r,i,false)},isSilent:function(t){var e=this._$handlers;return!e[t]||!e[t].length},off:function(t,e){var r=this._$handlers;if(!t){this._$handlers={};return this}if(e){if(r[t]){var i=[];for(var a=0,n=r[t].length;a<n;a++){if(r[t][a].h!==e){i.push(r[t][a])}}r[t]=i}if(r[t]&&r[t].length===0){delete r[t]}}else{delete r[t]}return this},trigger:function(t){var e=this._$handlers[t];var r=this._$eventProcessor;if(e){var i=arguments;var a=i.length;if(a>3){i=Rt.call(i,1)}var n=e.length;for(var o=0;o<n;){var s=e[o];if(r&&r.filter&&s.query!=null&&!r.filter(t,s.query)){o++;continue}switch(a){case 1:s.h.call(s.ctx);break;case 2:s.h.call(s.ctx,i[1]);break;case 3:s.h.call(s.ctx,i[1],i[2]);break;default:s.h.apply(s.ctx,i);break}if(s.one){e.splice(o,1);n--}else{o++}}}r&&r.afterTrigger&&r.afterTrigger(t);return this},triggerWithContext:function(t){var e=this._$handlers[t];var r=this._$eventProcessor;if(e){var i=arguments;var a=i.length;if(a>4){i=Rt.call(i,1,i.length-1)}var n=i[i.length-1];var o=e.length;for(var s=0;s<o;){var l=e[s];if(r&&r.filter&&l.query!=null&&!r.filter(t,l.query)){s++;continue}switch(a){case 1:l.h.call(n);break;case 2:l.h.call(n,i[1]);break;case 3:l.h.call(n,i[1],i[2]);break;default:l.h.apply(n,i);break}if(l.one){e.splice(s,1);o--}else{s++}}}r&&r.afterTrigger&&r.afterTrigger(t);return this}};function Bt(t,e){var r=t._$eventProcessor;if(e!=null&&r&&r.normalizeQuery){e=r.normalizeQuery(e)}return e}function Vt(t,e,r,i,a,n){var o=t._$handlers;if(typeof r==="function"){a=i;i=r;r=null}if(!i||!e){return t}r=Bt(t,r);if(!o[e]){o[e]=[]}for(var s=0;s<o[e].length;s++){if(o[e][s].h===i){return t}}var l={h:i,one:n,query:r,ctx:a||t,callAtLast:i.zrEventfulCallAtLast};var u=o[e].length-1;var h=o[e][u];h&&h.callAtLast?o[e].splice(u,0,l):o[e].push(l);return t}var Gt=typeof window!=="undefined"&&!!window.addEventListener;var Ft=/^(?:mouse|pointer|contextmenu|drag|drop)|click/;function Wt(t){return t.getBoundingClientRect?t.getBoundingClientRect():{left:0,top:0}}function Ht(t,e,r,i){r=r||{};if(i||!y.canvasSupported){Zt(t,e,r)}else if(y.browser.firefox&&e.layerX!=null&&e.layerX!==e.offsetX){r.zrX=e.layerX;r.zrY=e.layerY}else if(e.offsetX!=null){r.zrX=e.offsetX;r.zrY=e.offsetY}else{Zt(t,e,r)}return r}function Zt(t,e,r){var i=Wt(t);r.zrX=e.clientX-i.left;r.zrY=e.clientY-i.top}function Ut(t,e,r){e=e||window.event;if(e.zrX!=null){return e}var i=e.type;var a=i&&i.indexOf("touch")>=0;if(!a){Ht(t,e,e,r);e.zrDelta=e.wheelDelta?e.wheelDelta/120:-(e.detail||0)/3}else{var n=i!=="touchend"?e.targetTouches[0]:e.changedTouches[0];n&&Ht(t,n,e,r)}var o=e.button;if(e.which==null&&o!==undefined&&Ft.test(e.type)){e.which=o&1?1:o&2?3:o&4?2:0}return e}function Xt(t,e,r){if(Gt){t.addEventListener(e,r)}else{t.attachEvent("on"+e,r)}}function Yt(t,e,r){if(Gt){t.removeEventListener(e,r)}else{t.detachEvent("on"+e,r)}}var jt=Gt?function(t){t.preventDefault();t.stopPropagation();t.cancelBubble=true}:function(t){t.returnValue=false;t.cancelBubble=true};function qt(t){return t.which===2||t.which===3}var Kt=function(){this._track=[]};Kt.prototype={constructor:Kt,recognize:function(t,e,r){this._doTrack(t,e,r);return this._recognize(t)},clear:function(){this._track.length=0;return this},_doTrack:function(t,e,r){var i=t.touches;if(!i){return}var a={points:[],touches:[],target:e,event:t};for(var n=0,o=i.length;n<o;n++){var s=i[n];var l=Ht(r,s,{});a.points.push([l.zrX,l.zrY]);a.touches.push(s)}this._track.push(a)},_recognize:function(t){for(var e in Qt){if(Qt.hasOwnProperty(e)){var r=Qt[e](this._track,t);if(r){return r}}}}};function $t(t){var e=t[1][0]-t[0][0];var r=t[1][1]-t[0][1];return Math.sqrt(e*e+r*r)}function Jt(t){return[(t[0][0]+t[1][0])/2,(t[0][1]+t[1][1])/2]}var Qt={pinch:function(t,e){var r=t.length;if(!r){return}var i=(t[r-1]||{}).points;var a=(t[r-2]||{}).points||i;if(a&&a.length>1&&i&&i.length>1){var n=$t(i)/$t(a);!isFinite(n)&&(n=1);e.pinchScale=n;var o=Jt(i);e.pinchX=o[0];e.pinchY=o[1];return{type:"pinch",target:t[0].target,event:e}}}};var te="silent";function ee(t,e,r){return{type:t,event:r,target:e.target,topTarget:e.topTarget,cancelBubble:false,offsetX:r.zrX,offsetY:r.zrY,gestureEvent:r.gestureEvent,pinchX:r.pinchX,pinchY:r.pinchY,pinchScale:r.pinchScale,wheelDelta:r.zrDelta,zrByTouch:r.zrByTouch,which:r.which,stop:re}}function re(t){jt(this.event)}function ie(){}ie.prototype.dispose=function(){};var ae=["click","dblclick","mousewheel","mouseout","mouseup","mousedown","mousemove","contextmenu"];var ne=function(t,e,r,i){zt.call(this);this.storage=t;this.painter=e;this.painterRoot=i;r=r||new ie;this.proxy=null;this._hovered={};this._lastTouchMoment;this._lastX;this._lastY;this._gestureMgr;Ot.call(this);this.setHandlerProxy(r)};ne.prototype={constructor:ne,setHandlerProxy:function(e){if(this.proxy){this.proxy.dispose()}if(e){L(ae,function(t){e.on&&e.on(t,this[t],this)},this);e.handler=this}this.proxy=e},mousemove:function(t){var e=t.zrX;var r=t.zrY;var i=this._hovered;var a=i.target;if(a&&!a.__zr){i=this.findHover(i.x,i.y);a=i.target}var n=this._hovered=this.findHover(e,r);var o=n.target;var s=this.proxy;s.setCursor&&s.setCursor(o?o.cursor:"default");if(a&&o!==a){this.dispatchToElement(i,"mouseout",t)}this.dispatchToElement(n,"mousemove",t);if(o&&o!==a){this.dispatchToElement(n,"mouseover",t)}},mouseout:function(t){this.dispatchToElement(this._hovered,"mouseout",t);var e=t.toElement||t.relatedTarget;var r;do{e=e&&e.parentNode}while(e&&e.nodeType!==9&&!(r=e===this.painterRoot));!r&&this.trigger("globalout",{event:t})},resize:function(t){this._hovered={}},dispatch:function(t,e){var r=this[t];r&&r.call(this,e)},dispose:function(){this.proxy.dispose();this.storage=this.proxy=this.painter=null},setCursorStyle:function(t){var e=this.proxy;e.setCursor&&e.setCursor(t)},dispatchToElement:function(t,e,r){t=t||{};var i=t.target;if(i&&i.silent){return}var a="on"+e;var n=ee(e,t,r);while(i){i[a]&&(n.cancelBubble=i[a].call(i,n));i.trigger(e,n);i=i.parent;if(n.cancelBubble){break}}if(!n.cancelBubble){this.trigger(e,n);this.painter&&this.painter.eachOtherLayer(function(t){if(typeof t[a]==="function"){t[a].call(t,n)}if(t.trigger){t.trigger(e,n)}})}},findHover:function(t,e,r){var i=this.storage.getDisplayList();var a={x:t,y:e};for(var n=i.length-1;n>=0;n--){var o;if(i[n]!==r&&!i[n].ignore&&(o=oe(i[n],t,e))){!a.topTarget&&(a.topTarget=i[n]);if(o!==te){a.target=i[n];break}}}return a},processGesture:function(t,e){if(!this._gestureMgr){this._gestureMgr=new Kt}var r=this._gestureMgr;e==="start"&&r.clear();var i=r.recognize(t,this.findHover(t.zrX,t.zrY,null).target,this.proxy.dom);e==="end"&&r.clear();if(i){var a=i.type;t.gestureEvent=a;this.dispatchToElement({target:i.target},a,i.event)}}};L(["click","mousedown","mouseup","mousewheel","dblclick","contextmenu"],function(i){ne.prototype[i]=function(t){var e=this.findHover(t.zrX,t.zrY);var r=e.target;if(i==="mousedown"){this._downEl=r;this._downPoint=[t.zrX,t.zrY];this._upEl=r}else if(i==="mouseup"){this._upEl=r}else if(i==="click"){if(this._downEl!==this._upEl||!this._downPoint||It(this._downPoint,[t.zrX,t.zrY])>4){return}this._downPoint=null}this.dispatchToElement(e,i,t)}});function oe(t,e,r){if(t[t.rectHover?"rectContain":"contain"](e,r)){var i=t;var a;while(i){if(i.clipPath&&!i.clipPath.contain(e,r)){return false}if(i.silent){a=true}i=i.parent}return a?te:true}return false}I(ne,zt);I(ne,Ot);var se=typeof Float32Array==="undefined"?Array:Float32Array;function le(){var t=new se(6);ue(t);return t}function ue(t){t[0]=1;t[1]=0;t[2]=0;t[3]=1;t[4]=0;t[5]=0;return t}function he(t,e){t[0]=e[0];t[1]=e[1];t[2]=e[2];t[3]=e[3];t[4]=e[4];t[5]=e[5];return t}function fe(t,e,r){var i=e[0]*r[0]+e[2]*r[1];var a=e[1]*r[0]+e[3]*r[1];var n=e[0]*r[2]+e[2]*r[3];var o=e[1]*r[2]+e[3]*r[3];var s=e[0]*r[4]+e[2]*r[5]+e[4];var l=e[1]*r[4]+e[3]*r[5]+e[5];t[0]=i;t[1]=a;t[2]=n;t[3]=o;t[4]=s;t[5]=l;return t}function ce(t,e,r){t[0]=e[0];t[1]=e[1];t[2]=e[2];t[3]=e[3];t[4]=e[4]+r[0];t[5]=e[5]+r[1];return t}function ve(t,e,r){var i=e[0];var a=e[2];var n=e[4];var o=e[1];var s=e[3];var l=e[5];var u=Math.sin(r);var h=Math.cos(r);t[0]=i*h+o*u;t[1]=-i*u+o*h;t[2]=a*h+s*u;t[3]=-a*u+h*s;t[4]=h*n+u*l;t[5]=h*l-u*n;return t}function de(t,e,r){var i=r[0];var a=r[1];t[0]=e[0]*i;t[1]=e[1]*a;t[2]=e[2]*i;t[3]=e[3]*a;t[4]=e[4]*i;t[5]=e[5]*a;return t}function pe(t,e){var r=e[0];var i=e[2];var a=e[4];var n=e[1];var o=e[3];var s=e[5];var l=r*o-n*i;if(!l){return null}l=1/l;t[0]=o*l;t[1]=-n*l;t[2]=-i*l;t[3]=r*l;t[4]=(i*s-o*a)*l;t[5]=(n*a-r*s)*l;return t}function ge(t){var e=le();he(e,t);return e}var me=(Object.freeze||Object)({create:le,identity:ue,copy:he,mul:fe,translate:ce,rotate:ve,scale:de,invert:pe,clone:ge});var ye=ue;var xe=5e-5;function _e(t){return t>xe||t<-xe}var we=function(t){t=t||{};if(!t.position){this.position=[0,0]}if(t.rotation==null){this.rotation=0}if(!t.scale){this.scale=[1,1]}this.origin=this.origin||null};var be=we.prototype;be.transform=null;be.needLocalTransform=function(){return _e(this.rotation)||_e(this.position[0])||_e(this.position[1])||_e(this.scale[0]-1)||_e(this.scale[1]-1)};var Se=[];be.updateTransform=function(){var t=this.parent;var e=t&&t.transform;var r=this.needLocalTransform();var i=this.transform;if(!(r||e)){i&&ye(i);return}i=i||le();if(r){this.getLocalTransform(i)}else{ye(i)}if(e){if(r){fe(i,t.transform,i)}else{he(i,t.transform)}}this.transform=i;var a=this.globalScaleRatio;if(a!=null&&a!==1){this.getGlobalScale(Se);var n=Se[0]<0?-1:1;var o=Se[1]<0?-1:1;var s=((Se[0]-n)*a+n)/Se[0]||0;var l=((Se[1]-o)*a+o)/Se[1]||0;i[0]*=s;i[1]*=s;i[2]*=l;i[3]*=l}this.invTransform=this.invTransform||le();pe(this.invTransform,i)};be.getLocalTransform=function(t){return we.getLocalTransform(this,t)};be.setTransform=function(t){var e=this.transform;var r=t.dpr||1;if(e){t.setTransform(r*e[0],r*e[1],r*e[2],r*e[3],r*e[4],r*e[5])}else{t.setTransform(r,0,0,r,0,0)}};be.restoreTransform=function(t){var e=t.dpr||1;t.setTransform(e,0,0,e,0,0)};var Me=[];var Ie=le();be.setLocalTransform=function(t){if(!t){return}var e=t[0]*t[0]+t[1]*t[1];var r=t[2]*t[2]+t[3]*t[3];var i=this.position;var a=this.scale;if(_e(e-1)){e=Math.sqrt(e)}if(_e(r-1)){r=Math.sqrt(r)}if(t[0]<0){e=-e}if(t[3]<0){r=-r}i[0]=t[4];i[1]=t[5];a[0]=e;a[1]=r;this.rotation=Math.atan2(-t[1]/r,t[0]/e)};be.decomposeTransform=function(){if(!this.transform){return}var t=this.parent;var e=this.transform;if(t&&t.transform){fe(Me,t.invTransform,e);e=Me}var r=this.origin;if(r&&(r[0]||r[1])){Ie[4]=r[0];Ie[5]=r[1];fe(Me,e,Ie);Me[4]-=r[0];Me[5]-=r[1];e=Me}this.setLocalTransform(e)};be.getGlobalScale=function(t){var e=this.transform;t=t||[];if(!e){t[0]=1;t[1]=1;return t}t[0]=Math.sqrt(e[0]*e[0]+e[1]*e[1]);t[1]=Math.sqrt(e[2]*e[2]+e[3]*e[3]);if(e[0]<0){t[0]=-t[0]}if(e[3]<0){t[1]=-t[1]}return t};be.transformCoordToLocal=function(t,e){var r=[t,e];var i=this.invTransform;if(i){Lt(r,r,i)}return r};be.transformCoordToGlobal=function(t,e){var r=[t,e];var i=this.transform;if(i){Lt(r,r,i)}return r};we.getLocalTransform=function(t,e){e=e||[];ye(e);var r=t.origin;var i=t.scale||[1,1];var a=t.rotation||0;var n=t.position||[0,0];if(r){e[4]-=r[0];e[5]-=r[1]}de(e,e,i);if(a){ve(e,e,a)}if(r){e[4]+=r[0];e[5]+=r[1]}e[4]+=n[0];e[5]+=n[1];return e};var Te={linear:function(t){return t},quadraticIn:function(t){return t*t},quadraticOut:function(t){return t*(2-t)},quadraticInOut:function(t){if((t*=2)<1){return.5*t*t}return-.5*(--t*(t-2)-1)},cubicIn:function(t){return t*t*t},cubicOut:function(t){return--t*t*t+1},cubicInOut:function(t){if((t*=2)<1){return.5*t*t*t}return.5*((t-=2)*t*t+2)},quarticIn:function(t){return t*t*t*t},quarticOut:function(t){return 1- --t*t*t*t},quarticInOut:function(t){if((t*=2)<1){return.5*t*t*t*t}return-.5*((t-=2)*t*t*t-2)},quinticIn:function(t){return t*t*t*t*t},quinticOut:function(t){return--t*t*t*t*t+1},quinticInOut:function(t){if((t*=2)<1){return.5*t*t*t*t*t}return.5*((t-=2)*t*t*t*t+2)},sinusoidalIn:function(t){return 1-Math.cos(t*Math.PI/2)},sinusoidalOut:function(t){return Math.sin(t*Math.PI/2)},sinusoidalInOut:function(t){return.5*(1-Math.cos(Math.PI*t))},exponentialIn:function(t){return t===0?0:Math.pow(1024,t-1)},exponentialOut:function(t){return t===1?1:1-Math.pow(2,-10*t)},exponentialInOut:function(t){if(t===0){return 0}if(t===1){return 1}if((t*=2)<1){return.5*Math.pow(1024,t-1)}return.5*(-Math.pow(2,-10*(t-1))+2)},circularIn:function(t){return 1-Math.sqrt(1-t*t)},circularOut:function(t){return Math.sqrt(1- --t*t)},circularInOut:function(t){if((t*=2)<1){return-.5*(Math.sqrt(1-t*t)-1)}return.5*(Math.sqrt(1-(t-=2)*t)+1)},elasticIn:function(t){var e;var r=.1;var i=.4;if(t===0){return 0}if(t===1){return 1}if(!r||r<1){r=1;e=i/4}else{e=i*Math.asin(1/r)/(2*Math.PI)}return-(r*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/i))},elasticOut:function(t){var e;var r=.1;var i=.4;if(t===0){return 0}if(t===1){return 1}if(!r||r<1){r=1;e=i/4}else{e=i*Math.asin(1/r)/(2*Math.PI)}return r*Math.pow(2,-10*t)*Math.sin((t-e)*(2*Math.PI)/i)+1},elasticInOut:function(t){var e;var r=.1;var i=.4;if(t===0){return 0}if(t===1){return 1}if(!r||r<1){r=1;e=i/4}else{e=i*Math.asin(1/r)/(2*Math.PI)}if((t*=2)<1){return-.5*(r*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/i))}return r*Math.pow(2,-10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/i)*.5+1},backIn:function(t){var e=1.70158;return t*t*((e+1)*t-e)},backOut:function(t){var e=1.70158;return--t*t*((e+1)*t+e)+1},backInOut:function(t){var e=1.70158*1.525;if((t*=2)<1){return.5*(t*t*((e+1)*t-e))}return.5*((t-=2)*t*((e+1)*t+e)+2)},bounceIn:function(t){return 1-Te.bounceOut(1-t)},bounceOut:function(t){if(t<1/2.75){return 7.5625*t*t}else if(t<2/2.75){return 7.5625*(t-=1.5/2.75)*t+.75}else if(t<2.5/2.75){return 7.5625*(t-=2.25/2.75)*t+.9375}else{return 7.5625*(t-=2.625/2.75)*t+.984375}},bounceInOut:function(t){if(t<.5){return Te.bounceIn(t*2)*.5}return Te.bounceOut(t*2-1)*.5+.5}};function Ae(t){this._target=t.target;this._life=t.life||1e3;this._delay=t.delay||0;this._initialized=false;this.loop=t.loop==null?false:t.loop;this.gap=t.gap||0;this.easing=t.easing||"Linear";this.onframe=t.onframe;this.ondestroy=t.ondestroy;this.onrestart=t.onrestart;this._pausedTime=0;this._paused=false}Ae.prototype={constructor:Ae,step:function(t,e){if(!this._initialized){this._startTime=t+this._delay;this._initialized=true}if(this._paused){this._pausedTime+=e;return}var r=(t-this._startTime-this._pausedTime)/this._life;if(r<0){return}r=Math.min(r,1);var i=this.easing;var a=typeof i==="string"?Te[i]:i;var n=typeof a==="function"?a(r):r;this.fire("frame",n);if(r===1){if(this.loop){this.restart(t);return"restart"}this._needsRemove=true;return"destroy"}return null},restart:function(t){var e=(t-this._startTime-this._pausedTime)%this._life;this._startTime=t-e+this.gap;this._pausedTime=0;this._needsRemove=false},fire:function(t,e){t="on"+t;if(this[t]){this[t](this._target,e)}},pause:function(){this._paused=true},resume:function(){this._paused=false}};var De=function(){this.head=null;this.tail=null;this._len=0};var Ce=De.prototype;Ce.insert=function(t){var e=new Le(t);this.insertEntry(e);return e};Ce.insertEntry=function(t){if(!this.head){this.head=this.tail=t}else{this.tail.next=t;t.prev=this.tail;t.next=null;this.tail=t}this._len++};Ce.remove=function(t){var e=t.prev;var r=t.next;if(e){e.next=r}else{this.head=r}if(r){r.prev=e}else{this.tail=e}t.next=t.prev=null;this._len--};Ce.len=function(){return this._len};Ce.clear=function(){this.head=this.tail=null;this._len=0};var Le=function(t){this.value=t;this.next;this.prev};var ke=function(t){this._list=new De;this._map={};this._maxSize=t||10;this._lastRemovedEntry=null};var Pe=ke.prototype;Pe.put=function(t,e){var r=this._list;var i=this._map;var a=null;if(i[t]==null){var n=r.len();var o=this._lastRemovedEntry;if(n>=this._maxSize&&n>0){var s=r.head;r.remove(s);delete i[s.key];a=s.value;this._lastRemovedEntry=s}if(o){o.value=e}else{o=new Le(e)}o.key=t;r.insertEntry(o);i[t]=o}return a};Pe.get=function(t){var e=this._map[t];var r=this._list;if(e!=null){if(e!==r.tail){r.remove(e);r.insertEntry(e)}return e.value}};Pe.clear=function(){this._list.clear();this._map={}};var Ne={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function Oe(t){t=Math.round(t);return t<0?0:t>255?255:t}function Ee(t){t=Math.round(t);return t<0?0:t>360?360:t}function Re(t){return t<0?0:t>1?1:t}function ze(t){if(t.length&&t.charAt(t.length-1)==="%"){return Oe(parseFloat(t)/100*255)}return Oe(parseInt(t,10))}function Be(t){if(t.length&&t.charAt(t.length-1)==="%"){return Re(parseFloat(t)/100)}return Re(parseFloat(t))}function Ve(t,e,r){if(r<0){r+=1}else if(r>1){r-=1}if(r*6<1){return t+(e-t)*r*6}if(r*2<1){return e}if(r*3<2){return t+(e-t)*(2/3-r)*6}return t}function Ge(t,e,r){return t+(e-t)*r}function Fe(t,e,r,i,a){t[0]=e;t[1]=r;t[2]=i;t[3]=a;return t}function We(t,e){t[0]=e[0];t[1]=e[1];t[2]=e[2];t[3]=e[3];return t}var He=new ke(20);var Ze=null;function Ue(t,e){if(Ze){We(Ze,e)}Ze=He.put(t,Ze||e.slice())}function Xe(t,e){if(!t){return}e=e||[];var r=He.get(t);if(r){return We(e,r)}t=t+"";var i=t.replace(/ /g,"").toLowerCase();if(i in Ne){We(e,Ne[i]);Ue(t,e);return e}if(i.charAt(0)==="#"){if(i.length===4){var a=parseInt(i.substr(1),16);if(!(a>=0&&a<=4095)){Fe(e,0,0,0,1);return}Fe(e,(a&3840)>>4|(a&3840)>>8,a&240|(a&240)>>4,a&15|(a&15)<<4,1);Ue(t,e);return e}else if(i.length===7){var a=parseInt(i.substr(1),16);if(!(a>=0&&a<=16777215)){Fe(e,0,0,0,1);return}Fe(e,(a&16711680)>>16,(a&65280)>>8,a&255,1);Ue(t,e);return e}return}var n=i.indexOf("(");var o=i.indexOf(")");if(n!==-1&&o+1===i.length){var s=i.substr(0,n);var l=i.substr(n+1,o-(n+1)).split(",");var u=1;switch(s){case"rgba":if(l.length!==4){Fe(e,0,0,0,1);return}u=Be(l.pop());case"rgb":if(l.length!==3){Fe(e,0,0,0,1);return}Fe(e,ze(l[0]),ze(l[1]),ze(l[2]),u);Ue(t,e);return e;case"hsla":if(l.length!==4){Fe(e,0,0,0,1);return}l[3]=Be(l[3]);Ye(l,e);Ue(t,e);return e;case"hsl":if(l.length!==3){Fe(e,0,0,0,1);return}Ye(l,e);Ue(t,e);return e;default:return}}Fe(e,0,0,0,1);return}function Ye(t,e){var r=(parseFloat(t[0])%360+360)%360/360;var i=Be(t[1]);var a=Be(t[2]);var n=a<=.5?a*(i+1):a+i-a*i;var o=a*2-n;e=e||[];Fe(e,Oe(Ve(o,n,r+1/3)*255),Oe(Ve(o,n,r)*255),Oe(Ve(o,n,r-1/3)*255),1);if(t.length===4){e[3]=t[3]}return e}function je(t){if(!t){return}var e=t[0]/255;var r=t[1]/255;var i=t[2]/255;var a=Math.min(e,r,i);var n=Math.max(e,r,i);var o=n-a;var s=(n+a)/2;var l;var u;if(o===0){l=0;u=0}else{if(s<.5){u=o/(n+a)}else{u=o/(2-n-a)}var h=((n-e)/6+o/2)/o;var f=((n-r)/6+o/2)/o;var c=((n-i)/6+o/2)/o;if(e===n){l=c-f}else if(r===n){l=1/3+h-c}else if(i===n){l=2/3+f-h}if(l<0){l+=1}if(l>1){l-=1}}var v=[l*360,u,s];if(t[3]!=null){v.push(t[3])}return v}function qe(t,e){var r=Xe(t);if(r){for(var i=0;i<3;i++){if(e<0){r[i]=r[i]*(1-e)|0}else{r[i]=(255-r[i])*e+r[i]|0}if(r[i]>255){r[i]=255}else if(t[i]<0){r[i]=0}}return ir(r,r.length===4?"rgba":"rgb")}}function Ke(t){var e=Xe(t);if(e){return((1<<24)+(e[0]<<16)+(e[1]<<8)+ +e[2]).toString(16).slice(1)}}function $e(t,e,r){if(!(e&&e.length)||!(t>=0&&t<=1)){return}r=r||[];var i=t*(e.length-1);var a=Math.floor(i);var n=Math.ceil(i);var o=e[a];var s=e[n];var l=i-a;r[0]=Oe(Ge(o[0],s[0],l));r[1]=Oe(Ge(o[1],s[1],l));r[2]=Oe(Ge(o[2],s[2],l));r[3]=Re(Ge(o[3],s[3],l));return r}var Je=$e;function Qe(t,e,r){if(!(e&&e.length)||!(t>=0&&t<=1)){return}var i=t*(e.length-1);var a=Math.floor(i);var n=Math.ceil(i);var o=Xe(e[a]);var s=Xe(e[n]);var l=i-a;var u=ir([Oe(Ge(o[0],s[0],l)),Oe(Ge(o[1],s[1],l)),Oe(Ge(o[2],s[2],l)),Re(Ge(o[3],s[3],l))],"rgba");return r?{color:u,leftIndex:a,rightIndex:n,value:i}:u}var tr=Qe;function er(t,e,r,i){t=Xe(t);if(t){t=je(t);e!=null&&(t[0]=Ee(e));r!=null&&(t[1]=Be(r));i!=null&&(t[2]=Be(i));return ir(Ye(t),"rgba")}}function rr(t,e){t=Xe(t);if(t&&e!=null){t[3]=Re(e);return ir(t,"rgba")}}function ir(t,e){if(!t||!t.length){return}var r=t[0]+","+t[1]+","+t[2];if(e==="rgba"||e==="hsva"||e==="hsla"){r+=","+t[3]}return e+"("+r+")"}var ar=(Object.freeze||Object)({parse:Xe,lift:qe,toHex:Ke,fastLerp:$e,fastMapToColor:Je,lerp:Qe,mapToColor:tr,modifyHSL:er,modifyAlpha:rr,stringify:ir});var nr=Array.prototype.slice;function or(t,e){return t[e]}function sr(t,e,r){t[e]=r}function lr(t,e,r){return(e-t)*r+t}function ur(t,e,r){return r>.5?e:t}function hr(t,e,r,i,a){var n=t.length;if(a===1){for(var o=0;o<n;o++){i[o]=lr(t[o],e[o],r)}}else{var s=n&&t[0].length;for(var o=0;o<n;o++){for(var l=0;l<s;l++){i[o][l]=lr(t[o][l],e[o][l],r)}}}}function fr(t,e,r){var i=t.length;var a=e.length;if(i!==a){var n=i>a;if(n){t.length=a}else{for(var o=i;o<a;o++){t.push(r===1?e[o]:nr.call(e[o]))}}}var s=t[0]&&t[0].length;for(var o=0;o<t.length;o++){if(r===1){if(isNaN(t[o])){t[o]=e[o]}}else{for(var l=0;l<s;l++){if(isNaN(t[o][l])){t[o][l]=e[o][l]}}}}}function cr(t,e,r){if(t===e){return true}var i=t.length;if(i!==e.length){return false}if(r===1){for(var a=0;a<i;a++){if(t[a]!==e[a]){return false}}}else{var n=t[0].length;for(var a=0;a<i;a++){for(var o=0;o<n;o++){if(t[a][o]!==e[a][o]){return false}}}}return true}function vr(t,e,r,i,a,n,o,s,l){var u=t.length;if(l===1){for(var h=0;h<u;h++){s[h]=dr(t[h],e[h],r[h],i[h],a,n,o)}}else{var f=t[0].length;for(var h=0;h<u;h++){for(var c=0;c<f;c++){s[h][c]=dr(t[h][c],e[h][c],r[h][c],i[h][c],a,n,o)}}}}function dr(t,e,r,i,a,n,o){var s=(r-t)*.5;var l=(i-e)*.5;return(2*(e-r)+s+l)*o+(-3*(e-r)-2*s-l)*n+s*a+e}function pr(t){if(E(t)){var e=t.length;if(E(t[0])){var r=[];for(var i=0;i<e;i++){r.push(nr.call(t[i]))}return r}return nr.call(t)}return t}function gr(t){t[0]=Math.floor(t[0]);t[1]=Math.floor(t[1]);t[2]=Math.floor(t[2]);return"rgba("+t.join(",")+")"}function mr(t){var e=t[t.length-1].value;return E(e&&e[0])?2:1}function yr(t,e,r,i,n,a){var o=t._getter;var s=t._setter;var l=e==="spline";var u=i.length;if(!u){return}var h=i[0].value;var f=E(h);var c=false;var v=false;var d=f?mr(i):0;var p;i.sort(function(t,e){return t.time-e.time});p=i[u-1].time;var g=[];var m=[];var y=i[0].value;var x=true;for(var _=0;_<u;_++){g.push(i[_].time/p);var w=i[_].value;if(!(f&&cr(w,y,d)||!f&&w===y)){x=false}y=w;if(typeof w==="string"){var b=Xe(w);if(b){w=b;c=true}else{v=true}}m.push(w)}if(!a&&x){return}var S=m[u-1];for(var _=0;_<u-1;_++){if(f){fr(m[_],S,d)}else{if(isNaN(m[_])&&!isNaN(S)&&!v&&!c){m[_]=S}}}f&&fr(o(t._target,n),S,d);var M=0;var I=0;var T;var A;var D;var C;var L;var k;if(c){var P=[0,0,0,0]}var N=function(t,e){var r;if(e<0){r=0}else if(e<I){T=Math.min(M+1,u-1);for(r=T;r>=0;r--){if(g[r]<=e){break}}r=Math.min(r,u-2)}else{for(r=M;r<u;r++){if(g[r]>e){break}}r=Math.min(r-1,u-2)}M=r;I=e;var i=g[r+1]-g[r];if(i===0){return}else{A=(e-g[r])/i}if(l){C=m[r];D=m[r===0?r:r-1];L=m[r>u-2?u-1:r+1];k=m[r>u-3?u-1:r+2];if(f){vr(D,C,L,k,A,A*A,A*A*A,o(t,n),d)}else{var a;if(c){a=vr(D,C,L,k,A,A*A,A*A*A,P,1);a=gr(P)}else if(v){return ur(C,L,A)}else{a=dr(D,C,L,k,A,A*A,A*A*A)}s(t,n,a)}}else{if(f){hr(m[r],m[r+1],A,o(t,n),d)}else{var a;if(c){hr(m[r],m[r+1],A,P,1);a=gr(P)}else if(v){return ur(m[r],m[r+1],A)}else{a=lr(m[r],m[r+1],A)}s(t,n,a)}}};var O=new Ae({target:t._target,life:p,loop:t._loop,delay:t._delay,onframe:N,ondestroy:r});if(e&&e!=="spline"){O.easing=e}return O}var xr=function(t,e,r,i){this._tracks={};this._target=t;this._loop=e||false;this._getter=r||or;this._setter=i||sr;this._clipCount=0;this._delay=0;this._doneList=[];this._onframeList=[];this._clipList=[]};xr.prototype={when:function(t,e){var r=this._tracks;for(var i in e){if(!e.hasOwnProperty(i)){continue}if(!r[i]){r[i]=[];var a=this._getter(this._target,i);if(a==null){continue}if(t!==0){r[i].push({time:0,value:pr(a)})}}r[i].push({time:t,value:e[i]})}return this},during:function(t){this._onframeList.push(t);return this},pause:function(){for(var t=0;t<this._clipList.length;t++){this._clipList[t].pause()}this._paused=true},resume:function(){for(var t=0;t<this._clipList.length;t++){this._clipList[t].resume()}this._paused=false},isPaused:function(){return!!this._paused},_doneCallback:function(){this._tracks={};this._clipList.length=0;var t=this._doneList;var e=t.length;for(var r=0;r<e;r++){t[r].call(this)}},start:function(t,e){var i=this;var r=0;var a=function(){r--;if(!r){i._doneCallback()}};var n;for(var o in this._tracks){if(!this._tracks.hasOwnProperty(o)){continue}var s=yr(this,t,a,this._tracks[o],o,e);if(s){this._clipList.push(s);r++;if(this.animation){this.animation.addClip(s)}n=s}}if(n){var l=n.onframe;n.onframe=function(t,e){l(t,e);for(var r=0;r<i._onframeList.length;r++){i._onframeList[r](t,e)}}}if(!r){this._doneCallback()}return this},stop:function(t){var e=this._clipList;var r=this.animation;for(var i=0;i<e.length;i++){var a=e[i];if(t){a.onframe(this._target,1)}r&&r.removeClip(a)}e.length=0},delay:function(t){this._delay=t;return this},done:function(t){if(t){this._doneList.push(t)}return this},getClips:function(){return this._clipList}};var _r=1;if(typeof window!=="undefined"){_r=Math.max(window.devicePixelRatio||1,1)}var wr=0;var br=_r;var Sr=function(){};if(wr===1){Sr=function(){for(var t in arguments){throw new Error(arguments[t])}}}else if(wr>1){Sr=function(){for(var t in arguments){console.log(arguments[t])}}}var Mr=Sr;var Ir=function(){this.animators=[]};Ir.prototype={constructor:Ir,animate:function(t,e){var r;var i=false;var a=this;var n=this.__zr;if(t){var o=t.split(".");var s=a;i=o[0]==="shape";for(var l=0,u=o.length;l<u;l++){if(!s){continue}s=s[o[l]]}if(s){r=s}}else{r=a}if(!r){Mr('Property "'+t+'" is not existed in element '+a.id);return}var h=a.animators;var f=new xr(r,e);f.during(function(t){a.dirty(i)}).done(function(){h.splice(S(h,f),1)});h.push(f);if(n){n.animation.addAnimator(f)}return f},stopAnimation:function(t){var e=this.animators;var r=e.length;for(var i=0;i<r;i++){e[i].stop(t)}e.length=0;return this},animateTo:function(t,e,r,i,a,n){Tr(this,t,e,r,i,a,n)},animateFrom:function(t,e,r,i,a,n){Tr(this,t,e,r,i,a,n,true)}};function Tr(t,e,r,i,a,n,o,s){if(G(i)){n=a;a=i;i=0}else if(V(a)){n=a;a="linear";i=0}else if(V(i)){n=i;i=0}else if(V(r)){n=r;r=500}else if(!r){r=500}t.stopAnimation();Ar(t,"",t,e,r,i,s);var l=t.animators.slice();var u=l.length;function h(){u--;if(!u){n&&n()}}if(!u){n&&n()}for(var f=0;f<l.length;f++){l[f].done(h).start(a,o)}}function Ar(t,e,r,i,a,n,o){var s={};var l=0;for(var u in i){if(!i.hasOwnProperty(u)){continue}if(r[u]!=null){if(F(i[u])&&!E(i[u])){Ar(t,e?e+"."+u:u,r[u],i[u],a,n,o)}else{if(o){s[u]=r[u];Dr(t,e,u,i[u])}else{s[u]=i[u]}l++}}else if(i[u]!=null&&!o){Dr(t,e,u,i[u])}}if(l>0){t.animate(e,false).when(a==null?500:a,s).delay(n||0)}}function Dr(t,e,r,i){if(!e){t.attr(r,i)}else{var a={};a[e]={};a[e][r]=i;t.attr(a)}}var Cr=function(t){we.call(this,t);zt.call(this,t);Ir.call(this,t);this.id=t.id||i()};Cr.prototype={type:"element",name:"",__zr:null,ignore:false,clipPath:null,isGroup:false,drift:function(t,e){switch(this.draggable){case"horizontal":e=0;break;case"vertical":t=0;break}var r=this.transform;if(!r){r=this.transform=[1,0,0,1,0,0]}r[4]+=t;r[5]+=e;this.decomposeTransform();this.dirty(false)},beforeUpdate:function(){},afterUpdate:function(){},update:function(){this.updateTransform()},traverse:function(t,e){},attrKV:function(t,e){if(t==="position"||t==="scale"||t==="origin"){if(e){var r=this[t];if(!r){r=this[t]=[]}r[0]=e[0];r[1]=e[1]}}else{this[t]=e}},hide:function(){this.ignore=true;this.__zr&&this.__zr.refresh()},show:function(){this.ignore=false;this.__zr&&this.__zr.refresh()},attr:function(t,e){if(typeof t==="string"){this.attrKV(t,e)}else if(F(t)){for(var r in t){if(t.hasOwnProperty(r)){this.attrKV(r,t[r])}}}this.dirty(false);return this},setClipPath:function(t){var e=this.__zr;if(e){t.addSelfToZr(e)}if(this.clipPath&&this.clipPath!==t){this.removeClipPath()}this.clipPath=t;t.__zr=e;t.__clipTarget=this;this.dirty(false)},removeClipPath:function(){var t=this.clipPath;if(t){if(t.__zr){t.removeSelfFromZr(t.__zr)}t.__zr=null;t.__clipTarget=null;this.clipPath=null;this.dirty(false)}},addSelfToZr:function(t){this.__zr=t;var e=this.animators;if(e){for(var r=0;r<e.length;r++){t.animation.addAnimator(e[r])}}if(this.clipPath){this.clipPath.addSelfToZr(t)}},removeSelfFromZr:function(t){this.__zr=null;var e=this.animators;if(e){for(var r=0;r<e.length;r++){t.animation.removeAnimator(e[r])}}if(this.clipPath){this.clipPath.removeSelfFromZr(t)}}};I(Cr,Ir);I(Cr,we);I(Cr,zt);var Lr=Lt;var kr=Math.min;var Pr=Math.max;function Nr(t,e,r,i){if(r<0){t=t+r;r=-r}if(i<0){e=e+i;i=-i}this.x=t;this.y=e;this.width=r;this.height=i}Nr.prototype={constructor:Nr,union:function(t){var e=kr(t.x,this.x);var r=kr(t.y,this.y);this.width=Pr(t.x+t.width,this.x+this.width)-e;this.height=Pr(t.y+t.height,this.y+this.height)-r;this.x=e;this.y=r},applyTransform:function(){var i=[];var a=[];var n=[];var o=[];return function(t){if(!t){return}i[0]=n[0]=this.x;i[1]=o[1]=this.y;a[0]=o[0]=this.x+this.width;a[1]=n[1]=this.y+this.height;Lr(i,i,t);Lr(a,a,t);Lr(n,n,t);Lr(o,o,t);this.x=kr(i[0],a[0],n[0],o[0]);this.y=kr(i[1],a[1],n[1],o[1]);var e=Pr(i[0],a[0],n[0],o[0]);var r=Pr(i[1],a[1],n[1],o[1]);this.width=e-this.x;this.height=r-this.y}}(),calculateTransform:function(t){var e=this;var r=t.width/e.width;var i=t.height/e.height;var a=le();ce(a,a,[-e.x,-e.y]);de(a,a,[r,i]);ce(a,a,[t.x,t.y]);return a},intersect:function(t){if(!t){return false}if(!(t instanceof Nr)){t=Nr.create(t)}var e=this;var r=e.x;var i=e.x+e.width;var a=e.y;var n=e.y+e.height;var o=t.x;var s=t.x+t.width;var l=t.y;var u=t.y+t.height;return!(i<o||s<r||n<l||u<a)},contain:function(t,e){var r=this;return t>=r.x&&t<=r.x+r.width&&e>=r.y&&e<=r.y+r.height},clone:function(){return new Nr(this.x,this.y,this.width,this.height)},copy:function(t){this.x=t.x;this.y=t.y;this.width=t.width;this.height=t.height},plain:function(){return{x:this.x,y:this.y,width:this.width,height:this.height}}};Nr.create=function(t){return new Nr(t.x,t.y,t.width,t.height)};var Or=function(t){t=t||{};Cr.call(this,t);for(var e in t){if(t.hasOwnProperty(e)){this[e]=t[e]}}this._children=[];this.__storage=null;this.__dirty=true};Or.prototype={constructor:Or,isGroup:true,type:"group",silent:false,children:function(){return this._children.slice()},childAt:function(t){return this._children[t]},childOfName:function(t){var e=this._children;for(var r=0;r<e.length;r++){if(e[r].name===t){return e[r]}}},childCount:function(){return this._children.length},add:function(t){if(t&&t!==this&&t.parent!==this){this._children.push(t);this._doAdd(t)}return this},addBefore:function(t,e){if(t&&t!==this&&t.parent!==this&&e&&e.parent===this){var r=this._children;var i=r.indexOf(e);if(i>=0){r.splice(i,0,t);this._doAdd(t)}}return this},_doAdd:function(t){if(t.parent){t.parent.remove(t)}t.parent=this;var e=this.__storage;var r=this.__zr;if(e&&e!==t.__storage){e.addToStorage(t);if(t instanceof Or){t.addChildrenToStorage(e)}}r&&r.refresh()},remove:function(t){var e=this.__zr;var r=this.__storage;var i=this._children;var a=S(i,t);if(a<0){return this}i.splice(a,1);t.parent=null;if(r){r.delFromStorage(t);if(t instanceof Or){t.delChildrenFromStorage(r)}}e&&e.refresh();return this},removeAll:function(){var t=this._children;var e=this.__storage;var r;var i;for(i=0;i<t.length;i++){r=t[i];if(e){e.delFromStorage(r);if(r instanceof Or){r.delChildrenFromStorage(e)}}r.parent=null}t.length=0;return this},eachChild:function(t,e){var r=this._children;for(var i=0;i<r.length;i++){var a=r[i];t.call(e,a,i)}return this},traverse:function(t,e){for(var r=0;r<this._children.length;r++){var i=this._children[r];t.call(e,i);if(i.type==="group"){i.traverse(t,e)}}return this},addChildrenToStorage:function(t){for(var e=0;e<this._children.length;e++){var r=this._children[e];t.addToStorage(r);if(r instanceof Or){r.addChildrenToStorage(t)}}},delChildrenFromStorage:function(t){for(var e=0;e<this._children.length;e++){var r=this._children[e];t.delFromStorage(r);if(r instanceof Or){r.delChildrenFromStorage(t)}}},dirty:function(){this.__dirty=true;this.__zr&&this.__zr.refresh();return this},getBoundingRect:function(t){var e=null;var r=new Nr(0,0,0,0);var i=t||this._children;var a=[];for(var n=0;n<i.length;n++){var o=i[n];if(o.ignore||o.invisible){continue}var s=o.getBoundingRect();var l=o.getLocalTransform(a);if(l){r.copy(s);r.applyTransform(l);e=e||r.clone();e.union(r)}else{e=e||s.clone();e.union(s)}}return e||r}};M(Or,Cr);var Er=32;var Rr=7;function zr(t){var e=0;while(t>=Er){e|=t&1;t>>=1}return t+e}function Br(t,e,r,i){var a=e+1;if(a===r){return 1}if(i(t[a++],t[e])<0){while(a<r&&i(t[a],t[a-1])<0){a++}Vr(t,e,a)}else{while(a<r&&i(t[a],t[a-1])>=0){a++}}return a-e}function Vr(t,e,r){r--;while(e<r){var i=t[e];t[e++]=t[r];t[r--]=i}}function Gr(t,e,r,i,a){if(i===e){i++}for(;i<r;i++){var n=t[i];var o=e;var s=i;var l;while(o<s){l=o+s>>>1;if(a(n,t[l])<0){s=l}else{o=l+1}}var u=i-o;switch(u){case 3:t[o+3]=t[o+2];case 2:t[o+2]=t[o+1];case 1:t[o+1]=t[o];break;default:while(u>0){t[o+u]=t[o+u-1];u--}}t[o]=n}}function Fr(t,e,r,i,a,n){var o=0;var s=0;var l=1;if(n(t,e[r+a])>0){s=i-a;while(l<s&&n(t,e[r+a+l])>0){o=l;l=(l<<1)+1;if(l<=0){l=s}}if(l>s){l=s}o+=a;l+=a}else{s=a+1;while(l<s&&n(t,e[r+a-l])<=0){o=l;l=(l<<1)+1;if(l<=0){l=s}}if(l>s){l=s}var u=o;o=a-l;l=a-u}o++;while(o<l){var h=o+(l-o>>>1);if(n(t,e[r+h])>0){o=h+1}else{l=h}}return l}function Wr(t,e,r,i,a,n){var o=0;var s=0;var l=1;if(n(t,e[r+a])<0){s=a+1;while(l<s&&n(t,e[r+a-l])<0){o=l;l=(l<<1)+1;if(l<=0){l=s}}if(l>s){l=s}var u=o;o=a-l;l=a-u}else{s=i-a;while(l<s&&n(t,e[r+a+l])>=0){o=l;l=(l<<1)+1;if(l<=0){l=s}}if(l>s){l=s}o+=a;l+=a}o++;while(o<l){var h=o+(l-o>>>1);if(n(t,e[r+h])<0){l=h}else{o=h+1}}return l}function Hr(d,p){var g=Rr;var o;var s;var l=0;var m=[];o=[];s=[];function t(t,e){o[l]=t;s[l]=e;l+=1}function e(){while(l>1){var t=l-2;if(t>=1&&s[t-1]<=s[t]+s[t+1]||t>=2&&s[t-2]<=s[t]+s[t-1]){if(s[t-1]<s[t+1]){t--}}else if(s[t]>s[t+1]){break}i(t)}}function r(){while(l>1){var t=l-2;if(t>0&&s[t-1]<s[t+1]){t--}i(t)}}function i(t){var e=o[t];var r=s[t];var i=o[t+1];var a=s[t+1];s[t]=r+a;if(t===l-3){o[t+1]=o[t+2];s[t+1]=s[t+2]}l--;var n=Wr(d[i],d,e,r,0,p);e+=n;r-=n;if(r===0){return}a=Fr(d[e+r-1],d,i,a,a-1,p);if(a===0){return}if(r<=a){u(e,r,i,a)}else{h(e,r,i,a)}}function u(t,e,r,i){var a=0;for(a=0;a<e;a++){m[a]=d[t+a]}var n=0;var o=r;var s=t;d[s++]=d[o++];if(--i===0){for(a=0;a<e;a++){d[s+a]=m[n+a]}return}if(e===1){for(a=0;a<i;a++){d[s+a]=d[o+a]}d[s+i]=m[n];return}var l=g;var u,h,f;while(1){u=0;h=0;f=false;do{if(p(d[o],m[n])<0){d[s++]=d[o++];h++;u=0;if(--i===0){f=true;break}}else{d[s++]=m[n++];u++;h=0;if(--e===1){f=true;break}}}while((u|h)<l);if(f){break}do{u=Wr(d[o],m,n,e,0,p);if(u!==0){for(a=0;a<u;a++){d[s+a]=m[n+a]}s+=u;n+=u;e-=u;if(e<=1){f=true;break}}d[s++]=d[o++];if(--i===0){f=true;break}h=Fr(m[n],d,o,i,0,p);if(h!==0){for(a=0;a<h;a++){d[s+a]=d[o+a]}s+=h;o+=h;i-=h;if(i===0){f=true;break}}d[s++]=m[n++];if(--e===1){f=true;break}l--}while(u>=Rr||h>=Rr);if(f){break}if(l<0){l=0}l+=2}g=l;g<1&&(g=1);if(e===1){for(a=0;a<i;a++){d[s+a]=d[o+a]}d[s+i]=m[n]}else if(e===0){throw new Error}else{for(a=0;a<e;a++){d[s+a]=m[n+a]}}}function h(t,e,r,i){var a=0;for(a=0;a<i;a++){m[a]=d[r+a]}var n=t+e-1;var o=i-1;var s=r+i-1;var l=0;var u=0;d[s--]=d[n--];if(--e===0){l=s-(i-1);for(a=0;a<i;a++){d[l+a]=m[a]}return}if(i===1){s-=e;n-=e;u=s+1;l=n+1;for(a=e-1;a>=0;a--){d[u+a]=d[l+a]}d[s]=m[o];return}var h=g;while(true){var f=0;var c=0;var v=false;do{if(p(m[o],d[n])<0){d[s--]=d[n--];f++;c=0;if(--e===0){v=true;break}}else{d[s--]=m[o--];c++;f=0;if(--i===1){v=true;break}}}while((f|c)<h);if(v){break}do{f=e-Wr(m[o],d,t,e,e-1,p);if(f!==0){s-=f;n-=f;e-=f;u=s+1;l=n+1;for(a=f-1;a>=0;a--){d[u+a]=d[l+a]}if(e===0){v=true;break}}d[s--]=m[o--];if(--i===1){v=true;break}c=i-Fr(d[n],m,0,i,i-1,p);if(c!==0){s-=c;o-=c;i-=c;u=s+1;l=o+1;for(a=0;a<c;a++){d[u+a]=m[l+a]}if(i<=1){v=true;break}}d[s--]=d[n--];if(--e===0){v=true;break}h--}while(f>=Rr||c>=Rr);if(v){break}if(h<0){h=0}h+=2}g=h;if(g<1){g=1}if(i===1){s-=e;n-=e;u=s+1;l=n+1;for(a=e-1;a>=0;a--){d[u+a]=d[l+a]}d[s]=m[o]}else if(i===0){throw new Error}else{l=s-(i-1);for(a=0;a<i;a++){d[l+a]=m[a]}}}this.mergeRuns=e;this.forceMergeRuns=r;this.pushRun=t}function Zr(t,e,r,i){if(!r){r=0}if(!i){i=t.length}var a=i-r;if(a<2){return}var n=0;if(a<Er){n=Br(t,r,i,e);Gr(t,r,i,r+n,e);return}var o=new Hr(t,e);var s=zr(a);do{n=Br(t,r,i,e);if(n<s){var l=a;if(l>s){l=s}Gr(t,r,r+l,r+n,e);n=l}o.pushRun(r,n);o.mergeRuns();a-=n;r+=n}while(a!==0);o.forceMergeRuns()}function Ur(t,e){if(t.zlevel===e.zlevel){if(t.z===e.z){return t.z2-e.z2}return t.z-e.z}return t.zlevel-e.zlevel}var Xr=function(){this._roots=[];this._displayList=[];this._displayListLen=0};Xr.prototype={constructor:Xr,traverse:function(t,e){for(var r=0;r<this._roots.length;r++){this._roots[r].traverse(t,e)}},getDisplayList:function(t,e){e=e||false;if(t){this.updateDisplayList(e)}return this._displayList},updateDisplayList:function(t){this._displayListLen=0;var e=this._roots;var r=this._displayList;for(var i=0,a=e.length;i<a;i++){this._updateAndAddDisplayable(e[i],null,t)}r.length=this._displayListLen;y.canvasSupported&&Zr(r,Ur)},_updateAndAddDisplayable:function(t,e,r){if(t.ignore&&!r){return}t.beforeUpdate();if(t.__dirty){t.update()}t.afterUpdate();var i=t.clipPath;if(i){if(e){e=e.slice()}else{e=[]}var a=i;var n=t;while(a){a.parent=n;a.updateTransform();e.push(a);n=a;a=a.clipPath}}if(t.isGroup){var o=t._children;for(var s=0;s<o.length;s++){var l=o[s];if(t.__dirty){l.__dirty=true}this._updateAndAddDisplayable(l,e,r)}t.__dirty=false}else{t.__clipPaths=e;this._displayList[this._displayListLen++]=t}},addRoot:function(t){if(t.__storage===this){return}if(t instanceof Or){t.addChildrenToStorage(this)}this.addToStorage(t);this._roots.push(t)},delRoot:function(t){if(t==null){for(var e=0;e<this._roots.length;e++){var r=this._roots[e];if(r instanceof Or){r.delChildrenFromStorage(this)}}this._roots=[];this._displayList=[];this._displayListLen=0;return}if(t instanceof Array){for(var e=0,i=t.length;e<i;e++){this.delRoot(t[e])}return}var a=S(this._roots,t);if(a>=0){this.delFromStorage(t);this._roots.splice(a,1);if(t instanceof Or){t.delChildrenFromStorage(this)}}},addToStorage:function(t){if(t){t.__storage=this;t.dirty(false)}return this},delFromStorage:function(t){if(t){t.__storage=null}return this},dispose:function(){this._renderList=this._roots=null},displayableSortFunc:Ur};var Yr={shadowBlur:1,shadowOffsetX:1,shadowOffsetY:1,textShadowBlur:1,textShadowOffsetX:1,textShadowOffsetY:1,textBoxShadowBlur:1,textBoxShadowOffsetX:1,textBoxShadowOffsetY:1};var jr=function(t,e,r){if(Yr.hasOwnProperty(e)){return r*=t.dpr}return r};var qr={NONE:0,STYLE_BIND:1,PLAIN_TEXT:2};var Kr=9;var $r=[["shadowBlur",0],["shadowOffsetX",0],["shadowOffsetY",0],["shadowColor","#000"],["lineCap","butt"],["lineJoin","miter"],["miterLimit",10]];var Jr=function(t){this.extendFrom(t,false)};function Qr(t,e,r){var i=e.x==null?0:e.x;var a=e.x2==null?1:e.x2;var n=e.y==null?0:e.y;var o=e.y2==null?0:e.y2;if(!e.global){i=i*r.width+r.x;a=a*r.width+r.x;n=n*r.height+r.y;o=o*r.height+r.y}i=isNaN(i)?0:i;a=isNaN(a)?1:a;n=isNaN(n)?0:n;o=isNaN(o)?0:o;var s=t.createLinearGradient(i,n,a,o);return s}function ti(t,e,r){var i=r.width;var a=r.height;var n=Math.min(i,a);var o=e.x==null?.5:e.x;var s=e.y==null?.5:e.y;var l=e.r==null?.5:e.r;if(!e.global){o=o*i+r.x;s=s*a+r.y;l=l*n}var u=t.createRadialGradient(o,s,0,o,s,l);return u}Jr.prototype={constructor:Jr,fill:"#000",stroke:null,opacity:1,fillOpacity:null,strokeOpacity:null,lineDash:null,lineDashOffset:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,lineWidth:1,strokeNoScale:false,text:null,font:null,textFont:null,fontStyle:null,fontWeight:null,fontSize:null,fontFamily:null,textTag:null,textFill:"#000",textStroke:null,textWidth:null,textHeight:null,textStrokeWidth:0,textLineHeight:null,textPosition:"inside",textRect:null,textOffset:null,textAlign:null,textVerticalAlign:null,textDistance:5,textShadowColor:"transparent",textShadowBlur:0,textShadowOffsetX:0,textShadowOffsetY:0,textBoxShadowColor:"transparent",textBoxShadowBlur:0,textBoxShadowOffsetX:0,textBoxShadowOffsetY:0,transformText:false,textRotation:0,textOrigin:null,textBackgroundColor:null,textBorderColor:null,textBorderWidth:0,textBorderRadius:0,textPadding:null,rich:null,truncate:null,blend:null,bind:function(t,e,r){var i=this;var a=r&&r.style;var n=!a||t.__attrCachedBy!==qr.STYLE_BIND;t.__attrCachedBy=qr.STYLE_BIND;for(var o=0;o<$r.length;o++){var s=$r[o];var l=s[0];if(n||i[l]!==a[l]){t[l]=jr(t,l,i[l]||s[1])}}if(n||i.fill!==a.fill){t.fillStyle=i.fill}if(n||i.stroke!==a.stroke){t.strokeStyle=i.stroke}if(n||i.opacity!==a.opacity){t.globalAlpha=i.opacity==null?1:i.opacity}if(n||i.blend!==a.blend){t.globalCompositeOperation=i.blend||"source-over"}if(this.hasStroke()){var u=i.lineWidth;t.lineWidth=u/(this.strokeNoScale&&e&&e.getLineScale?e.getLineScale():1)}},hasFill:function(){var t=this.fill;return t!=null&&t!=="none"},hasStroke:function(){var t=this.stroke;return t!=null&&t!=="none"&&this.lineWidth>0},extendFrom:function(t,e){if(t){for(var r in t){if(t.hasOwnProperty(r)&&(e===true||(e===false?!this.hasOwnProperty(r):t[r]!=null))){this[r]=t[r]}}}},set:function(t,e){if(typeof t==="string"){this[t]=e}else{this.extendFrom(t,true)}},clone:function(){var t=new this.constructor;t.extendFrom(this,true);return t},getGradient:function(t,e,r){var i=e.type==="radial"?ti:Qr;var a=i(t,e,r);var n=e.colorStops;for(var o=0;o<n.length;o++){a.addColorStop(n[o].offset,n[o].color)}return a}};var ei=Jr.prototype;for(var ri=0;ri<$r.length;ri++){var ii=$r[ri];if(!(ii[0]in ei)){ei[ii[0]]=ii[1]}}Jr.getGradient=ei.getGradient;var ai=function(t,e){this.image=t;this.repeat=e;this.type="pattern"};ai.prototype.getCanvasPattern=function(t){return t.createPattern(this.image,this.repeat||"repeat")};function ni(){return false}function oi(t,e,r){var i=_();var a=e.getWidth();var n=e.getHeight();var o=i.style;if(o){o.position="absolute";o.left=0;o.top=0;o.width=a+"px";o.height=n+"px";i.setAttribute("data-zr-dom-id",t)}i.width=a*r;i.height=n*r;return i}var si=function(t,e,r){var i;r=r||br;if(typeof t==="string"){i=oi(t,e,r)}else if(F(t)){i=t;t=i.id}this.id=t;this.dom=i;var a=i.style;if(a){i.onselectstart=ni;a["-webkit-user-select"]="none";a["user-select"]="none";a["-webkit-touch-callout"]="none";a["-webkit-tap-highlight-color"]="rgba(0,0,0,0)";a["padding"]=0;a["margin"]=0;a["border-width"]=0}this.domBack=null;this.ctxBack=null;this.painter=e;this.config=null;this.clearColor=0;this.motionBlur=false;this.lastFrameAlpha=.7;this.dpr=r};si.prototype={constructor:si,__dirty:true,__used:false,__drawIndex:0,__startIndex:0,__endIndex:0,incremental:false,getElementCount:function(){return this.__endIndex-this.__startIndex},initContext:function(){this.ctx=this.dom.getContext("2d");this.ctx.dpr=this.dpr},createBackBuffer:function(){var t=this.dpr;this.domBack=oi("back-"+this.id,this.painter,t);this.ctxBack=this.domBack.getContext("2d");if(t!==1){this.ctxBack.scale(t,t)}},resize:function(t,e){var r=this.dpr;var i=this.dom;var a=i.style;var n=this.domBack;if(a){a.width=t+"px";a.height=e+"px"}i.width=t*r;i.height=e*r;if(n){n.width=t*r;n.height=e*r;if(r!==1){this.ctxBack.scale(r,r)}}},clear:function(t,e){var r=this.dom;var i=this.ctx;var a=r.width;var n=r.height;var e=e||this.clearColor;var o=this.motionBlur&&!t;var s=this.lastFrameAlpha;var l=this.dpr;if(o){if(!this.domBack){this.createBackBuffer()}this.ctxBack.globalCompositeOperation="copy";this.ctxBack.drawImage(r,0,0,a/l,n/l)}i.clearRect(0,0,a,n);if(e&&e!=="transparent"){var u;if(e.colorStops){u=e.__canvasGradient||Jr.getGradient(i,e,{x:0,y:0,width:a,height:n});e.__canvasGradient=u}else if(e.image){u=ai.prototype.getCanvasPattern.call(e,i)}i.save();i.fillStyle=u||e;i.fillRect(0,0,a,n);i.restore()}if(o){var h=this.domBack;i.save();i.globalAlpha=s;i.drawImage(h,0,0,a,n);i.restore()}}};var li=typeof window!=="undefined"&&(window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.msRequestAnimationFrame&&window.msRequestAnimationFrame.bind(window)||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame)||function(t){setTimeout(t,16)};var ui=new ke(50);function hi(t){if(typeof t==="string"){var e=ui.get(t);return e&&e.image}else{return t}}function fi(t,e,r,i,a){if(!t){return e}else if(typeof t==="string"){if(e&&e.__zrImageSrc===t||!r){return e}var n=ui.get(t);var o={hostEl:r,cb:i,cbPayload:a};if(n){e=n.image;!vi(e)&&n.pending.push(o)}else{e=new Image;e.onload=e.onerror=ci;ui.put(t,e.__cachedImgObj={image:e,pending:[o]});e.src=e.__zrImageSrc=t}return e}else{return t}}function ci(){var t=this.__cachedImgObj;this.onload=this.onerror=this.__cachedImgObj=null;for(var e=0;e<t.pending.length;e++){var r=t.pending[e];var i=r.cb;i&&i(this,r.cbPayload);r.hostEl.dirty()}t.pending.length=0}function vi(t){return t&&t.width&&t.height}var di={};var pi=0;var gi=5e3;var mi=/\{([a-zA-Z0-9_]+)\|([^}]*)\}/g;var yi="12px sans-serif";var xi={};function _i(t,e){xi[t]=e}function wi(t,e){e=e||yi;var r=t+":"+e;if(di[r]){return di[r]}var i=(t+"").split("\n");var a=0;for(var n=0,o=i.length;n<o;n++){a=Math.max(Ni(i[n],e).width,a)}if(pi>gi){pi=0;di={}}pi++;di[r]=a;return a}function bi(t,e,r,i,a,n,o,s){return o?Mi(t,e,r,i,a,o,n,s):Si(t,e,r,i,a,n,s)}function Si(t,e,r,i,a,n,o){var s=Oi(t,e,a,n,o);var l=wi(t,e);if(a){l+=a[1]+a[3]}var u=s.outerHeight;var h=Ii(0,l,r);var f=Ti(0,u,i);var c=new Nr(h,f,l,u);c.lineHeight=s.lineHeight;return c}function Mi(t,e,r,i,a,n,o,s){var l=Ei(t,{rich:o,truncate:s,font:e,textAlign:r,textPadding:a,textLineHeight:n});var u=l.outerWidth;var h=l.outerHeight;var f=Ii(0,u,r);var c=Ti(0,h,i);return new Nr(f,c,u,h)}function Ii(t,e,r){if(r==="right"){t-=e}else if(r==="center"){t-=e/2}return t}function Ti(t,e,r){if(r==="middle"){t-=e/2}else if(r==="bottom"){t-=e}return t}function Ai(t,e,r){var i=e.x;var a=e.y;var n=e.height;var o=e.width;var s=n/2;var l="left";var u="top";switch(t){case"left":i-=r;a+=s;l="right";u="middle";break;case"right":i+=r+o;a+=s;u="middle";break;case"top":i+=o/2;a-=r;l="center";u="bottom";break;case"bottom":i+=o/2;a+=n+r;l="center";break;case"inside":i+=o/2;a+=s;l="center";u="middle";break;case"insideLeft":i+=r;a+=s;u="middle";break;case"insideRight":i+=o-r;a+=s;l="right";u="middle";break;case"insideTop":i+=o/2;a+=r;l="center";break;case"insideBottom":i+=o/2;a+=n-r;l="center";u="bottom";break;case"insideTopLeft":i+=r;a+=r;break;case"insideTopRight":i+=o-r;a+=r;l="right";break;case"insideBottomLeft":i+=r;a+=n-r;u="bottom";break;case"insideBottomRight":i+=o-r;a+=n-r;l="right";u="bottom";break}return{x:i,y:a,textAlign:l,textVerticalAlign:u}}function Di(t,e,r,i,a){if(!e){return""}var n=(t+"").split("\n");a=Ci(e,r,i,a);for(var o=0,s=n.length;o<s;o++){n[o]=Li(n[o],a)}return n.join("\n")}function Ci(t,e,r,i){i=N({},i);i.font=e;var r=Y(r,"...");i.maxIterations=Y(i.maxIterations,2);var a=i.minChar=Y(i.minChar,0);i.cnCharWidth=wi("国",e);var n=i.ascCharWidth=wi("a",e);i.placeholder=Y(i.placeholder,"");var o=t=Math.max(0,t-1);for(var s=0;s<a&&o>=n;s++){o-=n}var l=wi(r,e);if(l>o){r="";l=0}o=t-l;i.ellipsis=r;i.ellipsisWidth=l;i.contentWidth=o;i.containerWidth=t;return i}function Li(t,e){var r=e.containerWidth;var i=e.font;var a=e.contentWidth;if(!r){return""}var n=wi(t,i);if(n<=r){return t}for(var o=0;;o++){if(n<=a||o>=e.maxIterations){t+=e.ellipsis;break}var s=o===0?ki(t,a,e.ascCharWidth,e.cnCharWidth):n>0?Math.floor(t.length*a/n):0;t=t.substr(0,s);n=wi(t,i)}if(t===""){t=e.placeholder}return t}function ki(t,e,r,i){var a=0;var n=0;for(var o=t.length;n<o&&a<e;n++){var s=t.charCodeAt(n);a+=0<=s&&s<=127?r:i}return n}function Pi(t){return wi("国",t)}function Ni(t,e){return xi.measureText(t,e)}xi.measureText=function(t,e){var r=b();r.font=e||yi;return r.measureText(t)};function Oi(t,e,r,i,a){t!=null&&(t+="");var n=Y(i,Pi(e));var o=t?t.split("\n"):[];var s=o.length*n;var l=s;if(r){l+=r[0]+r[2]}if(t&&a){var u=a.outerHeight;var h=a.outerWidth;if(u!=null&&l>u){t="";o=[]}else if(h!=null){var f=Ci(h-(r?r[1]+r[3]:0),e,a.ellipsis,{minChar:a.minChar,placeholder:a.placeholder});for(var c=0,v=o.length;c<v;c++){o[c]=Li(o[c],f)}}}return{lines:o,height:s,outerHeight:l,lineHeight:n}}function Ei(t,e){var r={lines:[],width:0,height:0};t!=null&&(t+="");if(!t){return r}var i=mi.lastIndex=0;var a;while((a=mi.exec(t))!=null){var n=a.index;if(n>i){Ri(r,t.substring(i,n))}Ri(r,a[2],a[1]);i=mi.lastIndex}if(i<t.length){Ri(r,t.substring(i,t.length))}var o=r.lines;var s=0;var l=0;var u=[];var h=e.textPadding;var f=e.truncate;var c=f&&f.outerWidth;var v=f&&f.outerHeight;if(h){c!=null&&(c-=h[1]+h[3]);v!=null&&(v-=h[0]+h[2])}for(var d=0;d<o.length;d++){var p=o[d];var g=0;var m=0;for(var y=0;y<p.tokens.length;y++){var x=p.tokens[y];var _=x.styleName&&e.rich[x.styleName]||{};var w=x.textPadding=_.textPadding;var b=x.font=_.font||e.font;var S=x.textHeight=Y(_.textHeight,Pi(b));w&&(S+=w[0]+w[2]);x.height=S;x.lineHeight=j(_.textLineHeight,e.textLineHeight,S);x.textAlign=_&&_.textAlign||e.textAlign;x.textVerticalAlign=_&&_.textVerticalAlign||"middle";if(v!=null&&s+x.lineHeight>v){return{lines:[],width:0,height:0}}x.textWidth=wi(x.text,b);var M=_.textWidth;var I=M==null||M==="auto";if(typeof M==="string"&&M.charAt(M.length-1)==="%"){x.percentWidth=M;u.push(x);M=0}else{if(I){M=x.textWidth;var T=_.textBackgroundColor;var A=T&&T.image;if(A){A=hi(A);if(vi(A)){M=Math.max(M,A.width*S/A.height)}}}var D=w?w[1]+w[3]:0;M+=D;var C=c!=null?c-m:null;if(C!=null&&C<M){if(!I||C<D){x.text="";x.textWidth=M=0}else{x.text=Di(x.text,C-D,b,f.ellipsis,{minChar:f.minChar});x.textWidth=wi(x.text,b);M=x.textWidth+D}}}m+=x.width=M;_&&(g=Math.max(g,x.lineHeight))}p.width=m;p.lineHeight=g;s+=g;l=Math.max(l,m)}r.outerWidth=r.width=Y(e.textWidth,l);r.outerHeight=r.height=Y(e.textHeight,s);if(h){r.outerWidth+=h[1]+h[3];r.outerHeight+=h[0]+h[2]}for(var d=0;d<u.length;d++){var x=u[d];var L=x.percentWidth;x.width=parseInt(L,10)/100*l}return r}function Ri(t,e,r){var i=e==="";var a=e.split("\n");var n=t.lines;for(var o=0;o<a.length;o++){var s=a[o];var l={styleName:r,text:s,isLineHolder:!s&&!i};if(!o){var u=(n[n.length-1]||(n[0]={tokens:[]})).tokens;var h=u.length;h===1&&u[0].isLineHolder?u[0]=l:(s||!h||i)&&u.push(l)}else{n.push({tokens:[l]})}}}function zi(t){var e=(t.fontSize||t.fontFamily)&&[t.fontStyle,t.fontWeight,(t.fontSize||12)+"px",t.fontFamily||"sans-serif"].join(" ");return e&&J(e)||t.textFont||t.font}function Bi(t,e){var r=e.x;var i=e.y;var a=e.width;var n=e.height;var o=e.r;var s;var l;var u;var h;if(a<0){r=r+a;a=-a}if(n<0){i=i+n;n=-n}if(typeof o==="number"){s=l=u=h=o}else if(o instanceof Array){if(o.length===1){s=l=u=h=o[0]}else if(o.length===2){s=u=o[0];l=h=o[1]}else if(o.length===3){s=o[0];l=h=o[1];u=o[2]}else{s=o[0];l=o[1];u=o[2];h=o[3]}}else{s=l=u=h=0}var f;if(s+l>a){f=s+l;s*=a/f;l*=a/f}if(u+h>a){f=u+h;u*=a/f;h*=a/f}if(l+u>n){f=l+u;l*=n/f;u*=n/f}if(s+h>n){f=s+h;s*=n/f;h*=n/f}t.moveTo(r+s,i);t.lineTo(r+a-l,i);l!==0&&t.arc(r+a-l,i+l,l,-Math.PI/2,0);t.lineTo(r+a,i+n-u);u!==0&&t.arc(r+a-u,i+n-u,u,0,Math.PI/2);t.lineTo(r+h,i+n);h!==0&&t.arc(r+h,i+n-h,h,Math.PI/2,Math.PI);t.lineTo(r,i+s);s!==0&&t.arc(r+s,i+s,s,Math.PI,Math.PI*1.5)}var Vi=yi;var Gi={left:1,right:1,center:1};var Fi={top:1,bottom:1,middle:1};var Wi=[["textShadowBlur","shadowBlur",0],["textShadowOffsetX","shadowOffsetX",0],["textShadowOffsetY","shadowOffsetY",0],["textShadowColor","shadowColor","transparent"]];function Hi(t){Zi(t);L(t.rich,Zi);return t}function Zi(t){if(t){t.font=zi(t);var e=t.textAlign;e==="middle"&&(e="center");t.textAlign=e==null||Gi[e]?e:"left";var r=t.textVerticalAlign||t.textBaseline;r==="center"&&(r="middle");t.textVerticalAlign=r==null||Fi[r]?r:"top";var i=t.textPadding;if(i){t.textPadding=K(t.textPadding)}}}function Ui(t,e,r,i,a,n){i.rich?Yi(t,e,r,i,a,n):Xi(t,e,r,i,a,n)}function Xi(t,e,r,i,a,n){"use strict";var o=$i(i);var s;var l=false;var u=e.__attrCachedBy===qr.PLAIN_TEXT;if(n!==Kr){if(n){s=n.style;l=!o&&u&&s}e.__attrCachedBy=o?qr.NONE:qr.PLAIN_TEXT}else if(u){e.__attrCachedBy=qr.NONE}var h=i.font||Vi;if(!l||h!==(s.font||Vi)){e.font=h}var f=t.__computedFont;if(t.__styleFont!==h){t.__styleFont=h;f=t.__computedFont=e.font}var c=i.textPadding;var v=i.textLineHeight;var d=t.__textCotentBlock;if(!d||t.__dirtyText){d=t.__textCotentBlock=Oi(r,f,c,v,i.truncate)}var p=d.outerHeight;var g=d.lines;var m=d.lineHeight;var y=ta(p,i,a);var x=y.baseX;var _=y.baseY;var w=y.textAlign||"left";var b=y.textVerticalAlign;qi(e,i,a,x,_);var S=Ti(_,p,b);var M=x;var I=S;if(o||c){var T=wi(r,f);var A=T;c&&(A+=c[1]+c[3]);var D=Ii(x,A,w);o&&Ji(t,e,i,D,S,A,p);if(c){M=na(x,w,c);I+=c[0]}}e.textAlign=w;e.textBaseline="middle";e.globalAlpha=i.opacity||1;for(var C=0;C<Wi.length;C++){var L=Wi[C];var k=L[0];var P=L[1];var N=i[k];if(!l||N!==s[k]){e[P]=jr(e,P,N||L[2])}}I+=m/2;var O=i.textStrokeWidth;var E=l?s.textStrokeWidth:null;var R=!l||O!==E;var z=!l||R||i.textStroke!==s.textStroke;var B=ra(i.textStroke,O);var V=ia(i.textFill);if(B){if(R){e.lineWidth=O}if(z){e.strokeStyle=B}}if(V){if(!l||i.textFill!==s.textFill){e.fillStyle=V}}if(g.length===1){B&&e.strokeText(g[0],M,I);V&&e.fillText(g[0],M,I)}else{for(var C=0;C<g.length;C++){B&&e.strokeText(g[C],M,I);V&&e.fillText(g[C],M,I);I+=m}}}function Yi(t,e,r,i,a,n){if(n!==Kr){e.__attrCachedBy=qr.NONE}var o=t.__textCotentBlock;if(!o||t.__dirtyText){o=t.__textCotentBlock=Ei(r,i)}ji(t,e,o,i,a)}function ji(t,e,r,i,a){var n=r.width;var o=r.outerWidth;var s=r.outerHeight;var l=i.textPadding;var u=ta(s,i,a);var h=u.baseX;var f=u.baseY;var c=u.textAlign;var v=u.textVerticalAlign;qi(e,i,a,h,f);var d=Ii(h,o,c);var p=Ti(f,s,v);var g=d;var m=p;if(l){g+=l[3];m+=l[0]}var y=g+n;$i(i)&&Ji(t,e,i,d,p,o,s);for(var x=0;x<r.lines.length;x++){var _=r.lines[x];var w=_.tokens;var b=w.length;var S=_.lineHeight;var M=_.width;var I=0;var T=g;var A=y;var D=b-1;var C;while(I<b&&(C=w[I],!C.textAlign||C.textAlign==="left")){Ki(t,e,C,i,S,m,T,"left");M-=C.width;T+=C.width;I++}while(D>=0&&(C=w[D],C.textAlign==="right")){Ki(t,e,C,i,S,m,A,"right");M-=C.width;A-=C.width;D--}T+=(n-(T-g)-(y-A)-M)/2;while(I<=D){C=w[I];Ki(t,e,C,i,S,m,T+C.width/2,"center");T+=C.width;I++}m+=S}}function qi(t,e,r,i,a){if(r&&e.textRotation){var n=e.textOrigin;if(n==="center"){i=r.width/2+r.x;a=r.height/2+r.y}else if(n){i=n[0]+r.x;a=n[1]+r.y}t.translate(i,a);t.rotate(-e.textRotation);t.translate(-i,-a)}}function Ki(t,e,r,i,a,n,o,s){var l=i.rich[r.styleName]||{};l.text=r.text;var u=r.textVerticalAlign;var h=n+a/2;if(u==="top"){h=n+r.height/2}else if(u==="bottom"){h=n+a-r.height/2}!r.isLineHolder&&$i(l)&&Ji(t,e,l,s==="right"?o-r.width:s==="center"?o-r.width/2:o,h-r.height/2,r.width,r.height);var f=r.textPadding;if(f){o=na(o,s,f);h-=r.height/2-f[2]-r.textHeight/2}ea(e,"shadowBlur",j(l.textShadowBlur,i.textShadowBlur,0));ea(e,"shadowColor",l.textShadowColor||i.textShadowColor||"transparent");ea(e,"shadowOffsetX",j(l.textShadowOffsetX,i.textShadowOffsetX,0));ea(e,"shadowOffsetY",j(l.textShadowOffsetY,i.textShadowOffsetY,0));ea(e,"textAlign",s);ea(e,"textBaseline","middle");ea(e,"font",r.font||Vi);var c=ra(l.textStroke||i.textStroke,d);var v=ia(l.textFill||i.textFill);var d=Y(l.textStrokeWidth,i.textStrokeWidth);if(c){ea(e,"lineWidth",d);ea(e,"strokeStyle",c);e.strokeText(r.text,o,h)}if(v){ea(e,"fillStyle",v);e.fillText(r.text,o,h)}}function $i(t){return!!(t.textBackgroundColor||t.textBorderWidth&&t.textBorderColor)}function Ji(t,e,r,i,a,n,o){var s=r.textBackgroundColor;var l=r.textBorderWidth;var u=r.textBorderColor;var h=G(s);ea(e,"shadowBlur",r.textBoxShadowBlur||0);ea(e,"shadowColor",r.textBoxShadowColor||"transparent");ea(e,"shadowOffsetX",r.textBoxShadowOffsetX||0);ea(e,"shadowOffsetY",r.textBoxShadowOffsetY||0);if(h||l&&u){e.beginPath();var f=r.textBorderRadius;if(!f){e.rect(i,a,n,o)}else{Bi(e,{x:i,y:a,width:n,height:o,r:f})}e.closePath()}if(h){ea(e,"fillStyle",s);if(r.fillOpacity!=null){var c=e.globalAlpha;e.globalAlpha=r.fillOpacity*r.opacity;e.fill();e.globalAlpha=c}else{e.fill()}}else if(F(s)){var v=s.image;v=fi(v,null,t,Qi,s);if(v&&vi(v)){e.drawImage(v,i,a,n,o)}}if(l&&u){ea(e,"lineWidth",l);ea(e,"strokeStyle",u);if(r.strokeOpacity!=null){var c=e.globalAlpha;e.globalAlpha=r.strokeOpacity*r.opacity;e.stroke();e.globalAlpha=c}else{e.stroke()}}}function Qi(t,e){e.image=t}function ta(t,e,r){var i=e.x||0;var a=e.y||0;var n=e.textAlign;var o=e.textVerticalAlign;if(r){var s=e.textPosition;if(s instanceof Array){i=r.x+aa(s[0],r.width);a=r.y+aa(s[1],r.height)}else{var l=Ai(s,r,e.textDistance);i=l.x;a=l.y;n=n||l.textAlign;o=o||l.textVerticalAlign}var u=e.textOffset;if(u){i+=u[0];a+=u[1]}}return{baseX:i,baseY:a,textAlign:n,textVerticalAlign:o}}function ea(t,e,r){t[e]=jr(t,e,r);return t[e]}function ra(t,e){return t==null||e<=0||t==="transparent"||t==="none"?null:t.image||t.colorStops?"#000":t}function ia(t){return t==null||t==="none"?null:t.image||t.colorStops?"#000":t}function aa(t,e){if(typeof t==="string"){if(t.lastIndexOf("%")>=0){return parseFloat(t)/100*e}return parseFloat(t)}return t}function na(t,e,r){return e==="right"?t-r[1]:e==="center"?t+r[3]/2-r[1]/2:t+r[3]}function oa(t,e){return t!=null&&(t||e.textBackgroundColor||e.textBorderWidth&&e.textBorderColor||e.textPadding)}var sa=new Nr;var la=function(){};la.prototype={constructor:la,drawRectText:function(t,e){var r=this.style;e=r.textRect||e;this.__dirty&&Hi(r,true);var i=r.text;i!=null&&(i+="");if(!oa(i,r)){return}t.save();var a=this.transform;if(!r.transformText){if(a){sa.copy(e);sa.applyTransform(a);e=sa}}else{this.setTransform(t)}Ui(this,t,i,r,e,Kr);t.restore()}};function ua(t){t=t||{};Cr.call(this,t);for(var e in t){if(t.hasOwnProperty(e)&&e!=="style"){this[e]=t[e]}}this.style=new Jr(t.style,this);this._rect=null;this.__clipPaths=[]}ua.prototype={constructor:ua,type:"displayable",__dirty:true,invisible:false,z:0,z2:0,zlevel:0,draggable:false,dragging:false,silent:false,culling:false,cursor:"pointer",rectHover:false,progressive:false,incremental:false,globalScaleRatio:1,beforeBrush:function(t){},afterBrush:function(t){},brush:function(t,e){},getBoundingRect:function(){},contain:function(t,e){return this.rectContain(t,e)},traverse:function(t,e){t.call(e,this)},rectContain:function(t,e){var r=this.transformCoordToLocal(t,e);var i=this.getBoundingRect();return i.contain(r[0],r[1])},dirty:function(){this.__dirty=this.__dirtyText=true;this._rect=null;this.__zr&&this.__zr.refresh()},animateStyle:function(t){return this.animate("style",t)},attrKV:function(t,e){if(t!=="style"){Cr.prototype.attrKV.call(this,t,e)}else{this.style.set(e)}},setStyle:function(t,e){this.style.set(t,e);this.dirty(false);return this},useStyle:function(t){this.style=new Jr(t,this);this.dirty(false);return this}};M(ua,Cr);I(ua,la);function ha(t){ua.call(this,t)}ha.prototype={constructor:ha,type:"image",brush:function(t,e){var r=this.style;var i=r.image;r.bind(t,this,e);var a=this._image=fi(i,this._image,this,this.onload);if(!a||!vi(a)){return}var n=r.x||0;var o=r.y||0;var s=r.width;var l=r.height;var u=a.width/a.height;if(s==null&&l!=null){s=l*u}else if(l==null&&s!=null){l=s/u}else if(s==null&&l==null){s=a.width;l=a.height}this.setTransform(t);if(r.sWidth&&r.sHeight){var h=r.sx||0;var f=r.sy||0;t.drawImage(a,h,f,r.sWidth,r.sHeight,n,o,s,l)}else if(r.sx&&r.sy){var h=r.sx;var f=r.sy;var c=s-h;var v=l-f;t.drawImage(a,h,f,c,v,n,o,s,l)}else{t.drawImage(a,n,o,s,l)}if(r.text!=null){this.restoreTransform(t);this.drawRectText(t,this.getBoundingRect())}},getBoundingRect:function(){var t=this.style;if(!this._rect){this._rect=new Nr(t.x||0,t.y||0,t.width||0,t.height||0)}return this._rect}};M(ha,ua);var fa=1e5;var ca=314159;var va=.01;var da=.001;function pa(t){return parseInt(t,10)}function ga(t){if(!t){return false}if(t.__builtin__){return true}if(typeof t.resize!=="function"||typeof t.refresh!=="function"){return false}return true}var ma=new Nr(0,0,0,0);var ya=new Nr(0,0,0,0);function xa(t,e,r){ma.copy(t.getBoundingRect());if(t.transform){ma.applyTransform(t.transform)}ya.width=e;ya.height=r;return!ma.intersect(ya)}function _a(t,e){if(t===e){return false}if(!t||!e||t.length!==e.length){return true}for(var r=0;r<t.length;r++){if(t[r]!==e[r]){return true}}}function wa(t,e){for(var r=0;r<t.length;r++){var i=t[r];i.setTransform(e);e.beginPath();i.buildPath(e,i.shape);e.clip();i.restoreTransform(e)}}function ba(t,e){var r=document.createElement("div");r.style.cssText=["position:relative","overflow:hidden","width:"+t+"px","height:"+e+"px","padding:0","margin:0","border-width:0"].join(";")+";";return r}var Sa=function(t,e,r){this.type="canvas";var i=!t.nodeName||t.nodeName.toUpperCase()==="CANVAS";this._opts=r=N({},r||{});this.dpr=r.devicePixelRatio||br;this._singleCanvas=i;this.root=t;var a=t.style;if(a){a["-webkit-tap-highlight-color"]="transparent";a["-webkit-user-select"]=a["user-select"]=a["-webkit-touch-callout"]="none";t.innerHTML=""}this.storage=e;var n=this._zlevelList=[];var o=this._layers={};this._layerConfig={};this._needsManuallyCompositing=false;if(!i){this._width=this._getSize(0);this._height=this._getSize(1);var s=this._domRoot=ba(this._width,this._height);t.appendChild(s)}else{var l=t.width;var u=t.height;if(r.width!=null){l=r.width}if(r.height!=null){u=r.height}this.dpr=r.devicePixelRatio||1;t.width=l*this.dpr;t.height=u*this.dpr;this._width=l;this._height=u;var h=new si(t,this,this.dpr);h.__builtin__=true;h.initContext();o[ca]=h;h.zlevel=ca;n.push(ca);this._domRoot=t}this._hoverlayer=null;this._hoverElements=[]};Sa.prototype={constructor:Sa,getType:function(){return"canvas"},isSingleCanvas:function(){return this._singleCanvas},getViewportRoot:function(){return this._domRoot},getViewportRootOffset:function(){var t=this.getViewportRoot();if(t){return{offsetLeft:t.offsetLeft||0,offsetTop:t.offsetTop||0}}},refresh:function(t){var e=this.storage.getDisplayList(true);var r=this._zlevelList;this._redrawId=Math.random();this._paintList(e,t,this._redrawId);for(var i=0;i<r.length;i++){var a=r[i];var n=this._layers[a];if(!n.__builtin__&&n.refresh){var o=i===0?this._backgroundColor:null;n.refresh(o)}}this.refreshHover();return this},addHover:function(t,e){if(t.__hoverMir){return}var r=new t.constructor({style:t.style,shape:t.shape,z:t.z,z2:t.z2,silent:t.silent});r.__from=t;t.__hoverMir=r;e&&r.setStyle(e);this._hoverElements.push(r);return r},removeHover:function(t){var e=t.__hoverMir;var r=this._hoverElements;var i=S(r,e);if(i>=0){r.splice(i,1)}t.__hoverMir=null},clearHover:function(t){var e=this._hoverElements;for(var r=0;r<e.length;r++){var i=e[r].__from;if(i){i.__hoverMir=null}}e.length=0},refreshHover:function(){var t=this._hoverElements;var e=t.length;var r=this._hoverlayer;r&&r.clear();if(!e){return}Zr(t,this.storage.displayableSortFunc);if(!r){r=this._hoverlayer=this.getLayer(fa)}var i={};r.ctx.save();for(var a=0;a<e;){var n=t[a];var o=n.__from;if(!(o&&o.__zr)){t.splice(a,1);o.__hoverMir=null;e--;continue}a++;if(!o.invisible){n.transform=o.transform;n.invTransform=o.invTransform;n.__clipPaths=o.__clipPaths;this._doPaintEl(n,r,true,i)}}r.ctx.restore()},getHoverLayer:function(){return this.getLayer(fa)},_paintList:function(t,e,r){if(this._redrawId!==r){return}e=e||false;this._updateLayerStatus(t);var i=this._doPaintList(t,e);if(this._needsManuallyCompositing){this._compositeManually()}if(!i){var a=this;li(function(){a._paintList(t,e,r)})}},_compositeManually:function(){var e=this.getLayer(ca).ctx;var r=this._domRoot.width;var i=this._domRoot.height;e.clearRect(0,0,r,i);this.eachBuiltinLayer(function(t){if(t.virtual){e.drawImage(t.dom,0,0,r,i)}})},_doPaintList:function(t,e){var r=[];for(var i=0;i<this._zlevelList.length;i++){var a=this._zlevelList[i];var n=this._layers[a];if(n.__builtin__&&n!==this._hoverlayer&&(n.__dirty||e)){r.push(n)}}var o=true;for(var s=0;s<r.length;s++){var n=r[s];var l=n.ctx;var u={};l.save();var h=e?n.__startIndex:n.__drawIndex;var f=!e&&n.incremental&&Date.now;var c=f&&Date.now();var v=n.zlevel===this._zlevelList[0]?this._backgroundColor:null;if(n.__startIndex===n.__endIndex){n.clear(false,v)}else if(h===n.__startIndex){var d=t[h];if(!d.incremental||!d.notClear||e){n.clear(false,v)}}if(h===-1){console.error("For some unknown reason. drawIndex is -1");h=n.__startIndex}for(var p=h;p<n.__endIndex;p++){var g=t[p];this._doPaintEl(g,n,e,u);g.__dirty=g.__dirtyText=false;if(f){var m=Date.now()-c;if(m>15){break}}}n.__drawIndex=p;if(n.__drawIndex<n.__endIndex){o=false}if(u.prevElClipPaths){l.restore()}l.restore()}if(y.wxa){L(this._layers,function(t){if(t&&t.ctx&&t.ctx.draw){t.ctx.draw()}})}return o},_doPaintEl:function(t,e,r,i){var a=e.ctx;var n=t.transform;if((e.__dirty||r)&&!t.invisible&&t.style.opacity!==0&&!(n&&!n[0]&&!n[3])&&!(t.culling&&xa(t,this._width,this._height))){var o=t.__clipPaths;if(!i.prevElClipPaths||_a(o,i.prevElClipPaths)){if(i.prevElClipPaths){e.ctx.restore();i.prevElClipPaths=null;i.prevEl=null}if(o){a.save();wa(o,a);i.prevElClipPaths=o}}t.beforeBrush&&t.beforeBrush(a);t.brush(a,i.prevEl||null);i.prevEl=t;t.afterBrush&&t.afterBrush(a)}},getLayer:function(t,e){if(this._singleCanvas&&!this._needsManuallyCompositing){t=ca}var r=this._layers[t];if(!r){r=new si("zr_"+t,this,this.dpr);r.zlevel=t;r.__builtin__=true;if(this._layerConfig[t]){m(r,this._layerConfig[t],true)}if(e){r.virtual=e}this.insertLayer(t,r);r.initContext()}return r},insertLayer:function(t,e){var r=this._layers;var i=this._zlevelList;var a=i.length;var n=null;var o=-1;var s=this._domRoot;if(r[t]){Mr("ZLevel "+t+" has been used already");return}if(!ga(e)){Mr("Layer of zlevel "+t+" is not valid");return}if(a>0&&t>i[0]){for(o=0;o<a-1;o++){if(i[o]<t&&i[o+1]>t){break}}n=r[i[o]]}i.splice(o+1,0,t);r[t]=e;if(!e.virtual){if(n){var l=n.dom;if(l.nextSibling){s.insertBefore(e.dom,l.nextSibling)}else{s.appendChild(e.dom)}}else{if(s.firstChild){s.insertBefore(e.dom,s.firstChild)}else{s.appendChild(e.dom)}}}},eachLayer:function(t,e){var r=this._zlevelList;var i;var a;for(a=0;a<r.length;a++){i=r[a];t.call(e,this._layers[i],i)}},eachBuiltinLayer:function(t,e){var r=this._zlevelList;var i;var a;var n;for(n=0;n<r.length;n++){a=r[n];i=this._layers[a];if(i.__builtin__){t.call(e,i,a)}}},eachOtherLayer:function(t,e){var r=this._zlevelList;var i;var a;var n;for(n=0;n<r.length;n++){a=r[n];i=this._layers[a];if(!i.__builtin__){t.call(e,i,a)}}},getLayers:function(){return this._layers},_updateLayerStatus:function(t){this.eachBuiltinLayer(function(t,e){t.__dirty=t.__used=false});function e(t){if(a){if(a.__endIndex!==t){a.__dirty=true}a.__endIndex=t}}if(this._singleCanvas){for(var r=1;r<t.length;r++){var i=t[r];if(i.zlevel!==t[r-1].zlevel||i.incremental){this._needsManuallyCompositing=true;break}}}var a=null;var n=0;for(var r=0;r<t.length;r++){var i=t[r];var o=i.zlevel;var s;if(i.incremental){s=this.getLayer(o+da,this._needsManuallyCompositing);s.incremental=true;n=1}else{s=this.getLayer(o+(n>0?va:0),this._needsManuallyCompositing)}if(!s.__builtin__){Mr("ZLevel "+o+" has been used by unkown layer "+s.id)}if(s!==a){s.__used=true;if(s.__startIndex!==r){s.__dirty=true}s.__startIndex=r;if(!s.incremental){s.__drawIndex=r}else{s.__drawIndex=-1}e(r);a=s}if(i.__dirty){s.__dirty=true;if(s.incremental&&s.__drawIndex<0){s.__drawIndex=r}}}e(r);this.eachBuiltinLayer(function(t,e){if(!t.__used&&t.getElementCount()>0){t.__dirty=true;t.__startIndex=t.__endIndex=t.__drawIndex=0}if(t.__dirty&&t.__drawIndex<0){t.__drawIndex=t.__startIndex}})},clear:function(){this.eachBuiltinLayer(this._clearLayer);return this},_clearLayer:function(t){t.clear()},setBackgroundColor:function(t){this._backgroundColor=t},configLayer:function(t,e){if(e){var r=this._layerConfig;if(!r[t]){r[t]=e}else{m(r[t],e,true)}for(var i=0;i<this._zlevelList.length;i++){var a=this._zlevelList[i];if(a===t||a===t+va){var n=this._layers[a];m(n,r[t],true)}}}},delLayer:function(t){var e=this._layers;var r=this._zlevelList;var i=e[t];if(!i){return}i.dom.parentNode.removeChild(i.dom);delete e[t];r.splice(S(r,t),1)},resize:function(e,r){if(!this._domRoot.style){if(e==null||r==null){return}this._width=e;this._height=r;this.getLayer(ca).resize(e,r)}else{var t=this._domRoot;t.style.display="none";var i=this._opts;e!=null&&(i.width=e);r!=null&&(i.height=r);e=this._getSize(0);r=this._getSize(1);t.style.display="";if(this._width!==e||r!==this._height){t.style.width=e+"px";t.style.height=r+"px";for(var a in this._layers){if(this._layers.hasOwnProperty(a)){this._layers[a].resize(e,r)}}L(this._progressiveLayers,function(t){t.resize(e,r)});this.refresh(true)}this._width=e;this._height=r}return this},clearLayer:function(t){var e=this._layers[t];if(e){e.clear()}},dispose:function(){this.root.innerHTML="";this.root=this.storage=this._domRoot=this._layers=null},getRenderedCanvas:function(t){t=t||{};if(this._singleCanvas&&!this._compositeManually){return this._layers[ca].dom}var e=new si("image",this,t.pixelRatio||this.dpr);e.initContext();e.clear(false,t.backgroundColor||this._backgroundColor);if(t.pixelRatio<=this.dpr){this.refresh();var r=e.dom.width;var i=e.dom.height;var a=e.ctx;this.eachLayer(function(t){if(t.__builtin__){a.drawImage(t.dom,0,0,r,i)}else if(t.renderToCanvas){e.ctx.save();t.renderToCanvas(e.ctx);e.ctx.restore()}})}else{var n={};var o=this.storage.getDisplayList(true);for(var s=0;s<o.length;s++){var l=o[s];this._doPaintEl(l,e,true,n)}}return e.dom},getWidth:function(){return this._width},getHeight:function(){return this._height},_getSize:function(t){var e=this._opts;var r=["width","height"][t];var i=["clientWidth","clientHeight"][t];var a=["paddingLeft","paddingTop"][t];var n=["paddingRight","paddingBottom"][t];if(e[r]!=null&&e[r]!=="auto"){return parseFloat(e[r])}var o=this.root;var s=document.defaultView.getComputedStyle(o);return(o[i]||pa(s[r])||pa(o.style[r]))-(pa(s[a])||0)-(pa(s[n])||0)|0},pathToImage:function(t,e){e=e||this.dpr;var r=document.createElement("canvas");var i=r.getContext("2d");var a=t.getBoundingRect();var n=t.style;var o=n.shadowBlur*e;var s=n.shadowOffsetX*e;var l=n.shadowOffsetY*e;var u=n.hasStroke()?n.lineWidth:0;var h=Math.max(u/2,-s+o);var f=Math.max(u/2,s+o);var c=Math.max(u/2,-l+o);var v=Math.max(u/2,l+o);var d=a.width+h+f;var p=a.height+c+v;r.width=d*e;r.height=p*e;i.scale(e,e);i.clearRect(0,0,d,p);i.dpr=e;var g={position:t.position,rotation:t.rotation,scale:t.scale};t.position=[h-a.x,c-a.y];t.rotation=0;t.scale=[1,1];t.updateTransform();if(t){t.brush(i)}var m=ha;var y=new m({style:{x:0,y:0,image:r}});if(g.position!=null){y.position=t.position=g.position}if(g.rotation!=null){y.rotation=t.rotation=g.rotation}if(g.scale!=null){y.scale=t.scale=g.scale}return y}};var Ma=function(t){t=t||{};this.stage=t.stage||{};this.onframe=t.onframe||function(){};this._clips=[];this._running=false;this._time;this._pausedTime;this._pauseStart;this._paused=false;zt.call(this)};Ma.prototype={constructor:Ma,addClip:function(t){this._clips.push(t)},addAnimator:function(t){t.animation=this;var e=t.getClips();for(var r=0;r<e.length;r++){this.addClip(e[r])}},removeClip:function(t){var e=S(this._clips,t);if(e>=0){this._clips.splice(e,1)}},removeAnimator:function(t){var e=t.getClips();for(var r=0;r<e.length;r++){this.removeClip(e[r])}t.animation=null},_update:function(){var t=(new Date).getTime()-this._pausedTime;var e=t-this._time;var r=this._clips;var i=r.length;var a=[];var n=[];for(var o=0;o<i;o++){var s=r[o];var l=s.step(t,e);if(l){a.push(l);n.push(s)}}for(var o=0;o<i;){if(r[o]._needsRemove){r[o]=r[i-1];r.pop();i--}else{o++}}i=a.length;for(var o=0;o<i;o++){n[o].fire(a[o])}this._time=t;this.onframe(e);this.trigger("frame",e);if(this.stage.update){this.stage.update()}},_startLoop:function(){var t=this;this._running=true;function e(){if(t._running){li(e);!t._paused&&t._update()}}li(e)},start:function(){this._time=(new Date).getTime();this._pausedTime=0;this._startLoop()},stop:function(){this._running=false},pause:function(){if(!this._paused){this._pauseStart=(new Date).getTime();this._paused=true}},resume:function(){if(this._paused){this._pausedTime+=(new Date).getTime()-this._pauseStart;this._paused=false}},clear:function(){this._clips=[]},isFinished:function(){return!this._clips.length},animate:function(t,e){e=e||{};var r=new xr(t,e.loop,e.getter,e.setter);this.addAnimator(r);return r}};I(Ma,zt);var Ia=300;var Ta=["click","dblclick","mousewheel","mouseout","mouseup","mousedown","mousemove","contextmenu"];var Aa=["touchstart","touchend","touchmove"];var Da={pointerdown:1,pointerup:1,pointermove:1,pointerout:1};var Ca=A(Ta,function(t){var e=t.replace("mouse","pointer");return Da[e]?e:t});function La(t){return t==="mousewheel"&&y.browser.firefox?"DOMMouseScroll":t}function ka(t){t._touching=true;clearTimeout(t._touchTimer);t._touchTimer=setTimeout(function(){t._touching=false},700)}var Pa={mousemove:function(t){t=Ut(this.dom,t);this.trigger("mousemove",t)},mouseout:function(t){t=Ut(this.dom,t);var e=t.toElement||t.relatedTarget;if(e!==this.dom){while(e&&e.nodeType!==9){if(e===this.dom){return}e=e.parentNode}}this.trigger("mouseout",t)},touchstart:function(t){t=Ut(this.dom,t);t.zrByTouch=true;this._lastTouchMoment=new Date;this.handler.processGesture(this,t,"start");Pa.mousemove.call(this,t);Pa.mousedown.call(this,t);ka(this)},touchmove:function(t){t=Ut(this.dom,t);t.zrByTouch=true;this.handler.processGesture(this,t,"change");Pa.mousemove.call(this,t);ka(this)},touchend:function(t){t=Ut(this.dom,t);t.zrByTouch=true;this.handler.processGesture(this,t,"end");Pa.mouseup.call(this,t);if(+new Date-this._lastTouchMoment<Ia){Pa.click.call(this,t)}ka(this)},pointerdown:function(t){Pa.mousedown.call(this,t)},pointermove:function(t){if(!Na(t)){Pa.mousemove.call(this,t)}},pointerup:function(t){Pa.mouseup.call(this,t)},pointerout:function(t){if(!Na(t)){Pa.mouseout.call(this,t)}}};function Na(t){var e=t.pointerType;return e==="pen"||e==="touch"}L(["click","mousedown","mouseup","mousewheel","dblclick","contextmenu"],function(e){Pa[e]=function(t){t=Ut(this.dom,t);this.trigger(e,t)}});function Oa(e){L(Aa,function(t){e._handlers[t]=R(Pa[t],e)});L(Ca,function(t){e._handlers[t]=R(Pa[t],e)});L(Ta,function(t){e._handlers[t]=r(Pa[t],e)});function r(t,e){return function(){if(e._touching){return}return t.apply(e,arguments)}}}function Ea(r){zt.call(this);this.dom=r;this._touching=false;this._touchTimer;this._handlers={};Oa(this);if(y.pointerEventsSupported){t(Ca,this)}else{if(y.touchEventsSupported){t(Aa,this)}t(Ta,this)}function t(t,e){L(t,function(t){Xt(r,La(t),e._handlers[t])},e)}}var Ra=Ea.prototype;Ra.dispose=function(){var t=Ta.concat(Aa);for(var e=0;e<t.length;e++){var r=t[e];Yt(this.dom,La(r),this._handlers[r])}};Ra.setCursor=function(t){this.dom.style&&(this.dom.style.cursor=t||"default")};I(Ea,zt);var za=!y.canvasSupported;var Ba={canvas:Sa};var Va={};var Ga="4.0.6";function Fa(t,e){var r=new Xa(i(),t,e);Va[r.id]=r;return r}function Wa(t){if(t){t.dispose()}else{for(var e in Va){if(Va.hasOwnProperty(e)){Va[e].dispose()}}Va={}}return this}function Ha(t){return Va[t]}function Za(t,e){Ba[t]=e}function Ua(t){delete Va[t]}var Xa=function(t,e,r){r=r||{};this.dom=e;this.id=t;var i=this;var a=new Xr;var n=r.renderer;if(za){if(!Ba.vml){throw new Error("You need to require 'zrender/vml/vml' to support IE8")}n="vml"}else if(!n||!Ba[n]){n="canvas"}var o=new Ba[n](e,a,r,t);this.storage=a;this.painter=o;var s=!y.node&&!y.worker?new Ea(o.getViewportRoot()):null;this.handler=new ne(a,o,s,o.root);this.animation=new Ma({stage:{update:R(this.flush,this)}});this.animation.start();this._needsRefresh;var l=a.delFromStorage;var u=a.addToStorage;a.delFromStorage=function(t){l.call(a,t);t&&t.removeSelfFromZr(i)};a.addToStorage=function(t){u.call(a,t);t.addSelfToZr(i)}};Xa.prototype={constructor:Xa,getId:function(){return this.id},add:function(t){this.storage.addRoot(t);this._needsRefresh=true},remove:function(t){this.storage.delRoot(t);this._needsRefresh=true},configLayer:function(t,e){if(this.painter.configLayer){this.painter.configLayer(t,e)}this._needsRefresh=true},setBackgroundColor:function(t){if(this.painter.setBackgroundColor){this.painter.setBackgroundColor(t)}this._needsRefresh=true},refreshImmediately:function(){this._needsRefresh=false;this.painter.refresh();this._needsRefresh=false},refresh:function(){this._needsRefresh=true},flush:function(){var t;if(this._needsRefresh){t=true;this.refreshImmediately()}if(this._needsRefreshHover){t=true;this.refreshHoverImmediately()}t&&this.trigger("rendered")},addHover:function(t,e){if(this.painter.addHover){var r=this.painter.addHover(t,e);this.refreshHover();return r}},removeHover:function(t){if(this.painter.removeHover){this.painter.removeHover(t);this.refreshHover()}},clearHover:function(){if(this.painter.clearHover){this.painter.clearHover();this.refreshHover()}},refreshHover:function(){this._needsRefreshHover=true},refreshHoverImmediately:function(){this._needsRefreshHover=false;this.painter.refreshHover&&this.painter.refreshHover()},resize:function(t){t=t||{};this.painter.resize(t.width,t.height);this.handler.resize()},clearAnimation:function(){this.animation.clear()},getWidth:function(){return this.painter.getWidth()},getHeight:function(){return this.painter.getHeight()},pathToImage:function(t,e){return this.painter.pathToImage(t,e)},setCursorStyle:function(t){this.handler.setCursorStyle(t)},findHover:function(t,e){return this.handler.findHover(t,e)},on:function(t,e,r){this.handler.on(t,e,r)},off:function(t,e){this.handler.off(t,e)},trigger:function(t,e){this.handler.trigger(t,e)},clear:function(){this.storage.delRoot();this.painter.clear()},dispose:function(){this.animation.stop();this.clear();this.storage.dispose();this.painter.dispose();this.handler.dispose();this.animation=this.storage=this.painter=this.handler=null;Ua(this.id)}};var Ya=(Object.freeze||Object)({version:Ga,init:Fa,dispose:Wa,getInstance:Ha,registerPainter:Za});var ja=L;var qa=F;var Ka=B;var $a="series\0";function Ja(t){return t instanceof Array?t:t==null?[]:[t]}function Qa(t,e,r){if(t){t[e]=t[e]||{};t.emphasis=t.emphasis||{};t.emphasis[e]=t.emphasis[e]||{};for(var i=0,a=r.length;i<a;i++){var n=r[i];if(!t.emphasis[e].hasOwnProperty(n)&&t[e].hasOwnProperty(n)){t.emphasis[e][n]=t[e][n]}}}}var tn=["fontStyle","fontWeight","fontSize","fontFamily","rich","tag","color","textBorderColor","textBorderWidth","width","height","lineHeight","align","verticalAlign","baseline","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY","backgroundColor","borderColor","borderWidth","borderRadius","padding"];function en(t){return qa(t)&&!Ka(t)&&!(t instanceof Date)?t.value:t}function rn(t){return qa(t)&&!(t instanceof Array)}function an(t,a){a=(a||[]).slice();var n=A(t||[],function(t,e){return{exist:t}});ja(a,function(t,e){if(!qa(t)){return}for(var r=0;r<n.length;r++){if(!n[r].option&&t.id!=null&&n[r].exist.id===t.id+""){n[r].option=t;a[e]=null;return}}for(var r=0;r<n.length;r++){var i=n[r].exist;if(!n[r].option&&(i.id==null||t.id==null)&&t.name!=null&&!sn(t)&&!sn(i)&&i.name===t.name+""){n[r].option=t;a[e]=null;return}}});ja(a,function(t,e){if(!qa(t)){return}var r=0;for(;r<n.length;r++){var i=n[r].exist;if(!n[r].option&&!sn(i)&&t.id==null){n[r].option=t;break}}if(r>=n.length){n.push({option:t})}});return n}function nn(t){var o=it();ja(t,function(t,e){var r=t.exist;r&&o.set(r.id,t)});ja(t,function(t,e){var r=t.option;$(!r||r.id==null||!o.get(r.id)||o.get(r.id)===t,"id duplicates: "+(r&&r.id));r&&r.id!=null&&o.set(r.id,t);!t.keyInfo&&(t.keyInfo={})});ja(t,function(t,e){var r=t.exist;var i=t.option;var a=t.keyInfo;if(!qa(i)){return}a.name=i.name!=null?i.name+"":r?r.name:$a+e;if(r){a.id=r.id}else if(i.id!=null){a.id=i.id+""}else{var n=0;do{a.id="\0"+a.name+"\0"+n++}while(o.get(a.id))}o.set(a.id,t)})}function on(t){var e=t.name;return!!(e&&e.indexOf($a))}function sn(t){return qa(t)&&t.id&&(t.id+"").indexOf("\0_ec_\0")===0}function ln(t,e){var r={};var i={};a(t||[],r);a(e||[],i,r);return[n(r),n(i)];function a(t,e,r){for(var i=0,a=t.length;i<a;i++){var n=t[i].seriesId;var o=Ja(t[i].dataIndex);var s=r&&r[n];for(var l=0,u=o.length;l<u;l++){var h=o[l];if(s&&s[h]){s[h]=null}else{(e[n]||(e[n]={}))[h]=1}}}}function n(t,e){var r=[];for(var i in t){if(t.hasOwnProperty(i)&&t[i]!=null){if(e){r.push(+i)}else{var a=n(t[i],true);a.length&&r.push({seriesId:i,dataIndex:a})}}}return r}}function un(e,t){if(t.dataIndexInside!=null){return t.dataIndexInside}else if(t.dataIndex!=null){return B(t.dataIndex)?A(t.dataIndex,function(t){return e.indexOfRawIndex(t)}):e.indexOfRawIndex(t.dataIndex)}else if(t.name!=null){return B(t.name)?A(t.name,function(t){return e.indexOfName(t)}):e.indexOfName(t.name)}}function hn(){var e="__\0ec_inner_"+fn+++"_"+Math.random().toFixed(5);return function(t){return t[e]||(t[e]={})}}var fn=0;function cn(s,l,u){if(G(l)){var t={};t[l+"Index"]=0;l=t}var e=u&&u.defaultMainType;if(e&&!vn(l,e+"Index")&&!vn(l,e+"Id")&&!vn(l,e+"Name")){l[e+"Index"]=0}var h={};ja(l,function(t,e){var t=l[e];if(e==="dataIndex"||e==="dataIndexInside"){h[e]=t;return}var r=e.match(/^(\w+)(Index|Id|Name)$/)||[];var i=r[1];var a=(r[2]||"").toLowerCase();if(!i||!a||t==null||a==="index"&&t==="none"||u&&u.includeMainTypes&&S(u.includeMainTypes,i)<0){return}var n={mainType:i};if(a!=="index"||t!=="all"){n[a]=t}var o=s.queryComponents(n);h[i+"Models"]=o;h[i+"Model"]=o[0]});return h}function vn(t,e){return t&&t.hasOwnProperty(e)}function dn(t,e,r){t.setAttribute?t.setAttribute(e,r):t[e]=r}function pn(t,e){return t.getAttribute?t.getAttribute(e):t[e]}function gn(t){if(t==="auto"){return y.domSupported?"html":"richText"}else{return t||"html"}}var mn=".";var yn="___EC__COMPONENT__CONTAINER___";function xn(t){var e={main:"",sub:""};if(t){t=t.split(mn);e.main=t[0]||"";e.sub=t[1]||""}return e}function _n(t){$(/^[a-zA-Z0-9_]+([.][a-zA-Z0-9_]+)?$/.test(t),'componentType "'+t+'" illegal')}function wn(t,i){t.$constructor=t;t.extend=function(e){if(D){L(i,function(t){if(!e[t]){console.warn("Method `"+t+"` should be implemented"+(e.type?" in "+e.type:"")+".")}})}var t=this;var r=function(){if(!e.$constructor){t.apply(this,arguments)}else{e.$constructor.apply(this,arguments)}};N(r.prototype,e);r.extend=this.extend;r.superCall=Mn;r.superApply=In;M(r,this);r.superClass=t;return r}}var bn=0;function Sn(t){var e=["__\0is_clz",bn++,Math.random().toFixed(3)].join("_");t.prototype[e]=true;if(D){$(!t.isInstance,'The method "is" can not be defined.')}t.isInstance=function(t){return!!(t&&t[e])}}function Mn(t,e){var r=q(arguments,2);return this.superClass.prototype[e].apply(t,r)}function In(t,e,r){return this.superClass.prototype[e].apply(t,r)}function Tn(r,t){t=t||{};var a={};r.registerClass=function(t,e){if(e){_n(e);e=xn(e);if(!e.sub){if(D){if(a[e.main]){console.warn(e.main+" exists.")}}a[e.main]=t}else if(e.sub!==yn){var r=i(e);r[e.sub]=t}}return t};r.getClass=function(t,e,r){var i=a[t];if(i&&i[yn]){i=e?i[e]:null}if(r&&!i){throw new Error(!e?t+"."+"type should be specified.":"Component "+t+"."+(e||"")+" not exists. Load it first.")}return i};r.getClassesByMainType=function(t){t=xn(t);var r=[];var e=a[t.main];if(e&&e[yn]){L(e,function(t,e){e!==yn&&r.push(t)})}else{r.push(e)}return r};r.hasClass=function(t){t=xn(t);return!!a[t.main]};r.getAllClassMainTypes=function(){var r=[];L(a,function(t,e){r.push(e)});return r};r.hasSubTypes=function(t){t=xn(t);var e=a[t.main];return e&&e[yn]};r.parseClassType=xn;function i(t){var e=a[t.main];if(!e||!e[yn]){e=a[t.main]={};e[yn]=true}return e}if(t.registerWhenExtend){var n=r.extend;if(n){r.extend=function(t){var e=n.call(this,t);return r.registerClass(e,t.type)}}}return r}var An=function(s){for(var t=0;t<s.length;t++){if(!s[t][1]){s[t][1]=s[t][0]}}return function(t,e,r){var i={};for(var a=0;a<s.length;a++){var n=s[a][1];if(e&&S(e,n)>=0||r&&S(r,n)<0){continue}var o=t.getShallow(n);if(o!=null){i[s[a][0]]=o}}return i}};var Dn=An([["lineWidth","width"],["stroke","color"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"]]);var Cn={getLineStyle:function(t){var e=Dn(this,t);var r=this.getLineDash(e.lineWidth);r&&(e.lineDash=r);return e},getLineDash:function(t){if(t==null){t=1}var e=this.get("type");var r=Math.max(t,2);var i=t*4;return e==="solid"||e==null?null:e==="dashed"?[i,i]:[r,r]}};var Ln=An([["fill","color"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["opacity"],["shadowColor"]]);var kn={getAreaStyle:function(t,e){return Ln(this,t,e)}};var Pn=Math.pow;var Nn=Math.sqrt;var On=1e-8;var En=1e-4;var Rn=Nn(3);var zn=1/3;var Bn=lt();var Vn=lt();var Gn=lt();function Fn(t){return t>-On&&t<On}function Wn(t){return t>On||t<-On}function Hn(t,e,r,i,a){var n=1-a;return n*n*(n*t+3*a*e)+a*a*(a*i+3*n*r)}function Zn(t,e,r,i,a){var n=1-a;return 3*(((e-t)*n+2*(r-e)*a)*n+(i-r)*a*a)}function Un(t,e,r,i,a,n){var o=i+3*(e-r)-t;var s=3*(r-e*2+t);var l=3*(e-t);var u=t-a;var h=s*s-3*o*l;var f=s*l-9*o*u;var c=l*l-3*s*u;var v=0;if(Fn(h)&&Fn(f)){if(Fn(s)){n[0]=0}else{var d=-l/s;if(d>=0&&d<=1){n[v++]=d}}}else{var p=f*f-4*h*c;if(Fn(p)){var g=f/h;var d=-s/o+g;var m=-g/2;if(d>=0&&d<=1){n[v++]=d}if(m>=0&&m<=1){n[v++]=m}}else if(p>0){var y=Nn(p);var x=h*s+1.5*o*(-f+y);var _=h*s+1.5*o*(-f-y);if(x<0){x=-Pn(-x,zn)}else{x=Pn(x,zn)}if(_<0){_=-Pn(-_,zn)}else{_=Pn(_,zn)}var d=(-s-(x+_))/(3*o);if(d>=0&&d<=1){n[v++]=d}}else{var w=(2*h*s-3*o*f)/(2*Nn(h*h*h));var b=Math.acos(w)/3;var S=Nn(h);var M=Math.cos(b);var d=(-s-2*S*M)/(3*o);var m=(-s+S*(M+Rn*Math.sin(b)))/(3*o);var I=(-s+S*(M-Rn*Math.sin(b)))/(3*o);if(d>=0&&d<=1){n[v++]=d}if(m>=0&&m<=1){n[v++]=m}if(I>=0&&I<=1){n[v++]=I}}}return v}function Xn(t,e,r,i,a){var n=6*r-12*e+6*t;var o=9*e+3*i-3*t-9*r;var s=3*e-3*t;var l=0;if(Fn(o)){if(Wn(n)){var u=-s/n;if(u>=0&&u<=1){a[l++]=u}}}else{var h=n*n-4*o*s;if(Fn(h)){a[0]=-n/(2*o)}else if(h>0){var f=Nn(h);var u=(-n+f)/(2*o);var c=(-n-f)/(2*o);if(u>=0&&u<=1){a[l++]=u}if(c>=0&&c<=1){a[l++]=c}}}return l}function Yn(t,e,r,i,a,n){var o=(e-t)*a+t;var s=(r-e)*a+e;var l=(i-r)*a+r;var u=(s-o)*a+o;var h=(l-s)*a+s;var f=(h-u)*a+u;n[0]=t;n[1]=o;n[2]=u;n[3]=f;n[4]=f;n[5]=h;n[6]=l;n[7]=i}function jn(t,e,r,i,a,n,o,s,l,u,h){var f;var c=.005;var v=Infinity;var d;var p;var g;var m;Bn[0]=l;Bn[1]=u;for(var y=0;y<1;y+=.05){Vn[0]=Hn(t,r,a,o,y);Vn[1]=Hn(e,i,n,s,y);g=At(Bn,Vn);if(g<v){f=y;v=g}}v=Infinity;for(var x=0;x<32;x++){if(c<En){break}d=f-c;p=f+c;Vn[0]=Hn(t,r,a,o,d);Vn[1]=Hn(e,i,n,s,d);g=At(Vn,Bn);if(d>=0&&g<v){f=d;v=g}else{Gn[0]=Hn(t,r,a,o,p);Gn[1]=Hn(e,i,n,s,p);m=At(Gn,Bn);if(p<=1&&m<v){f=p;v=m}else{c*=.5}}}if(h){h[0]=Hn(t,r,a,o,f);h[1]=Hn(e,i,n,s,f)}return Nn(v)}function qn(t,e,r,i){var a=1-i;return a*(a*t+2*i*e)+i*i*r}function Kn(t,e,r,i){return 2*((1-i)*(e-t)+i*(r-e))}function $n(t,e,r,i,a){var n=t-2*e+r;var o=2*(e-t);var s=t-i;var l=0;if(Fn(n)){if(Wn(o)){var u=-s/o;if(u>=0&&u<=1){a[l++]=u}}}else{var h=o*o-4*n*s;if(Fn(h)){var u=-o/(2*n);if(u>=0&&u<=1){a[l++]=u}}else if(h>0){var f=Nn(h);var u=(-o+f)/(2*n);var c=(-o-f)/(2*n);if(u>=0&&u<=1){a[l++]=u}if(c>=0&&c<=1){a[l++]=c}}}return l}function Jn(t,e,r){var i=t+r-2*e;if(i===0){return.5}else{return(t-e)/i}}function Qn(t,e,r,i,a){var n=(e-t)*i+t;var o=(r-e)*i+e;var s=(o-n)*i+n;a[0]=t;a[1]=n;a[2]=s;a[3]=s;a[4]=o;a[5]=r}function to(t,e,r,i,a,n,o,s,l){var u;var h=.005;var f=Infinity;Bn[0]=o;Bn[1]=s;for(var c=0;c<1;c+=.05){Vn[0]=qn(t,r,a,c);Vn[1]=qn(e,i,n,c);var v=At(Bn,Vn);if(v<f){u=c;f=v}}f=Infinity;for(var d=0;d<32;d++){if(h<En){break}var p=u-h;var g=u+h;Vn[0]=qn(t,r,a,p);Vn[1]=qn(e,i,n,p);var v=At(Vn,Bn);if(p>=0&&v<f){u=p;f=v}else{Gn[0]=qn(t,r,a,g);Gn[1]=qn(e,i,n,g);var m=At(Gn,Bn);if(g<=1&&m<f){u=g;f=m}else{h*=.5}}}if(l){l[0]=qn(t,r,a,u);l[1]=qn(e,i,n,u)}return Nn(f)}var eo=Math.min;var ro=Math.max;var io=Math.sin;var ao=Math.cos;var no=Math.PI*2;var oo=lt();var so=lt();var lo=lt();function uo(t,e,r){if(t.length===0){return}var i=t[0];var a=i[0];var n=i[0];var o=i[1];var s=i[1];var l;for(l=1;l<t.length;l++){i=t[l];a=eo(a,i[0]);n=ro(n,i[0]);o=eo(o,i[1]);s=ro(s,i[1])}e[0]=a;e[1]=o;r[0]=n;r[1]=s}function ho(t,e,r,i,a,n){a[0]=eo(t,r);a[1]=eo(e,i);n[0]=ro(t,r);n[1]=ro(e,i)}var fo=[];var co=[];function vo(t,e,r,i,a,n,o,s,l,u){var h=Xn;var f=Hn;var c;var v=h(t,r,a,o,fo);l[0]=Infinity;l[1]=Infinity;u[0]=-Infinity;u[1]=-Infinity;for(c=0;c<v;c++){var d=f(t,r,a,o,fo[c]);l[0]=eo(d,l[0]);u[0]=ro(d,u[0])}v=h(e,i,n,s,co);for(c=0;c<v;c++){var p=f(e,i,n,s,co[c]);l[1]=eo(p,l[1]);u[1]=ro(p,u[1])}l[0]=eo(t,l[0]);u[0]=ro(t,u[0]);l[0]=eo(o,l[0]);u[0]=ro(o,u[0]);l[1]=eo(e,l[1]);u[1]=ro(e,u[1]);l[1]=eo(s,l[1]);u[1]=ro(s,u[1])}function po(t,e,r,i,a,n,o,s){var l=Jn;var u=qn;var h=ro(eo(l(t,r,a),1),0);var f=ro(eo(l(e,i,n),1),0);var c=u(t,r,a,h);var v=u(e,i,n,f);o[0]=eo(t,a,c);o[1]=eo(e,n,v);s[0]=ro(t,a,c);s[1]=ro(e,n,v)}function go(t,e,r,i,a,n,o,s,l){var u=kt;var h=Pt;var f=Math.abs(a-n);if(f%no<1e-4&&f>1e-4){s[0]=t-r;s[1]=e-i;l[0]=t+r;l[1]=e+i;return}oo[0]=ao(a)*r+t;oo[1]=io(a)*i+e;so[0]=ao(n)*r+t;so[1]=io(n)*i+e;u(s,oo,so);h(l,oo,so);a=a%no;if(a<0){a=a+no}n=n%no;if(n<0){n=n+no}if(a>n&&!o){n+=no}else if(a<n&&o){a+=no}if(o){var c=n;n=a;a=c}for(var v=0;v<n;v+=Math.PI/2){if(v>a){lo[0]=ao(v)*r+t;lo[1]=io(v)*i+e;u(s,lo,s);h(l,lo,l)}}}var mo={M:1,L:2,C:3,Q:4,A:5,Z:6,R:7};var yo=[];var xo=[];var _o=[];var wo=[];var bo=Math.min;var So=Math.max;var Mo=Math.cos;var Io=Math.sin;var To=Math.sqrt;var Ao=Math.abs;var Do=typeof Float32Array!=="undefined";var Co=function(t){this._saveData=!(t||false);if(this._saveData){this.data=[]}this._ctx=null};Co.prototype={constructor:Co,_xi:0,_yi:0,_x0:0,_y0:0,_ux:0,_uy:0,_len:0,_lineDash:null,_dashOffset:0,_dashIdx:0,_dashSum:0,setScale:function(t,e){this._ux=Ao(1/br/t)||0;this._uy=Ao(1/br/e)||0},getContext:function(){return this._ctx},beginPath:function(t){this._ctx=t;t&&t.beginPath();t&&(this.dpr=t.dpr);if(this._saveData){this._len=0}if(this._lineDash){this._lineDash=null;this._dashOffset=0}return this},moveTo:function(t,e){this.addData(mo.M,t,e);this._ctx&&this._ctx.moveTo(t,e);this._x0=t;this._y0=e;this._xi=t;this._yi=e;return this},lineTo:function(t,e){var r=Ao(t-this._xi)>this._ux||Ao(e-this._yi)>this._uy||this._len<5;this.addData(mo.L,t,e);if(this._ctx&&r){this._needsDash()?this._dashedLineTo(t,e):this._ctx.lineTo(t,e)}if(r){this._xi=t;this._yi=e}return this},bezierCurveTo:function(t,e,r,i,a,n){this.addData(mo.C,t,e,r,i,a,n);if(this._ctx){this._needsDash()?this._dashedBezierTo(t,e,r,i,a,n):this._ctx.bezierCurveTo(t,e,r,i,a,n)}this._xi=a;this._yi=n;return this},quadraticCurveTo:function(t,e,r,i){this.addData(mo.Q,t,e,r,i);if(this._ctx){this._needsDash()?this._dashedQuadraticTo(t,e,r,i):this._ctx.quadraticCurveTo(t,e,r,i)}this._xi=r;this._yi=i;return this},arc:function(t,e,r,i,a,n){this.addData(mo.A,t,e,r,r,i,a-i,0,n?0:1);this._ctx&&this._ctx.arc(t,e,r,i,a,n);this._xi=Mo(a)*r+t;this._yi=Io(a)*r+e;return this},arcTo:function(t,e,r,i,a){if(this._ctx){this._ctx.arcTo(t,e,r,i,a)}return this},rect:function(t,e,r,i){this._ctx&&this._ctx.rect(t,e,r,i);this.addData(mo.R,t,e,r,i);return this},closePath:function(){this.addData(mo.Z);var t=this._ctx;var e=this._x0;var r=this._y0;if(t){this._needsDash()&&this._dashedLineTo(e,r);t.closePath()}this._xi=e;this._yi=r;return this},fill:function(t){t&&t.fill();this.toStatic()},stroke:function(t){t&&t.stroke();this.toStatic()},setLineDash:function(t){if(t instanceof Array){this._lineDash=t;this._dashIdx=0;var e=0;for(var r=0;r<t.length;r++){e+=t[r]}this._dashSum=e}return this},setLineDashOffset:function(t){this._dashOffset=t;return this},len:function(){return this._len},setData:function(t){var e=t.length;if(!(this.data&&this.data.length===e)&&Do){this.data=new Float32Array(e)}for(var r=0;r<e;r++){this.data[r]=t[r]}this._len=e},appendPath:function(t){if(!(t instanceof Array)){t=[t]}var e=t.length;var r=0;var i=this._len;for(var a=0;a<e;a++){r+=t[a].len()}if(Do&&this.data instanceof Float32Array){this.data=new Float32Array(i+r)}for(var a=0;a<e;a++){var n=t[a].data;for(var o=0;o<n.length;o++){this.data[i++]=n[o]}}this._len=i},addData:function(t){if(!this._saveData){return}var e=this.data;if(this._len+arguments.length>e.length){this._expandData();e=this.data}for(var r=0;r<arguments.length;r++){e[this._len++]=arguments[r]}this._prevCmd=t},_expandData:function(){if(!(this.data instanceof Array)){var t=[];for(var e=0;e<this._len;e++){t[e]=this.data[e]}this.data=t}},_needsDash:function(){return this._lineDash},_dashedLineTo:function(t,e){var r=this._dashSum;var i=this._dashOffset;var a=this._lineDash;var n=this._ctx;var o=this._xi;var s=this._yi;var l=t-o;var u=e-s;var h=To(l*l+u*u);var f=o;var c=s;var v;var d=a.length;var p;l/=h;u/=h;if(i<0){i=r+i}i%=r;f-=i*l;c-=i*u;while(l>0&&f<=t||l<0&&f>=t||l===0&&(u>0&&c<=e||u<0&&c>=e)){p=this._dashIdx;v=a[p];f+=l*v;c+=u*v;this._dashIdx=(p+1)%d;if(l>0&&f<o||l<0&&f>o||u>0&&c<s||u<0&&c>s){continue}n[p%2?"moveTo":"lineTo"](l>=0?bo(f,t):So(f,t),u>=0?bo(c,e):So(c,e))}l=f-t;u=c-e;this._dashOffset=-To(l*l+u*u)},_dashedBezierTo:function(t,e,r,i,a,n){var o=this._dashSum;var s=this._dashOffset;var l=this._lineDash;var u=this._ctx;var h=this._xi;var f=this._yi;var c;var v;var d;var p=Hn;var g=0;var m=this._dashIdx;var y=l.length;var x;var _;var w=0;if(s<0){s=o+s}s%=o;for(c=0;c<1;c+=.1){v=p(h,t,r,a,c+.1)-p(h,t,r,a,c);d=p(f,e,i,n,c+.1)-p(f,e,i,n,c);g+=To(v*v+d*d)}for(;m<y;m++){w+=l[m];if(w>s){break}}c=(w-s)/g;while(c<=1){x=p(h,t,r,a,c);_=p(f,e,i,n,c);m%2?u.moveTo(x,_):u.lineTo(x,_);c+=l[m]/g;m=(m+1)%y}m%2!==0&&u.lineTo(a,n);v=a-x;d=n-_;this._dashOffset=-To(v*v+d*d)},_dashedQuadraticTo:function(t,e,r,i){var a=r;var n=i;r=(r+2*t)/3;i=(i+2*e)/3;t=(this._xi+2*t)/3;e=(this._yi+2*e)/3;this._dashedBezierTo(t,e,r,i,a,n)},toStatic:function(){var t=this.data;if(t instanceof Array){t.length=this._len;if(Do){this.data=new Float32Array(t)}}},getBoundingRect:function(){yo[0]=yo[1]=_o[0]=_o[1]=Number.MAX_VALUE;xo[0]=xo[1]=wo[0]=wo[1]=-Number.MAX_VALUE;var t=this.data;var e=0;var r=0;var i=0;var a=0;for(var n=0;n<t.length;){var o=t[n++];if(n===1){e=t[n];r=t[n+1];i=e;a=r}switch(o){case mo.M:i=t[n++];a=t[n++];e=i;r=a;_o[0]=i;_o[1]=a;wo[0]=i;wo[1]=a;break;case mo.L:ho(e,r,t[n],t[n+1],_o,wo);e=t[n++];r=t[n++];break;case mo.C:vo(e,r,t[n++],t[n++],t[n++],t[n++],t[n],t[n+1],_o,wo);e=t[n++];r=t[n++];break;case mo.Q:po(e,r,t[n++],t[n++],t[n],t[n+1],_o,wo);e=t[n++];r=t[n++];break;case mo.A:var s=t[n++];var l=t[n++];var u=t[n++];var h=t[n++];var f=t[n++];var c=t[n++]+f;n+=1;var v=1-t[n++];if(n===1){i=Mo(f)*u+s;a=Io(f)*h+l}go(s,l,u,h,f,c,v,_o,wo);e=Mo(c)*u+s;r=Io(c)*h+l;break;case mo.R:i=e=t[n++];a=r=t[n++];var d=t[n++];var p=t[n++];ho(i,a,i+d,a+p,_o,wo);break;case mo.Z:e=i;r=a;break}kt(yo,yo,_o);Pt(xo,xo,wo)}if(n===0){yo[0]=yo[1]=xo[0]=xo[1]=0}return new Nr(yo[0],yo[1],xo[0]-yo[0],xo[1]-yo[1])},rebuildPath:function(t){var e=this.data;var r,i;var a,n;var o,s;var l=this._ux;var u=this._uy;var h=this._len;for(var f=0;f<h;){var c=e[f++];if(f===1){a=e[f];n=e[f+1];r=a;i=n}switch(c){case mo.M:r=a=e[f++];i=n=e[f++];t.moveTo(a,n);break;case mo.L:o=e[f++];s=e[f++];if(Ao(o-a)>l||Ao(s-n)>u||f===h-1){t.lineTo(o,s);a=o;n=s}break;case mo.C:t.bezierCurveTo(e[f++],e[f++],e[f++],e[f++],e[f++],e[f++]);a=e[f-2];n=e[f-1];break;case mo.Q:t.quadraticCurveTo(e[f++],e[f++],e[f++],e[f++]);a=e[f-2];n=e[f-1];break;case mo.A:var v=e[f++];var d=e[f++];var p=e[f++];var g=e[f++];var m=e[f++];var y=e[f++];var x=e[f++];var _=e[f++];var w=p>g?p:g;var b=p>g?1:p/g;var S=p>g?g/p:1;var M=Math.abs(p-g)>.001;var I=m+y;if(M){t.translate(v,d);t.rotate(x);t.scale(b,S);t.arc(0,0,w,m,I,1-_);t.scale(1/b,1/S);t.rotate(-x);t.translate(-v,-d)}else{t.arc(v,d,w,m,I,1-_)}if(f===1){r=Mo(m)*p+v;i=Io(m)*g+d}a=Mo(I)*p+v;n=Io(I)*g+d;break;case mo.R:r=a=e[f];i=n=e[f+1];t.rect(e[f++],e[f++],e[f++],e[f++]);break;case mo.Z:t.closePath();a=r;n=i}}}};Co.CMD=mo;function Lo(t,e,r,i,a,n,o){if(a===0){return false}var s=a;var l=0;var u=t;if(o>e+s&&o>i+s||o<e-s&&o<i-s||n>t+s&&n>r+s||n<t-s&&n<r-s){return false}if(t!==r){l=(e-i)/(t-r);u=(t*i-r*e)/(t-r)}else{return Math.abs(n-t)<=s/2}var h=l*n-o+u;var f=h*h/(l*l+1);return f<=s/2*s/2}function ko(t,e,r,i,a,n,o,s,l,u,h){if(l===0){return false}var f=l;if(h>e+f&&h>i+f&&h>n+f&&h>s+f||h<e-f&&h<i-f&&h<n-f&&h<s-f||u>t+f&&u>r+f&&u>a+f&&u>o+f||u<t-f&&u<r-f&&u<a-f&&u<o-f){return false}var c=jn(t,e,r,i,a,n,o,s,u,h,null);return c<=f/2}function Po(t,e,r,i,a,n,o,s,l){if(o===0){return false}var u=o;if(l>e+u&&l>i+u&&l>n+u||l<e-u&&l<i-u&&l<n-u||s>t+u&&s>r+u&&s>a+u||s<t-u&&s<r-u&&s<a-u){return false}var h=to(t,e,r,i,a,n,s,l,null);return h<=u/2}var No=Math.PI*2;function Oo(t){t%=No;if(t<0){t+=No}return t}var Eo=Math.PI*2;function Ro(t,e,r,i,a,n,o,s,l){if(o===0){return false}var u=o;s-=t;l-=e;var h=Math.sqrt(s*s+l*l);if(h-u>r||h+u<r){return false}if(Math.abs(i-a)%Eo<1e-4){return true}if(n){var f=i;i=Oo(a);a=Oo(f)}else{i=Oo(i);a=Oo(a)}if(i>a){a+=Eo}var c=Math.atan2(l,s);if(c<0){c+=Eo}return c>=i&&c<=a||c+Eo>=i&&c+Eo<=a}function zo(t,e,r,i,a,n){if(n>e&&n>i||n<e&&n<i){return 0}if(i===e){return 0}var o=i<e?1:-1;var s=(n-e)/(i-e);if(s===1||s===0){o=i<e?.5:-.5}var l=s*(r-t)+t;return l===a?Infinity:l>a?o:0}var Bo=Co.CMD;var Vo=Math.PI*2;var Go=1e-4;function Fo(t,e){return Math.abs(t-e)<Go}var Wo=[-1,-1,-1];var Ho=[-1,-1];function Zo(){var t=Ho[0];Ho[0]=Ho[1];Ho[1]=t}function Uo(t,e,r,i,a,n,o,s,l,u){if(u>e&&u>i&&u>n&&u>s||u<e&&u<i&&u<n&&u<s){return 0}var h=Un(e,i,n,s,u,Wo);if(h===0){return 0}else{var f=0;var c=-1;var v;var d;for(var p=0;p<h;p++){var g=Wo[p];var m=g===0||g===1?.5:1;var y=Hn(t,r,a,o,g);if(y<l){continue}if(c<0){c=Xn(e,i,n,s,Ho);if(Ho[1]<Ho[0]&&c>1){Zo()}v=Hn(e,i,n,s,Ho[0]);if(c>1){d=Hn(e,i,n,s,Ho[1])}}if(c===2){if(g<Ho[0]){f+=v<e?m:-m}else if(g<Ho[1]){f+=d<v?m:-m}else{f+=s<d?m:-m}}else{if(g<Ho[0]){f+=v<e?m:-m}else{f+=s<v?m:-m}}}return f}}function Xo(t,e,r,i,a,n,o,s){if(s>e&&s>i&&s>n||s<e&&s<i&&s<n){return 0}var l=$n(e,i,n,s,Wo);if(l===0){return 0}else{var u=Jn(e,i,n);if(u>=0&&u<=1){var h=0;var f=qn(e,i,n,u);for(var c=0;c<l;c++){var v=Wo[c]===0||Wo[c]===1?.5:1;var d=qn(t,r,a,Wo[c]);if(d<o){continue}if(Wo[c]<u){h+=f<e?v:-v}else{h+=n<f?v:-v}}return h}else{var v=Wo[0]===0||Wo[0]===1?.5:1;var d=qn(t,r,a,Wo[0]);if(d<o){return 0}return n<e?v:-v}}}function Yo(t,e,r,i,a,n,o,s){s-=e;if(s>r||s<-r){return 0}var l=Math.sqrt(r*r-s*s);Wo[0]=-l;Wo[1]=l;var u=Math.abs(i-a);if(u<1e-4){return 0}if(u%Vo<1e-4){i=0;a=Vo;var h=n?1:-1;if(o>=Wo[0]+t&&o<=Wo[1]+t){return h}else{return 0}}if(n){var l=i;i=Oo(a);a=Oo(l)}else{i=Oo(i);a=Oo(a)}if(i>a){a+=Vo}var f=0;for(var c=0;c<2;c++){var v=Wo[c];if(v+t>o){var d=Math.atan2(s,v);var h=n?1:-1;if(d<0){d=Vo+d}if(d>=i&&d<=a||d+Vo>=i&&d+Vo<=a){if(d>Math.PI/2&&d<Math.PI*1.5){h=-h}f+=h}}}return f}function jo(t,e,r,i,a){var n=0;var o=0;var s=0;var l=0;var u=0;for(var h=0;h<t.length;){var f=t[h++];if(f===Bo.M&&h>1){if(!r){n+=zo(o,s,l,u,i,a)}}if(h===1){o=t[h];s=t[h+1];l=o;u=s}switch(f){case Bo.M:l=t[h++];u=t[h++];o=l;s=u;break;case Bo.L:if(r){if(Lo(o,s,t[h],t[h+1],e,i,a)){return true}}else{n+=zo(o,s,t[h],t[h+1],i,a)||0}o=t[h++];s=t[h++];break;case Bo.C:if(r){if(ko(o,s,t[h++],t[h++],t[h++],t[h++],t[h],t[h+1],e,i,a)){return true}}else{n+=Uo(o,s,t[h++],t[h++],t[h++],t[h++],t[h],t[h+1],i,a)||0}o=t[h++];s=t[h++];break;case Bo.Q:if(r){if(Po(o,s,t[h++],t[h++],t[h],t[h+1],e,i,a)){return true}}else{n+=Xo(o,s,t[h++],t[h++],t[h],t[h+1],i,a)||0}o=t[h++];s=t[h++];break;case Bo.A:var c=t[h++];var v=t[h++];var d=t[h++];var p=t[h++];var g=t[h++];var m=t[h++];h+=1;var y=1-t[h++];var x=Math.cos(g)*d+c;var _=Math.sin(g)*p+v;if(h>1){n+=zo(o,s,x,_,i,a)}else{l=x;u=_}var w=(i-c)*p/d+c;if(r){if(Ro(c,v,p,g,g+m,y,e,w,a)){return true}}else{n+=Yo(c,v,p,g,g+m,y,w,a)}o=Math.cos(g+m)*d+c;s=Math.sin(g+m)*p+v;break;case Bo.R:l=o=t[h++];u=s=t[h++];var b=t[h++];var S=t[h++];var x=l+b;var _=u+S;if(r){if(Lo(l,u,x,u,e,i,a)||Lo(x,u,x,_,e,i,a)||Lo(x,_,l,_,e,i,a)||Lo(l,_,l,u,e,i,a)){return true}}else{n+=zo(x,u,x,_,i,a);n+=zo(l,_,l,u,i,a)}break;case Bo.Z:if(r){if(Lo(o,s,l,u,e,i,a)){return true}}else{n+=zo(o,s,l,u,i,a)}o=l;s=u;break}}if(!r&&!Fo(s,u)){n+=zo(o,s,l,u,i,a)||0}return n!==0}function qo(t,e,r){return jo(t,0,false,e,r)}function Ko(t,e,r,i){return jo(t,e,true,r,i)}var $o=ai.prototype.getCanvasPattern;var Jo=Math.abs;var Qo=new Co(true);function ts(t){ua.call(this,t);this.path=null}ts.prototype={constructor:ts,type:"path",__dirtyPath:true,strokeContainThreshold:5,subPixelOptimize:false,brush:function(t,e){var r=this.style;var i=this.path||Qo;var a=r.hasStroke();var n=r.hasFill();var o=r.fill;var s=r.stroke;var l=n&&!!o.colorStops;var u=a&&!!s.colorStops;var h=n&&!!o.image;var f=a&&!!s.image;r.bind(t,this,e);this.setTransform(t);if(this.__dirty){var c;if(l){c=c||this.getBoundingRect();this._fillGradient=r.getGradient(t,o,c)}if(u){c=c||this.getBoundingRect();this._strokeGradient=r.getGradient(t,s,c)}}if(l){t.fillStyle=this._fillGradient}else if(h){t.fillStyle=$o.call(o,t)}if(u){t.strokeStyle=this._strokeGradient}else if(f){t.strokeStyle=$o.call(s,t)}var v=r.lineDash;var d=r.lineDashOffset;var p=!!t.setLineDash;var g=this.getGlobalScale();i.setScale(g[0],g[1]);if(this.__dirtyPath||v&&!p&&a){i.beginPath(t);if(v&&!p){i.setLineDash(v);i.setLineDashOffset(d)}this.buildPath(i,this.shape,false);if(this.path){this.__dirtyPath=false}}else{t.beginPath();this.path.rebuildPath(t)}if(n){if(r.fillOpacity!=null){var m=t.globalAlpha;t.globalAlpha=r.fillOpacity*r.opacity;i.fill(t);t.globalAlpha=m}else{i.fill(t)}}if(v&&p){t.setLineDash(v);t.lineDashOffset=d}if(a){if(r.strokeOpacity!=null){var m=t.globalAlpha;t.globalAlpha=r.strokeOpacity*r.opacity;i.stroke(t);t.globalAlpha=m}else{i.stroke(t)}}if(v&&p){t.setLineDash([])}if(r.text!=null){this.restoreTransform(t);this.drawRectText(t,this.getBoundingRect())}},buildPath:function(t,e,r){},createPathProxy:function(){this.path=new Co},getBoundingRect:function(){var t=this._rect;var e=this.style;var r=!t;if(r){var i=this.path;if(!i){i=this.path=new Co}if(this.__dirtyPath){i.beginPath();this.buildPath(i,this.shape,false)}t=i.getBoundingRect()}this._rect=t;if(e.hasStroke()){var a=this._rectWithStroke||(this._rectWithStroke=t.clone());if(this.__dirty||r){a.copy(t);var n=e.lineWidth;var o=e.strokeNoScale?this.getLineScale():1;if(!e.hasFill()){n=Math.max(n,this.strokeContainThreshold||4)}if(o>1e-10){a.width+=n/o;a.height+=n/o;a.x-=n/o/2;a.y-=n/o/2}}return a}return t},contain:function(t,e){var r=this.transformCoordToLocal(t,e);var i=this.getBoundingRect();var a=this.style;t=r[0];e=r[1];if(i.contain(t,e)){var n=this.path.data;if(a.hasStroke()){var o=a.lineWidth;var s=a.strokeNoScale?this.getLineScale():1;if(s>1e-10){if(!a.hasFill()){o=Math.max(o,this.strokeContainThreshold)}if(Ko(n,o/s,t,e)){return true}}}if(a.hasFill()){return qo(n,t,e)}}return false},dirty:function(t){if(t==null){t=true}if(t){this.__dirtyPath=t;this._rect=null}this.__dirty=this.__dirtyText=true;this.__zr&&this.__zr.refresh();if(this.__clipTarget){this.__clipTarget.dirty()}},animateShape:function(t){return this.animate("shape",t)},attrKV:function(t,e){if(t==="shape"){this.setShape(e);this.__dirtyPath=true;this._rect=null}else{ua.prototype.attrKV.call(this,t,e)}},setShape:function(t,e){var r=this.shape;if(r){if(F(t)){for(var i in t){if(t.hasOwnProperty(i)){r[i]=t[i]}}}else{r[t]=e}this.dirty(true)}return this},getLineScale:function(){var t=this.transform;return t&&Jo(t[0]-1)>1e-10&&Jo(t[3]-1)>1e-10?Math.sqrt(Jo(t[0]*t[3]-t[2]*t[1])):1}};ts.extend=function(a){var t=function(t){ts.call(this,t);if(a.style){this.style.extendFrom(a.style,false)}var e=a.shape;if(e){this.shape=this.shape||{};var r=this.shape;for(var i in e){if(!r.hasOwnProperty(i)&&e.hasOwnProperty(i)){r[i]=e[i]}}}a.init&&a.init.call(this,t)};M(t,ts);for(var e in a){if(e!=="style"&&e!=="shape"){t.prototype[e]=a[e]}}return t};M(ts,ua);var es=Co.CMD;var rs=[[],[],[]];var is=Math.sqrt;var as=Math.atan2;var ns=function(t,e){var r=t.data;var i;var a;var n;var o;var s;var l;var u=es.M;var h=es.C;var f=es.L;var c=es.R;var v=es.A;var d=es.Q;for(n=0,o=0;n<r.length;){i=r[n++];o=n;a=0;switch(i){case u:a=1;break;case f:a=1;break;case h:a=3;break;case d:a=2;break;case v:var p=e[4];var g=e[5];var m=is(e[0]*e[0]+e[1]*e[1]);var y=is(e[2]*e[2]+e[3]*e[3]);var x=as(-e[1]/y,e[0]/m);r[n]*=m;r[n++]+=p;r[n]*=y;r[n++]+=g;r[n++]*=m;r[n++]*=y;r[n++]+=x;r[n++]+=x;n+=2;o=n;break;case c:l[0]=r[n++];l[1]=r[n++];Lt(l,l,e);r[o++]=l[0];r[o++]=l[1];l[0]+=r[n++];l[1]+=r[n++];Lt(l,l,e);r[o++]=l[0];r[o++]=l[1]}for(s=0;s<a;s++){var l=rs[s];l[0]=r[n++];l[1]=r[n++];Lt(l,l,e);r[o++]=l[0];r[o++]=l[1]}}};var os=Math.sqrt;var ss=Math.sin;var ls=Math.cos;var us=Math.PI;var hs=function(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])};var fs=function(t,e){return(t[0]*e[0]+t[1]*e[1])/(hs(t)*hs(e))};var cs=function(t,e){return(t[0]*e[1]<t[1]*e[0]?-1:1)*Math.acos(fs(t,e))};function vs(t,e,r,i,a,n,o,s,l,u,h){var f=l*(us/180);var c=ls(f)*(t-r)/2+ss(f)*(e-i)/2;var v=-1*ss(f)*(t-r)/2+ls(f)*(e-i)/2;var d=c*c/(o*o)+v*v/(s*s);if(d>1){o*=os(d);s*=os(d)}var p=(a===n?-1:1)*os((o*o*(s*s)-o*o*(v*v)-s*s*(c*c))/(o*o*(v*v)+s*s*(c*c)))||0;var g=p*o*v/s;var m=p*-s*c/o;var y=(t+r)/2+ls(f)*g-ss(f)*m;var x=(e+i)/2+ss(f)*g+ls(f)*m;var _=cs([1,0],[(c-g)/o,(v-m)/s]);var w=[(c-g)/o,(v-m)/s];var b=[(-1*c-g)/o,(-1*v-m)/s];var S=cs(w,b);if(fs(w,b)<=-1){S=us}if(fs(w,b)>=1){S=0}if(n===0&&S>0){S=S-2*us}if(n===1&&S<0){S=S+2*us}h.addData(u,y,x,o,s,_,S,f,n)}var ds=/([mlvhzcqtsa])([^mlvhzcqtsa]*)/gi;var ps=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;function gs(t){if(!t){return new Co}var e=0;var r=0;var i=e;var a=r;var n;var o=new Co;var s=Co.CMD;var l=t.match(ds);for(var u=0;u<l.length;u++){var h=l[u];var f=h.charAt(0);var c;var v=h.match(ps)||[];var d=v.length;for(var p=0;p<d;p++){v[p]=parseFloat(v[p])}var g=0;while(g<d){var m;var y;var x;var _;var w;var b;var S;var M=e;var I=r;switch(f){case"l":e+=v[g++];r+=v[g++];c=s.L;o.addData(c,e,r);break;case"L":e=v[g++];r=v[g++];c=s.L;o.addData(c,e,r);break;case"m":e+=v[g++];r+=v[g++];c=s.M;o.addData(c,e,r);i=e;a=r;f="l";break;case"M":e=v[g++];r=v[g++];c=s.M;o.addData(c,e,r);i=e;a=r;f="L";break;case"h":e+=v[g++];c=s.L;o.addData(c,e,r);break;case"H":e=v[g++];c=s.L;o.addData(c,e,r);break;case"v":r+=v[g++];c=s.L;o.addData(c,e,r);break;case"V":r=v[g++];c=s.L;o.addData(c,e,r);break;case"C":c=s.C;o.addData(c,v[g++],v[g++],v[g++],v[g++],v[g++],v[g++]);e=v[g-2];r=v[g-1];break;case"c":c=s.C;o.addData(c,v[g++]+e,v[g++]+r,v[g++]+e,v[g++]+r,v[g++]+e,v[g++]+r);e+=v[g-2];r+=v[g-1];break;case"S":m=e;y=r;var T=o.len();var A=o.data;if(n===s.C){m+=e-A[T-4];y+=r-A[T-3]}c=s.C;M=v[g++];I=v[g++];e=v[g++];r=v[g++];o.addData(c,m,y,M,I,e,r);break;case"s":m=e;y=r;var T=o.len();var A=o.data;if(n===s.C){m+=e-A[T-4];y+=r-A[T-3]}c=s.C;M=e+v[g++];I=r+v[g++];e+=v[g++];r+=v[g++];o.addData(c,m,y,M,I,e,r);break;case"Q":M=v[g++];I=v[g++];e=v[g++];r=v[g++];c=s.Q;o.addData(c,M,I,e,r);break;case"q":M=v[g++]+e;I=v[g++]+r;e+=v[g++];r+=v[g++];c=s.Q;o.addData(c,M,I,e,r);break;case"T":m=e;y=r;var T=o.len();var A=o.data;if(n===s.Q){m+=e-A[T-4];y+=r-A[T-3]}e=v[g++];r=v[g++];c=s.Q;o.addData(c,m,y,e,r);break;case"t":m=e;y=r;var T=o.len();var A=o.data;if(n===s.Q){m+=e-A[T-4];y+=r-A[T-3]}e+=v[g++];r+=v[g++];c=s.Q;o.addData(c,m,y,e,r);break;case"A":x=v[g++];_=v[g++];w=v[g++];b=v[g++];S=v[g++];M=e,I=r;e=v[g++];r=v[g++];c=s.A;vs(M,I,e,r,b,S,x,_,w,c,o);break;case"a":x=v[g++];_=v[g++];w=v[g++];b=v[g++];S=v[g++];M=e,I=r;e+=v[g++];r+=v[g++];c=s.A;vs(M,I,e,r,b,S,x,_,w,c,o);break}}if(f==="z"||f==="Z"){c=s.Z;o.addData(c);e=i;r=a}n=c}o.toStatic();return o}function ms(t,e){var r=gs(t);e=e||{};e.buildPath=function(t){if(t.setData){t.setData(r.data);var e=t.getContext();if(e){t.rebuildPath(e)}}else{var e=t;r.rebuildPath(e)}};e.applyTransform=function(t){ns(r,t);this.dirty(true)};return e}function ys(t,e){return new ts(ms(t,e))}function xs(t,e){return ts.extend(ms(t,e))}function _s(t,e){var r=[];var i=t.length;for(var a=0;a<i;a++){var n=t[a];if(!n.path){n.createPathProxy()}if(n.__dirtyPath){n.buildPath(n.path,n.shape,true)}r.push(n.path)}var o=new ts(e);o.createPathProxy();o.buildPath=function(t){t.appendPath(r);var e=t.getContext();if(e){t.rebuildPath(e)}};return o}var ws=function(t){ua.call(this,t)};ws.prototype={constructor:ws,type:"text",brush:function(t,e){var r=this.style;this.__dirty&&Hi(r,true);r.fill=r.stroke=r.shadowBlur=r.shadowColor=r.shadowOffsetX=r.shadowOffsetY=null;var i=r.text;i!=null&&(i+="");if(!oa(i,r)){t.__attrCachedBy=qr.NONE;return}this.setTransform(t);Ui(this,t,i,r,null,e);this.restoreTransform(t)},getBoundingRect:function(){var t=this.style;this.__dirty&&Hi(t,true);if(!this._rect){var e=t.text;e!=null?e+="":e="";var r=bi(t.text+"",t.font,t.textAlign,t.textVerticalAlign,t.textPadding,t.rich);r.x+=t.x||0;r.y+=t.y||0;if(ra(t.textStroke,t.textStrokeWidth)){var i=t.textStrokeWidth;r.x-=i/2;r.y-=i/2;r.width+=i;r.height+=i}this._rect=r}return this._rect}};M(ws,ua);var bs=ts.extend({type:"circle",shape:{cx:0,cy:0,r:0},buildPath:function(t,e,r){if(r){t.moveTo(e.cx+e.r,e.cy)}t.arc(e.cx,e.cy,e.r,0,Math.PI*2,true)}});var Ss=[["shadowBlur",0],["shadowColor","#000"],["shadowOffsetX",0],["shadowOffsetY",0]];var Ms=function(l){return y.browser.ie&&y.browser.version>=11?function(){var t=this.__clipPaths;var e=this.style;var r;if(t){for(var i=0;i<t.length;i++){var a=t[i];var n=a&&a.shape;var o=a&&a.type;if(n&&(o==="sector"&&n.startAngle===n.endAngle||o==="rect"&&(!n.width||!n.height))){for(var s=0;s<Ss.length;s++){Ss[s][2]=e[Ss[s][0]];e[Ss[s][0]]=Ss[s][1]}r=true;break}}}l.apply(this,arguments);if(r){for(var s=0;s<Ss.length;s++){e[Ss[s][0]]=Ss[s][2]}}}:l};var Is=ts.extend({type:"sector",shape:{cx:0,cy:0,r0:0,r:0,startAngle:0,endAngle:Math.PI*2,clockwise:true},brush:Ms(ts.prototype.brush),buildPath:function(t,e){var r=e.cx;var i=e.cy;var a=Math.max(e.r0||0,0);var n=Math.max(e.r,0);var o=e.startAngle;var s=e.endAngle;var l=e.clockwise;var u=Math.cos(o);var h=Math.sin(o);t.moveTo(u*a+r,h*a+i);t.lineTo(u*n+r,h*n+i);t.arc(r,i,n,o,s,!l);t.lineTo(Math.cos(s)*a+r,Math.sin(s)*a+i);if(a!==0){t.arc(r,i,a,s,o,l)}t.closePath()}});var Ts=ts.extend({type:"ring",shape:{cx:0,cy:0,r:0,r0:0},buildPath:function(t,e){var r=e.cx;var i=e.cy;var a=Math.PI*2;t.moveTo(r+e.r,i);t.arc(r,i,e.r,0,a,false);t.moveTo(r+e.r0,i);t.arc(r,i,e.r0,0,a,true)}});function As(t,e,r,i,a,n,o){var s=(r-t)*.5;var l=(i-e)*.5;return(2*(e-r)+s+l)*o+(-3*(e-r)-2*s-l)*n+s*a+e}var Ds=function(t,e){var r=t.length;var i=[];var a=0;for(var n=1;n<r;n++){a+=Mt(t[n-1],t[n])}var o=a/2;o=o<r?r:o;for(var n=0;n<o;n++){var s=n/(o-1)*(e?r:r-1);var l=Math.floor(s);var u=s-l;var h;var f=t[l%r];var c;var v;if(!e){h=t[l===0?l:l-1];c=t[l>r-2?r-1:l+1];v=t[l>r-3?r-1:l+2]}else{h=t[(l-1+r)%r];c=t[(l+1)%r];v=t[(l+2)%r]}var d=u*u;var p=u*d;i.push([As(h[0],f[0],c[0],v[0],u,d,p),As(h[1],f[1],c[1],v[1],u,d,p)])}return i};var Cs=function(t,e,r,i){var a=[];var n=[];var o=[];var s=[];var l;var u;var h;var f;if(i){h=[Infinity,Infinity];f=[-Infinity,-Infinity];for(var c=0,v=t.length;c<v;c++){kt(h,h,t[c]);Pt(f,f,t[c])}kt(h,h,i[0]);Pt(f,f,i[1])}for(var c=0,v=t.length;c<v;c++){var d=t[c];if(r){l=t[c?c-1:v-1];u=t[(c+1)%v]}else{if(c===0||c===v-1){a.push(ht(t[c]));continue}else{l=t[c-1];u=t[c+1]}}dt(n,u,l);bt(n,n,e);var p=Mt(d,l);var g=Mt(d,u);var m=p+g;if(m!==0){p/=m;g/=m}bt(o,n,-p);bt(s,n,g);var y=ct([],d,o);var x=ct([],d,s);if(i){Pt(y,y,h);kt(y,y,f);Pt(x,x,h);kt(x,x,f)}a.push(y);a.push(x)}if(r){a.push(a.shift())}return a};function Ls(t,e,r){var i=e.points;var a=e.smooth;if(i&&i.length>=2){if(a&&a!=="spline"){var n=Cs(i,a,r,e.smoothConstraint);t.moveTo(i[0][0],i[0][1]);var o=i.length;for(var s=0;s<(r?o:o-1);s++){var l=n[s*2];var u=n[s*2+1];var h=i[(s+1)%o];t.bezierCurveTo(l[0],l[1],u[0],u[1],h[0],h[1])}}else{if(a==="spline"){i=Ds(i,r)}t.moveTo(i[0][0],i[0][1]);for(var s=1,f=i.length;s<f;s++){t.lineTo(i[s][0],i[s][1])}}r&&t.closePath()}}var ks=ts.extend({type:"polygon",shape:{points:null,smooth:false,smoothConstraint:null},buildPath:function(t,e){Ls(t,e,true)}});var Ps=ts.extend({type:"polyline",shape:{points:null,smooth:false,smoothConstraint:null},style:{stroke:"#000",fill:null},buildPath:function(t,e){Ls(t,e,false)}});var Ns=Math.round;function Os(t,e,r){var i=r&&r.lineWidth;if(!e||!i){return}var a=e.x1;var n=e.x2;var o=e.y1;var s=e.y2;if(Ns(a*2)===Ns(n*2)){t.x1=t.x2=Rs(a,i,true)}else{t.x1=a;t.x2=n}if(Ns(o*2)===Ns(s*2)){t.y1=t.y2=Rs(o,i,true)}else{t.y1=o;t.y2=s}}function Es(t,e,r){var i=r&&r.lineWidth;if(!e||!i){return}var a=e.x;var n=e.y;var o=e.width;var s=e.height;t.x=Rs(a,i,true);t.y=Rs(n,i,true);t.width=Math.max(Rs(a+o,i,false)-t.x,o===0?0:1);t.height=Math.max(Rs(n+s,i,false)-t.y,s===0?0:1)}function Rs(t,e,r){var i=Ns(t*2);return(i+Ns(e))%2===0?i/2:(i+(r?1:-1))/2}var zs={};var Bs=ts.extend({type:"rect",shape:{r:0,x:0,y:0,width:0,height:0},buildPath:function(t,e){var r;var i;var a;var n;if(this.subPixelOptimize){Es(zs,e,this.style);r=zs.x;i=zs.y;a=zs.width;n=zs.height;zs.r=e.r;e=zs}else{r=e.x;i=e.y;a=e.width;n=e.height}if(!e.r){t.rect(r,i,a,n)}else{Bi(t,e)}t.closePath();return}});var Vs={};var Gs=ts.extend({type:"line",shape:{x1:0,y1:0,x2:0,y2:0,percent:1},style:{stroke:"#000",fill:null},buildPath:function(t,e){var r;var i;var a;var n;if(this.subPixelOptimize){Os(Vs,e,this.style);r=Vs.x1;i=Vs.y1;a=Vs.x2;n=Vs.y2}else{r=e.x1;i=e.y1;a=e.x2;n=e.y2}var o=e.percent;if(o===0){return}t.moveTo(r,i);if(o<1){a=r*(1-o)+a*o;n=i*(1-o)+n*o}t.lineTo(a,n)},pointAt:function(t){var e=this.shape;return[e.x1*(1-t)+e.x2*t,e.y1*(1-t)+e.y2*t]}});var Fs=[];function Ws(t,e,r){var i=t.cpx2;var a=t.cpy2;if(i===null||a===null){return[(r?Zn:Hn)(t.x1,t.cpx1,t.cpx2,t.x2,e),(r?Zn:Hn)(t.y1,t.cpy1,t.cpy2,t.y2,e)]}else{return[(r?Kn:qn)(t.x1,t.cpx1,t.x2,e),(r?Kn:qn)(t.y1,t.cpy1,t.y2,e)]}}var Hs=ts.extend({type:"bezier-curve",shape:{x1:0,y1:0,x2:0,y2:0,cpx1:0,cpy1:0,percent:1},style:{stroke:"#000",fill:null},buildPath:function(t,e){var r=e.x1;var i=e.y1;var a=e.x2;var n=e.y2;var o=e.cpx1;var s=e.cpy1;var l=e.cpx2;var u=e.cpy2;var h=e.percent;if(h===0){return}t.moveTo(r,i);if(l==null||u==null){if(h<1){Qn(r,o,a,h,Fs);o=Fs[1];a=Fs[2];Qn(i,s,n,h,Fs);s=Fs[1];n=Fs[2]}t.quadraticCurveTo(o,s,a,n)}else{if(h<1){Yn(r,o,l,a,h,Fs);o=Fs[1];l=Fs[2];a=Fs[3];Yn(i,s,u,n,h,Fs);s=Fs[1];u=Fs[2];n=Fs[3]}t.bezierCurveTo(o,s,l,u,a,n)}},pointAt:function(t){return Ws(this.shape,t,false)},tangentAt:function(t){var e=Ws(this.shape,t,true);return St(e,e)}});var Zs=ts.extend({type:"arc",shape:{cx:0,cy:0,r:0,startAngle:0,endAngle:Math.PI*2,clockwise:true},style:{stroke:"#000",fill:null},buildPath:function(t,e){var r=e.cx;var i=e.cy;var a=Math.max(e.r,0);var n=e.startAngle;var o=e.endAngle;var s=e.clockwise;var l=Math.cos(n);var u=Math.sin(n);t.moveTo(l*a+r,u*a+i);t.arc(r,i,a,n,o,!s)}});var Us=ts.extend({type:"compound",shape:{paths:null},_updatePathDirty:function(){var t=this.__dirtyPath;var e=this.shape.paths;for(var r=0;r<e.length;r++){t=t||e[r].__dirtyPath}this.__dirtyPath=t;this.__dirty=this.__dirty||t},beforeBrush:function(){this._updatePathDirty();var t=this.shape.paths||[];var e=this.getGlobalScale();for(var r=0;r<t.length;r++){if(!t[r].path){t[r].createPathProxy()}t[r].path.setScale(e[0],e[1])}},buildPath:function(t,e){var r=e.paths||[];for(var i=0;i<r.length;i++){r[i].buildPath(t,r[i].shape,true)}},afterBrush:function(){var t=this.shape.paths||[];for(var e=0;e<t.length;e++){t[e].__dirtyPath=false}},getBoundingRect:function(){this._updatePathDirty();return ts.prototype.getBoundingRect.call(this)}});var Xs=function(t){this.colorStops=t||[]};Xs.prototype={constructor:Xs,addColorStop:function(t,e){this.colorStops.push({offset:t,color:e})}};var Ys=function(t,e,r,i,a,n){this.x=t==null?0:t;this.y=e==null?0:e;this.x2=r==null?1:r;this.y2=i==null?0:i;this.type="linear";this.global=n||false;Xs.call(this,a)};Ys.prototype={constructor:Ys};M(Ys,Xs);var js=function(t,e,r,i,a){this.x=t==null?.5:t;this.y=e==null?.5:e;this.r=r==null?.5:r;this.type="radial";this.global=a||false;Xs.call(this,i)};js.prototype={constructor:js};M(js,Xs);function qs(t){ua.call(this,t);this._displayables=[];this._temporaryDisplayables=[];this._cursor=0;this.notClear=true}qs.prototype.incremental=true;qs.prototype.clearDisplaybles=function(){this._displayables=[];this._temporaryDisplayables=[];this._cursor=0;this.dirty();this.notClear=false};qs.prototype.addDisplayable=function(t,e){if(e){this._temporaryDisplayables.push(t)}else{this._displayables.push(t)}this.dirty()};qs.prototype.addDisplayables=function(t,e){e=e||false;for(var r=0;r<t.length;r++){this.addDisplayable(t[r],e)}};qs.prototype.eachPendingDisplayable=function(t){for(var e=this._cursor;e<this._displayables.length;e++){t&&t(this._displayables[e])}for(var e=0;e<this._temporaryDisplayables.length;e++){t&&t(this._temporaryDisplayables[e])}};qs.prototype.update=function(){this.updateTransform();for(var t=this._cursor;t<this._displayables.length;t++){var e=this._displayables[t];e.parent=this;e.update();e.parent=null}for(var t=0;t<this._temporaryDisplayables.length;t++){var e=this._temporaryDisplayables[t];e.parent=this;e.update();e.parent=null}};qs.prototype.brush=function(t,e){for(var r=this._cursor;r<this._displayables.length;r++){var i=this._displayables[r];i.beforeBrush&&i.beforeBrush(t);i.brush(t,r===this._cursor?null:this._displayables[r-1]);i.afterBrush&&i.afterBrush(t)}this._cursor=r;for(var r=0;r<this._temporaryDisplayables.length;r++){var i=this._temporaryDisplayables[r];i.beforeBrush&&i.beforeBrush(t);i.brush(t,r===0?null:this._temporaryDisplayables[r-1]);i.afterBrush&&i.afterBrush(t)}this._temporaryDisplayables=[];this.notClear=true};var Ks=[];qs.prototype.getBoundingRect=function(){if(!this._rect){var t=new Nr(Infinity,Infinity,-Infinity,-Infinity);for(var e=0;e<this._displayables.length;e++){var r=this._displayables[e];var i=r.getBoundingRect().clone();if(r.needLocalTransform()){i.applyTransform(r.getLocalTransform(Ks))}t.union(i)}this._rect=t}return this._rect};qs.prototype.contain=function(t,e){var r=this.transformCoordToLocal(t,e);var i=this.getBoundingRect();if(i.contain(r[0],r[1])){for(var a=0;a<this._displayables.length;a++){var n=this._displayables[a];if(n.contain(t,e)){return true}}}return false};M(qs,ua);var $s=Math.round;var Js=Math.max;var Qs=Math.min;var tl={};var el=1;function rl(t){return ts.extend(t)}function il(t,e){return xs(t,e)}function al(t,e,r,i){var a=ys(t,e);if(r){if(i==="center"){r=ol(r,a.getBoundingRect())}ll(a,r)}return a}function nl(t,r,i){var a=new ha({style:{image:t,x:r.x,y:r.y,width:r.width,height:r.height},onload:function(t){if(i==="center"){var e={width:t.width,height:t.height};a.setStyle(ol(r,e))}}});return a}function ol(t,e){var r=e.width/e.height;var i=t.height*r;var a;if(i<=t.width){a=t.height}else{i=t.width;a=i/r}var n=t.x+t.width/2;var o=t.y+t.height/2;return{x:n-i/2,y:o-a/2,width:i,height:a}}var sl=_s;function ll(t,e){if(!t.applyTransform){return}var r=t.getBoundingRect();var i=r.calculateTransform(e);t.applyTransform(i)}function ul(t){var e=t.shape;var r=t.style.lineWidth;if($s(e.x1*2)===$s(e.x2*2)){e.x1=e.x2=fl(e.x1,r,true)}if($s(e.y1*2)===$s(e.y2*2)){e.y1=e.y2=fl(e.y1,r,true)}return t}function hl(t){var e=t.shape;var r=t.style.lineWidth;var i=e.x;var a=e.y;var n=e.width;var o=e.height;e.x=fl(e.x,r,true);e.y=fl(e.y,r,true);e.width=Math.max(fl(i+n,r,false)-e.x,n===0?0:1);e.height=Math.max(fl(a+o,r,false)-e.y,o===0?0:1);return t}function fl(t,e,r){var i=$s(t*2);return(i+$s(e))%2===0?i/2:(i+(r?1:-1))/2}function cl(t){return t!=null&&t!=="none"}var vl=it();var dl=0;function pl(t){if(typeof t!=="string"){return t}var e=vl.get(t);if(!e){e=qe(t,-.1);if(dl<1e4){vl.set(t,e);dl++}}return e}function gl(t){if(!t.__hoverStlDirty){return}t.__hoverStlDirty=false;var e=t.__hoverStl;if(!e){t.__cachedNormalStl=t.__cachedNormalZ2=null;return}var r=t.__cachedNormalStl={};t.__cachedNormalZ2=t.z2;var i=t.style;for(var a in e){if(e[a]!=null){r[a]=i[a]}}r.fill=i.fill;r.stroke=i.stroke}function ml(t){var e=t.__hoverStl;if(!e||t.__highlighted){return}var r=t.useHoverLayer;t.__highlighted=r?"layer":"plain";var i=t.__zr;if(!i&&r){return}var a=t;var n=t.style;if(r){a=i.addHover(t);n=a.style}zl(n);if(!r){gl(a)}n.extendFrom(e);yl(n,e,"fill");yl(n,e,"stroke");Rl(n);if(!r){t.dirty(false);t.z2+=el}}function yl(t,e,r){if(!cl(e[r])&&cl(t[r])){t[r]=pl(t[r])}}function xl(t){var e=t.__highlighted;if(!e){return}t.__highlighted=false;if(e==="layer"){t.__zr&&t.__zr.removeHover(t)}else if(e){var r=t.style;var i=t.__cachedNormalStl;if(i){zl(r);t.setStyle(i);Rl(r)}var a=t.__cachedNormalZ2;if(a!=null&&t.z2-a===el){t.z2=a}}}function _l(t,e){t.isGroup?t.traverse(function(t){!t.isGroup&&e(t)}):e(t)}function wl(t,e){e=t.__hoverStl=e!==false&&(e||{});t.__hoverStlDirty=true;if(t.__highlighted){t.__cachedNormalStl=null;xl(t);ml(t)}}function bl(t){return t&&t.__isEmphasisEntered}function Sl(t){if(this.__hoverSilentOnTouch&&t.zrByTouch){return}!this.__isEmphasisEntered&&_l(this,ml)}function Ml(t){if(this.__hoverSilentOnTouch&&t.zrByTouch){return}!this.__isEmphasisEntered&&_l(this,xl)}function Il(){this.__isEmphasisEntered=true;_l(this,ml)}function Tl(){this.__isEmphasisEntered=false;_l(this,xl)}function Al(t,e,r){t.isGroup?t.traverse(function(t){!t.isGroup&&wl(t,t.hoverStyle||e)}):wl(t,t.hoverStyle||e);Dl(t,r)}function Dl(t,e){var r=e===false;t.__hoverSilentOnTouch=e!=null&&e.hoverSilentOnTouch;if(!r||t.__hoverStyleTrigger){var i=r?"off":"on";t[i]("mouseover",Sl)[i]("mouseout",Ml);t[i]("emphasis",Il)[i]("normal",Tl);t.__hoverStyleTrigger=!r}}function Cl(t,e,r,i,a,n,o){a=a||tl;var s=a.labelFetcher;var l=a.labelDataIndex;var u=a.labelDimIndex;var h=r.getShallow("show");var f=i.getShallow("show");var c;if(h||f){if(s){c=s.getFormattedLabel(l,"normal",null,u)}if(c==null){c=V(a.defaultText)?a.defaultText(l,a):a.defaultText}}var v=h?c:null;var d=f?Y(s?s.getFormattedLabel(l,"emphasis",null,u):null,c):null;if(v!=null||d!=null){Ll(t,r,n,a);Ll(e,i,o,a,true)}t.text=v;e.text=d}function Ll(t,e,r,i,a){Pl(t,e,i,a);r&&N(t,r);return t}function kl(t,e,r){var i={isRectText:true};var a;if(r===false){a=true}else{i.autoColor=r}Pl(t,e,i,a)}function Pl(t,e,r,i){r=r||tl;if(r.isRectText){var a=e.getShallow("position")||(i?null:"inside");a==="outside"&&(a="top");t.textPosition=a;t.textOffset=e.getShallow("offset");var n=e.getShallow("rotate");n!=null&&(n*=Math.PI/180);t.textRotation=n;t.textDistance=Y(e.getShallow("distance"),i?null:5)}var o=e.ecModel;var s=o&&o.option.textStyle;var l=Nl(e);var u;if(l){u={};for(var h in l){if(l.hasOwnProperty(h)){var f=e.getModel(["rich",h]);Ol(u[h]={},f,s,r,i)}}}t.rich=u;Ol(t,e,s,r,i,true);if(r.forceRich&&!r.textStyle){r.textStyle={}}return t}function Nl(t){var e;while(t&&t!==t.ecModel){var r=(t.option||tl).rich;if(r){e=e||{};for(var i in r){if(r.hasOwnProperty(i)){e[i]=1}}}t=t.parentModel}return e}function Ol(t,e,r,i,a,n){r=!a&&r||tl;t.textFill=El(e.getShallow("color"),i)||r.color;t.textStroke=El(e.getShallow("textBorderColor"),i)||r.textBorderColor;t.textStrokeWidth=Y(e.getShallow("textBorderWidth"),r.textBorderWidth);t.insideRawTextPosition=t.textPosition;if(!a){if(n){t.insideRollbackOpt=i;Rl(t)}if(t.textFill==null){t.textFill=i.autoColor}}t.fontStyle=e.getShallow("fontStyle")||r.fontStyle;t.fontWeight=e.getShallow("fontWeight")||r.fontWeight;t.fontSize=e.getShallow("fontSize")||r.fontSize;t.fontFamily=e.getShallow("fontFamily")||r.fontFamily;t.textAlign=e.getShallow("align");t.textVerticalAlign=e.getShallow("verticalAlign")||e.getShallow("baseline");t.textLineHeight=e.getShallow("lineHeight");t.textWidth=e.getShallow("width");t.textHeight=e.getShallow("height");t.textTag=e.getShallow("tag");if(!n||!i.disableBox){t.textBackgroundColor=El(e.getShallow("backgroundColor"),i);t.textPadding=e.getShallow("padding");t.textBorderColor=El(e.getShallow("borderColor"),i);t.textBorderWidth=e.getShallow("borderWidth");t.textBorderRadius=e.getShallow("borderRadius");t.textBoxShadowColor=e.getShallow("shadowColor");t.textBoxShadowBlur=e.getShallow("shadowBlur");t.textBoxShadowOffsetX=e.getShallow("shadowOffsetX");t.textBoxShadowOffsetY=e.getShallow("shadowOffsetY")}t.textShadowColor=e.getShallow("textShadowColor")||r.textShadowColor;t.textShadowBlur=e.getShallow("textShadowBlur")||r.textShadowBlur;t.textShadowOffsetX=e.getShallow("textShadowOffsetX")||r.textShadowOffsetX;t.textShadowOffsetY=e.getShallow("textShadowOffsetY")||r.textShadowOffsetY}function El(t,e){return t!=="auto"?t:e&&e.autoColor?e.autoColor:null}function Rl(t){var e=t.insideRollbackOpt;if(!e||t.textFill!=null){return}var r=e.useInsideStyle;var i=t.insideRawTextPosition;var a;var n=e.autoColor;if(r!==false&&(r===true||e.isRectText&&i&&typeof i==="string"&&i.indexOf("inside")>=0)){a={textFill:null,textStroke:t.textStroke,textStrokeWidth:t.textStrokeWidth};t.textFill="#fff";if(t.textStroke==null){t.textStroke=n;t.textStrokeWidth==null&&(t.textStrokeWidth=2)}}else if(n!=null){a={textFill:null};t.textFill=n}if(a){t.insideRollback=a}}function zl(t){var e=t.insideRollback;if(e){t.textFill=e.textFill;t.textStroke=e.textStroke;t.textStrokeWidth=e.textStrokeWidth;t.insideRollback=null}}function Bl(t,e){var r=e||e.getModel("textStyle");return J([t.fontStyle||r&&r.getShallow("fontStyle")||"",t.fontWeight||r&&r.getShallow("fontWeight")||"",(t.fontSize||r&&r.getShallow("fontSize")||12)+"px",t.fontFamily||r&&r.getShallow("fontFamily")||"sans-serif"].join(" "))}function Vl(t,e,r,i,a,n){if(typeof a==="function"){n=a;a=null}var o=i&&i.isAnimationEnabled();if(o){var s=t?"Update":"";var l=i.getShallow("animationDuration"+s);var u=i.getShallow("animationEasing"+s);var h=i.getShallow("animationDelay"+s);if(typeof h==="function"){h=h(a,i.getAnimationDelayParams?i.getAnimationDelayParams(e,a):null)}if(typeof l==="function"){l=l(a)}l>0?e.animateTo(r,l,h||0,u,n,!!n):(e.stopAnimation(),e.attr(r),n&&n())}else{e.stopAnimation();e.attr(r);n&&n()}}function Gl(t,e,r,i,a){Vl(true,t,e,r,i,a)}function Fl(t,e,r,i,a){Vl(false,t,e,r,i,a)}function Wl(t,e){var r=ue([]);while(t&&t!==e){fe(r,t.getLocalTransform(),r);t=t.parent}return r}function Hl(t,e,r){if(e&&!E(e)){e=we.getLocalTransform(e)}if(r){e=pe([],e)}return Lt([],t,e)}function Zl(t,e,r){var i=e[4]===0||e[5]===0||e[0]===0?1:Math.abs(2*e[4]/e[0]);var a=e[4]===0||e[5]===0||e[2]===0?1:Math.abs(2*e[4]/e[2]);var n=[t==="left"?-i:t==="right"?i:0,t==="top"?-a:t==="bottom"?a:0];n=Hl(n,e,r);return Math.abs(n[0])>Math.abs(n[1])?n[0]>0?"right":"left":n[1]>0?"bottom":"top"}function Ul(t,e,i,r){if(!t||!e){return}function a(t){var e={};t.traverse(function(t){if(!t.isGroup&&t.anid){e[t.anid]=t}});return e}function n(t){var e={position:ht(t.position),rotation:t.rotation};if(t.shape){e.shape=N({},t.shape)}return e}var o=a(t);e.traverse(function(t){if(!t.isGroup&&t.anid){var e=o[t.anid];if(e){var r=n(t);t.attr(n(e));Gl(t,r,i,t.dataIndex)}}})}function Xl(t,i){return A(t,function(t){var e=t[0];e=Js(e,i.x);e=Qs(e,i.x+i.width);var r=t[1];r=Js(r,i.y);r=Qs(r,i.y+i.height);return[e,r]})}function Yl(t,e){var r=Js(t.x,e.x);var i=Qs(t.x+t.width,e.x+e.width);var a=Js(t.y,e.y);var n=Qs(t.y+t.height,e.y+e.height);if(i>=r&&n>=a){return{x:r,y:a,width:i-r,height:n-a}}}function jl(t,e,r){e=N({rectHover:true},e);var i=e.style={strokeNoScale:true};r=r||{x:-1,y:-1,width:2,height:2};if(t){return t.indexOf("image://")===0?(i.image=t.slice(8),C(i,r),new ha(e)):al(t.replace("path://",""),e,r,"center")}}var ql=(Object.freeze||Object)({Z2_EMPHASIS_LIFT:el,extendShape:rl,extendPath:il,makePath:al,makeImage:nl,mergePath:sl,resizePath:ll,subPixelOptimizeLine:ul,subPixelOptimizeRect:hl,subPixelOptimize:fl,setElementHoverStyle:wl,isInEmphasis:bl,setHoverStyle:Al,setAsHoverStyleTrigger:Dl,setLabelStyle:Cl,setTextStyle:Ll,setText:kl,getFont:Bl,updateProps:Gl,initProps:Fl,getTransform:Wl,applyTransform:Hl,transformDirection:Zl,groupTransition:Ul,clipPointsByRect:Xl,clipRectByRect:Yl,createIcon:jl,Group:Or,Image:ha,Text:ws,Circle:bs,Sector:Is,Ring:Ts,Polygon:ks,Polyline:Ps,Rect:Bs,Line:Gs,BezierCurve:Hs,Arc:Zs,IncrementalDisplayable:qs,CompoundPath:Us,LinearGradient:Ys,RadialGradient:js,BoundingRect:Nr});var Kl=["textStyle","color"];var $l={getTextColor:function(t){var e=this.ecModel;return this.getShallow("color")||(!t&&e?e.get(Kl):null)},getFont:function(){return Bl({fontStyle:this.getShallow("fontStyle"),fontWeight:this.getShallow("fontWeight"),fontSize:this.getShallow("fontSize"),fontFamily:this.getShallow("fontFamily")},this.ecModel)},getTextRect:function(t){return bi(t,this.getFont(),this.getShallow("align"),this.getShallow("verticalAlign")||this.getShallow("baseline"),this.getShallow("padding"),this.getShallow("rich"),this.getShallow("truncateText"))}};var Jl=An([["fill","color"],["stroke","borderColor"],["lineWidth","borderWidth"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["textPosition"],["textAlign"]]);var Ql={getItemStyle:function(t,e){var r=Jl(this,t,e);var i=this.getBorderLineDash();i&&(r.lineDash=i);return r},getBorderLineDash:function(){var t=this.get("borderType");return t==="solid"||t==null?null:t==="dashed"?[5,5]:[1,1]}};var tu=I;var eu=hn();function ru(t,e,r){this.parentModel=e;this.ecModel=r;this.option=t}ru.prototype={constructor:ru,init:null,mergeOption:function(t){m(this.option,t,true)},get:function(t,e){if(t==null){return this.option}return iu(this.option,this.parsePath(t),!e&&au(this,t))},getShallow:function(t,e){var r=this.option;var i=r==null?r:r[t];var a=!e&&au(this,t);if(i==null&&a){i=a.getShallow(t)}return i},getModel:function(t,e){var r=t==null?this.option:iu(this.option,t=this.parsePath(t));var i;e=e||(i=au(this,t))&&i.getModel(t);return new ru(r,e,this.ecModel)},isEmpty:function(){return this.option==null},restoreData:function(){},clone:function(){var t=this.constructor;return new t(P(this.option))},setReadOnly:function(t){},parsePath:function(t){if(typeof t==="string"){t=t.split(".")}return t},customizeGetParent:function(t){eu(this).getParent=t},isAnimationEnabled:function(){if(!y.node){if(this.option.animation!=null){return!!this.option.animation}else if(this.parentModel){return this.parentModel.isAnimationEnabled()}}}};function iu(t,e,r){for(var i=0;i<e.length;i++){if(!e[i]){continue}t=t&&typeof t==="object"?t[e[i]]:null;if(t==null){break}}if(t==null&&r){t=r.get(e)}return t}function au(t,e){var r=eu(t).getParent;return r?r.call(t,e):t.parentModel}wn(ru);Sn(ru);tu(ru,Cn);tu(ru,kn);tu(ru,$l);tu(ru,Ql);var nu=0;function ou(t){return[t||"",nu++,Math.random().toFixed(5)].join("_")}function su(a){var n={};a.registerSubTypeDefaulter=function(t,e){t=xn(t);n[t.main]=e};a.determineSubType=function(t,e){var r=e.type;if(!r){var i=xn(t).main;if(a.hasSubTypes(t)&&n[i]){r=n[i](e)}}return r};return a}function lu(t,s){t.topologicalTravel=function(t,e,r,i){if(!t.length){return}var a=v(e);var n=a.graph;var o=a.noEntryList;var s={};L(t,function(t){s[t]=true});while(o.length){var l=o.pop();var u=n[l];var h=!!s[l];if(h){r.call(i,l,u.originalDeps.slice());delete s[l]}L(u.successor,h?c:f)}L(s,function(){throw new Error("Circle dependency may exists")});function f(t){n[t].entryCount--;if(n[t].entryCount===0){o.push(t)}}function c(t){s[t]=true;f(t)}};function v(a){var n={};var o=[];L(a,function(r){var i=l(n,r);var t=i.originalDeps=s(r);var e=u(t,a);i.entryCount=e.length;if(i.entryCount===0){o.push(r)}L(e,function(t){if(S(i.predecessor,t)<0){i.predecessor.push(t)}var e=l(n,t);if(S(e.successor,t)<0){e.successor.push(r)}})});return{graph:n,noEntryList:o}}function l(t,e){if(!t[e]){t[e]={predecessor:[],successor:[]}}return t[e]}function u(t,e){var r=[];L(t,function(t){S(e,t)>=0&&r.push(t)});return r}}var uu=1e-4;function hu(t){return t.replace(/^\s+/,"").replace(/\s+$/,"")}function fu(t,e,r,i){var a=e[1]-e[0];var n=r[1]-r[0];if(a===0){return n===0?r[0]:(r[0]+r[1])/2}if(i){if(a>0){if(t<=e[0]){return r[0]}else if(t>=e[1]){return r[1]}}else{if(t>=e[0]){return r[0]}else if(t<=e[1]){return r[1]}}}else{if(t===e[0]){return r[0]}if(t===e[1]){return r[1]}}return(t-e[0])/a*n+r[0]}function cu(t,e){switch(t){case"center":case"middle":t="50%";break;case"left":case"top":t="0%";break;case"right":case"bottom":t="100%";break}if(typeof t==="string"){if(hu(t).match(/%$/)){return parseFloat(t)/100*e}return parseFloat(t)}return t==null?NaN:+t}function vu(t,e,r){if(e==null){e=10}e=Math.min(Math.max(0,e),20);t=(+t).toFixed(e);return r?t:+t}function du(t){t.sort(function(t,e){return t-e});return t}function pu(t){t=+t;if(isNaN(t)){return 0}var e=1;var r=0;while(Math.round(t*e)/e!==t){e*=10;r++}return r}function gu(t){var e=t.toString();var r=e.indexOf("e");if(r>0){var i=+e.slice(r+1);return i<0?-i:0}else{var a=e.indexOf(".");return a<0?0:e.length-1-a}}function mu(t,e){var r=Math.log;var i=Math.LN10;var a=Math.floor(r(t[1]-t[0])/i);var n=Math.round(r(Math.abs(e[1]-e[0]))/i);var o=Math.min(Math.max(-a+n,0),20);return!isFinite(o)?20:o}function yu(t,e,r){if(!t[e]){return 0}var i=T(t,function(t,e){return t+(isNaN(e)?0:e)},0);if(i===0){return 0}var a=Math.pow(10,r);var n=A(t,function(t){return(isNaN(t)?0:t)/i*a*100});var o=a*100;var s=A(n,function(t){return Math.floor(t)});var l=T(s,function(t,e){return t+e},0);var u=A(n,function(t,e){return t-s[e]});while(l<o){var h=Number.NEGATIVE_INFINITY;var f=null;for(var c=0,v=u.length;c<v;++c){if(u[c]>h){h=u[c];f=c}}++s[f];u[f]=0;++l}return s[e]/a}var xu=9007199254740991;function _u(t){var e=Math.PI*2;return(t%e+e)%e}function wu(t){return t>-uu&&t<uu}var bu=/^(?:(\d{4})(?:[-\/](\d{1,2})(?:[-\/](\d{1,2})(?:[T ](\d{1,2})(?::(\d\d)(?::(\d\d)(?:[.,](\d+))?)?)?(Z|[\+\-]\d\d:?\d\d)?)?)?)?)?$/;function Su(t){if(t instanceof Date){return t}else if(typeof t==="string"){var e=bu.exec(t);if(!e){return new Date(NaN)}if(!e[8]){return new Date(+e[1],+(e[2]||1)-1,+e[3]||1,+e[4]||0,+(e[5]||0),+e[6]||0,+e[7]||0)}else{var r=+e[4]||0;if(e[8].toUpperCase()!=="Z"){r-=e[8].slice(0,3)}return new Date(Date.UTC(+e[1],+(e[2]||1)-1,+e[3]||1,r,+(e[5]||0),+e[6]||0,+e[7]||0))}}else if(t==null){return new Date(NaN)}return new Date(Math.round(t))}function Mu(t){return Math.pow(10,Iu(t))}function Iu(t){return Math.floor(Math.log(t)/Math.LN10)}function Tu(t,e){var r=Iu(t);var i=Math.pow(10,r);var a=t/i;var n;if(e){if(a<1.5){n=1}else if(a<2.5){n=2}else if(a<4){n=3}else if(a<7){n=5}else{n=10}}else{if(a<1){n=1}else if(a<2){n=2}else if(a<3){n=3}else if(a<5){n=5}else{n=10}}t=n*i;return r>=-20?+t.toFixed(r<0?-r:0):t}function Au(t,e){var r=(t.length-1)*e+1;var i=Math.floor(r);var a=+t[i-1];var n=r-i;return n?a+n*(t[i]-a):a}function Du(t){t.sort(function(t,e){return s(t,e,0)?-1:1});var e=-Infinity;var r=1;for(var i=0;i<t.length;){var a=t[i].interval;var n=t[i].close;for(var o=0;o<2;o++){if(a[o]<=e){a[o]=e;n[o]=!o?1-r:1}e=a[o];r=n[o]}if(a[0]===a[1]&&n[0]*n[1]!==1){t.splice(i,1)}else{i++}}return t;function s(t,e,r){return t.interval[r]<e.interval[r]||t.interval[r]===e.interval[r]&&(t.close[r]-e.close[r]===(!r?1:-1)||!r&&s(t,e,1))}}function Cu(t){return t-parseFloat(t)>=0}var Lu=(Object.freeze||Object)({linearMap:fu,parsePercent:cu,round:vu,asc:du,getPrecision:pu,getPrecisionSafe:gu,getPixelPrecision:mu,getPercentWithPrecision:yu,MAX_SAFE_INTEGER:xu,remRadian:_u,isRadianAroundZero:wu,parseDate:Su,quantity:Mu,nice:Tu,quantile:Au,reformIntervals:Du,isNumeric:Cu});function ku(t){if(isNaN(t)){return"-"}t=(t+"").split(".");return t[0].replace(/(\d{1,3})(?=(?:\d{3})+(?!\d))/g,"$1,")+(t.length>1?"."+t[1]:"")}function Pu(t,e){t=(t||"").toLowerCase().replace(/-(.)/g,function(t,e){return e.toUpperCase()});if(e&&t){t=t.charAt(0).toUpperCase()+t.slice(1)}return t}var Nu=K;var Ou=/([&<>"'])/g;var Eu={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function Ru(t){return t==null?"":(t+"").replace(Ou,function(t,e){return Eu[e]})}var zu=["a","b","c","d","e","f","g"];var Bu=function(t,e){return"{"+t+(e==null?"":e)+"}"};function Vu(t,e,r){if(!B(e)){e=[e]}var i=e.length;if(!i){return""}var a=e[0].$vars||[];for(var n=0;n<a.length;n++){var o=zu[n];t=t.replace(Bu(o),Bu(o,0))}for(var s=0;s<i;s++){for(var l=0;l<a.length;l++){var u=e[s][a[l]];t=t.replace(Bu(zu[l],s),r?Ru(u):u)}}return t}function Gu(r,t,i){L(t,function(t,e){r=r.replace("{"+e+"}",i?Ru(t):t)});return r}function Fu(t,e){t=G(t)?{color:t,extraCssText:e}:t||{};var r=t.color;var i=t.type;var e=t.extraCssText;var a=t.renderMode||"html";var n=t.markerId||"X";if(!r){return""}if(a==="html"){return i==="subItem"?'<span style="display:inline-block;vertical-align:middle;margin-right:8px;margin-left:3px;'+"border-radius:4px;width:4px;height:4px;background-color:"+Ru(r)+";"+(e||"")+'"></span>':'<span style="display:inline-block;margin-right:5px;'+"border-radius:10px;width:10px;height:10px;background-color:"+Ru(r)+";"+(e||"")+'"></span>'}else{return{renderMode:a,content:"{marker"+n+"|}  ",style:{color:r}}}}function Wu(t,e){t+="";return"0000".substr(0,e-t.length)+t}function Hu(t,e,r){if(t==="week"||t==="month"||t==="quarter"||t==="half-year"||t==="year"){t="MM-dd\nyyyy"}var i=Su(e);var a=r?"UTC":"";var n=i["get"+a+"FullYear"]();var o=i["get"+a+"Month"]()+1;var s=i["get"+a+"Date"]();var l=i["get"+a+"Hours"]();var u=i["get"+a+"Minutes"]();var h=i["get"+a+"Seconds"]();var f=i["get"+a+"Milliseconds"]();t=t.replace("MM",Wu(o,2)).replace("M",o).replace("yyyy",n).replace("yy",n%100).replace("dd",Wu(s,2)).replace("d",s).replace("hh",Wu(l,2)).replace("h",l).replace("mm",Wu(u,2)).replace("m",u).replace("ss",Wu(h,2)).replace("s",h).replace("SSS",Wu(f,3));return t}function Zu(t){return t?t.charAt(0).toUpperCase()+t.substr(1):t}var Uu=Di;var Xu=bi;var Yu=(Object.freeze||Object)({addCommas:ku,toCamelCase:Pu,normalizeCssArray:Nu,encodeHTML:Ru,formatTpl:Vu,formatTplSimple:Gu,getTooltipMarker:Fu,formatTime:Hu,capitalFirst:Zu,truncateText:Uu,getTextRect:Xu});var ju=L;var qu=["left","right","top","bottom","width","height"];var Ku=[["width","left","right"],["height","top","bottom"]];function $u(h,f,c,v,d){var p=0;var g=0;if(v==null){v=Infinity}if(d==null){d=Infinity}var m=0;f.eachChild(function(t,e){var r=t.position;var i=t.getBoundingRect();var a=f.childAt(e+1);var n=a&&a.getBoundingRect();var o;var s;if(h==="horizontal"){var l=i.width+(n?-n.x+i.x:0);o=p+l;if(o>v||t.newline){p=0;o=l;g+=m+c;m=i.height}else{m=Math.max(m,i.height)}}else{var u=i.height+(n?-n.y+i.y:0);s=g+u;if(s>d||t.newline){p+=m+c;g=0;s=u;m=i.width}else{m=Math.max(m,i.width)}}if(t.newline){return}r[0]=p;r[1]=g;h==="horizontal"?p=o+c:g=s+c})}var Ju=$u;var Qu=z($u,"vertical");var th=z($u,"horizontal");function eh(t,e,r){var i=e.width;var a=e.height;var n=cu(t.x,i);var o=cu(t.y,a);var s=cu(t.x2,i);var l=cu(t.y2,a);(isNaN(n)||isNaN(parseFloat(t.x)))&&(n=0);(isNaN(s)||isNaN(parseFloat(t.x2)))&&(s=i);(isNaN(o)||isNaN(parseFloat(t.y)))&&(o=0);(isNaN(l)||isNaN(parseFloat(t.y2)))&&(l=a);r=Nu(r||0);return{width:Math.max(s-n-r[1]-r[3],0),height:Math.max(l-o-r[0]-r[2],0)}}function rh(t,e,r){r=Nu(r||0);var i=e.width;var a=e.height;var n=cu(t.left,i);var o=cu(t.top,a);var s=cu(t.right,i);var l=cu(t.bottom,a);var u=cu(t.width,i);var h=cu(t.height,a);var f=r[2]+r[0];var c=r[1]+r[3];var v=t.aspect;if(isNaN(u)){u=i-s-c-n}if(isNaN(h)){h=a-l-f-o}if(v!=null){if(isNaN(u)&&isNaN(h)){if(v>i/a){u=i*.8}else{h=a*.8}}if(isNaN(u)){u=v*h}if(isNaN(h)){h=u/v}}if(isNaN(n)){n=i-s-u-c}if(isNaN(o)){o=a-l-h-f}switch(t.left||t.right){case"center":n=i/2-u/2-r[3];break;case"right":n=i-u-c;break}switch(t.top||t.bottom){case"middle":case"center":o=a/2-h/2-r[0];break;case"bottom":o=a-h-f;break}n=n||0;o=o||0;if(isNaN(u)){u=i-c-n-(s||0)}if(isNaN(h)){h=a-f-o-(l||0)}var d=new Nr(n+r[3],o+r[0],u,h);d.margin=r;return d}function ih(t,e,r,i,a){var n=!a||!a.hv||a.hv[0];var o=!a||!a.hv||a.hv[1];var s=a&&a.boundingMode||"all";if(!n&&!o){return}var l;if(s==="raw"){l=t.type==="group"?new Nr(0,0,+e.width||0,+e.height||0):t.getBoundingRect()}else{l=t.getBoundingRect();if(t.needLocalTransform()){var u=t.getLocalTransform();l=l.clone();l.applyTransform(u)}}e=rh(C({width:l.width,height:l.height},e),r,i);var h=t.position;var f=n?e.x-l.x:0;var c=o?e.y-l.y:0;t.attr("position",s==="raw"?[f,c]:[h[0]+f,h[1]+c])}function ah(t,e){return t[Ku[e][0]]!=null||t[Ku[e][1]]!=null&&t[Ku[e][2]]!=null}function nh(u,h,t){!F(t)&&(t={});var f=t.ignoreSize;!B(f)&&(f=[f,f]);var e=i(Ku[0],0);var r=i(Ku[1],1);a(Ku[0],u,e);a(Ku[1],u,r);function i(t,e){var r={};var i=0;var a={};var n=0;var o=2;ju(t,function(t){a[t]=u[t]});ju(t,function(t){c(h,t)&&(r[t]=a[t]=h[t]);v(r,t)&&i++;v(a,t)&&n++});if(f[e]){if(v(h,t[1])){a[t[2]]=null}else if(v(h,t[2])){a[t[1]]=null}return a}if(n===o||!i){return a}else if(i>=o){return r}else{for(var s=0;s<t.length;s++){var l=t[s];if(!c(r,l)&&c(u,l)){r[l]=u[l];break}}return r}}function c(t,e){return t.hasOwnProperty(e)}function v(t,e){return t[e]!=null&&t[e]!=="auto"}function a(t,e,r){ju(t,function(t){e[t]=r[t]})}}function oh(t){return sh({},t)}function sh(e,r){r&&e&&ju(qu,function(t){r.hasOwnProperty(t)&&(e[t]=r[t])});return e}var lh={getBoxLayoutParams:function(){return{left:this.get("left"),top:this.get("top"),right:this.get("right"),bottom:this.get("bottom"),width:this.get("width"),height:this.get("height")}}};var uh=hn();var hh=ru.extend({type:"component",id:"",name:"",mainType:"",subType:"",componentIndex:0,defaultOption:null,ecModel:null,dependentModels:[],uid:null,layoutMode:null,$constructor:function(t,e,r,i){ru.call(this,t,e,r,i);this.uid=ou("ec_cpt_model")},init:function(t,e,r,i){this.mergeDefaultAndTheme(t,r)},mergeDefaultAndTheme:function(t,e){var r=this.layoutMode;var i=r?oh(t):{};var a=e.getTheme();m(t,a.get(this.mainType));m(t,this.getDefaultOption());if(r){nh(t,i,r)}},mergeOption:function(t,e){m(this.option,t,true);var r=this.layoutMode;if(r){nh(this.option,t,r)}},optionUpdated:function(t,e){},getDefaultOption:function(){var t=uh(this);if(!t.defaultOption){var e=[];var r=this.constructor;while(r){var i=r.prototype.defaultOption;i&&e.push(i);r=r.superClass}var a={};for(var n=e.length-1;n>=0;n--){a=m(a,e[n],true)}t.defaultOption=a}return t.defaultOption},getReferringComponents:function(t){return this.ecModel.queryComponents({mainType:t,index:this.get(t+"Index",true),id:this.get(t+"Id",true)})}});Tn(hh,{registerWhenExtend:true});su(hh);lu(hh,fh);function fh(t){var e=[];L(hh.getClassesByMainType(t),function(t){e=e.concat(t.prototype.dependencies||[])});e=A(e,function(t){return xn(t).main});if(t!=="dataset"&&S(e,"dataset")<=0){e.unshift("dataset")}return e}I(hh,lh);var ch="";if(typeof navigator!=="undefined"){ch=navigator.platform||""}var vh={color:["#c23531","#2f4554","#61a0a8","#d48265","#91c7ae","#749f83","#ca8622","#bda29a","#6e7074","#546570","#c4ccd3"],gradientColor:["#f6efa6","#d88273","#bf444c"],textStyle:{fontFamily:ch.match(/^Win/)?"Microsoft YaHei":"sans-serif",fontSize:12,fontStyle:"normal",fontWeight:"normal"},blendMode:null,animation:"auto",animationDuration:1e3,animationDurationUpdate:300,animationEasing:"exponentialOut",animationEasingUpdate:"cubicOut",animationThreshold:2e3,progressiveThreshold:3e3,progressive:400,hoverLayerThreshold:3e3,useUTC:false};var dh=hn();function ph(t,e){var r=t.length;for(var i=0;i<r;i++){if(t[i].length>e){return t[i]}}return t[r-1]}var gh={clearColorPalette:function(){dh(this).colorIdx=0;dh(this).colorNameMap={}},getColorFromPalette:function(t,e,r){e=e||this;var i=dh(e);var a=i.colorIdx||0;var n=i.colorNameMap=i.colorNameMap||{};if(n.hasOwnProperty(t)){return n[t]}var o=Ja(this.get("color",true));var s=this.get("colorLayer",true);var l=r==null||!s?o:ph(s,r);l=l||o;if(!l||!l.length){return}var u=l[a];if(t){n[t]=u}i.colorIdx=(a+1)%l.length;return u}};function mh(t){var e=t.get("coordinateSystem");var r={coordSysName:e,coordSysDims:[],axisMap:it(),categoryAxisMap:it()};var i=yh[e];if(i){i(t,r,r.axisMap,r.categoryAxisMap);return r}}var yh={cartesian2d:function(t,e,r,i){var a=t.getReferringComponents("xAxis")[0];var n=t.getReferringComponents("yAxis")[0];if(D){if(!a){throw new Error('xAxis "'+X(t.get("xAxisIndex"),t.get("xAxisId"),0)+'" not found')}if(!n){throw new Error('yAxis "'+X(t.get("xAxisIndex"),t.get("yAxisId"),0)+'" not found')}}e.coordSysDims=["x","y"];r.set("x",a);r.set("y",n);if(xh(a)){i.set("x",a);e.firstCategoryDimIndex=0}if(xh(n)){i.set("y",n);e.firstCategoryDimIndex=1}},singleAxis:function(t,e,r,i){var a=t.getReferringComponents("singleAxis")[0];if(D){if(!a){throw new Error("singleAxis should be specified.")}}e.coordSysDims=["single"];r.set("single",a);if(xh(a)){i.set("single",a);e.firstCategoryDimIndex=0}},polar:function(t,e,r,i){var a=t.getReferringComponents("polar")[0];var n=a.findAxisModel("radiusAxis");var o=a.findAxisModel("angleAxis");if(D){if(!o){throw new Error("angleAxis option not found")}if(!n){throw new Error("radiusAxis option not found")}}e.coordSysDims=["radius","angle"];r.set("radius",n);r.set("angle",o);if(xh(n)){i.set("radius",n);e.firstCategoryDimIndex=0}if(xh(o)){i.set("angle",o);e.firstCategoryDimIndex=1}},geo:function(t,e,r,i){e.coordSysDims=["lng","lat"]},parallel:function(t,a,n,o){var s=t.ecModel;var e=s.getComponent("parallel",t.get("parallelIndex"));var l=a.coordSysDims=e.dimensions.slice();L(e.parallelAxisIndex,function(t,e){var r=s.getComponent("parallelAxis",t);var i=l[e];n.set(i,r);if(xh(r)&&a.firstCategoryDimIndex==null){o.set(i,r);a.firstCategoryDimIndex=e}})}};function xh(t){return t.get("type")==="category"}var _h="original";var wh="arrayRows";var bh="objectRows";var Sh="keyedColumns";var Mh="unknown";var Ih="typedArray";var Th="column";var Ah="row";function Dh(t){this.fromDataset=t.fromDataset;this.data=t.data||(t.sourceFormat===Sh?{}:[]);this.sourceFormat=t.sourceFormat||Mh;this.seriesLayoutBy=t.seriesLayoutBy||Th;this.dimensionsDefine=t.dimensionsDefine;this.encodeDefine=t.encodeDefine&&it(t.encodeDefine);this.startIndex=t.startIndex||0;this.dimensionsDetectCount=t.dimensionsDetectCount}Dh.seriesDataToSource=function(t){return new Dh({data:t,sourceFormat:H(t)?Ih:_h,fromDataset:false})};Sn(Dh);var Ch=hn();function Lh(t){var e=t.option.source;var r=Mh;if(H(e)){r=Ih}else if(B(e)){if(e.length===0){r=wh}for(var i=0,a=e.length;i<a;i++){var n=e[i];if(n==null){continue}else if(B(n)){r=wh;break}else if(F(n)){r=bh;break}}}else if(F(e)){for(var o in e){if(e.hasOwnProperty(o)&&E(e[o])){r=Sh;break}}}else if(e!=null){throw new Error("Invalid data")}Ch(t).sourceFormat=r}function kh(t){return Ch(t).source}function Ph(t){Ch(t).datasetMap=it()}function Nh(t){var e=t.option;var r=e.data;var i=H(r)?Ih:_h;var a=false;var n=e.seriesLayoutBy;var o=e.sourceHeader;var s=e.dimensions;var l=Vh(t);if(l){var u=l.option;r=u.source;i=Ch(l).sourceFormat;a=true;n=n||u.seriesLayoutBy;o==null&&(o=u.sourceHeader);s=s||u.dimensions}var h=Oh(r,i,n,o,s);var f=e.encode;if(!f&&l){f=Bh(t,l,r,i,n,h)}Ch(t).source=new Dh({data:r,fromDataset:a,seriesLayoutBy:n,sourceFormat:i,dimensionsDefine:h.dimensionsDefine,startIndex:h.startIndex,dimensionsDetectCount:h.dimensionsDetectCount,encodeDefine:f})}function Oh(t,e,r,i,a){if(!t){return{dimensionsDefine:Eh(a)}}var n;var o;var s;if(e===wh){if(i==="auto"||i==null){Rh(function(t){if(t!=null&&t!=="-"){if(G(t)){o==null&&(o=1)}else{o=0}}},r,t,10)}else{o=i?1:0}if(!a&&o===1){a=[];Rh(function(t,e){a[e]=t!=null?t:""},r,t)}n=a?a.length:r===Ah?t.length:t[0]?t[0].length:null}else if(e===bh){if(!a){a=zh(t);s=true}}else if(e===Sh){if(!a){a=[];s=true;L(t,function(t,e){a.push(e)})}}else if(e===_h){var l=en(t[0]);n=B(l)&&l.length||1}else if(e===Ih){if(D){$(!!a,"dimensions must be given if data is TypedArray.")}}var u;if(s){L(a,function(t,e){if((F(t)?t.name:t)==="name"){u=e}})}return{startIndex:o,dimensionsDefine:Eh(a),dimensionsDetectCount:n,potentialNameDimIndex:u}}function Eh(t){if(!t){return}var i=it();return A(t,function(t,e){t=N({},F(t)?t:{name:t});if(t.name==null){return t}t.name+="";if(t.displayName==null){t.displayName=t.name}var r=i.get(t.name);if(!r){i.set(t.name,{count:1})}else{t.name+="-"+r.count++}return t})}function Rh(t,e,r,i){i==null&&(i=Infinity);if(e===Ah){for(var a=0;a<r.length&&a<i;a++){t(r[a]?r[a][0]:null,a)}}else{var n=r[0]||[];for(var a=0;a<n.length&&a<i;a++){t(n[a],a)}}}function zh(t){var e=0;var r;while(e<t.length&&!(r=t[e++])){}if(r){var i=[];L(r,function(t,e){i.push(e)});return i}}function Bh(t,e,r,i,a,n){var o=mh(t);var s={};var l=[];var u=[];var h=t.subType;var f=it(["pie","map","funnel"]);var c=it(["line","bar","pictorialBar","scatter","effectScatter","candlestick","boxplot"]);if(o&&c.get(h)!=null){var v=t.ecModel;var d=Ch(v).datasetMap;var p=e.uid+"_"+a;var g=d.get(p)||d.set(p,{categoryWayDim:1,valueWayDim:0});L(o.coordSysDims,function(t){if(o.firstCategoryDimIndex==null){var e=g.valueWayDim++;s[t]=e;u.push(e)}else if(o.categoryAxisMap.get(t)){s[t]=0;l.push(0)}else{var e=g.categoryWayDim++;s[t]=e;u.push(e)}})}else if(f.get(h)!=null){var m;for(var y=0;y<5&&m==null;y++){if(!Fh(r,i,a,n.dimensionsDefine,n.startIndex,y)){m=y}}if(m!=null){s.value=m;var x=n.potentialNameDimIndex||Math.max(m-1,0);u.push(x);l.push(x)}}l.length&&(s.itemName=l);u.length&&(s.seriesName=u);return s}function Vh(t){var e=t.option;var r=e.data;if(!r){return t.ecModel.getComponent("dataset",e.datasetIndex||0)}}function Gh(t,e){return Fh(t.data,t.sourceFormat,t.seriesLayoutBy,t.dimensionsDefine,t.startIndex,e)}function Fh(t,e,r,i,a,n){var o;var s=5;if(H(t)){return false}var l;if(i){l=i[n];l=F(l)?l.name:l}if(e===wh){if(r===Ah){var u=t[n];for(var h=0;h<(u||[]).length&&h<s;h++){if((o=d(u[a+h]))!=null){return o}}}else{for(var h=0;h<t.length&&h<s;h++){var f=t[a+h];if(f&&(o=d(f[n]))!=null){return o}}}}else if(e===bh){if(!l){return}for(var h=0;h<t.length&&h<s;h++){var c=t[h];if(c&&(o=d(c[l]))!=null){return o}}}else if(e===Sh){if(!l){return}var u=t[l];if(!u||H(u)){return false}for(var h=0;h<u.length&&h<s;h++){if((o=d(u[h]))!=null){return o}}}else if(e===_h){for(var h=0;h<t.length&&h<s;h++){var c=t[h];var v=en(c);if(!B(v)){return false}if((o=d(v[n]))!=null){return o}}}function d(t){if(t!=null&&isFinite(t)&&t!==""){return false}else if(G(t)&&t!=="-"){return true}}return false}var Wh="\0_ec_inner";var Hh=ru.extend({init:function(t,e,r,i){r=r||{};this.option=null;this._theme=new ru(r);this._optionManager=i},setOption:function(t,e){$(!(Wh in t),"please use chart.getOption()");this._optionManager.setOption(t,e);this.resetOption(null)},resetOption:function(t){var e=false;var r=this._optionManager;if(!t||t==="recreate"){var i=r.mountOption(t==="recreate");if(!this.option||t==="recreate"){Xh.call(this,i)}else{this.restoreData();this.mergeOption(i)}e=true}if(t==="timeline"||t==="media"){this.restoreData()}if(!t||t==="recreate"||t==="timeline"){var a=r.getTimelineOption(this);a&&(this.mergeOption(a),e=true)}if(!t||t==="recreate"||t==="media"){var n=r.getMediaOption(this,this._api);if(n.length){L(n,function(t){this.mergeOption(t,e=true)},this)}}return e},mergeOption:function(i){var l=this.option;var u=this._componentsMap;var r=[];Ph(this);L(i,function(t,e){if(t==null){return}if(!hh.hasClass(e)){l[e]=l[e]==null?P(t):m(l[e],t,true)}else if(e){r.push(e)}});hh.topologicalTravel(r,hh.getAllClassMainTypes(),t,this);function t(o,t){var e=Ja(i[o]);var r=an(u.get(o),e);nn(r);L(r,function(t,e){var r=t.option;if(F(r)){t.keyInfo.mainType=o;t.keyInfo.subType=jh(o,r,t.exist)}});var s=Yh(u,t);l[o]=[];u.set(o,[]);L(r,function(t,e){var r=t.exist;var i=t.option;$(F(i)||r,"Empty component definition");if(!i){r.mergeOption({},this);r.optionUpdated({},false)}else{var a=hh.getClass(o,t.keyInfo.subType,true);if(r&&r instanceof a){r.name=t.keyInfo.name;r.mergeOption(i,this);r.optionUpdated(i,false)}else{var n=N({dependentModels:s,componentIndex:e},t.keyInfo);r=new a(i,this,this,n);N(r,n);r.init(i,this,this,n);r.optionUpdated(null,true)}}u.get(o)[e]=r;l[o][e]=r.option},this);if(o==="series"){qh(this,u.get("series"))}}this._seriesIndicesMap=it(this._seriesIndices=this._seriesIndices||[])},getOption:function(){var i=P(this.option);L(i,function(t,e){if(hh.hasClass(e)){var t=Ja(t);for(var r=t.length-1;r>=0;r--){if(sn(t[r])){t.splice(r,1)}}i[e]=t}});delete i[Wh];return i},getTheme:function(){return this._theme},getComponent:function(t,e){var r=this._componentsMap.get(t);if(r){return r[e||0]}},queryComponents:function(t){var e=t.mainType;if(!e){return[]}var r=t.index;var i=t.id;var a=t.name;var n=this._componentsMap.get(e);if(!n||!n.length){return[]}var o;if(r!=null){if(!B(r)){r=[r]}o=O(A(r,function(t){return n[t]}),function(t){return!!t})}else if(i!=null){var s=B(i);o=O(n,function(t){return s&&S(i,t.id)>=0||!s&&t.id===i})}else if(a!=null){var l=B(a);o=O(n,function(t){return l&&S(a,t.name)>=0||!l&&t.name===a})}else{o=n.slice()}return Kh(o,t)},findComponents:function(e){var t=e.query;var a=e.mainType;var r=n(t);var i=r?this.queryComponents(r):this._componentsMap.get(a);return o(Kh(i,e));function n(t){var e=a+"Index";var r=a+"Id";var i=a+"Name";return t&&(t[e]!=null||t[r]!=null||t[i]!=null)?{mainType:a,index:t[e],id:t[r],name:t[i]}:null}function o(t){return e.filter?O(t,e.filter):t}},eachComponent:function(t,i,a){var e=this._componentsMap;if(typeof t==="function"){a=i;i=t;e.each(function(t,r){L(t,function(t,e){i.call(a,r,t,e)})})}else if(G(t)){L(e.get(t),i,a)}else if(F(t)){var r=this.findComponents(t);L(r,i,a)}},getSeriesByName:function(e){var t=this._componentsMap.get("series");return O(t,function(t){return t.name===e})},getSeriesByIndex:function(t){return this._componentsMap.get("series")[t]},getSeriesByType:function(e){var t=this._componentsMap.get("series");return O(t,function(t){return t.subType===e})},getSeries:function(){return this._componentsMap.get("series").slice()},getSeriesCount:function(){return this._componentsMap.get("series").length},eachSeries:function(r,i){$h(this);L(this._seriesIndices,function(t){var e=this._componentsMap.get("series")[t];r.call(i,e,t)},this)},eachRawSeries:function(t,e){L(this._componentsMap.get("series"),t,e)},eachSeriesByType:function(r,i,a){$h(this);L(this._seriesIndices,function(t){var e=this._componentsMap.get("series")[t];if(e.subType===r){i.call(a,e,t)}},this)},eachRawSeriesByType:function(t,e,r){return L(this.getSeriesByType(t),e,r)},isSeriesFiltered:function(t){$h(this);return this._seriesIndicesMap.get(t.componentIndex)==null},getCurrentSeriesIndices:function(){return(this._seriesIndices||[]).slice()},filterSeries:function(t,e){$h(this);var r=O(this._componentsMap.get("series"),t,e);qh(this,r)},restoreData:function(r){var i=this._componentsMap;qh(this,i.get("series"));var a=[];i.each(function(t,e){a.push(e)});hh.topologicalTravel(a,hh.getAllClassMainTypes(),function(e,t){L(i.get(e),function(t){(e!=="series"||!Zh(t,r))&&t.restoreData()})})}});function Zh(t,e){if(e){var r=e.seiresIndex;var i=e.seriesId;var a=e.seriesName;return r!=null&&t.componentIndex!==r||i!=null&&t.id!==i||a!=null&&t.name!==a}}function Uh(r,t){var i=r.color&&!r.colorLayer;L(t,function(t,e){if(e==="colorLayer"&&i){return}if(!hh.hasClass(e)){if(typeof t==="object"){r[e]=!r[e]?P(t):m(r[e],t,false)}else{if(r[e]==null){r[e]=t}}}})}function Xh(t){t=t;this.option={};this.option[Wh]=1;this._componentsMap=it({series:[]});this._seriesIndices;this._seriesIndicesMap;Uh(t,this._theme.option);m(t,vh,false);this.mergeOption(t)}function Yh(e,t){if(!B(t)){t=t?[t]:[]}var r={};L(t,function(t){r[t]=(e.get(t)||[]).slice()});return r}function jh(t,e,r){var i=e.type?e.type:r?r.subType:hh.determineSubType(t,e);return i}function qh(t,e){t._seriesIndicesMap=it(t._seriesIndices=A(e,function(t){return t.componentIndex})||[])}function Kh(t,e){return e.hasOwnProperty("subType")?O(t,function(t){return t.subType===e.subType}):t}function $h(t){if(D){if(!t._seriesIndices){throw new Error("Option should contains series.")}}}I(Hh,gh);var Jh=["getDom","getZr","getWidth","getHeight","getDevicePixelRatio","dispatchAction","isDisposed","on","off","getDataURL","getConnectedDataURL","getModel","getOption","getViewOfComponentModel","getViewOfSeriesModel"];function Qh(e){L(Jh,function(t){this[t]=R(e[t],e)},this)}var tf={};function ef(){this._coordinateSystems=[]}ef.prototype={constructor:ef,create:function(i,a){var n=[];L(tf,function(t,e){var r=t.create(i,a);n=n.concat(r||[])});this._coordinateSystems=n},update:function(e,r){L(this._coordinateSystems,function(t){t.update&&t.update(e,r)})},getCoordinateSystems:function(){return this._coordinateSystems.slice()}};ef.register=function(t,e){tf[t]=e};ef.get=function(t){return tf[t]};var rf=L;var af=P;var nf=A;var of=m;var sf=/^(min|max)?(.+)$/;function lf(t){this._api=t;this._timelineOptions=[];this._mediaList=[];this._mediaDefault;this._currentMediaIndices=[];this._optionBackup;this._newBaseOption}lf.prototype={constructor:lf,setOption:function(t,e){if(t){L(Ja(t.series),function(t){t&&t.data&&H(t.data)&&tt(t.data)})}t=af(t,true);var r=this._optionBackup;var i=uf.call(this,t,e,!r);this._newBaseOption=i.baseOption;if(r){vf(r.baseOption,i.baseOption);if(i.timelineOptions.length){r.timelineOptions=i.timelineOptions}if(i.mediaList.length){r.mediaList=i.mediaList}if(i.mediaDefault){r.mediaDefault=i.mediaDefault}}else{this._optionBackup=i}},mountOption:function(t){var e=this._optionBackup;this._timelineOptions=nf(e.timelineOptions,af);this._mediaList=nf(e.mediaList,af);this._mediaDefault=af(e.mediaDefault);this._currentMediaIndices=[];return af(t?e.baseOption:this._newBaseOption)},getTimelineOption:function(t){var e;var r=this._timelineOptions;if(r.length){var i=t.getComponent("timeline");if(i){e=af(r[i.getCurrentIndex()],true)}}return e},getMediaOption:function(t){var e=this._api.getWidth();var r=this._api.getHeight();var i=this._mediaList;var a=this._mediaDefault;var n=[];var o=[];if(!i.length&&!a){return o}for(var s=0,l=i.length;s<l;s++){if(hf(i[s].query,e,r)){n.push(s)}}if(!n.length&&a){n=[-1]}if(n.length&&!cf(n,this._currentMediaIndices)){o=nf(n,function(t){return af(t===-1?a.option:i[t].option)})}this._currentMediaIndices=n;return o}};function uf(t,r,i){var e=[];var a=[];var n;var o;var s=t.timeline;if(t.baseOption){o=t.baseOption}if(s||t.options){o=o||{};e=(t.options||[]).slice()}if(t.media){o=o||{};var l=t.media;rf(l,function(t){if(t&&t.option){if(t.query){a.push(t)}else if(!n){n=t}}})}if(!o){o=t}if(!o.timeline){o.timeline=s}rf([o].concat(e).concat(A(a,function(t){return t.option})),function(e){rf(r,function(t){t(e,i)})});return{baseOption:o,timelineOptions:e,mediaDefault:n,mediaList:a}}function hf(t,e,r){var n={width:e,height:r,aspectratio:e/r};var o=true;L(t,function(t,e){var r=e.match(sf);if(!r||!r[1]||!r[2]){return}var i=r[1];var a=r[2].toLowerCase();if(!ff(n[a],t,i)){o=false}});return o}function ff(t,e,r){if(r==="min"){return t>=e}else if(r==="max"){return t<=e}else{return t===e}}function cf(t,e){return t.join(",")===e.join(",")}function vf(a,t){t=t||{};rf(t,function(t,e){if(t==null){return}var r=a[e];if(!hh.hasClass(e)){a[e]=of(r,t,true)}else{t=Ja(t);r=Ja(r);var i=an(r,t);a[e]=nf(i,function(t){return t.option&&t.exist?of(t.exist,t.option,true):t.exist||t.option})}})}var df=L;var pf=F;var gf=["areaStyle","lineStyle","nodeStyle","linkStyle","chordStyle","label","labelLine"];function mf(t){var e=t&&t.itemStyle;if(!e){return}for(var r=0,i=gf.length;r<i;r++){var a=gf[r];var n=e.normal;var o=e.emphasis;if(n&&n[a]){t[a]=t[a]||{};if(!t[a].normal){t[a].normal=n[a]}else{m(t[a].normal,n[a])}n[a]=null}if(o&&o[a]){t[a]=t[a]||{};if(!t[a].emphasis){t[a].emphasis=o[a]}else{m(t[a].emphasis,o[a])}o[a]=null}}}function yf(t,e,r){if(t&&t[e]&&(t[e].normal||t[e].emphasis)){var i=t[e].normal;var a=t[e].emphasis;if(i){if(r){t[e].normal=t[e].emphasis=null;C(t[e],i)}else{t[e]=i}}if(a){t.emphasis=t.emphasis||{};t.emphasis[e]=a}}}function xf(t){yf(t,"itemStyle");yf(t,"lineStyle");yf(t,"areaStyle");yf(t,"label");yf(t,"labelLine");yf(t,"upperLabel");yf(t,"edgeLabel")}function _f(t,e){var r=pf(t)&&t[e];var i=pf(r)&&r.textStyle;if(i){for(var a=0,n=tn.length;a<n;a++){var e=tn[a];if(i.hasOwnProperty(e)){r[e]=i[e]}}}}function wf(t){if(t){xf(t);_f(t,"label");t.emphasis&&_f(t.emphasis,"label")}}function bf(t){if(!pf(t)){return}mf(t);xf(t);_f(t,"label");_f(t,"upperLabel");_f(t,"edgeLabel");if(t.emphasis){_f(t.emphasis,"label");_f(t.emphasis,"upperLabel");_f(t.emphasis,"edgeLabel")}var e=t.markPoint;if(e){mf(e);wf(e)}var r=t.markLine;if(r){mf(r);wf(r)}var i=t.markArea;if(i){wf(i)}var a=t.data;if(t.type==="graph"){a=a||t.nodes;var n=t.links||t.edges;if(n&&!H(n)){for(var o=0;o<n.length;o++){wf(n[o])}}L(t.categories,function(t){xf(t)})}if(a&&!H(a)){for(var o=0;o<a.length;o++){wf(a[o])}}var e=t.markPoint;if(e&&e.data){var s=e.data;for(var o=0;o<s.length;o++){wf(s[o])}}var r=t.markLine;if(r&&r.data){var l=r.data;for(var o=0;o<l.length;o++){if(B(l[o])){wf(l[o][0]);wf(l[o][1])}else{wf(l[o])}}}if(t.type==="gauge"){_f(t,"axisLabel");_f(t,"title");_f(t,"detail")}else if(t.type==="treemap"){yf(t.breadcrumb,"itemStyle");L(t.levels,function(t){xf(t)})}else if(t.type==="tree"){xf(t.leaves)}}function Sf(t){return B(t)?t:t?[t]:[]}function Mf(t){return(B(t)?t[0]:t)||{}}var If=function(e,t){df(Sf(e.series),function(t){pf(t)&&bf(t)});var r=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","parallelAxis","radar"];t&&r.push("valueAxis","categoryAxis","logAxis","timeAxis");df(r,function(t){df(Sf(e[t]),function(t){if(t){_f(t,"axisLabel");_f(t.axisPointer,"label")}})});df(Sf(e.parallel),function(t){var e=t&&t.parallelAxisDefault;_f(e,"axisLabel");_f(e&&e.axisPointer,"label")});df(Sf(e.calendar),function(t){yf(t,"itemStyle");_f(t,"dayLabel");_f(t,"monthLabel");_f(t,"yearLabel")});df(Sf(e.radar),function(t){_f(t,"name")});df(Sf(e.geo),function(t){if(pf(t)){wf(t);df(Sf(t.regions),function(t){wf(t)})}});df(Sf(e.timeline),function(t){wf(t);yf(t,"label");yf(t,"itemStyle");yf(t,"controlStyle",true);var e=t.data;B(e)&&L(e,function(t){if(F(t)){yf(t,"label");yf(t,"itemStyle")}})});df(Sf(e.toolbox),function(t){yf(t,"iconStyle");df(t.feature,function(t){yf(t,"iconStyle")})});_f(Mf(e.axisPointer),"label");_f(Mf(e.tooltip).axisPointer,"label")};function Tf(t,e){e=e.split(",");var r=t;for(var i=0;i<e.length;i++){r=r&&r[e[i]];if(r==null){break}}return r}function Af(t,e,r,i){e=e.split(",");var a=t;var n;for(var o=0;o<e.length-1;o++){n=e[o];if(a[n]==null){a[n]={}}a=a[n]}if(i||a[e[o]]==null){a[e[o]]=r}}function Df(e){L(Cf,function(t){if(t[0]in e&&!(t[1]in e)){e[t[1]]=e[t[0]]}})}var Cf=[["x","left"],["y","top"],["x2","right"],["y2","bottom"]];var Lf=["grid","geo","parallel","legend","toolbox","title","visualMap","dataZoom","timeline"];var kf=function(r,t){If(r,t);r.series=Ja(r.series);L(r.series,function(t){if(!F(t)){return}var e=t.type;if(e==="pie"||e==="gauge"){if(t.clockWise!=null){t.clockwise=t.clockWise}}if(e==="gauge"){var r=Tf(t,"pointer.color");r!=null&&Af(t,"itemStyle.normal.color",r)}Df(t)});if(r.dataRange){r.visualMap=r.dataRange}L(Lf,function(t){var e=r[t];if(e){if(!B(e)){e=[e]}L(e,function(t){Df(t)})}})};var Pf=function(t){var n=it();t.eachSeries(function(t){var e=t.get("stack");if(e){var r=n.get(e)||n.set(e,[]);var i=t.getData();var a={stackResultDimension:i.getCalculationInfo("stackResultDimension"),stackedOverDimension:i.getCalculationInfo("stackedOverDimension"),stackedDimension:i.getCalculationInfo("stackedDimension"),stackedByDimension:i.getCalculationInfo("stackedByDimension"),isStackedByIndex:i.getCalculationInfo("isStackedByIndex"),data:i,seriesModel:t};if(!a.stackedDimension||!(a.isStackedByIndex||a.stackedByDimension)){return}r.length&&i.setCalculationInfo("stackedOnSeries",r[r.length-1].seriesModel);r.push(a)}});n.each(Nf)};function Nf(g){L(g,function(h,f){var c=[];var v=[NaN,NaN];var t=[h.stackResultDimension,h.stackedOverDimension];var d=h.data;var p=h.isStackedByIndex;var e=d.map(t,function(t,e,r){var i=d.get(h.stackedDimension,r);if(isNaN(i)){return v}var a;var n;if(p){n=d.getRawIndex(r)}else{a=d.get(h.stackedByDimension,r)}var o=NaN;for(var s=f-1;s>=0;s--){var l=g[s];if(!p){n=l.data.rawIndexOf(l.stackedByDimension,a)}if(n>=0){var u=l.data.getByRawIndex(l.stackResultDimension,n);if(i>=0&&u>0||i<=0&&u<0){i+=u;o=u;break}}}c[0]=i;c[1]=o;return c});d.hostModel.setData(e);h.data=e})}function Of(t,e){if(!Dh.isInstance(t)){t=Dh.seriesDataToSource(t)}this._source=t;var r=this._data=t.data;var i=t.sourceFormat;if(i===Ih){if(D){if(e==null){throw new Error("Typed array data must specify dimension size")}}this._offset=0;this._dimSize=e;this._data=r}var a=Rf[i===wh?i+"_"+t.seriesLayoutBy:i];if(D){$(a,"Invalide sourceFormat: "+i)}N(this,a)}var Ef=Of.prototype;Ef.pure=false;Ef.persistent=true;Ef.getSource=function(){return this._source};var Rf={arrayRows_column:{pure:true,count:function(){return Math.max(0,this._data.length-this._source.startIndex)},getItem:function(t){return this._data[t+this._source.startIndex]},appendData:Vf},arrayRows_row:{pure:true,count:function(){var t=this._data[0];return t?Math.max(0,t.length-this._source.startIndex):0},getItem:function(t){t+=this._source.startIndex;var e=[];var r=this._data;for(var i=0;i<r.length;i++){var a=r[i];e.push(a?a[t]:null)}return e},appendData:function(){throw new Error('Do not support appendData when set seriesLayoutBy: "row".')}},objectRows:{pure:true,count:zf,getItem:Bf,appendData:Vf},keyedColumns:{pure:true,count:function(){var t=this._source.dimensionsDefine[0].name;var e=this._data[t];return e?e.length:0},getItem:function(t){var e=[];var r=this._source.dimensionsDefine;for(var i=0;i<r.length;i++){var a=this._data[r[i].name];e.push(a?a[t]:null)}return e},appendData:function(t){var a=this._data;L(t,function(t,e){var r=a[e]||(a[e]=[]);for(var i=0;i<(t||[]).length;i++){r.push(t[i])}})}},original:{count:zf,getItem:Bf,appendData:Vf},typedArray:{persistent:false,pure:true,count:function(){return this._data?this._data.length/this._dimSize:0},getItem:function(t,e){t=t-this._offset;e=e||[];var r=this._dimSize*t;for(var i=0;i<this._dimSize;i++){e[i]=this._data[r+i]}return e},appendData:function(t){if(D){$(H(t),"Added data must be TypedArray if data in initialization is TypedArray")}this._data=t},clean:function(){this._offset+=this.count();this._data=null}}};function zf(){return this._data.length}function Bf(t){return this._data[t]}function Vf(t){for(var e=0;e<t.length;e++){this._data.push(t[e])}}var Gf={arrayRows:Ff,objectRows:function(t,e,r,i){return r!=null?t[i]:t},keyedColumns:Ff,original:function(t,e,r,i){var a=en(t);return r==null||!(a instanceof Array)?a:a[r]},typedArray:Ff};function Ff(t,e,r,i){return r!=null?t[r]:t}var Wf={arrayRows:Hf,objectRows:function(t,e,r,i){return Zf(t[e],this._dimensionInfos[e])},keyedColumns:Hf,original:function(t,e,r,i){var a=t&&(t.value==null?t:t.value);if(!this._rawData.pure&&rn(t)){this.hasItemOption=true}return Zf(a instanceof Array?a[i]:a,this._dimensionInfos[e])},typedArray:function(t,e,r,i){return t[i]}};function Hf(t,e,r,i){return Zf(t[i],this._dimensionInfos[e])}function Zf(t,e){var r=e&&e.type;if(r==="ordinal"){var i=e&&e.ordinalMeta;return i?i.parseAndCollect(t):t}if(r==="time"&&typeof t!=="number"&&t!=null&&t!=="-"){t=+Su(t)}return t==null||t===""?NaN:+t}function Uf(t,e,r){if(!t){return}var i=t.getRawDataItem(e);if(i==null){return}var a=t.getProvider().getSource().sourceFormat;var n;var o;var s=t.getDimensionInfo(r);if(s){n=s.name;o=s.index}return Gf[a](i,e,o,n)}function Xf(t,e,r){if(!t){return}var i=t.getProvider().getSource().sourceFormat;if(i!==_h&&i!==bh){return}var a=t.getRawDataItem(e);if(i===_h&&!F(a)){a=null}if(a){return a[r]}}var Yf=/\{@(.+?)\}/g;var jf={getDataParams:function(t,e){var r=this.getData(e);var i=this.getRawValue(t,e);var a=r.getRawIndex(t);var n=r.getName(t);var o=r.getRawDataItem(t);var s=r.getItemVisual(t,"color");var l=this.ecModel.getComponent("tooltip");var u=l&&l.get("renderMode");var h=gn(u);var f=this.mainType;var c=f==="series";return{componentType:f,componentSubType:this.subType,componentIndex:this.componentIndex,seriesType:c?this.subType:null,seriesIndex:this.seriesIndex,seriesId:c?this.id:null,seriesName:c?this.name:null,name:n,dataIndex:a,data:o,dataType:e,value:i,color:s,marker:Fu({color:s,renderMode:h}),$vars:["seriesName","name","value"]}},getFormattedLabel:function(i,t,e,r,a){t=t||"normal";var n=this.getData(e);var o=n.getItemModel(i);var s=this.getDataParams(i,e);if(r!=null&&s.value instanceof Array){s.value=s.value[r]}var l=o.get(t==="normal"?[a||"label","formatter"]:[t,a||"label","formatter"]);if(typeof l==="function"){s.status=t;return l(s)}else if(typeof l==="string"){var u=Vu(l,s);return u.replace(Yf,function(t,e){var r=e.length;if(e.charAt(0)==="["&&e.charAt(r-1)==="]"){e=+e.slice(1,r-1)}return Uf(n,i,e)})}},getRawValue:function(t,e){return Uf(this.getData(e),t)},formatTooltip:function(){}};function qf(t){return new Kf(t)}function Kf(t){t=t||{};this._reset=t.reset;this._plan=t.plan;this._count=t.count;this._onDirty=t.onDirty;this._dirty=true;this.context}var $f=Kf.prototype;$f.perform=function(t){var e=this._upstream;var r=t&&t.skip;if(this._dirty&&e){var i=this.context;i.data=i.outputData=e.context.outputData}if(this.__pipeline){this.__pipeline.currentTask=this}var a;if(this._plan&&!r){a=this._plan(this.context)}var n=u(this._modBy);var o=this._modDataCount||0;var s=u(t&&t.modBy);var l=t&&t.modDataCount||0;if(n!==s||o!==l){a="reset"}function u(t){!(t>=1)&&(t=1);return t}var h;if(this._dirty||a==="reset"){this._dirty=false;h=tc(this,r)}this._modBy=s;this._modDataCount=l;var f=t&&t.step;if(e){if(D){$(e._outputDueEnd!=null)}this._dueEnd=e._outputDueEnd}else{if(D){$(!this._progress||this._count)}this._dueEnd=this._count?this._count(this.context):Infinity}if(this._progress){var c=this._dueIndex;var v=Math.min(f!=null?this._dueIndex+f:Infinity,this._dueEnd);if(!r&&(h||c<v)){var d=this._progress;if(B(d)){for(var p=0;p<d.length;p++){Qf(this,d[p],c,v,s,l)}}else{Qf(this,d,c,v,s,l)}}this._dueIndex=v;var g=this._settedOutputEnd!=null?this._settedOutputEnd:v;if(D){$(g>=this._outputDueEnd)}this._outputDueEnd=g}else{this._dueIndex=this._outputDueEnd=this._settedOutputEnd!=null?this._settedOutputEnd:this._dueEnd}return this.unfinished()};var Jf=function(){var a;var n;var o;var s;var l;var u={reset:function(t,e,r,i){n=t;a=e;o=r;s=i;l=Math.ceil(s/o);u.next=o>1&&s>0?f:h}};return u;function h(){return n<a?n++:null}function f(){var t=n%l*o+Math.ceil(n/l);var e=n>=a?null:t<s?t:n;n++;return e}}();$f.dirty=function(){this._dirty=true;this._onDirty&&this._onDirty(this.context)};function Qf(t,e,r,i,a,n){Jf.reset(r,i,a,n);t._callingProgress=e;t._callingProgress({start:r,end:i,count:i-r,next:Jf.next},t.context)}function tc(t,e){t._dueIndex=t._outputDueEnd=t._dueEnd=0;t._settedOutputEnd=null;var r;var i;if(!e&&t._reset){r=t._reset(t.context);if(r&&r.progress){i=r.forceFirstProgress;r=r.progress}if(B(r)&&!r.length){r=null}}t._progress=r;t._modBy=t._modDataCount=null;var a=t._downstream;a&&a.dirty();return i}$f.unfinished=function(){return this._progress&&this._dueIndex<this._dueEnd};$f.pipe=function(t){if(D){$(t&&!t._disposed&&t!==this)}if(this._downstream!==t||this._dirty){this._downstream=t;t._upstream=this;t.dirty()}};$f.dispose=function(){if(this._disposed){return}this._upstream&&(this._upstream._downstream=null);this._downstream&&(this._downstream._upstream=null);this._dirty=false;this._disposed=true};$f.getUpstream=function(){return this._upstream};$f.getDownstream=function(){return this._downstream};$f.setOutputEnd=function(t){this._outputDueEnd=this._settedOutputEnd=t};var ec=hn();var rc=hh.extend({type:"series.__base__",seriesIndex:0,coordinateSystem:null,defaultOption:null,legendDataProvider:null,visualColorAccessPath:"itemStyle.color",layoutMode:null,init:function(t,e,r,i){this.seriesIndex=this.componentIndex;this.dataTask=qf({count:nc,reset:oc});this.dataTask.context={model:this};this.mergeDefaultAndTheme(t,r);Nh(this);var a=this.getInitialData(t,r);lc(a,this);this.dataTask.context.data=a;if(D){$(a,"getInitialData returned invalid data.")}ec(this).dataBeforeProcessed=a;ic(this)},mergeDefaultAndTheme:function(t,e){var r=this.layoutMode;var i=r?oh(t):{};var a=this.subType;if(hh.hasClass(a)){a+="Series"}m(t,e.getTheme().get(this.subType));m(t,this.getDefaultOption());Qa(t,"label",["show"]);this.fillDataTextStyle(t.data);if(r){nh(t,i,r)}},mergeOption:function(t,e){t=m(this.option,t,true);this.fillDataTextStyle(t.data);var r=this.layoutMode;if(r){nh(this.option,t,r)}Nh(this);var i=this.getInitialData(t,e);lc(i,this);this.dataTask.dirty();this.dataTask.context.data=i;ec(this).dataBeforeProcessed=i;ic(this)},fillDataTextStyle:function(t){if(t&&!H(t)){var e=["show"];for(var r=0;r<t.length;r++){if(t[r]&&t[r].label){Qa(t[r],"label",e)}}}},getInitialData:function(){},appendData:function(t){var e=this.getRawData();e.appendData(t.data)},getData:function(t){var e=hc(this);if(e){var r=e.context.data;return t==null?r:r.getLinkedData(t)}else{return ec(this).data}},setData:function(t){var e=hc(this);if(e){var r=e.context;if(r.data!==t&&e.modifyOutputEnd){e.setOutputEnd(t.count())}r.outputData=t;if(e!==this.dataTask){r.data=t}}ec(this).data=t},getSource:function(){return kh(this)},getRawData:function(){return ec(this).dataBeforeProcessed},getBaseAxis:function(){var t=this.coordinateSystem;return t&&t.getBaseAxis&&t.getBaseAxis()},formatTooltip:function(a,h,t,f){var c=this;f=f||"html";var e=f==="html"?"<br/>":"\n";var v=f==="richText";var d={};var p=0;function r(t){var l=T(t,function(t,e,r){var i=g.getDimensionInfo(r);return t|=i&&i.tooltip!==false&&i.displayName!=null},0);var u=[];n.length?L(n,function(t){e(Uf(g,a,t),t)}):L(t,e);function e(t,e){var r=g.getDimensionInfo(e);if(!r||r.otherDims.tooltip===false){return}var i=r.type;var a="sub"+c.seriesIndex+"at"+p;var n=Fu({color:m,type:"subItem",renderMode:f,markerId:a});var o=typeof n==="string"?n:n.content;var s=(l?o+Ru(r.displayName||"-")+": ":"")+Ru(i==="ordinal"?t+"":i==="time"?h?"":Hu("yyyy/MM/dd hh:mm:ss",t):ku(t));s&&u.push(s);if(v){d[a]=m;++p}}var r=l?v?"\n":"<br/>":"";var i=r+u.join(r||", ");return{renderMode:f,content:i,style:d}}function i(t){return{renderMode:f,content:Ru(ku(t)),style:d}}var g=this.getData();var n=g.mapDimension("defaultedTooltip",true);var o=n.length;var s=this.getRawValue(a);var l=B(s);var m=g.getItemVisual(a,"color");if(F(m)&&m.colorStops){m=(m.colorStops[0]||{}).color}m=m||"transparent";var u=o>1||l&&!o?r(s):o?i(Uf(g,a,n[0])):i(l?s[0]:s);var y=u.content;var x=c.seriesIndex+"at"+p;var _=Fu({color:m,type:"item",renderMode:f,markerId:x});d[x]=m;++p;var w=g.getName(a);var b=this.name;if(!on(this)){b=""}b=b?Ru(b)+(!h?e:": "):"";var S=typeof _==="string"?_:_.content;var M=!h?b+S+(w?Ru(w)+": "+y:y):S+b+y;return{html:M,markers:d}},isAnimationEnabled:function(){if(y.node){return false}var t=this.getShallow("animation");if(t){if(this.getData().count()>this.getShallow("animationThreshold")){t=false}}return t},restoreData:function(){this.dataTask.dirty()},getColorFromPalette:function(t,e,r){var i=this.ecModel;var a=gh.getColorFromPalette.call(this,t,e,r);if(!a){a=i.getColorFromPalette(t,e,r)}return a},coordDimToDataDim:function(t){return this.getRawData().mapDimension(t,true)},getProgressive:function(){return this.get("progressive")},getProgressiveThreshold:function(){return this.get("progressiveThreshold")},getAxisTooltipData:null,getTooltipPosition:null,pipeTask:null,preventIncremental:null,pipelineContext:null});I(rc,jf);I(rc,gh);function ic(t){var e=t.name;if(!on(t)){t.name=ac(t)||e}}function ac(t){var r=t.getRawData();var e=r.mapDimension("seriesName",true);var i=[];L(e,function(t){var e=r.getDimensionInfo(t);e.displayName&&i.push(e.displayName)});return i.join(" ")}function nc(t){return t.model.getRawData().count()}function oc(t){var e=t.model;e.setData(e.getRawData().cloneShallow());return sc}function sc(t,e){if(t.end>e.outputData.count()){e.model.getRawData().cloneShallow(e.outputData)}}function lc(e,r){L(e.CHANGABLE_METHODS,function(t){e.wrapMethod(t,z(uc,r))})}function uc(t){var e=hc(t);if(e){e.setOutputEnd(this.count())}}function hc(t){var e=(t.ecModel||{}).scheduler;var r=e&&e.getPipeline(t.uid);if(r){var i=r.currentTask;if(i){var a=i.agentStubMap;if(a){i=a.get(t.uid)}}return i}}var fc=function(){this.group=new Or;this.uid=ou("viewComponent")};fc.prototype={constructor:fc,init:function(t,e){},render:function(t,e,r,i){},dispose:function(){},filterForExposedEvent:null};var cc=fc.prototype;cc.updateView=cc.updateLayout=cc.updateVisual=function(t,e,r,i){};wn(fc);Tn(fc,{registerWhenExtend:true});var vc=function(){var s=hn();return function(t){var e=s(t);var r=t.pipelineContext;var i=e.large;var a=e.progressiveRender;var n=e.large=r.large;var o=e.progressiveRender=r.progressiveRender;return!!(i^n||a^o)&&"reset"}};var dc=hn();var pc=vc();function gc(){this.group=new Or;this.uid=ou("viewChart");this.renderTask=qf({plan:_c,reset:wc});this.renderTask.context={view:this}}gc.prototype={type:"chart",init:function(t,e){},render:function(t,e,r,i){},highlight:function(t,e,r,i){xc(t.getData(),i,"emphasis")},downplay:function(t,e,r,i){xc(t.getData(),i,"normal")},remove:function(t,e){this.group.removeAll()},dispose:function(){},incrementalPrepareRender:null,incrementalRender:null,updateTransform:null,filterForExposedEvent:null};var mc=gc.prototype;mc.updateView=mc.updateLayout=mc.updateVisual=function(t,e,r,i){this.render(t,e,r,i)};function yc(t,e){if(t){t.trigger(e);if(t.type==="group"){for(var r=0;r<t.childCount();r++){yc(t.childAt(r),e)}}}}function xc(e,t,r){var i=un(e,t);if(i!=null){L(Ja(i),function(t){yc(e.getItemGraphicEl(t),r)})}else{e.eachItemGraphicEl(function(t){yc(t,r)})}}wn(gc,["dispose"]);Tn(gc,{registerWhenExtend:true});gc.markUpdateMethod=function(t,e){dc(t).updateMethod=e};function _c(t){return pc(t.model)}function wc(t){var e=t.model;var r=t.ecModel;var i=t.api;var a=t.payload;var n=e.pipelineContext.progressiveRender;var o=t.view;var s=a&&dc(a).updateMethod;var l=n?"incrementalPrepareRender":s&&o[s]?s:"render";if(l!=="render"){o[l](e,r,i,a)}return bc[l]}var bc={incrementalPrepareRender:{progress:function(t,e){e.view.incrementalRender(t,e.model,e.ecModel,e.api,e.payload)}},render:{forceFirstProgress:true,progress:function(t,e){e.view.render(e.model,e.ecModel,e.api,e.payload)}}};var Sc="\0__throttleOriginMethod";var Mc="\0__throttleRate";var Ic="\0__throttleType";function Tc(t,r,i){var a;var n=0;var o=0;var s=null;var l;var u;var h;var f;r=r||0;function c(){o=(new Date).getTime();s=null;t.apply(u,h||[])}var e=function(){a=(new Date).getTime();u=this;h=arguments;var t=f||r;var e=f||i;f=null;l=a-(e?n:o)-t;clearTimeout(s);if(e){s=setTimeout(c,t)}else{if(l>=0){c()}else{s=setTimeout(c,-l)}}n=a};e.clear=function(){if(s){clearTimeout(s);s=null}};e.debounceNextCall=function(t){f=t};return e}function Ac(t,e,r,i){var a=t[e];if(!a){return}var n=a[Sc]||a;var o=a[Ic];var s=a[Mc];if(s!==r||o!==i){if(r==null||!i){return t[e]=n}a=t[e]=Tc(n,r,i==="debounce");a[Sc]=n;a[Ic]=i;a[Mc]=r}return a}function Dc(t,e){var r=t[e];if(r&&r[Sc]){t[e]=r[Sc]}}var Cc={createOnAllSeries:true,performRawSeries:true,reset:function(e,t){var r=e.getData();var a=(e.visualColorAccessPath||"itemStyle.color").split(".");var i=e.get(a)||e.getColorFromPalette(e.name,null,t.getSeriesCount());r.setVisual("color",i);if(!t.isSeriesFiltered(e)){if(typeof i==="function"&&!(i instanceof Xs)){r.each(function(t){r.setItemVisual(t,"color",i(e.getDataParams(t)))})}var n=function(t,e){var r=t.getItemModel(e);var i=r.get(a,true);if(i!=null){t.setItemVisual(e,"color",i)}};return{dataEach:r.hasItemOption?n:null}}}};var Lc={toolbox:{brush:{title:{rect:"矩形选择",polygon:"圈选",lineX:"横向选择",lineY:"纵向选择",keep:"保持选择",clear:"清除选择"}},dataView:{title:"数据视图",lang:["数据视图","关闭","刷新"]},dataZoom:{title:{zoom:"区域缩放",back:"区域缩放还原"}},magicType:{title:{line:"切换为折线图",bar:"切换为柱状图",stack:"切换为堆叠",tiled:"切换为平铺"}},restore:{title:"还原"},saveAsImage:{title:"保存为图片",lang:["右键另存为图片"]}},series:{typeNames:{pie:"饼图",bar:"柱状图",line:"折线图",scatter:"散点图",effectScatter:"涟漪散点图",radar:"雷达图",tree:"树图",treemap:"矩形树图",boxplot:"箱型图",candlestick:"K线图",k:"K线图",heatmap:"热力图",map:"地图",parallel:"平行坐标图",lines:"线图",graph:"关系图",sankey:"桑基图",funnel:"漏斗图",gauge:"仪表盘图",pictorialBar:"象形柱图",themeRiver:"主题河流图",sunburst:"旭日图"}},aria:{general:{withTitle:"这是一个关于“{title}”的图表。",withoutTitle:"这是一个图表，"},series:{single:{prefix:"",withName:"图表类型是{seriesType}，表示{seriesName}。",withoutName:"图表类型是{seriesType}。"},multiple:{prefix:"它由{seriesCount}个图表系列组成。",withName:"第{seriesId}个系列是一个表示{seriesName}的{seriesType}，",withoutName:"第{seriesId}个系列是一个{seriesType}，",separator:{middle:"；",end:"。"}}},data:{allData:"其数据是——",partialData:"其中，前{displayCnt}项是——",withName:"{name}的数据是{value}",withoutName:"{value}",separator:{middle:"，",end:""}}}};var kc=function(t,e){var n=e.getModel("aria");if(!n.get("show")){return}else if(n.get("description")){t.setAttribute("aria-label",n.get("description"));return}var h=0;e.eachSeries(function(t,e){++h},this);var f=n.get("data.maxCount")||10;var r=n.get("series.maxCount")||10;var c=Math.min(h,r);var i;if(h<1){return}else{var a=s();if(a){i=d(p("general.withTitle"),{title:a})}else{i=p("general.withoutTitle")}var v=[];var o=h>1?"series.multiple.prefix":"series.single.prefix";i+=d(p(o),{seriesCount:h});e.eachSeries(function(t,e){if(e<c){var r;var i=t.get("name");var a="series."+(h>1?"multiple":"single")+".";r=p(i?a+"withName":a+"withoutName");r=d(r,{seriesId:t.seriesIndex,seriesName:t.get("name"),seriesType:g(t.subType)});var n=t.getData();window.data=n;if(n.count()>f){r+=d(p("data.partialData"),{displayCnt:f})}else{r+=p("data.allData")}var o=[];for(var s=0;s<n.count();s++){if(s<f){var l=n.getName(s);var u=Uf(n,s);o.push(d(l?p("data.withName"):p("data.withoutName"),{name:l,value:u}))}}r+=o.join(p("data.separator.middle"))+p("data.separator.end");v.push(r)}});i+=v.join(p("series.multiple.separator.middle"))+p("series.multiple.separator.end");t.setAttribute("aria-label",i)}function d(t,e){if(typeof t!=="string"){return t}var r=t;L(e,function(t,e){r=r.replace(new RegExp("\\{\\s*"+e+"\\s*\\}","g"),t)});return r}function p(t){var e=n.get(t);if(e==null){var r=t.split(".");var i=Lc.aria;for(var a=0;a<r.length;++a){i=i[r[a]]}return i}else{return e}}function s(){var t=e.getModel("title").option;if(t&&t.length){t=t[0]}return t&&t.text}function g(t){return Lc.series.typeNames[t]||"自定义图"}};var Pc=Math.PI;var Nc=function(i,t){t=t||{};C(t,{text:"loading",color:"#c23531",textColor:"#000",maskColor:"rgba(255, 255, 255, 0.8)",zlevel:0});var a=new Bs({style:{fill:t.maskColor},zlevel:t.zlevel,z:1e4});var n=new Zs({shape:{startAngle:-Pc/2,endAngle:-Pc/2+.1,r:10},style:{stroke:t.color,lineCap:"round",lineWidth:5},zlevel:t.zlevel,z:10001});var o=new Bs({style:{fill:"none",text:t.text,textPosition:"right",textDistance:10,textFill:t.textColor},zlevel:t.zlevel,z:10001});n.animateShape(true).when(1e3,{endAngle:Pc*3/2}).start("circularInOut");n.animateShape(true).when(1e3,{startAngle:Pc*3/2}).delay(300).start("circularInOut");var e=new Or;e.add(n);e.add(o);e.add(a);e.resize=function(){var t=i.getWidth()/2;var e=i.getHeight()/2;n.setShape({cx:t,cy:e});var r=n.shape.r;o.setShape({x:t-r,y:e-r,width:r*2,height:r*2});a.setShape({x:0,y:0,width:i.getWidth(),height:i.getHeight()})};e.resize();return e};function Oc(t,e,r,i){this.ecInstance=t;this.api=e;this.unfinished;var r=this._dataProcessorHandlers=r.slice();var i=this._visualHandlers=i.slice();this._allHandlers=r.concat(i);this._stageTaskMap=it()}var Ec=Oc.prototype;Ec.restoreData=function(t,e){t.restoreData(e);this._stageTaskMap.each(function(t){var e=t.overallTask;e&&e.dirty()})};Ec.getPerformArgs=function(t,e){if(!t.__pipeline){return}var r=this._pipelineMap.get(t.__pipeline.id);var i=r.context;var a=!e&&r.progressiveEnabled&&(!i||i.progressiveRender)&&t.__idxInPipeline>r.blockIndex;var n=a?r.step:null;var o=i&&i.modDataCount;var s=o!=null?Math.ceil(o/n):null;return{step:n,modBy:s,modDataCount:o}};Ec.getPipeline=function(t){return this._pipelineMap.get(t)};Ec.updateStreamModes=function(t,e){var r=this._pipelineMap.get(t.uid);var i=t.getData();var a=i.count();var n=r.progressiveEnabled&&e.incrementalPrepareRender&&a>=r.threshold;var o=t.get("large")&&a>=t.get("largeThreshold");var s=t.get("progressiveChunkMode")==="mod"?a:null;t.pipelineContext=r.context={progressiveRender:n,modDataCount:s,large:o}};Ec.restorePipelines=function(t){var i=this;var a=i._pipelineMap=it();t.eachSeries(function(t){var e=t.getProgressive();var r=t.uid;a.set(r,{id:r,head:null,tail:null,threshold:t.getProgressiveThreshold(),progressiveEnabled:e&&!(t.preventIncremental&&t.preventIncremental()),blockIndex:-1,step:Math.round(e||700),count:0});qc(i,t,t.dataTask)})};Ec.prepareStageTasks=function(){var r=this._stageTaskMap;var i=this.ecInstance.getModel();var a=this.api;L(this._allHandlers,function(t){var e=r.get(t.uid)||r.set(t.uid,[]);t.reset&&Bc(this,t,e,i,a);t.overallReset&&Vc(this,t,e,i,a)},this)};Ec.prepareView=function(t,e,r,i){var a=t.renderTask;var n=a.context;n.model=e;n.ecModel=r;n.api=i;a.__block=!t.incrementalPrepareRender;qc(this,e,a)};Ec.performDataProcessorTasks=function(t,e){Rc(this,this._dataProcessorHandlers,t,e,{block:true})};Ec.performVisualTasks=function(t,e,r){Rc(this,this._visualHandlers,t,e,r)};function Rc(l,t,u,h,f){f=f||{};var c;L(t,function(i,t){if(f.visualType&&f.visualType!==i.visualType){return}var e=l._stageTaskMap.get(i.uid);var r=e.seriesTaskMap;var a=e.overallTask;if(a){var n;var o=a.agentStubMap;o.each(function(t){if(v(f,t)){t.dirty();n=true}});n&&a.dirty();zc(a,h);var s=l.getPerformArgs(a,f.block);o.each(function(t){t.perform(s)});c|=a.perform(s)}else if(r){r.each(function(t,e){if(v(f,t)){t.dirty()}var r=l.getPerformArgs(t,f.block);r.skip=!i.performRawSeries&&u.isSeriesFiltered(t.context.model);zc(t,h);c|=t.perform(r)})}});function v(t,e){return t.setDirty&&(!t.dirtyMap||t.dirtyMap.get(e.__pipeline.id))}l.unfinished|=c}Ec.performSeriesTasks=function(t){var e;t.eachSeries(function(t){e|=t.dataTask.perform()});this.unfinished|=e};Ec.plan=function(){this._pipelineMap.each(function(t){var e=t.tail;do{if(e.__block){t.blockIndex=e.__idxInPipeline;break}e=e.getUpstream()}while(e)})};var zc=Ec.updatePayload=function(t,e){e!=="remain"&&(t.context.payload=e)};function Bc(i,a,t,n,o){var s=t.seriesTaskMap||(t.seriesTaskMap=it());var e=a.seriesType;var r=a.getTargetSeries;if(a.createOnAllSeries){n.eachRawSeries(l)}else if(e){n.eachRawSeriesByType(e,l)}else if(r){r(n,o).each(l)}function l(t){var e=t.uid;var r=s.get(e)||s.set(e,qf({plan:Zc,reset:Uc,count:jc}));r.context={model:t,ecModel:n,api:o,useClearVisual:a.isVisual&&!a.isLayout,plan:a.plan,reset:a.reset,scheduler:i};qc(i,t,r)}var u=i._pipelineMap;s.each(function(t,e){if(!u.get(e)){t.dispose();s.removeKey(e)}})}function Vc(i,t,e,r,a){var n=e.overallTask=e.overallTask||qf({reset:Gc});n.context={ecModel:r,api:a,overallReset:t.overallReset,scheduler:i};var o=n.agentStubMap=n.agentStubMap||it();var s=t.seriesType;var l=t.getTargetSeries;var u=true;var h=t.modifyOutputEnd;if(s){r.eachRawSeriesByType(s,f)}else if(l){l(r,a).each(f)}else{u=false;L(r.getSeries(),f)}function f(t){var e=t.uid;var r=o.get(e);if(!r){r=o.set(e,qf({reset:Fc,onDirty:Hc}));n.dirty()}r.context={model:t,overallProgress:u,modifyOutputEnd:h};r.agent=n;r.__block=u;qc(i,t,r)}var c=i._pipelineMap;o.each(function(t,e){if(!c.get(e)){t.dispose();n.dirty();o.removeKey(e)}})}function Gc(t){t.overallReset(t.ecModel,t.api,t.payload)}function Fc(t,e){return t.overallProgress&&Wc}function Wc(){this.agent.dirty();this.getDownstream().dirty()}function Hc(){this.agent&&this.agent.dirty()}function Zc(t){return t.plan&&t.plan(t.model,t.ecModel,t.api,t.payload)}function Uc(t){if(t.useClearVisual){t.data.clearAllVisual()}var e=t.resetDefines=Ja(t.reset(t.model,t.ecModel,t.api,t.payload));return e.length>1?A(e,function(t,e){return Yc(e)}):Xc}var Xc=Yc(0);function Yc(n){return function(t,e){var r=e.data;var i=e.resetDefines[n];if(i&&i.dataEach){for(var a=t.start;a<t.end;a++){i.dataEach(r,a)}}else if(i&&i.progress){i.progress(t,r)}}}function jc(t){return t.data.count()}function qc(t,e,r){var i=e.uid;var a=t._pipelineMap.get(i);!a.head&&(a.head=r);a.tail&&a.tail.pipe(r);a.tail=r;r.__idxInPipeline=a.count++;r.__pipeline=a}Oc.wrapStageHandler=function(t,e){if(V(t)){t={overallReset:t,seriesType:Kc(t)}}t.uid=ou("stageHandler");e&&(t.visualType=e);return t};function Kc(t){Qc=null;try{t($c,Jc)}catch(t){}return Qc}var $c={};var Jc={};var Qc;tv($c,Hh);tv(Jc,Qh);$c.eachSeriesByType=$c.eachRawSeriesByType=function(t){Qc=t};$c.eachComponent=function(t){if(t.mainType==="series"&&t.subType){Qc=t.subType}};function tv(t,e){for(var r in e.prototype){t[r]=nt}}var ev=["#37A2DA","#32C5E9","#67E0E3","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#E062AE","#E690D1","#e7bcf3","#9d96f5","#8378EA","#96BFFF"];var rv={color:ev,colorLayer:[["#37A2DA","#ffd85c","#fd7b5f"],["#37A2DA","#67E0E3","#FFDB5C","#ff9f7f","#E062AE","#9d96f5"],["#37A2DA","#32C5E9","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#e7bcf3","#8378EA","#96BFFF"],ev]};var iv="#eee";var av=function(){return{axisLine:{lineStyle:{color:iv}},axisTick:{lineStyle:{color:iv}},axisLabel:{textStyle:{color:iv}},splitLine:{lineStyle:{type:"dashed",color:"#aaa"}},splitArea:{areaStyle:{color:iv}}}};var nv=["#dd6b66","#759aa0","#e69d87","#8dc1a9","#ea7e53","#eedd78","#73a373","#73b9bc","#7289ab","#91ca8c","#f49f42"];var ov={color:nv,backgroundColor:"#333",tooltip:{axisPointer:{lineStyle:{color:iv},crossStyle:{color:iv}}},legend:{textStyle:{color:iv}},textStyle:{color:iv},title:{textStyle:{color:iv}},toolbox:{iconStyle:{normal:{borderColor:iv}}},dataZoom:{textStyle:{color:iv}},visualMap:{textStyle:{color:iv}},timeline:{lineStyle:{color:iv},itemStyle:{normal:{color:nv[1]}},label:{normal:{textStyle:{color:iv}}},controlStyle:{normal:{color:iv,borderColor:iv}}},timeAxis:av(),logAxis:av(),valueAxis:av(),categoryAxis:av(),line:{symbol:"circle"},graph:{color:nv},gauge:{title:{textStyle:{color:iv}}},candlestick:{itemStyle:{normal:{color:"#FD1050",color0:"#0CF49B",borderColor:"#FD1050",borderColor0:"#0CF49B"}}}};ov.categoryAxis.splitLine.show=false;hh.extend({type:"dataset",defaultOption:{seriesLayoutBy:Th,sourceHeader:null,dimensions:null,source:null},optionUpdated:function(){Lh(this)}});fc.extend({type:"dataset"});var sv=ts.extend({type:"ellipse",shape:{cx:0,cy:0,rx:0,ry:0},buildPath:function(t,e){var r=.5522848;var i=e.cx;var a=e.cy;var n=e.rx;var o=e.ry;var s=n*r;var l=o*r;t.moveTo(i-n,a);t.bezierCurveTo(i-n,a-l,i-s,a-o,i,a-o);t.bezierCurveTo(i+s,a-o,i+n,a-l,i+n,a);t.bezierCurveTo(i+n,a+l,i+s,a+o,i,a+o);t.bezierCurveTo(i-s,a+o,i-n,a+l,i-n,a);t.closePath()}});var lv=/[\s,]+/;function uv(t){if(G(t)){var e=new DOMParser;t=e.parseFromString(t,"text/xml")}if(t.nodeType===9){t=t.firstChild}while(t.nodeName.toLowerCase()!=="svg"||t.nodeType!==1){t=t.nextSibling}return t}function hv(){this._defs={};this._root=null;this._isDefine=false;this._isText=false}hv.prototype.parse=function(t,e){e=e||{};var r=uv(t);if(!r){throw new Error("Illegal svg")}var i=new Or;this._root=i;var a=r.getAttribute("viewBox")||"";var n=parseFloat(r.getAttribute("width")||e.width);var o=parseFloat(r.getAttribute("height")||e.height);isNaN(n)&&(n=null);isNaN(o)&&(o=null);mv(r,i,null,true);var s=r.firstChild;while(s){this._parseNode(s,i);s=s.nextSibling}var l;var u;if(a){var h=J(a).split(lv);if(h.length>=4){l={x:parseFloat(h[0]||0),y:parseFloat(h[1]||0),width:parseFloat(h[2]),height:parseFloat(h[3])}}}if(l&&n!=null&&o!=null){u=Mv(l,n,o);if(!e.ignoreViewBox){var f=i;i=new Or;i.add(f);f.scale=u.scale.slice();f.position=u.position.slice()}}if(!e.ignoreRootClip&&n!=null&&o!=null){i.setClipPath(new Bs({shape:{x:0,y:0,width:n,height:o}}))}return{root:i,width:n,height:o,viewBoxRect:l,viewBoxTransform:u}};hv.prototype._parseNode=function(t,e){var r=t.nodeName.toLowerCase();if(r==="defs"){this._isDefine=true}else if(r==="text"){this._isText=true}var i;if(this._isDefine){var a=cv[r];if(a){var n=a.call(this,t);var o=t.getAttribute("id");if(o){this._defs[o]=n}}}else{var a=fv[r];if(a){i=a.call(this,t,e);e.add(i)}}var s=t.firstChild;while(s){if(s.nodeType===1){this._parseNode(s,i)}if(s.nodeType===3&&this._isText){this._parseText(s,i)}s=s.nextSibling}if(r==="defs"){this._isDefine=false}else if(r==="text"){this._isText=false}};hv.prototype._parseText=function(t,e){if(t.nodeType===1){var r=t.getAttribute("dx")||0;var i=t.getAttribute("dy")||0;this._textX+=parseFloat(r);this._textY+=parseFloat(i)}var a=new ws({style:{text:t.textContent,transformText:true},position:[this._textX||0,this._textY||0]});dv(e,a);mv(t,a,this._defs);var n=a.style.fontSize;if(n&&n<9){a.style.fontSize=9;a.scale=a.scale||[1,1];a.scale[0]*=n/9;a.scale[1]*=n/9}var o=a.getBoundingRect();this._textX+=o.width;e.add(a);return a};var fv={g:function(t,e){var r=new Or;dv(e,r);mv(t,r,this._defs);return r},rect:function(t,e){var r=new Bs;dv(e,r);mv(t,r,this._defs);r.setShape({x:parseFloat(t.getAttribute("x")||0),y:parseFloat(t.getAttribute("y")||0),width:parseFloat(t.getAttribute("width")||0),height:parseFloat(t.getAttribute("height")||0)});return r},circle:function(t,e){var r=new bs;dv(e,r);mv(t,r,this._defs);r.setShape({cx:parseFloat(t.getAttribute("cx")||0),cy:parseFloat(t.getAttribute("cy")||0),r:parseFloat(t.getAttribute("r")||0)});return r},line:function(t,e){var r=new Gs;dv(e,r);mv(t,r,this._defs);r.setShape({x1:parseFloat(t.getAttribute("x1")||0),y1:parseFloat(t.getAttribute("y1")||0),x2:parseFloat(t.getAttribute("x2")||0),y2:parseFloat(t.getAttribute("y2")||0)});return r},ellipse:function(t,e){var r=new sv;dv(e,r);mv(t,r,this._defs);r.setShape({cx:parseFloat(t.getAttribute("cx")||0),cy:parseFloat(t.getAttribute("cy")||0),rx:parseFloat(t.getAttribute("rx")||0),ry:parseFloat(t.getAttribute("ry")||0)});return r},polygon:function(t,e){var r=t.getAttribute("points");if(r){r=pv(r)}var i=new ks({shape:{points:r||[]}});dv(e,i);mv(t,i,this._defs);return i},polyline:function(t,e){var r=new ts;dv(e,r);mv(t,r,this._defs);var i=t.getAttribute("points");if(i){i=pv(i)}var a=new Ps({shape:{points:i||[]}});return a},image:function(t,e){var r=new ha;dv(e,r);mv(t,r,this._defs);r.setStyle({image:t.getAttribute("xlink:href"),x:t.getAttribute("x"),y:t.getAttribute("y"),width:t.getAttribute("width"),height:t.getAttribute("height")});return r},text:function(t,e){var r=t.getAttribute("x")||0;var i=t.getAttribute("y")||0;var a=t.getAttribute("dx")||0;var n=t.getAttribute("dy")||0;this._textX=parseFloat(r)+parseFloat(a);this._textY=parseFloat(i)+parseFloat(n);var o=new Or;dv(e,o);mv(t,o,this._defs);return o},tspan:function(t,e){var r=t.getAttribute("x");var i=t.getAttribute("y");if(r!=null){this._textX=parseFloat(r)}if(i!=null){this._textY=parseFloat(i)}var a=t.getAttribute("dx")||0;var n=t.getAttribute("dy")||0;var o=new Or;dv(e,o);mv(t,o,this._defs);this._textX+=a;this._textY+=n;return o},path:function(t,e){var r=t.getAttribute("d")||"";var i=ys(r);dv(e,i);mv(t,i,this._defs);return i}};var cv={lineargradient:function(t){var e=parseInt(t.getAttribute("x1")||0,10);var r=parseInt(t.getAttribute("y1")||0,10);var i=parseInt(t.getAttribute("x2")||10,10);var a=parseInt(t.getAttribute("y2")||0,10);var n=new Ys(e,r,i,a);vv(t,n);return n},radialgradient:function(t){}};function vv(t,e){var r=t.firstChild;while(r){if(r.nodeType===1){var i=r.getAttribute("offset");if(i.indexOf("%")>0){i=parseInt(i,10)/100}else if(i){i=parseFloat(i)}else{i=0}var a=r.getAttribute("stop-color")||"#000000";e.addColorStop(i,a)}r=r.nextSibling}}function dv(t,e){if(t&&t.__inheritedStyle){if(!e.__inheritedStyle){e.__inheritedStyle={}}C(e.__inheritedStyle,t.__inheritedStyle)}}function pv(t){var e=J(t).split(lv);var r=[];for(var i=0;i<e.length;i+=2){var a=parseFloat(e[i]);var n=parseFloat(e[i+1]);r.push([a,n])}return r}var gv={fill:"fill",stroke:"stroke","stroke-width":"lineWidth",opacity:"opacity","fill-opacity":"fillOpacity","stroke-opacity":"strokeOpacity","stroke-dasharray":"lineDash","stroke-dashoffset":"lineDashOffset","stroke-linecap":"lineCap","stroke-linejoin":"lineJoin","stroke-miterlimit":"miterLimit","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","text-align":"textAlign","alignment-baseline":"textBaseline"};function mv(t,e,r,i){var a=e.__inheritedStyle||{};var n=e.type==="text";if(t.nodeType===1){wv(t,e);N(a,Sv(t));if(!i){for(var o in gv){if(gv.hasOwnProperty(o)){var s=t.getAttribute(o);if(s!=null){a[gv[o]]=s}}}}}var l=n?"textFill":"fill";var u=n?"textStroke":"stroke";e.style=e.style||new Jr;var h=e.style;a.fill!=null&&h.set(l,xv(a.fill,r));a.stroke!=null&&h.set(u,xv(a.stroke,r));L(["lineWidth","opacity","fillOpacity","strokeOpacity","miterLimit","fontSize"],function(t){var e=t==="lineWidth"&&n?"textStrokeWidth":t;a[t]!=null&&h.set(e,parseFloat(a[t]))});if(!a.textBaseline||a.textBaseline==="auto"){a.textBaseline="alphabetic"}if(a.textBaseline==="alphabetic"){a.textBaseline="bottom"}if(a.textAlign==="start"){a.textAlign="left"}if(a.textAlign==="end"){a.textAlign="right"}L(["lineDashOffset","lineCap","lineJoin","fontWeight","fontFamily","fontStyle","textAlign","textBaseline"],function(t){a[t]!=null&&h.set(t,a[t])});if(a.lineDash){e.style.lineDash=J(a.lineDash).split(lv)}if(h[u]&&h[u]!=="none"){e[u]=true}e.__inheritedStyle=a}var yv=/url\(\s*#(.*?)\)/;function xv(t,e){var r=e&&t&&t.match(yv);if(r){var i=J(r[1]);var a=e[i];return a}return t}var _v=/(translate|scale|rotate|skewX|skewY|matrix)\(([\-\s0-9\.e,]*)\)/g;function wv(t,e){var r=t.getAttribute("transform");if(r){r=r.replace(/,/g," ");var i=null;var a=[];r.replace(_v,function(t,e,r){a.push(e,r)});for(var n=a.length-1;n>0;n-=2){var o=a[n];var s=a[n-1];i=i||le();switch(s){case"translate":o=J(o).split(lv);ce(i,i,[parseFloat(o[0]),parseFloat(o[1]||0)]);break;case"scale":o=J(o).split(lv);de(i,i,[parseFloat(o[0]),parseFloat(o[1]||o[0])]);break;case"rotate":o=J(o).split(lv);ve(i,i,parseFloat(o[0]));break;case"skew":o=J(o).split(lv);console.warn("Skew transform is not supported yet");break;case"matrix":var o=J(o).split(lv);i[0]=parseFloat(o[0]);i[1]=parseFloat(o[1]);i[2]=parseFloat(o[2]);i[3]=parseFloat(o[3]);i[4]=parseFloat(o[4]);i[5]=parseFloat(o[5]);break}}e.setLocalTransform(i)}}var bv=/([^\s:;]+)\s*:\s*([^:;]+)/g;function Sv(t){var e=t.getAttribute("style");var r={};if(!e){return r}var i={};bv.lastIndex=0;var a;while((a=bv.exec(e))!=null){i[a[1]]=a[2]}for(var n in gv){if(gv.hasOwnProperty(n)&&i[n]!=null){r[gv[n]]=i[n]}}return r}function Mv(t,e,r){var i=e/t.width;var a=r/t.height;var n=Math.min(i,a);var o=[n,n];var s=[-(t.x+t.width/2)*n+e/2,-(t.y+t.height/2)*n+r/2];return{scale:o,position:s}}function Iv(t,e){var r=new hv;return r.parse(t,e)}var Tv=it();var Av={registerMap:function(t,e,r){var i;if(B(e)){i=e}else if(e.svg){i=[{type:"svg",source:e.svg,specialAreas:e.specialAreas}]}else{if(e.geoJson&&!e.features){r=e.specialAreas;e=e.geoJson}i=[{type:"geoJSON",source:e,specialAreas:r}]}L(i,function(t){var e=t.type;e==="geoJson"&&(e=t.type="geoJSON");var r=Dv[e];if(D){$(r,"Illegal map type: "+e)}r(t)});return Tv.set(t,i)},retrieveMap:function(t){return Tv.get(t)}};var Dv={geoJSON:function(t){var e=t.source;t.geoJSON=!G(e)?e:typeof JSON!=="undefined"&&JSON.parse?JSON.parse(e):new Function("return ("+e+");")()},svg:function(t){t.svgXML=uv(t.source)}};var Cv=$;var Lv=L;var kv=V;var Pv=F;var Nv=hh.parseClassType;var Ov="4.2.1";var Ev={zrender:"4.0.6"};var Rv=1;var zv=1e3;var Bv=5e3;var Vv=1e3;var Gv=2e3;var Fv=3e3;var Wv=4e3;var Hv=5e3;var Zv={PROCESSOR:{FILTER:zv,STATISTIC:Bv},VISUAL:{LAYOUT:Vv,GLOBAL:Gv,CHART:Fv,COMPONENT:Wv,BRUSH:Hv}};var Uv="__flagInMainProcess";var Xv="__optionUpdated";var Yv=/^[a-zA-Z0-9_]+$/;function jv(i){return function(t,e,r){t=t&&t.toLowerCase();zt.prototype[i].call(this,t,e,r)}}function qv(){zt.call(this)}qv.prototype.on=jv("on");qv.prototype.off=jv("off");qv.prototype.one=jv("one");I(qv,zt);function Kv(t,e,r){r=r||{};if(typeof e==="string"){e=Id[e]}this.id;this.group;this._dom=t;var i="canvas";if(D){i=(typeof window==="undefined"?global:window).__ECHARTS__DEFAULT__RENDERER__||i}var a=this._zr=Fa(t,{renderer:r.renderer||i,devicePixelRatio:r.devicePixelRatio,width:r.width,height:r.height});this._throttledZrFlush=Tc(R(a.flush,a),17);var e=P(e);e&&kf(e,true);this._theme=e;this._chartsViews=[];this._chartsMap={};this._componentsViews=[];this._componentsMap={};this._coordSysMgr=new ef;var n=this._api=md(this);function o(t,e){return t.__prio-e.__prio}Zr(Md,o);Zr(wd,o);this._scheduler=new Oc(this,n,wd,Md);zt.call(this,this._ecEventProcessor=new yd);this._messageCenter=new qv;this._initEvents();this.resize=R(this.resize,this);this._pendingActions=[];a.animation.on("frame",this._onframe,this);od(a,this);tt(this)}var $v=Kv.prototype;$v._onframe=function(){if(this._disposed){return}var t=this._scheduler;if(this[Xv]){var e=this[Xv].silent;this[Uv]=true;td(this);Qv.update.call(this);this[Uv]=false;this[Xv]=false;ad.call(this,e);nd.call(this,e)}else if(t.unfinished){var r=Rv;var i=this._model;var a=this._api;t.unfinished=false;do{var n=+new Date;t.performSeriesTasks(i);t.performDataProcessorTasks(i);rd(this,i);t.performVisualTasks(i);fd(this,this._model,a,"remain");r-=+new Date-n}while(r>0&&t.unfinished);if(!t.unfinished){this._zr.flush()}}};$v.getDom=function(){return this._dom};$v.getZr=function(){return this._zr};$v.setOption=function(t,e,r){if(D){Cv(!this[Uv],"`setOption` should not be called during main process.")}var i;if(Pv(e)){r=e.lazyUpdate;i=e.silent;e=e.notMerge}this[Uv]=true;if(!this._model||e){var a=new lf(this._api);var n=this._theme;var o=this._model=new Hh(null,null,n,a);o.scheduler=this._scheduler;o.init(null,null,n,a)}this._model.setOption(t,bd);if(r){this[Xv]={silent:i};this[Uv]=false}else{td(this);Qv.update.call(this);this._zr.flush();this[Xv]=false;this[Uv]=false;ad.call(this,i);nd.call(this,i)}};$v.setTheme=function(){console.error("ECharts#setTheme() is DEPRECATED in ECharts 3.0")};$v.getModel=function(){return this._model};$v.getOption=function(){return this._model&&this._model.getOption()};$v.getWidth=function(){return this._zr.getWidth()};$v.getHeight=function(){return this._zr.getHeight()};$v.getDevicePixelRatio=function(){return this._zr.painter.dpr||window.devicePixelRatio||1};$v.getRenderedCanvas=function(t){if(!y.canvasSupported){return}t=t||{};t.pixelRatio=t.pixelRatio||1;t.backgroundColor=t.backgroundColor||this._model.get("backgroundColor");var e=this._zr;return e.painter.getRenderedCanvas(t)};$v.getSvgDataUrl=function(){if(!y.svgSupported){return}var t=this._zr;var e=t.storage.getDisplayList();L(e,function(t){t.stopAnimation(true)});return t.painter.pathToDataUrl()};$v.getDataURL=function(t){t=t||{};var e=t.excludeComponents;var r=this._model;var i=[];var a=this;Lv(e,function(t){r.eachComponent({mainType:t},function(t){var e=a._componentsMap[t.__viewId];if(!e.group.ignore){i.push(e);e.group.ignore=true}})});var n=this._zr.painter.getType()==="svg"?this.getSvgDataUrl():this.getRenderedCanvas(t).toDataURL("image/"+(t&&t.type||"png"));Lv(i,function(t){t.group.ignore=false});return n};$v.getConnectedDataURL=function(a){if(!y.canvasSupported){return}var n=this.group;var o=Math.min;var s=Math.max;var t=Infinity;if(Dd[n]){var l=t;var u=t;var h=-t;var f=-t;var c=[];var r=a&&a.pixelRatio||1;L(Ad,function(t,e){if(t.group===n){var r=t.getRenderedCanvas(P(a));var i=t.getDom().getBoundingClientRect();l=o(i.left,l);u=o(i.top,u);h=s(i.right,h);f=s(i.bottom,f);c.push({dom:r,left:i.left,top:i.top})}});l*=r;u*=r;h*=r;f*=r;var e=h-l;var i=f-u;var v=_();v.width=e;v.height=i;var d=Fa(v);Lv(c,function(t){var e=new ha({style:{x:t.left*r-l,y:t.top*r-u,image:t.dom}});d.add(e)});d.refreshImmediately();return v.toDataURL("image/"+(a&&a.type||"png"))}else{return this.getDataURL(a)}};$v.convertToPixel=z(Jv,"convertToPixel");$v.convertFromPixel=z(Jv,"convertFromPixel");function Jv(t,e,r){var i=this._model;var a=this._coordSysMgr.getCoordinateSystems();var n;e=cn(i,e);for(var o=0;o<a.length;o++){var s=a[o];if(s[t]&&(n=s[t](i,e,r))!=null){return n}}if(D){console.warn("No coordinate system that supports "+t+" found by the given finder.")}}$v.containPixel=function(t,a){var e=this._model;var n;t=cn(e,t);L(t,function(t,i){i.indexOf("Models")>=0&&L(t,function(t){var e=t.coordinateSystem;if(e&&e.containPoint){n|=!!e.containPoint(a)}else if(i==="seriesModels"){var r=this._chartsMap[t.__viewId];if(r&&r.containPoint){n|=r.containPoint(a,t)}else{if(D){console.warn(i+": "+(r?"The found component do not support containPoint.":"No view mapping to the found component."))}}}else{if(D){console.warn(i+": containPoint is not supported")}}},this)},this);return!!n};$v.getVisual=function(t,e){var r=this._model;t=cn(r,t,{defaultMainType:"series"});var i=t.seriesModel;if(D){if(!i){console.warn("There is no specified seires model")}}var a=i.getData();var n=t.hasOwnProperty("dataIndexInside")?t.dataIndexInside:t.hasOwnProperty("dataIndex")?a.indexOfRawIndex(t.dataIndex):null;return n!=null?a.getItemVisual(n,e):a.getVisual(e)};$v.getViewOfComponentModel=function(t){return this._componentsMap[t.__viewId]};$v.getViewOfSeriesModel=function(t){return this._chartsMap[t.__viewId]};var Qv={prepareAndUpdate:function(t){td(this);Qv.update.call(this,t)},update:function(t){var e=this._model;var r=this._api;var i=this._zr;var a=this._coordSysMgr;var n=this._scheduler;if(!e){return}n.restoreData(e,t);n.performSeriesTasks(e);a.create(e,r);n.performDataProcessorTasks(e,t);rd(this,e);a.update(e,r);ld(e);n.performVisualTasks(e,t);ud(this,e,r,t);var o=e.get("backgroundColor")||"transparent";if(!y.canvasSupported){var s=Xe(o);o=ir(s,"rgb");if(s[3]===0){o="transparent"}}else{i.setBackgroundColor(o)}cd(e,r)},updateTransform:function(a){var n=this._model;var o=this;var s=this._api;if(!n){return}var l=[];n.eachComponent(function(t,e){var r=o.getViewOfComponentModel(e);if(r&&r.__alive){if(r.updateTransform){var i=r.updateTransform(e,n,s,a);i&&i.update&&l.push(r)}else{l.push(r)}}});var i=it();n.eachSeries(function(t){var e=o._chartsMap[t.__viewId];if(e.updateTransform){var r=e.updateTransform(t,n,s,a);r&&r.update&&i.set(t.uid,1)}else{i.set(t.uid,1)}});ld(n);this._scheduler.performVisualTasks(n,a,{setDirty:true,dirtyMap:i});fd(o,n,s,a,i);cd(n,this._api)},updateView:function(t){var e=this._model;if(!e){return}gc.markUpdateMethod(t,"updateView");ld(e);this._scheduler.performVisualTasks(e,t,{setDirty:true});ud(this,this._model,this._api,t);cd(e,this._api)},updateVisual:function(t){Qv.update.call(this,t)},updateLayout:function(t){Qv.update.call(this,t)}};function td(t){var e=t._model;var r=t._scheduler;r.restorePipelines(e);r.prepareStageTasks();sd(t,"component",e,r);sd(t,"chart",e,r);r.plan()}function ed(e,r,i,a,t){var n=e._model;if(!a){Lv(e._componentsViews.concat(e._chartsViews),u);return}var o={};o[a+"Id"]=i[a+"Id"];o[a+"Index"]=i[a+"Index"];o[a+"Name"]=i[a+"Name"];var s={mainType:a,query:o};t&&(s.subType=t);var l=i.excludeSeriesId;if(l!=null){l=it(Ja(l))}n&&n.eachComponent(s,function(t){if(!l||l.get(t.id)==null){u(e[a==="series"?"_chartsMap":"_componentsMap"][t.__viewId])}},e);function u(t){t&&t.__alive&&t[r]&&t[r](t.__model,n,e._api,i)}}$v.resize=function(t){if(D){Cv(!this[Uv],"`resize` should not be called during main process.")}this._zr.resize(t);var e=this._model;this._loadingFX&&this._loadingFX.resize();if(!e){return}var r=e.resetOption("media");var i=t&&t.silent;this[Uv]=true;r&&td(this);Qv.update.call(this);this[Uv]=false;ad.call(this,i);nd.call(this,i)};function rd(t,e){var r=t._chartsMap;var i=t._scheduler;e.eachSeries(function(t){i.updateStreamModes(t,r[t.__viewId])})}$v.showLoading=function(t,e){if(Pv(t)){e=t;t=""}t=t||"default";this.hideLoading();if(!Td[t]){if(D){console.warn("Loading effects "+t+" not exists.")}return}var r=Td[t](this._api,e);var i=this._zr;this._loadingFX=r;i.add(r)};$v.hideLoading=function(){this._loadingFX&&this._zr.remove(this._loadingFX);this._loadingFX=null};$v.makeActionFromEvent=function(t){var e=N({},t);e.type=_d[t.type];return e};$v.dispatchAction=function(t,e){if(!Pv(e)){e={silent:!!e}}if(!xd[t.type]){return}if(!this._model){return}if(this[Uv]){this._pendingActions.push(t);return}id.call(this,t,e.silent);if(e.flush){this._zr.flush(true)}else if(e.flush!==false&&y.browser.weChat){this._throttledZrFlush()}ad.call(this,e.silent);nd.call(this,e.silent)};function id(e,t){var r=e.type;var i=e.escapeConnect;var a=xd[r];var n=a.actionInfo;var o=(n.update||"update").split(":");var s=o.pop();o=o[0]!=null&&Nv(o[0]);this[Uv]=true;var l=[e];var u=false;if(e.batch){u=true;l=A(e.batch,function(t){t=C(N({},t),e);t.batch=null;return t})}var h=[];var f;var c=r==="highlight"||r==="downplay";Lv(l,function(t){f=a.action(t,this._model,this._api);f=f||N({},t);f.type=n.event||f.type;h.push(f);if(c){ed(this,s,t,"series")}else if(o){ed(this,s,t,o.main,o.sub)}},this);if(s!=="none"&&!c&&!o){if(this[Xv]){td(this);Qv.update.call(this,e);this[Xv]=false}else{Qv[s].call(this,e)}}if(u){f={type:n.event||r,escapeConnect:i,batch:h}}else{f=h[0]}this[Uv]=false;!t&&this._messageCenter.trigger(f.type,f)}function ad(t){var e=this._pendingActions;while(e.length){var r=e.shift();id.call(this,r,t)}}function nd(t){!t&&this.trigger("updated")}function od(t,e){t.on("rendered",function(){e.trigger("rendered");if(t.animation.isFinished()&&!e[Xv]&&!e._scheduler.unfinished&&!e._pendingActions.length){e.trigger("finished")}})}$v.appendData=function(t){var e=t.seriesIndex;var r=this.getModel();var i=r.getSeriesByIndex(e);if(D){Cv(t.data&&i)}i.appendData(t);this._scheduler.unfinished=true};$v.on=jv("on");$v.off=jv("off");$v.one=jv("one");function sd(t,e,n,o){var s=e==="component";var l=s?t._componentsViews:t._chartsViews;var u=s?t._componentsMap:t._chartsMap;var h=t._zr;var f=t._api;for(var r=0;r<l.length;r++){l[r].__alive=false}s?n.eachComponent(function(t,e){t!=="series"&&i(e)}):n.eachSeries(i);function i(t){var e="_ec_"+t.id+"_"+t.type;var r=u[e];if(!r){var i=Nv(t.type);var a=s?fc.getClass(i.main,i.sub):gc.getClass(i.sub);if(D){Cv(a,i.sub+" does not exist.")}r=new a;r.init(n,f);u[e]=r;l.push(r);h.add(r.group)}t.__viewId=r.__id=e;r.__alive=true;r.__model=t;r.group.__ecComponentInfo={mainType:t.mainType,index:t.componentIndex};!s&&o.prepareView(r,t,n,f)}for(var r=0;r<l.length;){var a=l[r];if(!a.__alive){!s&&a.renderTask.dispose();h.remove(a.group);a.dispose(n,f);l.splice(r,1);delete u[a.__id];a.__id=a.group.__ecComponentInfo=null}else{r++}}}function ld(t){t.clearColorPalette();t.eachSeries(function(t){t.clearColorPalette()})}function ud(t,e,r,i){hd(t,e,r,i);Lv(t._chartsViews,function(t){t.__alive=false});fd(t,e,r,i);Lv(t._chartsViews,function(t){if(!t.__alive){t.remove(e,r)}})}function hd(t,r,i,a,e){Lv(e||t._componentsViews,function(t){var e=t.__model;t.render(e,r,i,a);gd(e,t)})}function fd(i,t,e,a,n){var o=i._scheduler;var s;t.eachSeries(function(t){var e=i._chartsMap[t.__viewId];e.__alive=true;var r=e.renderTask;o.updatePayload(r,a);if(n&&n.get(t.uid)){r.dirty()}s|=r.perform(o.getPerformArgs(r));e.group.silent=!!t.get("silent");gd(t,e);pd(t,e)});o.unfinished|=s;dd(i._zr,t);kc(i._zr.dom,t)}function cd(e,r){Lv(Sd,function(t){t(e,r)})}var vd=["click","dblclick","mouseover","mouseout","mousemove","mousedown","mouseup","globalout","contextmenu"];$v._initEvents=function(){Lv(vd,function(h){var t=function(t){var e=this.getModel();var r=t.target;var i;var a=h==="globalout";if(a){i={}}else if(r&&r.dataIndex!=null){var n=r.dataModel||e.getSeriesByIndex(r.seriesIndex);i=n&&n.getDataParams(r.dataIndex,r.dataType,r)||{}}else if(r&&r.eventData){i=N({},r.eventData)}if(i){var o=i.componentType;var s=i.componentIndex;if(o==="markLine"||o==="markPoint"||o==="markArea"){o="series";s=i.seriesIndex}var l=o&&s!=null&&e.getComponent(o,s);var u=l&&this[l.mainType==="series"?"_chartsMap":"_componentsMap"][l.__viewId];if(D){if(!a&&!(l&&u)){console.warn("model or view can not be found by params")}}i.event=t;i.type=h;this._ecEventProcessor.eventInfo={targetEl:r,packedEvent:i,model:l,view:u};this.trigger(h,i)}};t.zrEventfulCallAtLast=true;this._zr.on(h,t,this)},this);Lv(_d,function(t,e){this._messageCenter.on(e,function(t){this.trigger(e,t)},this)},this)};$v.isDisposed=function(){return this._disposed};$v.clear=function(){this.setOption({series:[]},true)};$v.dispose=function(){if(this._disposed){if(D){console.warn("Instance "+this.id+" has been disposed")}return}this._disposed=true;dn(this.getDom(),kd,"");var e=this._api;var r=this._model;Lv(this._componentsViews,function(t){t.dispose(r,e)});Lv(this._chartsViews,function(t){t.dispose(r,e)});this._zr.dispose();delete Ad[this.id]};I(Kv,zt);function dd(t,e){var r=t.storage;var i=0;r.traverse(function(t){if(!t.isGroup){i++}});if(i>e.get("hoverLayerThreshold")&&!y.node){r.traverse(function(t){if(!t.isGroup){t.useHoverLayer=true}})}}function pd(t,e){var r=t.get("blendMode")||null;if(D){if(!y.canvasSupported&&r&&r!=="source-over"){console.warn("Only canvas support blendMode")}}e.group.traverse(function(t){if(!t.isGroup){if(t.style.blend!==r){t.setStyle("blend",r)}}if(t.eachPendingDisplayable){t.eachPendingDisplayable(function(t){t.setStyle("blend",r)})}})}function gd(t,e){var r=t.get("z");var i=t.get("zlevel");e.group.traverse(function(t){if(t.type!=="group"){r!=null&&(t.z=r);i!=null&&(t.zlevel=i)}})}function md(r){var t=r._coordSysMgr;return N(new Qh(r),{getCoordinateSystems:R(t.getCoordinateSystems,t),getComponentByElement:function(t){while(t){var e=t.__ecComponentInfo;if(e!=null){return r._model.getComponent(e.mainType,e.index)}t=t.parent}}})}function yd(){this.eventInfo}yd.prototype={constructor:yd,normalizeQuery:function(t){var s={};var l={};var u={};if(G(t)){var e=Nv(t);s.mainType=e.main||null;s.subType=e.sub||null}else{var h=["Index","Name","Id"];var f={name:1,dataIndex:1,dataType:1};L(t,function(t,e){var r=false;for(var i=0;i<h.length;i++){var a=h[i];var n=e.lastIndexOf(a);if(n>0&&n===e.length-a.length){var o=e.slice(0,n);if(o!=="data"){s.mainType=o;s[a.toLowerCase()]=t;r=true}}}if(f.hasOwnProperty(e)){l[e]=t;r=true}if(!r){u[e]=t}})}return{cptQuery:s,dataQuery:l,otherQuery:u}},filter:function(t,e,r){var i=this.eventInfo;if(!i){return true}var a=i.targetEl;var n=i.packedEvent;var o=i.model;var s=i.view;if(!o||!s){return true}var l=e.cptQuery;var u=e.dataQuery;return h(l,o,"mainType")&&h(l,o,"subType")&&h(l,o,"index","componentIndex")&&h(l,o,"name")&&h(l,o,"id")&&h(u,n,"name")&&h(u,n,"dataIndex")&&h(u,n,"dataType")&&(!s.filterForExposedEvent||s.filterForExposedEvent(t,e.otherQuery,a,n));function h(t,e,r,i){return t[r]==null||e[i||r]===t[r]}},afterTrigger:function(){this.eventInfo=null}};var xd={};var _d={};var wd=[];var bd=[];var Sd=[];var Md=[];var Id={};var Td={};var Ad={};var Dd={};var Cd=new Date-0;var Ld=new Date-0;var kd="_echarts_instance_";function Pd(i){var a=0;var n=1;var o=2;var s="__connectUpdateStatus";function l(t,e){for(var r=0;r<t.length;r++){var i=t[r];i[s]=e}}Lv(_d,function(t,e){i._messageCenter.on(e,function(t){if(Dd[i.group]&&i[s]!==a){if(t&&t.escapeConnect){return}var e=i.makeActionFromEvent(t);var r=[];Lv(Ad,function(t){if(t!==i&&t.group===i.group){r.push(t)}});l(r,a);Lv(r,function(t){if(t[s]!==n){t.dispatchAction(e)}});l(r,o)}})})}function Nd(t,e,r){if(D){if(Ga.replace(".","")-0<Ev.zrender.replace(".","")-0){throw new Error("zrender/src "+Ga+" is too old for ECharts "+Ov+". Current version need ZRender "+Ev.zrender+"+")}if(!t){throw new Error("Initialize failed: invalid dom.")}}var i=Bd(t);if(i){if(D){console.warn("There is a chart instance already initialized on the dom.")}return i}if(D){if(Z(t)&&t.nodeName.toUpperCase()!=="CANVAS"&&(!t.clientWidth&&(!r||r.width==null)||!t.clientHeight&&(!r||r.height==null))){console.warn("Can't get dom width or height")}}var a=new Kv(t,e,r);a.id="ec_"+Cd++;Ad[a.id]=a;dn(t,kd,a.id);Pd(a);return a}function Od(e){if(B(e)){var t=e;e=null;Lv(t,function(t){if(t.group!=null){e=t.group}});e=e||"g_"+Ld++;Lv(t,function(t){t.group=e})}Dd[e]=true;return e}function Ed(t){Dd[t]=false}var Rd=Ed;function zd(t){if(typeof t==="string"){t=Ad[t]}else if(!(t instanceof Kv)){t=Bd(t)}if(t instanceof Kv&&!t.isDisposed()){t.dispose()}}function Bd(t){return Ad[pn(t,kd)]}function Vd(t){return Ad[t]}function Gd(t,e){Id[t]=e}function Fd(t){bd.push(t)}function Wd(t,e){qd(wd,t,e,zv)}function Hd(t){Sd.push(t)}function Zd(t,e,r){if(typeof e==="function"){r=e;e=""}var i=Pv(t)?t.type:[t,t={event:e}][0];t.event=(t.event||i).toLowerCase();e=t.event;Cv(Yv.test(i)&&Yv.test(e));if(!xd[i]){xd[i]={action:r,actionInfo:t}}_d[e]=i}function Ud(t,e){ef.register(t,e)}function Xd(t){var e=ef.get(t);if(e){return e.getDimensionsInfo?e.getDimensionsInfo():e.dimensions.slice()}}function Yd(t,e){qd(Md,t,e,Vv,"layout")}function jd(t,e){qd(Md,t,e,Fv,"visual")}function qd(t,e,r,i,a){if(kv(e)||Pv(e)){r=e;e=i}if(D){if(isNaN(e)||e==null){throw new Error("Illegal priority")}Lv(t,function(t){Cv(t.__raw!==r)})}var n=Oc.wrapStageHandler(r,a);n.__prio=e;n.__raw=r;t.push(n);return n}function Kd(t,e){Td[t]=e}function $d(t){return hh.extend(t)}function Jd(t){return fc.extend(t)}function Qd(t){return rc.extend(t)}function tp(t){return gc.extend(t)}function ep(t){g("createCanvas",t)}function rp(t,e,r){Av.registerMap(t,e,r)}function ip(t){var e=Av.retrieveMap(t);return e&&e[0]&&{geoJson:e[0].geoJSON,specialAreas:e[0].specialAreas}}jd(Gv,Cc);Fd(kf);Wd(Bv,Pf);Kd("default",Nc);Zd({type:"highlight",event:"highlight",update:"highlight"},nt);Zd({type:"downplay",event:"downplay",update:"downplay"},nt);Gd("light",rv);Gd("dark",ov);var ap={};function np(t){return t}function op(t,e,r,i,a){this._old=t;this._new=e;this._oldKeyGetter=r||np;this._newKeyGetter=i||np;this.context=a}op.prototype={constructor:op,add:function(t){this._add=t;return this},update:function(t){this._update=t;return this},remove:function(t){this._remove=t;return this},execute:function(){var t=this._old;var e=this._new;var r={};var i={};var a=[];var n=[];var o;sp(t,r,a,"_oldKeyGetter",this);sp(e,i,n,"_newKeyGetter",this);for(o=0;o<t.length;o++){var s=a[o];var l=i[s];if(l!=null){var u=l.length;if(u){u===1&&(i[s]=null);l=l.unshift()}else{i[s]=null}this._update&&this._update(l,o)}else{this._remove&&this._remove(o)}}for(var o=0;o<n.length;o++){var s=n[o];if(i.hasOwnProperty(s)){var l=i[s];if(l==null){continue}if(!l.length){this._add&&this._add(l)}else{for(var h=0,u=l.length;h<u;h++){this._add&&this._add(l[h])}}}}}};function sp(t,e,r,i,a){for(var n=0;n<t.length;n++){var o="_ec_"+a[i](t[n],n);var s=e[o];if(s==null){r.push(o);e[o]=n}else{if(!s.length){e[o]=s=[s]}s.push(n)}}}var lp=it(["tooltip","label","itemName","itemId","seriesName"]);function up(i){var t={};var n=t.encode={};var o=it();var s=[];var l=[];L(i.dimensions,function(t){var a=i.getDimensionInfo(t);var e=a.coordDim;if(e){if(D){$(lp.get(e)==null)}var r=n[e];if(!n.hasOwnProperty(e)){r=n[e]=[]}r[a.coordDimIndex]=t;if(!a.isExtraCoord){o.set(e,1);if(fp(a.type)){s[0]=t}}if(a.defaultTooltip){l.push(t)}}lp.each(function(t,e){var r=n[e];if(!n.hasOwnProperty(e)){r=n[e]=[]}var i=a.otherDims[e];if(i!=null&&i!==false){r[i]=a.name}})});var a=[];var u={};o.each(function(t,e){var r=n[e];u[e]=r[0];a=a.concat(r)});t.dataDimsOnCoord=a;t.encodeFirstDimNotExtra=u;var e=n.label;if(e&&e.length){s=e.slice()}var r=n.tooltip;if(r&&r.length){l=r.slice()}else if(!l.length){l=s.slice()}n.defaultedLabel=s;n.defaultedTooltip=l;return t}function hp(t){return t==="category"?"ordinal":t==="time"?"time":"float"}function fp(t){return!(t==="ordinal"||t==="time")}var cp=F;var vp="undefined";var dp=-1;var pp="e\0\0";var gp={float:typeof Float64Array===vp?Array:Float64Array,int:typeof Int32Array===vp?Array:Int32Array,ordinal:Array,number:Array,time:Array};var mp=typeof Uint32Array===vp?Array:Uint32Array;var yp=typeof Int32Array===vp?Array:Int32Array;var xp=typeof Uint16Array===vp?Array:Uint16Array;function _p(t){return t._rawCount>65535?mp:xp}function wp(t){var e=t.constructor;return e===Array?t.slice():new e(t)}var bp=["hasItemOption","_nameList","_idList","_invertedIndicesMap","_rawData","_chunkSize","_chunkCount","_dimValueGetter","_count","_rawCount","_nameDimIdx","_idDimIdx"];var Sp=["_extent","_approximateExtent","_rawExtent"];function Mp(e,r){L(bp.concat(r.__wrappedMethods||[]),function(t){if(r.hasOwnProperty(t)){e[t]=r[t]}});e.__wrappedMethods=r.__wrappedMethods;L(Sp,function(t){e[t]=P(r[t])});e._calculationInfo=N(r._calculationInfo)}var Ip=function(t,e){t=t||["x","y"];var r={};var i=[];var a={};for(var n=0;n<t.length;n++){var o=t[n];if(G(o)){o={name:o}}var s=o.name;o.type=o.type||"float";if(!o.coordDim){o.coordDim=s;o.coordDimIndex=0}o.otherDims=o.otherDims||{};i.push(s);r[s]=o;o.index=n;if(o.createInvertedIndices){a[s]=[]}}this.dimensions=i;this._dimensionInfos=r;this.hostModel=e;this.dataType;this._indices=null;this._count=0;this._rawCount=0;this._storage={};this._nameList=[];this._idList=[];this._optionModels=[];this._visual={};this._layout={};this._itemVisuals=[];this.hasItemVisual={};this._itemLayouts=[];this._graphicEls=[];this._chunkSize=1e5;this._chunkCount=0;this._rawData;this._rawExtent={};this._extent={};this._approximateExtent={};this._dimensionsSummary=up(this);this._invertedIndicesMap=a;this._calculationInfo={}};var Tp=Ip.prototype;Tp.type="list";Tp.hasItemOption=true;Tp.getDimension=function(t){if(!isNaN(t)){t=this.dimensions[t]||t}return t};Tp.getDimensionInfo=function(t){return this._dimensionInfos[this.getDimension(t)]};Tp.getDimensionsOnCoord=function(){return this._dimensionsSummary.dataDimsOnCoord.slice()};Tp.mapDimension=function(t,e){var r=this._dimensionsSummary;if(e==null){return r.encodeFirstDimNotExtra[t]}var i=r.encode[t];return e===true?(i||[]).slice():i&&i[e]};Tp.initData=function(t,e,r){var i=Dh.isInstance(t)||E(t);if(i){t=new Of(t,this.dimensions.length)}if(D){if(!i&&(typeof t.getItem!=="function"||typeof t.count!=="function")){throw new Error("Inavlid data provider.")}}this._rawData=t;this._storage={};this._indices=null;this._nameList=e||[];this._idList=[];this._nameRepeatCount={};if(!r){this.hasItemOption=false}this.defaultDimValueGetter=Wf[this._rawData.getSource().sourceFormat];this._dimValueGetter=r=r||this.defaultDimValueGetter;this._dimValueGetterArrayRows=Wf.arrayRows;this._rawExtent={};this._initDataFromProvider(0,t.count());if(t.pure){this.hasItemOption=false}};Tp.getProvider=function(){return this._rawData};Tp.appendData=function(t){if(D){$(!this._indices,"appendData can only be called on raw data.")}var e=this._rawData;var r=this.count();e.appendData(t);var i=e.count();if(!e.persistent){i+=r}this._initDataFromProvider(r,i)};Tp.appendValues=function(t,e){var r=this._chunkSize;var i=this._storage;var a=this.dimensions;var n=a.length;var o=this._rawExtent;var s=this.count();var l=s+Math.max(t.length,e?e.length:0);var u=this._chunkCount;for(var h=0;h<n;h++){var f=a[h];if(!o[f]){o[f]=zp()}if(!i[f]){i[f]=[]}Ap(i,this._dimensionInfos[f],r,u,l);this._chunkCount=i[f].length}var c=new Array(n);for(var v=s;v<l;v++){var d=v-s;var p=Math.floor(v/r);var g=v%r;for(var m=0;m<n;m++){var f=a[m];var y=this._dimValueGetterArrayRows(t[d]||c,f,d,m);i[f][p][g]=y;var x=o[f];y<x[0]&&(x[0]=y);y>x[1]&&(x[1]=y)}if(e){this._nameList[v]=e[d]}}this._rawCount=this._count=l;this._extent={};Dp(this)};Tp._initDataFromProvider=function(t,e){if(t>=e){return}var r=this._chunkSize;var i=this._rawData;var a=this._storage;var n=this.dimensions;var o=n.length;var s=this._dimensionInfos;var l=this._nameList;var u=this._idList;var h=this._rawExtent;var f=this._nameRepeatCount={};var c;var v=this._chunkCount;for(var d=0;d<o;d++){var p=n[d];if(!h[p]){h[p]=zp()}var g=s[p];if(g.otherDims.itemName===0){c=this._nameDimIdx=d}if(g.otherDims.itemId===0){this._idDimIdx=d}if(!a[p]){a[p]=[]}Ap(a,g,r,v,e);this._chunkCount=a[p].length}var m=new Array(o);for(var y=t;y<e;y++){m=i.getItem(y,m);var x=Math.floor(y/r);var _=y%r;for(var w=0;w<o;w++){var p=n[w];var b=a[p][x];var S=this._dimValueGetter(m,p,y,w);b[_]=S;var M=h[p];S<M[0]&&(M[0]=S);S>M[1]&&(M[1]=S)}if(!i.pure){var I=l[y];if(m&&I==null){if(m.name!=null){l[y]=I=m.name}else if(c!=null){var T=n[c];var A=a[T][x];if(A){I=A[_];var D=s[T].ordinalMeta;if(D&&D.categories.length){I=D.categories[I]}}}}var C=m==null?null:m.id;if(C==null&&I!=null){f[I]=f[I]||0;C=I;if(f[I]>0){C+="__ec__"+f[I]}f[I]++}C!=null&&(u[y]=C)}}if(!i.persistent&&i.clean){i.clean()}this._rawCount=this._count=e;this._extent={};Dp(this)};function Ap(t,e,r,i,a){var n=gp[e.type];var o=i-1;var s=e.name;var l=t[s][o];if(l&&l.length<r){var u=new n(Math.min(a-o*r,r));for(var h=0;h<l.length;h++){u[h]=l[h]}t[s][o]=u}for(var f=i*r;f<a;f+=r){t[s].push(new n(Math.min(a-f,r)))}}function Dp(n){var o=n._invertedIndicesMap;L(o,function(t,e){var r=n._dimensionInfos[e];var i=r.ordinalMeta;if(i){t=o[e]=new yp(i.categories.length);for(var a=0;a<t.length;a++){t[a]=dp}for(var a=0;a<n._count;a++){t[n.get(e,a)]=a}}})}function Cp(t,e,r){var i;if(e!=null){var a=t._chunkSize;var n=Math.floor(r/a);var o=r%a;var s=t.dimensions[e];var l=t._storage[s][n];if(l){i=l[o];var u=t._dimensionInfos[s].ordinalMeta;if(u&&u.categories.length){i=u.categories[i]}}}return i}Tp.count=function(){return this._count};Tp.getIndices=function(){var t;var e=this._indices;if(e){var r=e.constructor;var i=this._count;if(r===Array){t=new r(i);for(var a=0;a<i;a++){t[a]=e[a]}}else{t=new r(e.buffer,0,i)}}else{var r=_p(this);var t=new r(this.count());for(var a=0;a<t.length;a++){t[a]=a}}return t};Tp.get=function(t,e){if(!(e>=0&&e<this._count)){return NaN}var r=this._storage;if(!r[t]){return NaN}e=this.getRawIndex(e);var i=Math.floor(e/this._chunkSize);var a=e%this._chunkSize;var n=r[t][i];var o=n[a];return o};Tp.getByRawIndex=function(t,e){if(!(e>=0&&e<this._rawCount)){return NaN}var r=this._storage[t];if(!r){return NaN}var i=Math.floor(e/this._chunkSize);var a=e%this._chunkSize;var n=r[i];return n[a]};Tp._getFast=function(t,e){var r=Math.floor(e/this._chunkSize);var i=e%this._chunkSize;var a=this._storage[t][r];return a[i]};Tp.getValues=function(t,e){var r=[];if(!B(t)){e=t;t=this.dimensions}for(var i=0,a=t.length;i<a;i++){r.push(this.get(t[i],e))}return r};Tp.hasValue=function(t){var e=this._dimensionsSummary.dataDimsOnCoord;var r=this._dimensionInfos;for(var i=0,a=e.length;i<a;i++){if(r[e[i]].type!=="ordinal"&&isNaN(this.get(e[i],t))){return false}}return true};Tp.getDataExtent=function(t){t=this.getDimension(t);var e=this._storage[t];var r=zp();if(!e){return r}var i=this.count();var a=!this._indices;var n;if(a){return this._rawExtent[t].slice()}n=this._extent[t];if(n){return n.slice()}n=r;var o=n[0];var s=n[1];for(var l=0;l<i;l++){var u=this._getFast(t,this.getRawIndex(l));u<o&&(o=u);u>s&&(s=u)}n=[o,s];this._extent[t]=n;return n};Tp.getApproximateExtent=function(t){t=this.getDimension(t);return this._approximateExtent[t]||this.getDataExtent(t)};Tp.setApproximateExtent=function(t,e){e=this.getDimension(e);this._approximateExtent[e]=t.slice()};Tp.getCalculationInfo=function(t){return this._calculationInfo[t]};Tp.setCalculationInfo=function(t,e){cp(t)?N(this._calculationInfo,t):this._calculationInfo[t]=e};Tp.getSum=function(t){var e=this._storage[t];var r=0;if(e){for(var i=0,a=this.count();i<a;i++){var n=this.get(t,i);if(!isNaN(n)){r+=n}}}return r};Tp.getMedian=function(t){var r=[];this.each(t,function(t,e){if(!isNaN(t)){r.push(t)}});var e=[].concat(r).sort(function(t,e){return t-e});var i=this.count();return i===0?0:i%2===1?e[(i-1)/2]:(e[i/2]+e[i/2-1])/2};Tp.rawIndexOf=function(t,e){var r=t&&this._invertedIndicesMap[t];if(D){if(!r){throw new Error("Do not supported yet")}}var i=r[e];if(i==null||isNaN(i)){return dp}return i};Tp.indexOfName=function(t){for(var e=0,r=this.count();e<r;e++){if(this.getName(e)===t){return e}}return-1};Tp.indexOfRawIndex=function(t){if(!this._indices){return t}if(t>=this._rawCount||t<0){return-1}var e=this._indices;var r=e[t];if(r!=null&&r<this._count&&r===t){return t}var i=0;var a=this._count-1;while(i<=a){var n=(i+a)/2|0;if(e[n]<t){i=n+1}else if(e[n]>t){a=n-1}else{return n}}return-1};Tp.indicesOfNearest=function(t,e,r){var i=this._storage;var a=i[t];var n=[];if(!a){return n}if(r==null){r=Infinity}var o=Number.MAX_VALUE;var s=-1;for(var l=0,u=this.count();l<u;l++){var h=e-this.get(t,l);var f=Math.abs(h);if(h<=r&&f<=o){if(f<o||h>=0&&s<0){o=f;s=h;n.length=0}n.push(l)}}return n};Tp.getRawIndex=Lp;function Lp(t){return t}function kp(t){if(t<this._count&&t>=0){return this._indices[t]}return-1}Tp.getRawDataItem=function(t){if(!this._rawData.persistent){var e=[];for(var r=0;r<this.dimensions.length;r++){var i=this.dimensions[r];e.push(this.get(i,t))}return e}else{return this._rawData.getItem(this.getRawIndex(t))}};Tp.getName=function(t){var e=this.getRawIndex(t);return this._nameList[e]||Cp(this,this._nameDimIdx,e)||""};Tp.getId=function(t){return Pp(this,this.getRawIndex(t))};function Pp(t,e){var r=t._idList[e];if(r==null){r=Cp(t,t._idDimIdx,e)}if(r==null){r=pp+e}return r}function Np(t){if(!B(t)){t=[t]}return t}function Op(t,e){for(var r=0;r<e.length;r++){if(!t._dimensionInfos[e[r]]){console.error("Unkown dimension "+e[r])}}}Tp.each=function(t,e,r,i){"use strict";if(!this._count){return}if(typeof t==="function"){i=r;r=e;e=t;t=[]}r=r||i||this;t=A(Np(t),this.getDimension,this);if(D){Op(this,t)}var a=t.length;for(var n=0;n<this.count();n++){switch(a){case 0:e.call(r,n);break;case 1:e.call(r,this.get(t[0],n),n);break;case 2:e.call(r,this.get(t[0],n),this.get(t[1],n),n);break;default:var o=0;var s=[];for(;o<a;o++){s[o]=this.get(t[o],n)}s[o]=n;e.apply(r,s)}}};Tp.filterSelf=function(t,e,r,i){"use strict";if(!this._count){return}if(typeof t==="function"){i=r;r=e;e=t;t=[]}r=r||i||this;t=A(Np(t),this.getDimension,this);if(D){Op(this,t)}var a=this.count();var n=_p(this);var o=new n(a);var s=[];var l=t.length;var u=0;var h=t[0];for(var f=0;f<a;f++){var c;var v=this.getRawIndex(f);if(l===0){c=e.call(r,f)}else if(l===1){var d=this._getFast(h,v);c=e.call(r,d,f)}else{for(var p=0;p<l;p++){s[p]=this._getFast(h,v)}s[p]=f;c=e.apply(r,s)}if(c){o[u++]=v}}if(u<a){this._indices=o}this._count=u;this._extent={};this.getRawIndex=this._indices?kp:Lp;return this};Tp.selectRange=function(t){"use strict";if(!this._count){return}var e=[];for(var r in t){if(t.hasOwnProperty(r)){e.push(r)}}if(D){Op(this,e)}var i=e.length;if(!i){return}var a=this.count();var n=_p(this);var o=new n(a);var s=0;var l=e[0];var u=t[l][0];var h=t[l][1];var f=false;if(!this._indices){var c=0;if(i===1){var v=this._storage[e[0]];for(var d=0;d<this._chunkCount;d++){var p=v[d];var g=Math.min(this._count-d*this._chunkSize,this._chunkSize);for(var m=0;m<g;m++){var y=p[m];if(y>=u&&y<=h||isNaN(y)){o[s++]=c}c++}}f=true}else if(i===2){var v=this._storage[l];var x=this._storage[e[1]];var _=t[e[1]][0];var w=t[e[1]][1];for(var d=0;d<this._chunkCount;d++){var p=v[d];var b=x[d];var g=Math.min(this._count-d*this._chunkSize,this._chunkSize);for(var m=0;m<g;m++){var y=p[m];var S=b[m];if((y>=u&&y<=h||isNaN(y))&&(S>=_&&S<=w||isNaN(S))){o[s++]=c}c++}}f=true}}if(!f){if(i===1){for(var m=0;m<a;m++){var M=this.getRawIndex(m);var y=this._getFast(l,M);if(y>=u&&y<=h||isNaN(y)){o[s++]=M}}}else{for(var m=0;m<a;m++){var I=true;var M=this.getRawIndex(m);for(var d=0;d<i;d++){var T=e[d];var y=this._getFast(r,M);if(y<t[T][0]||y>t[T][1]){I=false}}if(I){o[s++]=this.getRawIndex(m)}}}}if(s<a){this._indices=o}this._count=s;this._extent={};this.getRawIndex=this._indices?kp:Lp;return this};Tp.mapArray=function(t,e,r,i){"use strict";if(typeof t==="function"){i=r;r=e;e=t;t=[]}r=r||i||this;var a=[];this.each(t,function(){a.push(e&&e.apply(this,arguments))},r);return a};function Ep(t,e){var r=t.dimensions;var i=new Ip(A(r,t.getDimensionInfo,t),t.hostModel);Mp(i,t);var a=i._storage={};var n=t._storage;for(var o=0;o<r.length;o++){var s=r[o];if(n[s]){if(S(e,s)>=0){a[s]=Rp(n[s]);i._rawExtent[s]=zp();i._extent[s]=null}else{a[s]=n[s]}}}return i}function Rp(t){var e=new Array(t.length);for(var r=0;r<t.length;r++){e[r]=wp(t[r])}return e}function zp(){return[Infinity,-Infinity]}Tp.map=function(t,e,r,i){"use strict";r=r||i||this;t=A(Np(t),this.getDimension,this);if(D){Op(this,t)}var a=Ep(this,t);a._indices=this._indices;a.getRawIndex=a._indices?kp:Lp;var n=a._storage;var o=[];var s=this._chunkSize;var l=t.length;var u=this.count();var h=[];var f=a._rawExtent;for(var c=0;c<u;c++){for(var v=0;v<l;v++){h[v]=this.get(t[v],c)}h[l]=c;var d=e&&e.apply(r,h);if(d!=null){if(typeof d!=="object"){o[0]=d;d=o}var p=this.getRawIndex(c);var g=Math.floor(p/s);var m=p%s;for(var y=0;y<d.length;y++){var x=t[y];var _=d[y];var w=f[x];var b=n[x];if(b){b[g][m]=_}if(_<w[0]){w[0]=_}if(_>w[1]){w[1]=_}}}}return a};Tp.downSample=function(t,e,r,i){var a=Ep(this,[t]);var n=a._storage;var o=[];var s=Math.floor(1/e);var l=n[t];var u=this.count();var h=this._chunkSize;var f=a._rawExtent[t];var c=new(_p(this))(u);var v=0;for(var d=0;d<u;d+=s){if(s>u-d){s=u-d;o.length=s}for(var p=0;p<s;p++){var g=this.getRawIndex(d+p);var m=Math.floor(g/h);var y=g%h;o[p]=l[m][y]}var x=r(o);var _=this.getRawIndex(Math.min(d+i(o,x)||0,u-1));var w=Math.floor(_/h);var b=_%h;l[w][b]=x;if(x<f[0]){f[0]=x}if(x>f[1]){f[1]=x}c[v++]=_}a._count=v;a._indices=c;a.getRawIndex=kp;return a};Tp.getItemModel=function(t){var e=this.hostModel;return new ru(this.getRawDataItem(t),e,e&&e.ecModel)};Tp.diff=function(e){var r=this;return new op(e?e.getIndices():[],this.getIndices(),function(t){return Pp(e,t)},function(t){return Pp(r,t)})};Tp.getVisual=function(t){var e=this._visual;return e&&e[t]};Tp.setVisual=function(t,e){if(cp(t)){for(var r in t){if(t.hasOwnProperty(r)){this.setVisual(r,t[r])}}return}this._visual=this._visual||{};this._visual[t]=e};Tp.setLayout=function(t,e){if(cp(t)){for(var r in t){if(t.hasOwnProperty(r)){this.setLayout(r,t[r])}}return}this._layout[t]=e};Tp.getLayout=function(t){return this._layout[t]};Tp.getItemLayout=function(t){return this._itemLayouts[t]};Tp.setItemLayout=function(t,e,r){this._itemLayouts[t]=r?N(this._itemLayouts[t]||{},e):e};Tp.clearItemLayouts=function(){this._itemLayouts.length=0};Tp.getItemVisual=function(t,e,r){var i=this._itemVisuals[t];var a=i&&i[e];if(a==null&&!r){return this.getVisual(e)}return a};Tp.setItemVisual=function(t,e,r){var i=this._itemVisuals[t]||{};var a=this.hasItemVisual;this._itemVisuals[t]=i;if(cp(e)){for(var n in e){if(e.hasOwnProperty(n)){i[n]=e[n];a[n]=true}}return}i[e]=r;a[e]=true};Tp.clearAllVisual=function(){this._visual={};this._itemVisuals=[];this.hasItemVisual={}};var Bp=function(t){t.seriesIndex=this.seriesIndex;t.dataIndex=this.dataIndex;t.dataType=this.dataType};Tp.setItemGraphicEl=function(t,e){var r=this.hostModel;if(e){e.dataIndex=t;e.dataType=this.dataType;e.seriesIndex=r&&r.seriesIndex;if(e.type==="group"){e.traverse(Bp,e)}}this._graphicEls[t]=e};Tp.getItemGraphicEl=function(t){return this._graphicEls[t]};Tp.eachItemGraphicEl=function(r,i){L(this._graphicEls,function(t,e){if(t){r&&r.call(i,t,e)}})};Tp.cloneShallow=function(t){if(!t){var e=A(this.dimensions,this.getDimensionInfo,this);t=new Ip(e,this.hostModel)}t._storage=this._storage;Mp(t,this);if(this._indices){var r=this._indices.constructor;t._indices=new r(this._indices)}else{t._indices=null}t.getRawIndex=t._indices?kp:Lp;return t};Tp.wrapMethod=function(t,e){var r=this[t];if(typeof r!=="function"){return}this.__wrappedMethods=this.__wrappedMethods||[];this.__wrappedMethods.push(t);this[t]=function(){var t=r.apply(this,arguments);return e.apply(this,[t].concat(q(arguments)))}};Tp.TRANSFERABLE_METHODS=["cloneShallow","downSample","map"];Tp.CHANGABLE_METHODS=["filterSelf","selectRange"];function Vp(t,e,r){if(!Dh.isInstance(e)){e=Dh.seriesDataToSource(e)}r=r||{};t=(t||[]).slice();var i=(r.dimsDef||[]).slice();var l=it(r.encodeDef);var a=it();var n=it();var u=[];var o=Gp(e,t,i,r.dimCount);for(var s=0;s<o;s++){var h=i[s]=N({},F(i[s])?i[s]:{name:i[s]});var f=h.name;var c=u[s]={otherDims:{}};if(f!=null&&a.get(f)==null){c.name=c.displayName=f;a.set(f,s)}h.type!=null&&(c.type=h.type);h.displayName!=null&&(c.displayName=h.displayName)}l.each(function(t,r){t=Ja(t).slice();if(t.length===1&&t[0]<0){l.set(r,false);return}var i=l.set(r,[]);L(t,function(t,e){G(t)&&(t=a.get(t));if(t!=null&&t<o){i[e]=t;d(u[t],r,e)}})});var v=0;L(t,function(a,t){var n;var a;var o;var s;if(G(a)){n=a;a={}}else{n=a.name;var e=a.ordinalMeta;a.ordinalMeta=null;a=P(a);a.ordinalMeta=e;o=a.dimsDef;s=a.otherDims;a.name=a.coordDim=a.coordDimIndex=a.dimsDef=a.otherDims=null}var r=l.get(n);if(r===false){return}var r=Ja(r);if(!r.length){for(var i=0;i<(o&&o.length||1);i++){while(v<u.length&&u[v].coordDim!=null){v++}v<u.length&&r.push(v++)}}L(r,function(t,e){var r=u[t];d(C(r,a),n,e);if(r.name==null&&o){var i=o[e];!F(i)&&(i={name:i});r.name=r.displayName=i.name;r.defaultTooltip=i.defaultTooltip}s&&C(r.otherDims,s)})});function d(t,e,r){if(lp.get(e)!=null){t.otherDims[e]=r}else{t.coordDim=e;t.coordDimIndex=r;n.set(e,true)}}var p=r.generateCoord;var g=r.generateCoordCount;var m=g!=null;g=p?g||1:0;var y=p||"value";for(var x=0;x<o;x++){var c=u[x]=u[x]||{};var _=c.coordDim;if(_==null){c.coordDim=Fp(y,n,m);c.coordDimIndex=0;if(!p||g<=0){c.isExtraCoord=true}g--}c.name==null&&(c.name=Fp(c.coordDim,a));if(c.type==null&&Gh(e,x,c.name)){c.type="ordinal"}}return u}function Gp(t,e,r,i){var a=Math.max(t.dimensionsDetectCount||1,e.length,r.length,i||0);L(e,function(t){var e=t.dimsDef;e&&(a=Math.max(a,e.length))});return a}function Fp(t,e,r){if(r||e.get(t)!=null){var i=0;while(e.get(t+i)!=null){i++}t+=i}e.set(t,true);return t}var Wp=function(t,e){e=e||{};return Vp(e.coordDimensions||[],t,{dimsDef:e.dimensionsDefine||t.dimensionsDefine,encodeDef:e.encodeDefine||t.encodeDefine,dimCount:e.dimensionsCount,generateCoord:e.generateCoord,generateCoordCount:e.generateCoordCount})};function Hp(t,r,e){e=e||{};var i=e.byIndex;var a=e.stackedCoordDimension;var n=!!(t&&t.get("stack"));var o;var s;var l;var u;L(r,function(t,e){if(G(t)){r[e]=t={name:t}}if(n&&!t.isExtraCoord){if(!i&&!o&&t.ordinalMeta){o=t}if(!s&&t.type!=="ordinal"&&t.type!=="time"&&(!a||a===t.coordDim)){s=t}}});if(s&&!i&&!o){i=true}if(s){l="__\0ecstackresult";u="__\0ecstackedover";if(o){o.createInvertedIndices=true}var h=s.coordDim;var f=s.type;var c=0;L(r,function(t){if(t.coordDim===h){c++}});r.push({name:l,coordDim:h,coordDimIndex:c,type:f,isExtraCoord:true,isCalculationCoord:true});c++;r.push({name:u,coordDim:u,coordDimIndex:c,type:f,isExtraCoord:true,isCalculationCoord:true})}return{stackedDimension:s&&s.name,stackedByDimension:o&&o.name,isStackedByIndex:i,stackedOverDimension:u,stackResultDimension:l}}function Zp(t,e){return!!e&&e===t.getCalculationInfo("stackedDimension")}function Up(t,e){return Zp(t,e)?t.getCalculationInfo("stackResultDimension"):e}function Xp(t,e,r){r=r||{};if(!Dh.isInstance(t)){t=Dh.seriesDataToSource(t)}var i=e.get("coordinateSystem");var a=ef.get(i);var n=mh(e);var o;if(n){o=A(n.coordSysDims,function(t){var e={name:t};var r=n.axisMap.get(t);if(r){var i=r.get("type");e.type=hp(i)}return e})}if(!o){o=a&&(a.getDimensionsInfo?a.getDimensionsInfo():a.dimensions.slice())||["x","y"]}var s=Wp(t,{coordDimensions:o,generateCoord:r.generateCoord});var l;var u;n&&L(s,function(t,e){var r=t.coordDim;var i=n.categoryAxisMap.get(r);if(i){if(l==null){l=e}t.ordinalMeta=i.getOrdinalMeta()}if(t.otherDims.itemName!=null){u=true}});if(!u&&l!=null){s[l].otherDims.itemName=0}var h=Hp(e,s);var f=new Ip(s,e);f.setCalculationInfo(h);var c=l!=null&&Yp(t)?function(t,e,r,i){return i===l?r:this.defaultDimValueGetter(t,e,r,i)}:null;f.hasItemOption=false;f.initData(t,null,c);return f}function Yp(t){if(t.sourceFormat===_h){var e=jp(t.data||[]);return e!=null&&!B(en(e))}}function jp(t){var e=0;while(e<t.length&&t[e]==null){e++}return t[e]}function qp(t){this._setting=t||{};this._extent=[Infinity,-Infinity];this._interval=0;this.init&&this.init.apply(this,arguments)}qp.prototype.parse=function(t){return t};qp.prototype.getSetting=function(t){return this._setting[t]};qp.prototype.contain=function(t){var e=this._extent;return t>=e[0]&&t<=e[1]};qp.prototype.normalize=function(t){var e=this._extent;if(e[1]===e[0]){return.5}return(t-e[0])/(e[1]-e[0])};qp.prototype.scale=function(t){var e=this._extent;return t*(e[1]-e[0])+e[0]};qp.prototype.unionExtent=function(t){var e=this._extent;t[0]<e[0]&&(e[0]=t[0]);t[1]>e[1]&&(e[1]=t[1])};qp.prototype.unionExtentFromData=function(t,e){this.unionExtent(t.getApproximateExtent(e))};qp.prototype.getExtent=function(){return this._extent.slice()};qp.prototype.setExtent=function(t,e){var r=this._extent;if(!isNaN(t)){r[0]=t}if(!isNaN(e)){r[1]=e}};qp.prototype.isBlank=function(){return this._isBlank},qp.prototype.setBlank=function(t){this._isBlank=t};qp.prototype.getLabel=null;wn(qp);Tn(qp,{registerWhenExtend:true});function Kp(t){this.categories=t.categories||[];this._needCollect=t.needCollect;this._deduplication=t.deduplication;this._map}Kp.createByAxisModel=function(t){var e=t.option;var r=e.data;var i=r&&A(r,Qp);return new Kp({categories:i,needCollect:!i,deduplication:e.dedplication!==false})};var $p=Kp.prototype;$p.getOrdinal=function(t){return Jp(this).get(t)};$p.parseAndCollect=function(t){var e;var r=this._needCollect;if(typeof t!=="string"&&!r){return t}if(r&&!this._deduplication){e=this.categories.length;this.categories[e]=t;return e}var i=Jp(this);e=i.get(t);if(e==null){if(r){e=this.categories.length;this.categories[e]=t;i.set(t,e)}else{e=NaN}}return e};function Jp(t){return t._map||(t._map=it(t.categories))}function Qp(t){if(F(t)&&t.value!=null){return t.value}else{return t+""}}var tg=qp.prototype;var eg=qp.extend({type:"ordinal",init:function(t,e){if(!t||B(t)){t=new Kp({categories:t})}this._ordinalMeta=t;this._extent=e||[0,t.categories.length-1]},parse:function(t){return typeof t==="string"?this._ordinalMeta.getOrdinal(t):Math.round(t)},contain:function(t){t=this.parse(t);return tg.contain.call(this,t)&&this._ordinalMeta.categories[t]!=null},normalize:function(t){return tg.normalize.call(this,this.parse(t))},scale:function(t){return Math.round(tg.scale.call(this,t))},getTicks:function(){var t=[];var e=this._extent;var r=e[0];while(r<=e[1]){t.push(r);r++}return t},getLabel:function(t){if(!this.isBlank()){return this._ordinalMeta.categories[t]}},count:function(){return this._extent[1]-this._extent[0]+1},unionExtentFromData:function(t,e){this.unionExtent(t.getApproximateExtent(e))},getOrdinalMeta:function(){return this._ordinalMeta},niceTicks:nt,niceExtent:nt});eg.create=function(){return new eg};var rg=vu;function ig(t,e,r,i){var a={};var n=t[1]-t[0];var o=a.interval=Tu(n/e,true);if(r!=null&&o<r){o=a.interval=r}if(i!=null&&o>i){o=a.interval=i}var s=a.intervalPrecision=ag(o);var l=a.niceTickExtent=[rg(Math.ceil(t[0]/o)*o,s),rg(Math.floor(t[1]/o)*o,s)];og(l,t);return a}function ag(t){return gu(t)+2}function ng(t,e,r){t[e]=Math.max(Math.min(t[e],r[1]),r[0])}function og(t,e){!isFinite(t[0])&&(t[0]=e[0]);!isFinite(t[1])&&(t[1]=e[1]);ng(t,0,e);ng(t,1,e);if(t[0]>t[1]){t[0]=t[1]}}function sg(t,e,r,i){var a=[];if(!t){return a}var n=1e4;if(e[0]<r[0]){a.push(e[0])}var o=r[0];while(o<=r[1]){a.push(o);o=rg(o+t,i);if(o===a[a.length-1]){break}if(a.length>n){return[]}}if(e[1]>(a.length?a[a.length-1]:r[1])){a.push(e[1])}return a}var lg=vu;var ug=qp.extend({type:"interval",_interval:0,_intervalPrecision:2,setExtent:function(t,e){var r=this._extent;if(!isNaN(t)){r[0]=parseFloat(t)}if(!isNaN(e)){r[1]=parseFloat(e)}},unionExtent:function(t){var e=this._extent;t[0]<e[0]&&(e[0]=t[0]);t[1]>e[1]&&(e[1]=t[1]);ug.prototype.setExtent.call(this,e[0],e[1])},getInterval:function(){return this._interval},setInterval:function(t){this._interval=t;this._niceExtent=this._extent.slice();this._intervalPrecision=ag(t)},getTicks:function(){return sg(this._interval,this._extent,this._niceExtent,this._intervalPrecision)},getLabel:function(t,e){if(t==null){return""}var r=e&&e.precision;if(r==null){r=gu(t)||0}else if(r==="auto"){r=this._intervalPrecision}t=lg(t,r,true);return ku(t)},niceTicks:function(t,e,r){t=t||5;var i=this._extent;var a=i[1]-i[0];if(!isFinite(a)){return}if(a<0){a=-a;i.reverse()}var n=ig(i,t,e,r);this._intervalPrecision=n.intervalPrecision;this._interval=n.interval;this._niceExtent=n.niceTickExtent},niceExtent:function(t){var e=this._extent;if(e[0]===e[1]){if(e[0]!==0){var r=e[0];if(!t.fixMax){e[1]+=r/2;e[0]-=r/2}else{e[0]-=r/2}}else{e[1]=1}}var i=e[1]-e[0];if(!isFinite(i)){e[0]=0;e[1]=1}this.niceTicks(t.splitNumber,t.minInterval,t.maxInterval);var a=this._interval;if(!t.fixMin){e[0]=lg(Math.floor(e[0]/a)*a)}if(!t.fixMax){e[1]=lg(Math.ceil(e[1]/a)*a)}}});ug.create=function(){return new ug};var hg="__ec_stack_";var fg=.5;var cg=typeof Float32Array!=="undefined"?Float32Array:Array;function vg(t){return t.get("stack")||hg+t.seriesIndex}function dg(t){return t.dim+t.index}function pg(t){var e=[];var r=t.axis;var i="axis0";if(r.type!=="category"){return}var a=r.getBandWidth();for(var n=0;n<t.count||0;n++){e.push(C({bandWidth:a,axisKey:i,stackId:hg+n},t))}var o=yg(e);var s=[];for(var n=0;n<t.count;n++){var l=o[i][hg+n];l.offsetCenter=l.offset+l.width/2;s.push(l)}return s}function gg(t,e){var r=[];e.eachSeriesByType(t,function(t){if(bg(t)&&!Sg(t)){r.push(t)}});return r}function mg(t){var h=[];L(t,function(t){var e=t.getData();var r=t.coordinateSystem;var i=r.getBaseAxis();var a=i.getExtent();var n=i.type==="category"?i.getBandWidth():Math.abs(a[1]-a[0])/e.count();var o=cu(t.get("barWidth"),n);var s=cu(t.get("barMaxWidth"),n);var l=t.get("barGap");var u=t.get("barCategoryGap");h.push({bandWidth:n,barWidth:o,barMaxWidth:s,barGap:l,barCategoryGap:u,axisKey:dg(i),stackId:vg(t)})});return yg(h)}function yg(t){var f={};L(t,function(t,e){var r=t.axisKey;var i=t.bandWidth;var a=f[r]||{bandWidth:i,remainedWidth:i,autoWidthCount:0,categoryGap:"20%",gap:"30%",stacks:{}};var n=a.stacks;f[r]=a;var o=t.stackId;if(!n[o]){a.autoWidthCount++}n[o]=n[o]||{width:0,maxWidth:0};var s=t.barWidth;if(s&&!n[o].width){n[o].width=s;s=Math.min(a.remainedWidth,s);a.remainedWidth-=s}var l=t.barMaxWidth;l&&(n[o].maxWidth=l);var u=t.barGap;u!=null&&(a.gap=u);var h=t.barCategoryGap;h!=null&&(a.categoryGap=h)});var c={};L(f,function(t,r){c[r]={};var e=t.stacks;var i=t.bandWidth;var a=cu(t.categoryGap,i);var n=cu(t.gap,1);var o=t.remainedWidth;var s=t.autoWidthCount;var l=(o-a)/(s+(s-1)*n);l=Math.max(l,0);L(e,function(t,e){var r=t.maxWidth;if(r&&r<l){r=Math.min(r,o);if(t.width){r=Math.min(r,t.width)}o-=r;t.width=r;s--}});l=(o-a)/(s+(s-1)*n);l=Math.max(l,0);var u=0;var h;L(e,function(t,e){if(!t.width){t.width=l}h=t;u+=t.width*(1+n)});if(h){u-=h.width*n}var f=-u/2;L(e,function(t,e){c[r][e]=c[r][e]||{offset:f,width:t.width};f+=t.width*(1+n)})});return c}function xg(t,e,r){if(t&&e){var i=t[dg(e)];if(i!=null&&r!=null){i=i[vg(r)]}return i}}function _g(t,e){var r=gg(t,e);var T=mg(r);var A={};L(r,function(t){var e=t.getData();var r=t.coordinateSystem;var i=r.getBaseAxis();var a=vg(t);var n=T[dg(i)][a];var o=n.offset;var s=n.width;var l=r.getOtherAxis(i);var u=t.get("barMinHeight")||0;A[a]=A[a]||[];e.setLayout({offset:o,size:s});var h=e.mapDimension(l.dim);var f=e.mapDimension(i.dim);var c=Zp(e,h);var v=l.isHorizontal();var d=Mg(i,l,c);for(var p=0,g=e.count();p<g;p++){var m=e.get(h,p);var y=e.get(f,p);if(isNaN(m)){continue}var x=m>=0?"p":"n";var _=d;if(c){if(!A[a][y]){A[a][y]={p:d,n:d}}_=A[a][y][x]}var w;var b;var S;var M;if(v){var I=r.dataToPoint([m,y]);w=_;b=I[1]+o;S=I[0]-d;M=s;if(Math.abs(S)<u){S=(S<0?-1:1)*u}c&&(A[a][y][x]+=S)}else{var I=r.dataToPoint([y,m]);w=I[0]+o;b=_;S=s;M=I[1]-d;if(Math.abs(M)<u){M=(M<=0?-1:1)*u}c&&(A[a][y][x]+=M)}e.setItemLayout(p,{x:w,y:b,width:S,height:M})}},this)}var wg={seriesType:"bar",plan:vc(),reset:function(t){if(!bg(t)||!Sg(t)){return}var e=t.getData();var s=t.coordinateSystem;var l=s.getBaseAxis();var u=s.getOtherAxis(l);var h=e.mapDimension(u.dim);var f=e.mapDimension(l.dim);var c=u.isHorizontal();var v=c?0:1;var d=xg(mg([t]),l,t).width;if(!(d>fg)){d=fg}return{progress:r};function r(t,e){var r=new cg(t.count*2);var i;var a=[];var n=[];var o=0;while((i=t.next())!=null){n[v]=e.get(h,i);n[1-v]=e.get(f,i);a=s.dataToPoint(n,null,a);r[o++]=a[0];r[o++]=a[1]}e.setLayout({largePoints:r,barWidth:d,valueAxisStart:Mg(l,u,false),valueAxisHorizontal:c})}}};function bg(t){return t.coordinateSystem&&t.coordinateSystem.type==="cartesian2d"}function Sg(t){return t.pipelineContext&&t.pipelineContext.large}function Mg(t,e,r){var i=e.getGlobalExtent();var a;var n;if(i[0]>i[1]){a=i[1];n=i[0]}else{a=i[0];n=i[1]}var o=e.toGlobalCoord(e.dataToCoord(0));o<a&&(o=a);o>n&&(o=n);return o}var Ig=ug.prototype;var Tg=Math.ceil;var Ag=Math.floor;var Dg=1e3;var Cg=Dg*60;var Lg=Cg*60;var kg=Lg*24;var Pg=function(t,e,r,i){while(r<i){var a=r+i>>>1;if(t[a][1]<e){r=a+1}else{i=a}}return r};var Ng=ug.extend({type:"time",getLabel:function(t){var e=this._stepLvl;var r=new Date(t);return Hu(e[0],r,this.getSetting("useUTC"))},niceExtent:function(t){var e=this._extent;if(e[0]===e[1]){e[0]-=kg;e[1]+=kg}if(e[1]===-Infinity&&e[0]===Infinity){var r=new Date;e[1]=+new Date(r.getFullYear(),r.getMonth(),r.getDate());e[0]=e[1]-kg}this.niceTicks(t.splitNumber,t.minInterval,t.maxInterval);var i=this._interval;if(!t.fixMin){e[0]=vu(Ag(e[0]/i)*i)}if(!t.fixMax){e[1]=vu(Tg(e[1]/i)*i)}},niceTicks:function(t,e,r){t=t||10;var i=this._extent;var a=i[1]-i[0];var n=a/t;if(e!=null&&n<e){n=e}if(r!=null&&n>r){n=r}var o=Og.length;var s=Pg(Og,n,0,o);var l=Og[Math.min(s,o-1)];var u=l[1];if(l[0]==="year"){var h=a/u;var f=Tu(h/t,true);u*=f}var c=this.getSetting("useUTC")?0:new Date(+i[0]||+i[1]).getTimezoneOffset()*60*1e3;var v=[Math.round(Tg((i[0]-c)/u)*u+c),Math.round(Ag((i[1]-c)/u)*u+c)];og(v,i);this._stepLvl=l;this._interval=u;this._niceExtent=v},parse:function(t){return+Su(t)}});L(["contain","normalize"],function(e){Ng.prototype[e]=function(t){return Ig[e].call(this,this.parse(t))}});var Og=[["hh:mm:ss",Dg],["hh:mm:ss",Dg*5],["hh:mm:ss",Dg*10],["hh:mm:ss",Dg*15],["hh:mm:ss",Dg*30],["hh:mm\nMM-dd",Cg],["hh:mm\nMM-dd",Cg*5],["hh:mm\nMM-dd",Cg*10],["hh:mm\nMM-dd",Cg*15],["hh:mm\nMM-dd",Cg*30],["hh:mm\nMM-dd",Lg],["hh:mm\nMM-dd",Lg*2],["hh:mm\nMM-dd",Lg*6],["hh:mm\nMM-dd",Lg*12],["MM-dd\nyyyy",kg],["MM-dd\nyyyy",kg*2],["MM-dd\nyyyy",kg*3],["MM-dd\nyyyy",kg*4],["MM-dd\nyyyy",kg*5],["MM-dd\nyyyy",kg*6],["week",kg*7],["MM-dd\nyyyy",kg*10],["week",kg*14],["week",kg*21],["month",kg*31],["week",kg*42],["month",kg*62],["week",kg*70],["quarter",kg*95],["month",kg*31*4],["month",kg*31*5],["half-year",kg*380/2],["month",kg*31*8],["month",kg*31*10],["year",kg*380]];Ng.create=function(t){return new Ng({useUTC:t.ecModel.get("useUTC")})};var Eg=qp.prototype;var Rg=ug.prototype;var zg=gu;var Bg=vu;var Vg=Math.floor;var Gg=Math.ceil;var Fg=Math.pow;var Wg=Math.log;var Hg=qp.extend({type:"log",base:10,$constructor:function(){qp.apply(this,arguments);this._originalScale=new ug},getTicks:function(){var r=this._originalScale;var i=this._extent;var a=r.getExtent();return A(Rg.getTicks.call(this),function(t){var e=vu(Fg(this.base,t));e=t===i[0]&&r.__fixMin?Zg(e,a[0]):e;e=t===i[1]&&r.__fixMax?Zg(e,a[1]):e;return e},this)},getLabel:Rg.getLabel,scale:function(t){t=Eg.scale.call(this,t);return Fg(this.base,t)},setExtent:function(t,e){var r=this.base;t=Wg(t)/Wg(r);e=Wg(e)/Wg(r);Rg.setExtent.call(this,t,e)},getExtent:function(){var t=this.base;var e=Eg.getExtent.call(this);e[0]=Fg(t,e[0]);e[1]=Fg(t,e[1]);var r=this._originalScale;var i=r.getExtent();r.__fixMin&&(e[0]=Zg(e[0],i[0]));r.__fixMax&&(e[1]=Zg(e[1],i[1]));return e},unionExtent:function(t){this._originalScale.unionExtent(t);var e=this.base;t[0]=Wg(t[0])/Wg(e);t[1]=Wg(t[1])/Wg(e);Eg.unionExtent.call(this,t)},unionExtentFromData:function(t,e){this.unionExtent(t.getApproximateExtent(e))},niceTicks:function(t){t=t||10;var e=this._extent;var r=e[1]-e[0];if(r===Infinity||r<=0){return}var i=Mu(r);var a=t/r*i;if(a<=.5){i*=10}while(!isNaN(i)&&Math.abs(i)<1&&Math.abs(i)>0){i*=10}var n=[vu(Gg(e[0]/i)*i),vu(Vg(e[1]/i)*i)];this._interval=i;this._niceExtent=n},niceExtent:function(t){Rg.niceExtent.call(this,t);var e=this._originalScale;e.__fixMin=t.fixMin;e.__fixMax=t.fixMax}});L(["contain","normalize"],function(e){Hg.prototype[e]=function(t){t=Wg(t)/Wg(this.base);return Eg[e].call(this,t)}});Hg.create=function(){return new Hg};function Zg(t,e){return Bg(t,zg(e))}function Ug(t,e){var r=t.type;var i=e.getMin();var a=e.getMax();var n=i!=null;var o=a!=null;var s=t.getExtent();var l;var u;var h;if(r==="ordinal"){l=e.getCategories().length}else{u=e.get("boundaryGap");if(!B(u)){u=[u||0,u||0]}if(typeof u[0]==="boolean"){if(D){console.warn("Boolean type for boundaryGap is only "+"allowed for ordinal axis. Please use string in "+'percentage instead, e.g., "20%". Currently, '+"boundaryGap is set to be 0.")}u=[0,0]}u[0]=cu(u[0],1);u[1]=cu(u[1],1);h=s[1]-s[0]||Math.abs(s[0])}if(i==null){i=r==="ordinal"?l?0:NaN:s[0]-u[0]*h}if(a==null){a=r==="ordinal"?l?l-1:NaN:s[1]+u[1]*h}if(i==="dataMin"){i=s[0]}else if(typeof i==="function"){i=i({min:s[0],max:s[1]})}if(a==="dataMax"){a=s[1]}else if(typeof a==="function"){a=a({min:s[0],max:s[1]})}(i==null||!isFinite(i))&&(i=NaN);(a==null||!isFinite(a))&&(a=NaN);t.setBlank(U(i)||U(a)||r==="ordinal"&&!t.getOrdinalMeta().categories.length);if(e.getNeedCrossZero()){if(i>0&&a>0&&!n){i=0}if(i<0&&a<0&&!o){a=0}}var f=e.ecModel;if(f&&r==="time"){var c=gg("bar",f);var v;L(c,function(t){v|=t.getBaseAxis()===e.axis});if(v){var d=mg(c);var p=Xg(i,a,e,d);i=p.min;a=p.max}}return[i,a]}function Xg(t,e,r,i){var a=r.axis.getExtent();var n=a[1]-a[0];var o=xg(i,r.axis);if(o===undefined){return{min:t,max:e}}var s=Infinity;L(o,function(t){s=Math.min(t.offset,s)});var l=-Infinity;L(o,function(t){l=Math.max(t.offset+t.width,l)});s=Math.abs(s);l=Math.abs(l);var u=s+l;var h=e-t;var f=1-(s+l)/n;var c=h/f-h;e+=c*(l/u);t-=c*(s/u);return{min:t,max:e}}function Yg(t,e){var r=Ug(t,e);var i=e.getMin()!=null;var a=e.getMax()!=null;var n=e.get("splitNumber");if(t.type==="log"){t.base=e.get("logBase")}var o=t.type;t.setExtent(r[0],r[1]);t.niceExtent({splitNumber:n,fixMin:i,fixMax:a,minInterval:o==="interval"||o==="time"?e.get("minInterval"):null,maxInterval:o==="interval"||o==="time"?e.get("maxInterval"):null});var s=e.get("interval");if(s!=null){t.setInterval&&t.setInterval(s)}}function jg(t,e){e=e||t.get("type");if(e){switch(e){case"category":return new eg(t.getOrdinalMeta?t.getOrdinalMeta():t.getCategories(),[Infinity,-Infinity]);case"value":return new ug;default:return(qp.getClass(e)||ug).create(t)}}}function qg(t){var e=t.scale.getExtent();var r=e[0];var i=e[1];return!(r>0&&i>0||r<0&&i<0)}function Kg(r){var i=r.getLabelModel().get("formatter");var a=r.type==="category"?r.scale.getExtent()[0]:null;if(typeof i==="string"){i=function(e){return function(t){t=r.scale.getLabel(t);return e.replace("{value}",t!=null?t:"")}}(i);return i}else if(typeof i==="function"){return function(t,e){if(a!=null){e=t-a}return i($g(r,t),e)}}else{return function(t){return r.scale.getLabel(t)}}}function $g(t,e){return t.type==="category"?t.scale.getLabel(e):e}function Jg(t){var e=t.model;var r=t.scale;if(!e.get("axisLabel.show")||r.isBlank()){return}var i=t.type==="category";var a;var n;var o=r.getExtent();if(i){n=r.count()}else{a=r.getTicks();n=a.length}var s=t.getLabelModel();var l=Kg(t);var u;var h=1;if(n>40){h=Math.ceil(n/40)}for(var f=0;f<n;f+=h){var c=a?a[f]:o[0]+f;var v=l(c);var d=s.getTextRect(v);var p=Qg(d,s.get("rotate")||0);u?u.union(p):u=p}return u}function Qg(t,e){var r=e*Math.PI/180;var i=t.plain();var a=i.width;var n=i.height;var o=a*Math.cos(r)+n*Math.sin(r);var s=a*Math.sin(r)+n*Math.cos(r);var l=new Nr(i.x,i.y,o,s);return l}function tm(t){var e=t.get("interval");return e==null?"auto":e}function em(t){return t.type==="category"&&tm(t.getLabelModel())===0}var rm={getMin:function(t){var e=this.option;var r=!t&&e.rangeStart!=null?e.rangeStart:e.min;if(this.axis&&r!=null&&r!=="dataMin"&&typeof r!=="function"&&!U(r)){r=this.axis.scale.parse(r)}return r},getMax:function(t){var e=this.option;var r=!t&&e.rangeEnd!=null?e.rangeEnd:e.max;if(this.axis&&r!=null&&r!=="dataMax"&&typeof r!=="function"&&!U(r)){r=this.axis.scale.parse(r)}return r},getNeedCrossZero:function(){var t=this.option;return t.rangeStart!=null||t.rangeEnd!=null?false:!t.scale},getCoordSysModel:nt,setRange:function(t,e){this.option.rangeStart=t;this.option.rangeEnd=e},resetRange:function(){this.option.rangeStart=this.option.rangeEnd=null}};var im=rl({type:"triangle",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(t,e){var r=e.cx;var i=e.cy;var a=e.width/2;var n=e.height/2;t.moveTo(r,i-n);t.lineTo(r+a,i+n);t.lineTo(r-a,i+n);t.closePath()}});var am=rl({type:"diamond",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(t,e){var r=e.cx;var i=e.cy;var a=e.width/2;var n=e.height/2;t.moveTo(r,i-n);t.lineTo(r+a,i);t.lineTo(r,i+n);t.lineTo(r-a,i);t.closePath()}});var nm=rl({type:"pin",shape:{x:0,y:0,width:0,height:0},buildPath:function(t,e){var r=e.x;var i=e.y;var a=e.width/5*3;var n=Math.max(a,e.height);var o=a/2;var s=o*o/(n-o);var l=i-n+o+s;var u=Math.asin(s/o);var h=Math.cos(u)*o;var f=Math.sin(u);var c=Math.cos(u);var v=o*.6;var d=o*.7;t.moveTo(r-h,l+s);t.arc(r,l,o,Math.PI-u,Math.PI*2+u);t.bezierCurveTo(r+h-f*v,l+s+c*v,r,i-d,r,i);t.bezierCurveTo(r,i-d,r-h+f*v,l+s+c*v,r-h,l+s);t.closePath()}});var om=rl({type:"arrow",shape:{x:0,y:0,width:0,height:0},buildPath:function(t,e){var r=e.height;var i=e.width;var a=e.x;var n=e.y;var o=i/3*2;t.moveTo(a,n);t.lineTo(a+o,n+r);t.lineTo(a,n+r/4*3);t.lineTo(a-o,n+r);t.lineTo(a,n);t.closePath()}});var sm={line:Gs,rect:Bs,roundRect:Bs,square:Bs,circle:bs,diamond:am,pin:nm,arrow:om,triangle:im};var lm={line:function(t,e,r,i,a){a.x1=t;a.y1=e+i/2;a.x2=t+r;a.y2=e+i/2},rect:function(t,e,r,i,a){a.x=t;a.y=e;a.width=r;a.height=i},roundRect:function(t,e,r,i,a){a.x=t;a.y=e;a.width=r;a.height=i;a.r=Math.min(r,i)/4},square:function(t,e,r,i,a){var n=Math.min(r,i);a.x=t;a.y=e;a.width=n;a.height=n},circle:function(t,e,r,i,a){a.cx=t+r/2;a.cy=e+i/2;a.r=Math.min(r,i)/2},diamond:function(t,e,r,i,a){a.cx=t+r/2;a.cy=e+i/2;a.width=r;a.height=i},pin:function(t,e,r,i,a){a.x=t+r/2;a.y=e+i/2;a.width=r;a.height=i},arrow:function(t,e,r,i,a){a.x=t+r/2;a.y=e+i/2;a.width=r;a.height=i},triangle:function(t,e,r,i,a){a.cx=t+r/2;a.cy=e+i/2;a.width=r;a.height=i}};var um={};L(sm,function(t,e){um[e]=new t});var hm=rl({type:"symbol",shape:{symbolType:"",x:0,y:0,width:0,height:0},beforeBrush:function(){var t=this.style;var e=this.shape;if(e.symbolType==="pin"&&t.textPosition==="inside"){t.textPosition=["50%","40%"];t.textAlign="center";t.textVerticalAlign="middle"}},buildPath:function(t,e,r){var i=e.symbolType;var a=um[i];if(e.symbolType!=="none"){if(!a){i="rect";a=um[i]}lm[i](e.x,e.y,e.width,e.height,a.shape);a.buildPath(t,a.shape,r)}}});function fm(t,e){if(this.type!=="image"){var r=this.style;var i=this.shape;if(i&&i.symbolType==="line"){r.stroke=t}else if(this.__isEmptyBrush){r.stroke=t;r.fill=e||"#fff"}else{r.fill&&(r.fill=t);r.stroke&&(r.stroke=t)}this.dirty(false)}}function cm(t,e,r,i,a,n,o){var s=t.indexOf("empty")===0;if(s){t=t.substr(5,1).toLowerCase()+t.substr(6)}var l;if(t.indexOf("image://")===0){l=nl(t.slice(8),new Nr(e,r,i,a),o?"center":"cover")}else if(t.indexOf("path://")===0){l=al(t.slice(7),{},new Nr(e,r,i,a),o?"center":"cover")}else{l=new hm({shape:{symbolType:t,x:e,y:r,width:i,height:a}})}l.__isEmptyBrush=s;l.setColor=fm;l.setColor(n);return l}function vm(t){return Xp(t.getSource(),t)}var dm={isDimensionStacked:Zp,enableDataStack:Hp,getStackedDimension:Up};function pm(t,e){var r=e;if(!ru.isInstance(e)){r=new ru(e);I(r,rm)}var i=jg(r);i.setExtent(t[0],t[1]);Yg(i,r);return i}function gm(t){I(t,rm)}var mm=(Object.freeze||Object)({createList:vm,getLayoutRect:rh,dataStack:dm,createScale:pm,mixinAxisModelCommonMethods:gm,completeDimensions:Vp,createDimensions:Wp,createSymbol:cm});var ym=1e-8;function xm(t,e){return Math.abs(t-e)<ym}function _m(t,e,r){var i=0;var a=t[0];if(!a){return false}for(var n=1;n<t.length;n++){var o=t[n];i+=zo(a[0],a[1],o[0],o[1],e,r);a=o}var s=t[0];if(!xm(a[0],s[0])||!xm(a[1],s[1])){i+=zo(a[0],a[1],s[0],s[1],e,r)}return i!==0}function wm(t,e,r){this.name=t;this.geometries=e;if(!r){var i=this.getBoundingRect();r=[i.x+i.width/2,i.y+i.height/2]}else{r=[r[0],r[1]]}this.center=r}wm.prototype={constructor:wm,properties:null,getBoundingRect:function(){var t=this._rect;if(t){return t}var e=Number.MAX_VALUE;var r=[e,e];var i=[-e,-e];var a=[];var n=[];var o=this.geometries;for(var s=0;s<o.length;s++){if(o[s].type!=="polygon"){continue}var l=o[s].exterior;uo(l,a,n);kt(r,r,a);Pt(i,i,n)}if(s===0){r[0]=r[1]=i[0]=i[1]=0}return this._rect=new Nr(r[0],r[1],i[0]-r[0],i[1]-r[1])},contain:function(t){var e=this.getBoundingRect();var r=this.geometries;if(!e.contain(t[0],t[1])){return false}t:for(var i=0,a=r.length;i<a;i++){if(r[i].type!=="polygon"){continue}var n=r[i].exterior;var o=r[i].interiors;if(_m(n,t[0],t[1])){for(var s=0;s<(o?o.length:0);s++){if(_m(o[s])){continue t}}return true}}return false},transformTo:function(t,e,r,i){var a=this.getBoundingRect();var n=a.width/a.height;if(!r){r=n*i}else if(!i){i=r/n}var o=new Nr(t,e,r,i);var s=a.calculateTransform(o);var l=this.geometries;for(var u=0;u<l.length;u++){if(l[u].type!=="polygon"){continue}var h=l[u].exterior;var f=l[u].interiors;for(var c=0;c<h.length;c++){Lt(h[c],h[c],s)}for(var v=0;v<(f?f.length:0);v++){for(var c=0;c<f[v].length;c++){Lt(f[v][c],f[v][c],s)}}}a=this._rect;a.copy(o);this.center=[a.x+a.width/2,a.y+a.height/2]},cloneShallow:function(t){t==null&&(t=this.name);var e=new wm(t,this.geometries,this.center);e._rect=this._rect;e.transformTo=null;return e}};function bm(t){if(!t.UTF8Encoding){return t}var e=t.UTF8Scale;if(e==null){e=1024}var r=t.features;for(var i=0;i<r.length;i++){var a=r[i];var n=a.geometry;var o=n.coordinates;var s=n.encodeOffsets;for(var l=0;l<o.length;l++){var u=o[l];if(n.type==="Polygon"){o[l]=Sm(u,s[l],e)}else if(n.type==="MultiPolygon"){for(var h=0;h<u.length;h++){var f=u[h];u[h]=Sm(f,s[l][h],e)}}}}t.UTF8Encoding=false;return t}function Sm(t,e,r){var i=[];var a=e[0];var n=e[1];for(var o=0;o<t.length;o+=2){var s=t.charCodeAt(o)-64;var l=t.charCodeAt(o+1)-64;s=s>>1^-(s&1);l=l>>1^-(l&1);s+=a;l+=n;a=s;n=l;i.push([s/r,l/r])}return i}var Mm=function(t){bm(t);return A(O(t.features,function(t){return t.geometry&&t.properties&&t.geometry.coordinates.length>0}),function(t){var e=t.properties;var r=t.geometry;var i=r.coordinates;var a=[];if(r.type==="Polygon"){a.push({type:"polygon",exterior:i[0],interiors:i.slice(1)})}if(r.type==="MultiPolygon"){L(i,function(t){if(t[0]){a.push({type:"polygon",exterior:t[0],interiors:t.slice(1)})}})}var n=new wm(e.name,a,e.cp);n.properties=e;return n})};var Im=hn();function Tm(t){return t.type==="category"?Dm(t):km(t)}function Am(t,e){return t.type==="category"?Lm(t,e):{ticks:t.scale.getTicks()}}function Dm(t){var e=t.getLabelModel();var r=Cm(t,e);return!e.get("show")||t.scale.isBlank()?{labels:[],labelCategoryInterval:r.labelCategoryInterval}:r}function Cm(t,e){var r=Pm(t,"labels");var i=tm(e);var a=Nm(r,i);if(a){return a}var n;var o;if(V(i)){n=Vm(t,i)}else{o=i==="auto"?Em(t):i;n=Bm(t,o)}return Om(r,i,{labels:n,labelCategoryInterval:o})}function Lm(t,e){var r=Pm(t,"ticks");var i=tm(e);var a=Nm(r,i);if(a){return a}var n;var o;if(!e.get("show")||t.scale.isBlank()){n=[]}if(V(i)){n=Vm(t,i,true)}else if(i==="auto"){var s=Cm(t,t.getLabelModel());o=s.labelCategoryInterval;n=A(s.labels,function(t){return t.tickValue})}else{o=i;n=Bm(t,o,true)}return Om(r,i,{ticks:n,tickCategoryInterval:o})}function km(r){var t=r.scale.getTicks();var i=Kg(r);return{labels:A(t,function(t,e){return{formattedLabel:i(t,e),rawLabel:r.scale.getLabel(t),tickValue:t}})}}function Pm(t,e){return Im(t)[e]||(Im(t)[e]=[])}function Nm(t,e){for(var r=0;r<t.length;r++){if(t[r].key===e){return t[r].value}}}function Om(t,e,r){t.push({key:e,value:r});return r}function Em(t){var e=Im(t).autoInterval;return e!=null?e:Im(t).autoInterval=t.calculateCategoryInterval()}function Rm(t){var e=zm(t);var r=Kg(t);var i=(e.axisRotate-e.labelRotate)/180*Math.PI;var a=t.scale;var n=a.getExtent();var o=a.count();if(n[1]-n[0]<1){return 0}var s=1;if(o>40){s=Math.max(1,Math.floor(o/40))}var l=n[0];var u=t.dataToCoord(l+1)-t.dataToCoord(l);var h=Math.abs(u*Math.cos(i));var f=Math.abs(u*Math.sin(i));var c=0;var v=0;for(;l<=n[1];l+=s){var d=0;var p=0;var g=bi(r(l),e.font,"center","top");d=g.width*1.3;p=g.height*1.3;c=Math.max(c,d,7);v=Math.max(v,p,7)}var m=c/h;var y=v/f;isNaN(m)&&(m=Infinity);isNaN(y)&&(y=Infinity);var x=Math.max(0,Math.floor(Math.min(m,y)));var _=Im(t.model);var w=_.lastAutoInterval;var b=_.lastTickCount;if(w!=null&&b!=null&&Math.abs(w-x)<=1&&Math.abs(b-o)<=1&&w>x){x=w}else{_.lastTickCount=o;_.lastAutoInterval=x}return x}function zm(t){var e=t.getLabelModel();return{axisRotate:t.getRotate?t.getRotate():t.isHorizontal&&!t.isHorizontal()?90:0,labelRotate:e.get("rotate")||0,font:e.getFont()}}function Bm(t,e,r){var i=Kg(t);var a=t.scale;var n=a.getExtent();var o=t.getLabelModel();var s=[];var l=Math.max((e||0)+1,1);var u=n[0];var h=a.count();if(u!==0&&l>1&&h/l>2){u=Math.round(Math.ceil(u/l)*l)}var f=em(t);var c=o.get("showMinLabel")||f;var v=o.get("showMaxLabel")||f;if(c&&u!==n[0]){p(n[0])}var d=u;for(;d<=n[1];d+=l){p(d)}if(v&&d!==n[1]){p(n[1])}function p(t){s.push(r?t:{formattedLabel:i(t),rawLabel:a.getLabel(t),tickValue:t})}return s}function Vm(t,r,i){var a=t.scale;var n=Kg(t);var o=[];L(a.getTicks(),function(t){var e=a.getLabel(t);if(r(t,e)){o.push(i?t:{formattedLabel:n(t),rawLabel:e,tickValue:t})}});return o}var Gm=[0,1];var Fm=function(t,e,r){this.dim=t;this.scale=e;this._extent=r||[0,0];this.inverse=false;this.onBand=false};Fm.prototype={constructor:Fm,contain:function(t){var e=this._extent;var r=Math.min(e[0],e[1]);var i=Math.max(e[0],e[1]);return t>=r&&t<=i},containData:function(t){return this.contain(this.dataToCoord(t))},getExtent:function(){return this._extent.slice()},getPixelPrecision:function(t){return mu(t||this.scale.getExtent(),this._extent)},setExtent:function(t,e){var r=this._extent;r[0]=t;r[1]=e},dataToCoord:function(t,e){var r=this._extent;var i=this.scale;t=i.normalize(t);if(this.onBand&&i.type==="ordinal"){r=r.slice();Wm(r,i.count())}return fu(t,Gm,r,e)},coordToData:function(t,e){var r=this._extent;var i=this.scale;if(this.onBand&&i.type==="ordinal"){r=r.slice();Wm(r,i.count())}var a=fu(t,r,Gm,e);return this.scale.scale(a)},pointToData:function(t,e){},getTicksCoords:function(t){t=t||{};var e=t.tickModel||this.getTickModel();var r=Am(this,e);var i=r.ticks;var a=A(i,function(t){return{coord:this.dataToCoord(t),tickValue:t}},this);var n=e.get("alignWithLabel");Hm(this,a,r.tickCategoryInterval,n,t.clamp);return a},getViewLabels:function(){return Tm(this).labels},getLabelModel:function(){return this.model.getModel("axisLabel")},getTickModel:function(){return this.model.getModel("axisTick")},getBandWidth:function(){var t=this._extent;var e=this.scale.getExtent();var r=e[1]-e[0]+(this.onBand?1:0);r===0&&(r=1);var i=Math.abs(t[1]-t[0]);return Math.abs(i)/r},isHorizontal:null,getRotate:null,calculateCategoryInterval:function(){return Rm(this)}};function Wm(t,e){var r=t[1]-t[0];var i=e;var a=r/i/2;t[0]+=a;t[1]-=a}function Hm(t,e,r,i,a){var n=e.length;if(!t.onBand||i||!n){return}var o=t.getExtent();var s;if(n===1){e[0].coord=o[0];s=e[1]={coord:o[0]}}else{var l=e[1].coord-e[0].coord;L(e,function(t){t.coord-=l/2;var e=e||0;if(e%2>0){t.coord-=l/((e+1)*2)}});s={coord:e[n-1].coord+l};e.push(s)}var u=o[0]>o[1];if(h(e[0].coord,o[0])){a?e[0].coord=o[0]:e.shift()}if(a&&h(o[0],e[0].coord)){e.unshift({coord:o[0]})}if(h(o[1],s.coord)){a?s.coord=o[1]:e.pop()}if(a&&h(s.coord,o[1])){e.push({coord:o[1]})}function h(t,e){return u?t>e:t<e}}var Zm=Mm;var Um={};L(["map","each","filter","indexOf","inherits","reduce","filter","bind","curry","isArray","isString","isObject","isFunction","extend","defaults","clone","merge"],function(t){Um[t]=ot[t]});var Xm={};L(["extendShape","extendPath","makePath","makeImage","mergePath","resizePath","createIcon","setHoverStyle","setLabelStyle","setTextStyle","setText","getFont","updateProps","initProps","getTransform","clipPointsByRect","clipRectByRect","Group","Image","Text","Circle","Sector","Ring","Polygon","Polyline","Rect","Line","BezierCurve","Arc","IncrementalDisplayable","CompoundPath","LinearGradient","RadialGradient","BoundingRect"],function(t){Xm[t]=ql[t]});rc.extend({type:"series.line",dependencies:["grid","polar"],getInitialData:function(t,e){if(D){var r=t.coordinateSystem;if(r!=="polar"&&r!=="cartesian2d"){throw new Error("Line not support coordinateSystem besides cartesian and polar")}}return Xp(this.getSource(),this)},defaultOption:{zlevel:0,z:2,coordinateSystem:"cartesian2d",legendHoverLink:true,hoverAnimation:true,clipOverflow:true,label:{position:"top"},lineStyle:{width:2,type:"solid"},step:false,smooth:false,smoothMonotone:null,symbol:"emptyCircle",symbolSize:4,symbolRotate:null,showSymbol:true,showAllSymbol:"auto",connectNulls:false,sampling:"none",animationEasing:"linear",progressive:0,hoverLayerThreshold:Infinity}});function Ym(t,e){var r=t.mapDimension("defaultedLabel",true);var i=r.length;if(i===1){return Uf(t,e,r[0])}else if(i){var a=[];for(var n=0;n<r.length;n++){var o=Uf(t,e,r[n]);a.push(o)}return a.join(" ")}}function jm(t,e,r){Or.call(this);this.updateData(t,e,r)}var qm=jm.prototype;var Km=jm.getSymbolSize=function(t,e){var r=t.getItemVisual(e,"symbolSize");return r instanceof Array?r.slice():[+r,+r]};function $m(t){return[t[0]/2,t[1]/2]}function Jm(t,e){this.parent.drift(t,e)}qm._createSymbol=function(t,e,r,i,a){this.removeAll();var n=e.getItemVisual(r,"color");var o=cm(t,-1,-1,2,2,n,a);o.attr({z2:100,culling:true,scale:$m(i)});o.drift=Jm;this._symbolType=t;this.add(o)};qm.stopSymbolAnimation=function(t){this.childAt(0).stopAnimation(t)};qm.getSymbolPath=function(){return this.childAt(0)};qm.getScale=function(){return this.childAt(0).scale};qm.highlight=function(){this.childAt(0).trigger("emphasis")};qm.downplay=function(){this.childAt(0).trigger("normal")};qm.setZ=function(t,e){var r=this.childAt(0);r.zlevel=t;r.z=e};qm.setDraggable=function(t){var e=this.childAt(0);e.draggable=t;e.cursor=t?"move":"pointer"};qm.updateData=function(t,e,r){this.silent=false;var i=t.getItemVisual(e,"symbol")||"circle";var a=t.hostModel;var n=Km(t,e);var o=i!==this._symbolType;if(o){var s=t.getItemVisual(e,"symbolKeepAspect");this._createSymbol(i,t,e,n,s)}else{var l=this.childAt(0);l.silent=false;Gl(l,{scale:$m(n)},a,e)}this._updateCommon(t,e,n,r);if(o){var l=this.childAt(0);var u=r&&r.fadeIn;var h={scale:l.scale.slice()};u&&(h.style={opacity:l.style.opacity});l.scale=[0,0];u&&(l.style.opacity=0);Fl(l,h,a,e)}this._seriesModel=a};var Qm=["itemStyle"];var ty=["emphasis","itemStyle"];var ey=["label"];var ry=["emphasis","label"];qm._updateCommon=function(r,t,e,i){var a=this.childAt(0);var n=r.hostModel;var o=r.getItemVisual(t,"color");if(a.type!=="image"){a.useStyle({strokeNoScale:true})}var s=i&&i.itemStyle;var l=i&&i.hoverItemStyle;var u=i&&i.symbolRotate;var h=i&&i.symbolOffset;var f=i&&i.labelModel;var c=i&&i.hoverLabelModel;var v=i&&i.hoverAnimation;var d=i&&i.cursorStyle;if(!i||r.hasItemOption){var p=i&&i.itemModel?i.itemModel:r.getItemModel(t);s=p.getModel(Qm).getItemStyle(["color"]);l=p.getModel(ty).getItemStyle();u=p.getShallow("symbolRotate");h=p.getShallow("symbolOffset");f=p.getModel(ey);c=p.getModel(ry);v=p.getShallow("hoverAnimation");d=p.getShallow("cursor")}else{l=N({},l)}var g=a.style;a.attr("rotation",(u||0)*Math.PI/180||0);if(h){a.attr("position",[cu(h[0],e[0]),cu(h[1],e[1])])}d&&a.attr("cursor",d);a.setColor(o,i&&i.symbolInnerColor);a.setStyle(s);var m=r.getItemVisual(t,"opacity");if(m!=null){g.opacity=m}var y=r.getItemVisual(t,"liftZ");var x=a.__z2Origin;if(y!=null){if(x==null){a.__z2Origin=a.z2;a.z2+=y}}else if(x!=null){a.z2=x;a.__z2Origin=null}var _=i&&i.useNameLabel;Cl(g,l,f,c,{labelFetcher:n,labelDataIndex:t,defaultText:w,isRectText:true,autoColor:o});function w(t,e){return _?r.getName(t):Ym(r,t)}a.off("mouseover").off("mouseout").off("emphasis").off("normal");a.hoverStyle=l;Al(a);a.__symbolOriginalScale=$m(e);if(v&&n.isAnimationEnabled()){a.on("mouseover",iy).on("mouseout",ay).on("emphasis",ny).on("normal",oy)}};function iy(){!bl(this)&&ny.call(this)}function ay(){!bl(this)&&oy.call(this)}function ny(){if(this.incremental||this.useHoverLayer){return}var t=this.__symbolOriginalScale;var e=t[1]/t[0];this.animateTo({scale:[Math.max(t[0]*1.1,t[0]+3),Math.max(t[1]*1.1,t[1]+3*e)]},400,"elasticOut")}function oy(){if(this.incremental||this.useHoverLayer){return}this.animateTo({scale:this.__symbolOriginalScale},400,"elasticOut")}qm.fadeOut=function(t,e){var r=this.childAt(0);this.silent=r.silent=true;!(e&&e.keepLabel)&&(r.style.text=null);Gl(r,{style:{opacity:0},scale:[0,0]},this._seriesModel,this.dataIndex,t)};M(jm,Or);function sy(t){this.group=new Or;this._symbolCtor=t||jm}var ly=sy.prototype;function uy(t,e,r,i){return e&&!isNaN(e[0])&&!isNaN(e[1])&&!(i.isIgnore&&i.isIgnore(r))&&!(i.clipShape&&!i.clipShape.contain(e[0],e[1]))&&t.getItemVisual(r,"symbol")!=="none"}ly.updateData=function(a,n){n=hy(n);var o=this.group;var s=a.hostModel;var l=this._data;var u=this._symbolCtor;var h=fy(a);if(!l){o.removeAll()}a.diff(l).add(function(t){var e=a.getItemLayout(t);if(uy(a,e,t,n)){var r=new u(a,t,h);r.attr("position",e);a.setItemGraphicEl(t,r);o.add(r)}}).update(function(t,e){var r=l.getItemGraphicEl(e);var i=a.getItemLayout(t);if(!uy(a,i,t,n)){o.remove(r);return}if(!r){r=new u(a,t);r.attr("position",i)}else{r.updateData(a,t,h);Gl(r,{position:i},s)}o.add(r);a.setItemGraphicEl(t,r)}).remove(function(t){var e=l.getItemGraphicEl(t);e&&e.fadeOut(function(){o.remove(e)})}).execute();this._data=a};ly.isPersistent=function(){return true};ly.updateLayout=function(){var i=this._data;if(i){i.eachItemGraphicEl(function(t,e){var r=i.getItemLayout(e);t.attr("position",r)})}};ly.incrementalPrepareUpdate=function(t){this._seriesScope=fy(t);this._data=null;this.group.removeAll()};ly.incrementalUpdate=function(t,e,r){r=hy(r);function i(t){if(!t.isGroup){t.incremental=t.useHoverLayer=true}}for(var a=t.start;a<t.end;a++){var n=e.getItemLayout(a);if(uy(e,n,a,r)){var o=new this._symbolCtor(e,a,this._seriesScope);o.traverse(i);o.attr("position",n);this.group.add(o);e.setItemGraphicEl(a,o)}}};function hy(t){if(t!=null&&!F(t)){t={isIgnore:t}}return t||{}}ly.remove=function(t){var e=this.group;var r=this._data;if(r&&t){r.eachItemGraphicEl(function(t){t.fadeOut(function(){e.remove(t)})})}else{e.removeAll()}};function fy(t){var e=t.hostModel;return{itemStyle:e.getModel("itemStyle").getItemStyle(["color"]),hoverItemStyle:e.getModel("emphasis.itemStyle").getItemStyle(),symbolRotate:e.get("symbolRotate"),symbolOffset:e.get("symbolOffset"),hoverAnimation:e.get("hoverAnimation"),labelModel:e.getModel("label"),hoverLabelModel:e.getModel("emphasis.label"),cursorStyle:e.get("cursor")}}function cy(t,e,r){var i=t.getBaseAxis();var a=t.getOtherAxis(i);var n=vy(a,r);var o=i.dim;var s=a.dim;var l=e.mapDimension(s);var u=e.mapDimension(o);var h=s==="x"||s==="radius"?1:0;var f=A(t.dimensions,function(t){return e.mapDimension(t)});var c;var v=e.getCalculationInfo("stackResultDimension");if(c|=Zp(e,f[0])){f[0]=v}if(c|=Zp(e,f[1])){f[1]=v}return{dataDimsForPoint:f,valueStart:n,valueAxisDim:s,baseAxisDim:o,stacked:!!c,valueDim:l,baseDim:u,baseDataOffset:h,stackedOverDimension:e.getCalculationInfo("stackedOverDimension")}}function vy(t,e){var r=0;var i=t.scale.getExtent();if(e==="start"){r=i[0]}else if(e==="end"){r=i[1]}else{if(i[0]>0){r=i[0]}else if(i[1]<0){r=i[1]}}return r}function dy(t,e,r,i){var a=NaN;if(t.stacked){a=r.get(r.getCalculationInfo("stackedOverDimension"),i)}if(isNaN(a)){a=t.valueStart}var n=t.baseDataOffset;var o=[];o[n]=r.get(t.baseDim,i);o[1-n]=a;return e.dataToPoint(o)}function py(t,e){var r=[];e.diff(t).add(function(t){r.push({cmd:"+",idx:t})}).update(function(t,e){r.push({cmd:"=",idx:e,idx1:t})}).remove(function(t){r.push({cmd:"-",idx:t})}).execute();return r}var gy=function(t,e,r,i,a,n,o,s){var l=py(t,e);var u=[];var h=[];var f=[];var c=[];var v=[];var d=[];var p=[];var g=cy(a,e,o);var m=cy(n,t,s);for(var y=0;y<l.length;y++){var x=l[y];var _=true;switch(x.cmd){case"=":var w=t.getItemLayout(x.idx);var b=e.getItemLayout(x.idx1);if(isNaN(w[0])||isNaN(w[1])){w=b.slice()}u.push(w);h.push(b);f.push(r[x.idx]);c.push(i[x.idx1]);p.push(e.getRawIndex(x.idx1));break;case"+":var S=x.idx;u.push(a.dataToPoint([e.get(g.dataDimsForPoint[0],S),e.get(g.dataDimsForPoint[1],S)]));h.push(e.getItemLayout(S).slice());f.push(dy(g,a,e,S));c.push(i[S]);p.push(e.getRawIndex(S));break;case"-":var S=x.idx;var M=t.getRawIndex(S);if(M!==S){u.push(t.getItemLayout(S));h.push(n.dataToPoint([t.get(m.dataDimsForPoint[0],S),t.get(m.dataDimsForPoint[1],S)]));f.push(r[S]);c.push(dy(m,n,t,S));p.push(M)}else{_=false}}if(_){v.push(x);d.push(d.length)}}d.sort(function(t,e){return p[t]-p[e]});var I=[];var T=[];var A=[];var D=[];var C=[];for(var y=0;y<d.length;y++){var S=d[y];I[y]=u[S];T[y]=h[S];A[y]=f[S];D[y]=c[S];C[y]=v[S]}return{current:I,next:T,stackedOnCurrent:A,stackedOnNext:D,status:C}};var my=kt;var yy=Pt;var xy=vt;var _y=ut;var wy=[];var by=[];var Sy=[];function My(t){return isNaN(t[0])||isNaN(t[1])}function Iy(t,e,r,i,a,n,o,s,l,u,h){if(u==="none"||!u){return Ay.apply(this,arguments)}else{return Ty.apply(this,arguments)}}function Ty(t,e,r,i,a,n,o,s,l,u,h){var f=0;var c=r;for(var v=0;v<i;v++){var d=e[c];if(c>=a||c<0){break}if(My(d)){if(h){c+=n;continue}break}if(c===r){t[n>0?"moveTo":"lineTo"](d[0],d[1])}else{if(l>0){var p=e[f];var g=u==="y"?1:0;var m=(d[g]-p[g])*l;_y(by,p);by[g]=p[g]+m;_y(Sy,d);Sy[g]=d[g]-m;t.bezierCurveTo(by[0],by[1],Sy[0],Sy[1],d[0],d[1])}else{t.lineTo(d[0],d[1])}}f=c;c+=n}return v}function Ay(t,e,r,i,a,n,o,s,l,u,h){var f=0;var c=r;for(var v=0;v<i;v++){var d=e[c];if(c>=a||c<0){break}if(My(d)){if(h){c+=n;continue}break}if(c===r){t[n>0?"moveTo":"lineTo"](d[0],d[1]);_y(by,d)}else{if(l>0){var p=c+n;var g=e[p];if(h){while(g&&My(e[p])){p+=n;g=e[p]}}var m=.5;var y=e[f];var g=e[p];if(!g||My(g)){_y(Sy,d)}else{if(My(g)&&!h){g=d}dt(wy,g,y);var x;var _;if(u==="x"||u==="y"){var w=u==="x"?0:1;x=Math.abs(d[w]-y[w]);_=Math.abs(d[w]-g[w])}else{x=It(d,y);_=It(d,g)}m=_/(_+x);xy(Sy,d,wy,-l*(1-m))}my(by,by,s);yy(by,by,o);my(Sy,Sy,s);yy(Sy,Sy,o);t.bezierCurveTo(by[0],by[1],Sy[0],Sy[1],d[0],d[1]);xy(by,d,wy,l*m)}else{t.lineTo(d[0],d[1])}}f=c;c+=n}return v}function Dy(t,e){var r=[Infinity,Infinity];var i=[-Infinity,-Infinity];if(e){for(var a=0;a<t.length;a++){var n=t[a];if(n[0]<r[0]){r[0]=n[0]}if(n[1]<r[1]){r[1]=n[1]}if(n[0]>i[0]){i[0]=n[0]}if(n[1]>i[1]){i[1]=n[1]}}}return{min:e?r:i,max:e?i:r}}var Cy=ts.extend({type:"ec-polyline",shape:{points:[],smooth:0,smoothConstraint:true,smoothMonotone:null,connectNulls:false},style:{fill:null,stroke:"#000"},brush:Ms(ts.prototype.brush),buildPath:function(t,e){var r=e.points;var i=0;var a=r.length;var n=Dy(r,e.smoothConstraint);if(e.connectNulls){for(;a>0;a--){if(!My(r[a-1])){break}}for(;i<a;i++){if(!My(r[i])){break}}}while(i<a){i+=Iy(t,r,i,a,a,1,n.min,n.max,e.smooth,e.smoothMonotone,e.connectNulls)+1}}});var Ly=ts.extend({type:"ec-polygon",shape:{points:[],stackedOnPoints:[],smooth:0,stackedOnSmooth:0,smoothConstraint:true,smoothMonotone:null,connectNulls:false},brush:Ms(ts.prototype.brush),buildPath:function(t,e){var r=e.points;var i=e.stackedOnPoints;var a=0;var n=r.length;var o=e.smoothMonotone;var s=Dy(r,e.smoothConstraint);var l=Dy(i,e.smoothConstraint);if(e.connectNulls){for(;n>0;n--){if(!My(r[n-1])){break}}for(;a<n;a++){if(!My(r[a])){break}}}while(a<n){var u=Iy(t,r,a,n,n,1,s.min,s.max,e.smooth,o,e.connectNulls);Iy(t,i,a+u-1,u,n,-1,l.min,l.max,e.stackedOnSmooth,o,e.connectNulls);a+=u+1;t.closePath()}}});function ky(t,e){if(t.length!==e.length){return}for(var r=0;r<t.length;r++){var i=t[r];var a=e[r];if(i[0]!==a[0]||i[1]!==a[1]){return}}return true}function Py(t){return typeof t==="number"?t:t?.5:0}function Ny(t){var e=t.getGlobalExtent();if(t.onBand){var r=t.getBandWidth()/2-1;var i=e[1]>e[0]?1:-1;e[0]+=i*r;e[1]-=i*r}return e}function Oy(t,e,r){if(!r.valueDim){return[]}var i=[];for(var a=0,n=e.count();a<n;a++){i.push(dy(r,t,e,a))}return i}function Ey(t,e,r,i){var a=Ny(t.getAxis("x"));var n=Ny(t.getAxis("y"));var o=t.getBaseAxis().isHorizontal();var s=Math.min(a[0],a[1]);var l=Math.min(n[0],n[1]);var u=Math.max(a[0],a[1])-s;var h=Math.max(n[0],n[1])-l;if(r){s-=.5;u+=.5;l-=.5;h+=.5}else{var f=i.get("lineStyle.width")||2;var c=i.get("clipOverflow")?f/2:Math.max(u,h);if(o){l-=c;h+=c*2}else{s-=c;u+=c*2}}var v=new Bs({shape:{x:s,y:l,width:u,height:h}});if(e){v.shape[o?"width":"height"]=0;Fl(v,{shape:{width:u,height:h}},i)}return v}function Ry(t,e,r,i){var a=t.getAngleAxis();var n=t.getRadiusAxis();var o=n.getExtent().slice();o[0]>o[1]&&o.reverse();var s=a.getExtent();var l=Math.PI/180;if(r){o[0]-=.5;o[1]+=.5}var u=new Is({shape:{cx:vu(t.cx,1),cy:vu(t.cy,1),r0:vu(o[0],1),r:vu(o[1],1),startAngle:-s[0]*l,endAngle:-s[1]*l,clockwise:a.inverse}});if(e){u.shape.endAngle=-s[0]*l;Fl(u,{shape:{endAngle:-s[1]*l}},i)}return u}function zy(t,e,r,i){return t.type==="polar"?Ry(t,e,r,i):Ey(t,e,r,i)}function By(t,e,r){var i=e.getBaseAxis();var a=i.dim==="x"||i.dim==="radius"?0:1;var n=[];for(var o=0;o<t.length-1;o++){var s=t[o+1];var l=t[o];n.push(l);var u=[];switch(r){case"end":u[a]=s[a];u[1-a]=l[1-a];n.push(u);break;case"middle":var h=(l[a]+s[a])/2;var f=[];u[a]=f[a]=h;u[1-a]=l[1-a];f[1-a]=s[1-a];n.push(u);n.push(f);break;default:u[a]=l[a];u[1-a]=s[1-a];n.push(u)}}t[o]&&n.push(t[o]);return n}function Vy(t,e){var r=t.getVisual("visualMeta");if(!r||!r.length||!t.count()){return}if(e.type!=="cartesian2d"){if(D){console.warn("Visual map on line style is only supported on cartesian2d.")}return}var i;var a;for(var n=r.length-1;n>=0;n--){var o=r[n].dimension;var s=t.dimensions[o];var l=t.getDimensionInfo(s);i=l&&l.coordDim;if(i==="x"||i==="y"){a=r[n];break}}if(!a){if(D){console.warn("Visual map on line style only support x or y dimension.")}return}var u=e.getAxis(i);var h=A(a.stops,function(t){return{coord:u.toGlobalCoord(u.dataToCoord(t.value)),color:t.color}});var f=h.length;var c=a.outerColors.slice();if(f&&h[0].coord>h[f-1].coord){h.reverse();c.reverse()}var v=10;var d=h[0].coord-v;var p=h[f-1].coord+v;var g=p-d;if(g<.001){return"transparent"}L(h,function(t){t.offset=(t.coord-d)/g});h.push({offset:f?h[f-1].offset:.5,color:c[1]||"transparent"});h.unshift({offset:f?h[0].offset:.5,color:c[0]||"transparent"});var m=new Ys(0,0,0,0,h,true);m[i]=d;m[i+"2"]=p;return m}function Gy(t,e,r){var i=t.get("showAllSymbol");var a=i==="auto";if(i&&!a){return}var n=r.getAxesByScale("ordinal")[0];if(!n){return}if(a&&Fy(n,e)){return}var o=e.mapDimension(n.dim);var s={};L(n.getViewLabels(),function(t){s[t.tickValue]=1});return function(t){return!s.hasOwnProperty(e.get(o,t))}}function Fy(t,e){var r=t.getExtent();var i=Math.abs(r[1]-r[0])/t.scale.count();isNaN(i)&&(i=0);var a=e.count();var n=Math.max(1,Math.round(a/5));for(var o=0;o<a;o+=n){if(jm.getSymbolSize(e,o)[t.isHorizontal()?1:0]*1.5>i){return false}}return true}gc.extend({type:"line",init:function(){var t=new Or;var e=new sy;this.group.add(e.group);this._symbolDraw=e;this._lineGroup=t},render:function(t,e,r){var i=t.coordinateSystem;var a=this.group;var n=t.getData();var o=t.getModel("lineStyle");var s=t.getModel("areaStyle");var l=n.mapArray(n.getItemLayout);var u=i.type==="polar";var h=this._coordSys;var f=this._symbolDraw;var c=this._polyline;var v=this._polygon;var d=this._lineGroup;var p=t.get("animation");var g=!s.isEmpty();var m=s.get("origin");var y=cy(i,n,m);var x=Oy(i,n,y);var _=t.get("showSymbol");var w=_&&!u&&Gy(t,n,i);var b=this._data;b&&b.eachItemGraphicEl(function(t,e){if(t.__temp){a.remove(t);b.setItemGraphicEl(e,null)}});if(!_){f.remove()}a.add(d);var S=!u&&t.get("step");if(!(c&&h.type===i.type&&S===this._step)){_&&f.updateData(n,{isIgnore:w,clipShape:zy(i,false,true,t)});if(S){l=By(l,i,S);x=By(x,i,S)}c=this._newPolyline(l,i,p);if(g){v=this._newPolygon(l,x,i,p)}d.setClipPath(zy(i,true,false,t))}else{if(g&&!v){v=this._newPolygon(l,x,i,p)}else if(v&&!g){d.remove(v);v=this._polygon=null}d.setClipPath(zy(i,false,false,t));_&&f.updateData(n,{isIgnore:w,clipShape:zy(i,false,true,t)});n.eachItemGraphicEl(function(t){t.stopAnimation(true)});if(!ky(this._stackedOnPoints,x)||!ky(this._points,l)){if(p){this._updateAnimation(n,x,i,r,S,m)}else{if(S){l=By(l,i,S);x=By(x,i,S)}c.setShape({points:l});v&&v.setShape({points:l,stackedOnPoints:x})}}}var M=Vy(n,i)||n.getVisual("color");c.useStyle(C(o.getLineStyle(),{fill:"none",stroke:M,lineJoin:"bevel"}));var I=t.get("smooth");I=Py(t.get("smooth"));c.setShape({smooth:I,smoothMonotone:t.get("smoothMonotone"),connectNulls:t.get("connectNulls")});if(v){var T=n.getCalculationInfo("stackedOnSeries");var A=0;v.useStyle(C(s.getAreaStyle(),{fill:M,opacity:.7,lineJoin:"bevel"}));if(T){A=Py(T.get("smooth"))}v.setShape({smooth:I,stackedOnSmooth:A,smoothMonotone:t.get("smoothMonotone"),connectNulls:t.get("connectNulls")})}this._data=n;this._coordSys=i;this._stackedOnPoints=x;this._points=l;this._step=S;this._valueOrigin=m},dispose:function(){},highlight:function(t,e,r,i){var a=t.getData();var n=un(a,i);if(!(n instanceof Array)&&n!=null&&n>=0){var o=a.getItemGraphicEl(n);if(!o){var s=a.getItemLayout(n);if(!s){return}o=new jm(a,n);o.position=s;o.setZ(t.get("zlevel"),t.get("z"));o.ignore=isNaN(s[0])||isNaN(s[1]);o.__temp=true;a.setItemGraphicEl(n,o);o.stopSymbolAnimation(true);this.group.add(o)}o.highlight()}else{gc.prototype.highlight.call(this,t,e,r,i)}},downplay:function(t,e,r,i){var a=t.getData();var n=un(a,i);if(n!=null&&n>=0){var o=a.getItemGraphicEl(n);if(o){if(o.__temp){a.setItemGraphicEl(n,null);this.group.remove(o)}else{o.downplay()}}}else{gc.prototype.downplay.call(this,t,e,r,i)}},_newPolyline:function(t){var e=this._polyline;if(e){this._lineGroup.remove(e)}e=new Cy({shape:{points:t},silent:true,z2:10});this._lineGroup.add(e);this._polyline=e;return e},_newPolygon:function(t,e){var r=this._polygon;if(r){this._lineGroup.remove(r)}r=new Ly({shape:{points:t,stackedOnPoints:e},silent:true});this._lineGroup.add(r);this._polygon=r;return r},_updateAnimation:function(t,e,r,i,a,n){var o=this._polyline;var s=this._polygon;var l=t.hostModel;var u=gy(this._data,t,this._stackedOnPoints,e,this._coordSys,r,this._valueOrigin,n);var h=u.current;var f=u.stackedOnCurrent;var c=u.next;var v=u.stackedOnNext;if(a){h=By(u.current,r,a);f=By(u.stackedOnCurrent,r,a);c=By(u.next,r,a);v=By(u.stackedOnNext,r,a)}o.shape.__points=u.current;o.shape.points=h;Gl(o,{shape:{points:c}},l);if(s){s.setShape({points:h,stackedOnPoints:f});Gl(s,{shape:{points:c,stackedOnPoints:v}},l)}var d=[];var p=u.status;for(var g=0;g<p.length;g++){var m=p[g].cmd;if(m==="="){var y=t.getItemGraphicEl(p[g].idx1);if(y){d.push({el:y,ptIdx:g})}}}if(o.animators&&o.animators.length){o.animators[0].during(function(){for(var t=0;t<d.length;t++){var e=d[t].el;e.attr("position",o.shape.__points[d[t].ptIdx])}})}},remove:function(t){var r=this.group;var i=this._data;this._lineGroup.removeAll();this._symbolDraw.remove(true);i&&i.eachItemGraphicEl(function(t,e){if(t.__temp){r.remove(t);i.setItemGraphicEl(e,null)}});this._polyline=this._polygon=this._coordSys=this._points=this._stackedOnPoints=this._data=null}});var Wy=function(t,s,h){return{seriesType:t,performRawSeries:true,reset:function(l,t,e){var r=l.getData();var i=l.get("symbol")||s;var u=l.get("symbolSize");var a=l.get("symbolKeepAspect");r.setVisual({legendSymbol:h||i,symbol:i,symbolSize:u,symbolKeepAspect:a});if(t.isSeriesFiltered(l)){return}var n=typeof u==="function";function o(t,e){if(typeof u==="function"){var r=l.getRawValue(e);var i=l.getDataParams(e);t.setItemVisual(e,"symbolSize",u(r,i))}if(t.hasItemOption){var a=t.getItemModel(e);var n=a.getShallow("symbol",true);var o=a.getShallow("symbolSize",true);var s=a.getShallow("symbolKeepAspect",true);if(n!=null){t.setItemVisual(e,"symbol",n)}if(o!=null){t.setItemVisual(e,"symbolSize",o)}if(s!=null){t.setItemVisual(e,"symbolKeepAspect",s)}}}return{dataEach:r.hasItemOption||n?o:null}}}};var Hy=function(t){return{seriesType:t,plan:vc(),reset:function(t){var e=t.getData();var f=t.coordinateSystem;var r=t.pipelineContext;var c=r.large;if(!f){return}var v=A(f.dimensions,function(t){return e.mapDimension(t)}).slice(0,2);var d=v.length;var i=e.getCalculationInfo("stackResultDimension");if(Zp(e,v[0])){v[0]=i}if(Zp(e,v[1])){v[1]=i}function a(t,e){var r=t.end-t.start;var i=c&&new Float32Array(r*d);for(var a=t.start,n=0,o=[],s=[];a<t.end;a++){var l;if(d===1){var u=e.get(v[0],a);l=!isNaN(u)&&f.dataToPoint(u,null,s)}else{var u=o[0]=e.get(v[0],a);var h=o[1]=e.get(v[1],a);l=!isNaN(u)&&!isNaN(h)&&f.dataToPoint(o,null,s)}if(c){i[n++]=l?l[0]:NaN;i[n++]=l?l[1]:NaN}else{e.setItemLayout(a,l&&l.slice()||[NaN,NaN])}}c&&e.setLayout("symbolPoints",i)}return d&&{progress:a}}}};var Zy={average:function(t){var e=0;var r=0;for(var i=0;i<t.length;i++){if(!isNaN(t[i])){e+=t[i];r++}}return r===0?NaN:e/r},sum:function(t){var e=0;for(var r=0;r<t.length;r++){e+=t[r]||0}return e},max:function(t){var e=-Infinity;for(var r=0;r<t.length;r++){t[r]>e&&(e=t[r])}return isFinite(e)?e:NaN},min:function(t){var e=Infinity;for(var r=0;r<t.length;r++){t[r]<e&&(e=t[r])}return isFinite(e)?e:NaN},nearest:function(t){return t[0]}};var Uy=function(t,e){return Math.round(t.length/2)};var Xy=function(t){return{seriesType:t,modifyOutputEnd:true,reset:function(t,e,r){var i=t.getData();var a=t.get("sampling");var n=t.coordinateSystem;if(n.type==="cartesian2d"&&a){var o=n.getBaseAxis();var s=n.getOtherAxis(o);var l=o.getExtent();var u=l[1]-l[0];var h=Math.round(i.count()/u);if(h>1){var f;if(typeof a==="string"){f=Zy[a]}else if(typeof a==="function"){f=a}if(f){t.setData(i.downSample(i.mapDimension(s.dim),1/h,f,Uy))}}}}}};function Yy(t){return this._axes[t]}var jy=function(t){this._axes={};this._dimList=[];this.name=t||""};jy.prototype={constructor:jy,type:"cartesian",getAxis:function(t){return this._axes[t]},getAxes:function(){return A(this._dimList,Yy,this)},getAxesByScale:function(e){e=e.toLowerCase();return O(this.getAxes(),function(t){return t.scale.type===e})},addAxis:function(t){var e=t.dim;this._axes[e]=t;this._dimList.push(e)},dataToCoord:function(t){return this._dataCoordConvert(t,"dataToCoord")},coordToData:function(t){return this._dataCoordConvert(t,"coordToData")},_dataCoordConvert:function(t,e){var r=this._dimList;var i=t instanceof Array?[]:{};for(var a=0;a<r.length;a++){var n=r[a];var o=this._axes[n];i[n]=o[e](t[n])}return i}};function qy(t){jy.call(this,t)}qy.prototype={constructor:qy,type:"cartesian2d",dimensions:["x","y"],getBaseAxis:function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAxis("x")},containPoint:function(t){var e=this.getAxis("x");var r=this.getAxis("y");return e.contain(e.toLocalCoord(t[0]))&&r.contain(r.toLocalCoord(t[1]))},containData:function(t){return this.getAxis("x").containData(t[0])&&this.getAxis("y").containData(t[1])},dataToPoint:function(t,e,r){var i=this.getAxis("x");var a=this.getAxis("y");r=r||[];r[0]=i.toGlobalCoord(i.dataToCoord(t[0]));r[1]=a.toGlobalCoord(a.dataToCoord(t[1]));return r},clampData:function(t,e){var r=this.getAxis("x").scale;var i=this.getAxis("y").scale;var a=r.getExtent();var n=i.getExtent();var o=r.parse(t[0]);var s=i.parse(t[1]);e=e||[];e[0]=Math.min(Math.max(Math.min(a[0],a[1]),o),Math.max(a[0],a[1]));e[1]=Math.min(Math.max(Math.min(n[0],n[1]),s),Math.max(n[0],n[1]));return e},pointToData:function(t,e){var r=this.getAxis("x");var i=this.getAxis("y");e=e||[];e[0]=r.coordToData(r.toLocalCoord(t[0]));e[1]=i.coordToData(i.toLocalCoord(t[1]));return e},getOtherAxis:function(t){return this.getAxis(t.dim==="x"?"y":"x")}};M(qy,jy);var Ky=function(t,e,r,i,a){Fm.call(this,t,e,r);this.type=i||"value";this.position=a||"bottom"};Ky.prototype={constructor:Ky,index:0,getAxesOnZeroOf:null,model:null,isHorizontal:function(){var t=this.position;return t==="top"||t==="bottom"},getGlobalExtent:function(t){var e=this.getExtent();e[0]=this.toGlobalCoord(e[0]);e[1]=this.toGlobalCoord(e[1]);t&&e[0]>e[1]&&e.reverse();return e},getOtherAxis:function(){this.grid.getOtherAxis()},pointToData:function(t,e){return this.coordToData(this.toLocalCoord(t[this.dim==="x"?0:1]),e)},toLocalCoord:null,toGlobalCoord:null};M(Ky,Fm);var $y={show:true,zlevel:0,z:0,inverse:false,name:"",nameLocation:"end",nameRotate:null,nameTruncate:{maxWidth:null,ellipsis:"...",placeholder:"."},nameTextStyle:{},nameGap:15,silent:false,triggerEvent:false,tooltip:{show:false},axisPointer:{},axisLine:{show:true,onZero:true,onZeroAxisIndex:null,lineStyle:{color:"#333",width:1,type:"solid"},symbol:["none","none"],symbolSize:[10,15]},axisTick:{show:true,inside:false,length:5,lineStyle:{width:1}},axisLabel:{show:true,inside:false,rotate:0,showMinLabel:null,showMaxLabel:null,margin:8,fontSize:12},splitLine:{show:true,lineStyle:{color:["#ccc"],width:1,type:"solid"}},splitArea:{show:false,areaStyle:{color:["rgba(250,250,250,0.3)","rgba(200,200,200,0.3)"]}}};var Jy={};Jy.categoryAxis=m({boundaryGap:true,deduplication:null,splitLine:{show:false},axisTick:{alignWithLabel:false,interval:"auto"},axisLabel:{interval:"auto"}},$y);Jy.valueAxis=m({boundaryGap:[0,0],splitNumber:5},$y);Jy.timeAxis=C({scale:true,min:"dataMin",max:"dataMax"},Jy.valueAxis);Jy.logAxis=C({scale:true,logBase:10},Jy.valueAxis);var Qy=["value","category","time","log"];var tx=function(o,t,s,e){L(Qy,function(n){t.extend({type:o+"Axis."+n,mergeDefaultAndTheme:function(t,e){var r=this.layoutMode;var i=r?oh(t):{};var a=e.getTheme();m(t,a.get(n+"Axis"));m(t,this.getDefaultOption());t.type=s(o,t);if(r){nh(t,i,r)}},optionUpdated:function(){var t=this.option;if(t.type==="category"){this.__ordinalMeta=Kp.createByAxisModel(this)}},getCategories:function(t){var e=this.option;if(e.type==="category"){if(t){return e.data}return this.__ordinalMeta.categories}},getOrdinalMeta:function(){return this.__ordinalMeta},defaultOption:x([{},Jy[n+"Axis"],e],true)})});hh.registerSubTypeDefaulter(o+"Axis",z(s,o))};var ex=hh.extend({type:"cartesian2dAxis",axis:null,init:function(){ex.superApply(this,"init",arguments);this.resetRange()},mergeOption:function(){ex.superApply(this,"mergeOption",arguments);this.resetRange()},restoreData:function(){ex.superApply(this,"restoreData",arguments);this.resetRange()},getCoordSysModel:function(){return this.ecModel.queryComponents({mainType:"grid",index:this.option.gridIndex,id:this.option.gridId})[0]}});function rx(t,e){return e.type||(e.data?"category":"value")}m(ex.prototype,rm);var ix={offset:0};tx("x",ex,rx,ix);tx("y",ex,rx,ix);hh.extend({type:"grid",dependencies:["xAxis","yAxis"],layoutMode:"box",coordinateSystem:null,defaultOption:{show:false,zlevel:0,z:0,left:"10%",top:60,right:"10%",bottom:60,containLabel:false,backgroundColor:"rgba(0,0,0,0)",borderWidth:1,borderColor:"#ccc"}});function ax(t,e,r){return t.getCoordSysModel()===e}function nx(t,e,r){this._coordsMap={};this._coordsList=[];this._axesMap={};this._axesList=[];this._initCartesian(t,e,r);this.model=t}var ox=nx.prototype;ox.type="grid";ox.axisPointerEnabled=true;ox.getRect=function(){return this._rect};ox.update=function(t,e){var r=this._axesMap;this._updateScale(t,this.model);L(r.x,function(t){Yg(t.scale,t.model)});L(r.y,function(t){Yg(t.scale,t.model)});var i={};L(r.x,function(t){sx(r,"y",t,i)});L(r.y,function(t){sx(r,"x",t,i)});this.resize(this.model,e)};function sx(t,e,r,i){r.getAxesOnZeroOf=function(){return n?[n]:[]};var a=t[e];var n;var o=r.model;var s=o.get("axisLine.onZero");var l=o.get("axisLine.onZeroAxisIndex");if(!s){return}if(l!=null){if(lx(a[l])){n=a[l]}}else{for(var u in a){if(a.hasOwnProperty(u)&&lx(a[u])&&!i[h(a[u])]){n=a[u];break}}}if(n){i[h(n)]=true}function h(t){return t.dim+"_"+t.index}}function lx(t){return t&&t.type!=="category"&&t.type!=="time"&&qg(t)}ox.resize=function(t,e,r){var a=rh(t.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()});this._rect=a;var i=this._axesList;n();if(!r&&t.get("containLabel")){L(i,function(t){if(!t.model.get("axisLabel.inside")){var e=Jg(t);if(e){var r=t.isHorizontal()?"height":"width";var i=t.model.get("axisLabel.margin");a[r]-=e[r]+i;if(t.position==="top"){a.y+=e.height+i}else if(t.position==="left"){a.x+=e.width+i}}}});n()}function n(){L(i,function(t){var e=t.isHorizontal();var r=e?[0,a.width]:[0,a.height];var i=t.inverse?1:0;t.setExtent(r[i],r[1-i]);ux(t,e?a.x:a.y)})}};ox.getAxis=function(t,e){var r=this._axesMap[t];if(r!=null){if(e==null){for(var i in r){if(r.hasOwnProperty(i)){return r[i]}}}return r[e]}};ox.getAxes=function(){return this._axesList.slice()};ox.getCartesian=function(t,e){if(t!=null&&e!=null){var r="x"+t+"y"+e;return this._coordsMap[r]}if(F(t)){e=t.yAxisIndex;t=t.xAxisIndex}for(var i=0,a=this._coordsList;i<a.length;i++){if(a[i].getAxis("x").index===t||a[i].getAxis("y").index===e){return a[i]}}};ox.getCartesians=function(){return this._coordsList.slice()};ox.convertToPixel=function(t,e,r){var i=this._findConvertTarget(t,e);return i.cartesian?i.cartesian.dataToPoint(r):i.axis?i.axis.toGlobalCoord(i.axis.dataToCoord(r)):null};ox.convertFromPixel=function(t,e,r){var i=this._findConvertTarget(t,e);return i.cartesian?i.cartesian.pointToData(r):i.axis?i.axis.coordToData(i.axis.toLocalCoord(r)):null};ox._findConvertTarget=function(t,e){var r=e.seriesModel;var i=e.xAxisModel||r&&r.getReferringComponents("xAxis")[0];var a=e.yAxisModel||r&&r.getReferringComponents("yAxis")[0];var n=e.gridModel;var o=this._coordsList;var s;var l;if(r){s=r.coordinateSystem;S(o,s)<0&&(s=null)}else if(i&&a){s=this.getCartesian(i.componentIndex,a.componentIndex)}else if(i){l=this.getAxis("x",i.componentIndex)}else if(a){l=this.getAxis("y",a.componentIndex)}else if(n){var u=n.coordinateSystem;if(u===this){s=this._coordsList[0]}}return{cartesian:s,axis:l}};ox.containPoint=function(t){var e=this._coordsList[0];if(e){return e.containPoint(t)}};ox._initCartesian=function(o,s,t){var l={left:false,right:false,top:false,bottom:false};var u={x:{},y:{}};var h={x:0,y:0};s.eachComponent("xAxis",e("x"),this);s.eachComponent("yAxis",e("y"),this);if(!h.x||!h.y){this._axesMap={};this._axesList=[];return}this._axesMap=u;L(u.x,function(a,n){L(u.y,function(t,e){var r="x"+n+"y"+e;var i=new qy(r);i.grid=this;i.model=o;this._coordsMap[r]=i;this._coordsList.push(i);i.addAxis(a);i.addAxis(t)},this)},this);function e(n){return function(t,e){if(!ax(t,o,s)){return}var r=t.get("position");if(n==="x"){if(r!=="top"&&r!=="bottom"){r="bottom";if(l[r]){r=r==="top"?"bottom":"top"}}}else{if(r!=="left"&&r!=="right"){r="left";if(l[r]){r=r==="left"?"right":"left"}}}l[r]=true;var i=new Ky(n,jg(t),[0,0],t.get("type"),r);var a=i.type==="category";i.onBand=a&&t.get("boundaryGap");i.inverse=t.get("inverse");t.axis=i;i.model=t;i.grid=this;i.index=e;this._axesList.push(i);u[n][e]=i;h[n]++}}};ox._updateScale=function(l,u){L(this._axesList,function(t){t.scale.setExtent(Infinity,-Infinity)});l.eachSeries(function(t){if(cx(t)){var e=fx(t,l);var r=e[0];var i=e[1];if(!ax(r,u,l)||!ax(i,u,l)){return}var a=this.getCartesian(r.componentIndex,i.componentIndex);var n=t.getData();var o=a.getAxis("x");var s=a.getAxis("y");if(n.type==="list"){h(n,o,t);h(n,s,t)}}},this);function h(e,r,t){L(e.mapDimension(r.dim,true),function(t){r.scale.unionExtentFromData(e,Up(e,t))})}};ox.getTooltipAxes=function(i){var a=[];var n=[];L(this.getCartesians(),function(t){var e=i!=null&&i!=="auto"?t.getAxis(i):t.getBaseAxis();var r=t.getOtherAxis(e);S(a,e)<0&&a.push(e);S(n,r)<0&&n.push(r)});return{baseAxes:a,otherAxes:n}};function ux(t,e){var r=t.getExtent();var i=r[0]+r[1];t.toGlobalCoord=t.dim==="x"?function(t){return t+e}:function(t){return i-t+e};t.toLocalCoord=t.dim==="x"?function(t){return t-e}:function(t){return i-t+e}}var hx=["xAxis","yAxis"];function fx(r,t){return A(hx,function(t){var e=r.getReferringComponents(t)[0];if(D){if(!e){throw new Error(t+' "'+X(r.get(t+"Index"),r.get(t+"Id"),0)+'" not found')}}return e})}function cx(t){return t.get("coordinateSystem")==="cartesian2d"}nx.create=function(o,i){var a=[];o.eachComponent("grid",function(t,e){var r=new nx(t,o,i);r.name="grid_"+e;r.resize(t,i,true);t.coordinateSystem=r;a.push(r)});o.eachSeries(function(t){if(!cx(t)){return}var e=fx(t,o);var r=e[0];var i=e[1];var a=r.getCoordSysModel();if(D){if(!a){throw new Error('Grid "'+X(r.get("gridIndex"),r.get("gridId"),0)+'" not found')}if(r.getCoordSysModel()!==i.getCoordSysModel()){throw new Error("xAxis and yAxis must use the same grid")}}var n=a.coordinateSystem;t.coordinateSystem=n.getCartesian(r.componentIndex,i.componentIndex)});return a};nx.dimensions=nx.prototype.dimensions=qy.prototype.dimensions;ef.register("cartesian2d",nx);var vx=Math.PI;function dx(t){var e={componentType:t.mainType,componentIndex:t.componentIndex};e[t.mainType+"Index"]=t.componentIndex;return e}var px=function(t,e){this.opt=e;this.axisModel=t;C(e,{labelOffset:0,nameDirection:1,tickDirection:1,labelDirection:1,silent:true});this.group=new Or;var r=new Or({position:e.position.slice(),rotation:e.rotation});r.updateTransform();this._transform=r.transform;this._dumbGroup=r};px.prototype={constructor:px,hasBuilder:function(t){return!!gx[t]},add:function(t){gx[t].call(this)},getGroup:function(){return this.group}};var gx={axisLine:function(){var n=this.opt;var t=this.axisModel;if(!t.get("axisLine.show")){return}var e=this.axisModel.axis.getExtent();var r=this._transform;var o=[e[0],0];var i=[e[1],0];if(r){Lt(o,o,r);Lt(i,i,r)}var s=N({lineCap:"round"},t.getModel("axisLine.lineStyle").getLineStyle());this.group.add(new Gs(ul({anid:"line",shape:{x1:o[0],y1:o[1],x2:i[0],y2:i[1]},style:s,strokeContainThreshold:n.strokeContainThreshold||5,silent:true,z2:1})));var l=t.get("axisLine.symbol");var a=t.get("axisLine.symbolSize");var u=t.get("axisLine.symbolOffset")||0;if(typeof u==="number"){u=[u,u]}if(l!=null){if(typeof l==="string"){l=[l,l]}if(typeof a==="string"||typeof a==="number"){a=[a,a]}var h=a[0];var f=a[1];L([{rotate:n.rotation+Math.PI/2,offset:u[0],r:0},{rotate:n.rotation-Math.PI/2,offset:u[1],r:Math.sqrt((o[0]-i[0])*(o[0]-i[0])+(o[1]-i[1])*(o[1]-i[1]))}],function(t,e){if(l[e]!=="none"&&l[e]!=null){var r=cm(l[e],-h/2,-f/2,h,f,s.stroke,true);var i=t.r+t.offset;var a=[o[0]+i*Math.cos(n.rotation),o[1]-i*Math.sin(n.rotation)];r.attr({rotation:t.rotate,position:a,silent:true,z2:11});this.group.add(r)}},this)}},axisTickLabel:function(){var t=this.axisModel;var e=this.opt;var r=Ix(this,t,e);var i=Tx(this,t,e);_x(t,i,r)},axisName:function(){var t=this.opt;var e=this.axisModel;var r=X(t.axisName,e.get("name"));if(!r){return}var i=e.get("nameLocation");var a=t.nameDirection;var n=e.getModel("nameTextStyle");var o=e.get("nameGap")||0;var s=this.axisModel.axis.getExtent();var l=s[0]>s[1]?-1:1;var u=[i==="start"?s[0]-l*o:i==="end"?s[1]+l*o:(s[0]+s[1])/2,Mx(i)?t.labelOffset+a*o:0];var h;var f=e.get("nameRotate");if(f!=null){f=f*vx/180}var c;if(Mx(i)){h=mx(t.rotation,f!=null?f:t.rotation,a)}else{h=yx(t,i,f||0,s);c=t.axisNameAvailableWidth;if(c!=null){c=Math.abs(c/Math.sin(h.rotation));!isFinite(c)&&(c=null)}}var v=n.getFont();var d=e.get("nameTruncate",true)||{};var p=d.ellipsis;var g=X(t.nameTruncateMaxWidth,d.maxWidth,c);var m=p!=null&&g!=null?Uu(r,g,v,p,{minChar:2,placeholder:d.placeholder}):r;var y=e.get("tooltip",true);var x=e.mainType;var _={componentType:x,name:r,$vars:["name"]};_[x+"Index"]=e.componentIndex;var w=new ws({anid:"name",__fullText:r,__truncatedText:m,position:u,rotation:h.rotation,silent:xx(e),z2:1,tooltip:y&&y.show?N({content:r,formatter:function(){return r},formatterParams:_},y):null});Ll(w.style,n,{text:m,textFont:v,textFill:n.getTextColor()||e.get("axisLine.lineStyle.color"),textAlign:h.textAlign,textVerticalAlign:h.textVerticalAlign});if(e.get("triggerEvent")){w.eventData=dx(e);w.eventData.targetType="axisName";w.eventData.name=r}this._dumbGroup.add(w);w.updateTransform();this.group.add(w);w.decomposeTransform()}};var mx=px.innerTextLayout=function(t,e,r){var i=_u(e-t);var a;var n;if(wu(i)){n=r>0?"top":"bottom";a="center"}else if(wu(i-vx)){n=r>0?"bottom":"top";a="center"}else{n="middle";if(i>0&&i<vx){a=r>0?"right":"left"}else{a=r>0?"left":"right"}}return{rotation:i,textAlign:a,textVerticalAlign:n}};function yx(t,e,r,i){var a=_u(r-t.rotation);var n;var o;var s=i[0]>i[1];var l=e==="start"&&!s||e!=="start"&&s;if(wu(a-vx/2)){o=l?"bottom":"top";n="center"}else if(wu(a-vx*1.5)){o=l?"top":"bottom";n="center"}else{o="middle";if(a<vx*1.5&&a>vx/2){n=l?"left":"right"}else{n=l?"right":"left"}}return{rotation:a,textAlign:n,textVerticalAlign:o}}function xx(t){var e=t.get("tooltip");return t.get("silent")||!(t.get("triggerEvent")||e&&e.show)}function _x(t,e,r){if(em(t.axis)){return}var i=t.get("axisLabel.showMinLabel");var a=t.get("axisLabel.showMaxLabel");e=e||[];r=r||[];var n=e[0];var o=e[1];var s=e[e.length-1];var l=e[e.length-2];var u=r[0];var h=r[1];var f=r[r.length-1];var c=r[r.length-2];if(i===false){bx(n);bx(u)}else if(Sx(n,o)){if(i){bx(o);bx(h)}else{bx(n);bx(u)}}if(a===false){bx(s);bx(f)}else if(Sx(l,s)){if(a){bx(l);bx(c)}else{bx(s);bx(f)}}}function bx(t){t&&(t.ignore=true)}function Sx(t,e,r){var i=t&&t.getBoundingRect().clone();var a=e&&e.getBoundingRect().clone();if(!i||!a){return}var n=ue([]);ve(n,n,-t.rotation);i.applyTransform(fe([],n,t.getLocalTransform()));a.applyTransform(fe([],n,e.getLocalTransform()));return i.intersect(a)}function Mx(t){return t==="middle"||t==="center"}function Ix(t,e,r){var i=e.axis;if(!e.get("axisTick.show")||i.scale.isBlank()){return}var a=e.getModel("axisTick");var n=a.getModel("lineStyle");var o=a.get("length");var s=i.getTicksCoords();var l=[];var u=[];var h=t._transform;var f=[];for(var c=0;c<s.length;c++){var v=s[c].coord;l[0]=v;l[1]=0;u[0]=v;u[1]=r.tickDirection*o;if(h){Lt(l,l,h);Lt(u,u,h)}var d=new Gs(ul({anid:"tick_"+s[c].tickValue,shape:{x1:l[0],y1:l[1],x2:u[0],y2:u[1]},style:C(n.getLineStyle(),{stroke:e.get("axisLine.lineStyle.color")}),z2:2,silent:true}));t.group.add(d);f.push(d)}return f}function Tx(h,f,c){var v=f.axis;var t=X(c.axisLabelShow,f.get("axisLabel.show"));if(!t||v.scale.isBlank()){return}var d=f.getModel("axisLabel");var p=d.get("margin");var e=v.getViewLabels();var r=(X(c.labelRotate,d.get("rotate"))||0)*vx/180;var g=mx(c.rotation,r,c.labelDirection);var m=f.getCategories(true);var y=[];var x=xx(f);var _=f.get("triggerEvent");L(e,function(t,e){var r=t.tickValue;var i=t.formattedLabel;var a=t.rawLabel;var n=d;if(m&&m[r]&&m[r].textStyle){n=new ru(m[r].textStyle,d,f.ecModel)}var o=n.getTextColor()||f.get("axisLine.lineStyle.color");var s=v.dataToCoord(r);var l=[s,c.labelOffset+c.labelDirection*p];var u=new ws({anid:"label_"+r,position:l,rotation:g.rotation,silent:x,z2:10});Ll(u.style,n,{text:i,textAlign:n.getShallow("align",true)||g.textAlign,textVerticalAlign:n.getShallow("verticalAlign",true)||n.getShallow("baseline",true)||g.textVerticalAlign,textFill:typeof o==="function"?o(v.type==="category"?a:v.type==="value"?r+"":r,e):o});if(_){u.eventData=dx(f);u.eventData.targetType="axisLabel";u.eventData.value=a}h._dumbGroup.add(u);u.updateTransform();y.push(u);h.group.add(u);u.decomposeTransform()});return y}var Ax=L;var Dx=z;function Cx(t,e){var r={axesInfo:{},seriesInvolved:false,coordSysAxesInfo:{},coordSysMap:{}};Lx(r,t,e);r.seriesInvolved&&Px(r,t);return r}function Lx(d,p,t){var o=p.getComponent("tooltip");var g=p.getComponent("axisPointer");var m=g.get("link",true)||[];var y=[];Ax(t.getCoordinateSystems(),function(f){if(!f.axisPointerEnabled){return}var t=Vx(f.model);var c=d.coordSysAxesInfo[t]={};d.coordSysMap[t]=f;var e=f.model;var v=e.getModel("tooltip",o);Ax(f.getAxes(),Dx(n,false,null));if(f.getTooltipAxes&&o&&v.get("show")){var r=v.get("trigger")==="axis";var i=v.get("axisPointer.type")==="cross";var a=f.getTooltipAxes(v.get("axisPointer.axis"));if(r||i){Ax(a.baseAxes,Dx(n,i?"cross":true,r))}if(i){Ax(a.otherAxes,Dx(n,"cross",false))}}function n(t,e,r){var i=r.model.getModel("axisPointer",g);var a=i.get("show");if(!a||a==="auto"&&!t&&!Bx(i)){return}if(e==null){e=i.get("triggerTooltip")}i=t?kx(r,v,g,p,t,e):i;var n=i.get("snap");var o=Vx(r.model);var s=e||n||r.type==="category";var l=d.axesInfo[o]={key:o,axis:r,coordSys:f,axisPointerModel:i,triggerTooltip:e,involveSeries:s,snap:n,useHandle:Bx(i),seriesModels:[]};c[o]=l;d.seriesInvolved|=s;var u=Nx(m,r);if(u!=null){var h=y[u]||(y[u]={axesInfo:{}});h.axesInfo[o]=l;h.mapper=m[u].mapper;l.linkGroup=h}}})}function kx(t,e,r,i,a,n){var o=e.getModel("axisPointer");var s={};Ax(["type","snap","lineStyle","shadowStyle","label","animation","animationDurationUpdate","animationEasingUpdate","z"],function(t){s[t]=P(o.get(t))});s.snap=t.type!=="category"&&!!n;if(o.get("type")==="cross"){s.type="line"}var l=s.label||(s.label={});l.show==null&&(l.show=false);if(a==="cross"){var u=o.get("label.show");l.show=u!=null?u:true;if(!n){var h=s.lineStyle=o.get("crossStyle");h&&C(l,h.textStyle)}}return t.model.getModel("axisPointer",new ru(s,r,i))}function Px(a,t){t.eachSeries(function(r){var i=r.coordinateSystem;var t=r.get("tooltip.trigger",true);var e=r.get("tooltip.show",true);if(!i||t==="none"||t===false||t==="item"||e===false||r.get("axisPointer.show",true)===false){return}Ax(a.coordSysAxesInfo[Vx(i.model)],function(t){var e=t.axis;if(i.getAxis(e.dim)===e){t.seriesModels.push(r);t.seriesDataCount==null&&(t.seriesDataCount=0);t.seriesDataCount+=r.getData().count()}})},this)}function Nx(t,e){var r=e.model;var i=e.dim;for(var a=0;a<t.length;a++){var n=t[a]||{};if(Ox(n[i+"AxisId"],r.id)||Ox(n[i+"AxisIndex"],r.componentIndex)||Ox(n[i+"AxisName"],r.name)){return a}}}function Ox(t,e){return t==="all"||B(t)&&S(t,e)>=0||t===e}function Ex(t){var e=Rx(t);if(!e){return}var r=e.axisPointerModel;var i=e.axis.scale;var a=r.option;var n=r.get("status");var o=r.get("value");if(o!=null){o=i.parse(o)}var s=Bx(r);if(n==null){a.status=s?"show":"hide"}var l=i.getExtent().slice();l[0]>l[1]&&l.reverse();if(o==null||o>l[1]){o=l[1]}if(o<l[0]){o=l[0]}a.value=o;if(s){a.status=e.axis.scale.isBlank()?"hide":"show"}}function Rx(t){var e=(t.ecModel.getComponent("axisPointer")||{}).coordSysAxesInfo;return e&&e.axesInfo[Vx(t)]}function zx(t){var e=Rx(t);return e&&e.axisPointerModel}function Bx(t){return!!t.get("handle.show")}function Vx(t){return t.type+"||"+t.id}var Gx=Jd({type:"axis",_axisPointer:null,axisPointerClass:null,render:function(t,e,r,i){this.axisPointerClass&&Ex(t);Gx.superApply(this,"render",arguments);Fx(this,t,e,r,i,true)},updateAxisPointer:function(t,e,r,i,a){Fx(this,t,e,r,i,false)},remove:function(t,e){var r=this._axisPointer;r&&r.remove(e);Gx.superApply(this,"remove",arguments)},dispose:function(t,e){Wx(this,e);Gx.superApply(this,"dispose",arguments)}});function Fx(t,e,r,i,a,n){var o=Gx.getAxisPointerClass(t.axisPointerClass);if(!o){return}var s=zx(e);s?(t._axisPointer||(t._axisPointer=new o)).render(e,s,i,n):Wx(t,i)}function Wx(t,e,r){var i=t._axisPointer;i&&i.dispose(e,r);t._axisPointer=null}var Hx=[];Gx.registerAxisPointerClass=function(t,e){if(D){if(Hx[t]){throw new Error("axisPointer "+t+" exists")}}Hx[t]=e};Gx.getAxisPointerClass=function(t){return t&&Hx[t]};function Zx(t,e,r){r=r||{};var i=t.coordinateSystem;var a=e.axis;var n={};var o=a.getAxesOnZeroOf()[0];var s=a.position;var l=o?"onZero":s;var u=a.dim;var h=i.getRect();var f=[h.x,h.x+h.width,h.y,h.y+h.height];var c={left:0,right:1,top:0,bottom:1,onZero:2};var v=e.get("offset")||0;var d=u==="x"?[f[2]-v,f[3]+v]:[f[0]-v,f[1]+v];if(o){var p=o.toGlobalCoord(o.dataToCoord(0));d[c.onZero]=Math.max(Math.min(p,d[1]),d[0])}n.position=[u==="y"?d[c[l]]:f[0],u==="x"?d[c[l]]:f[3]];n.rotation=Math.PI/2*(u==="x"?0:1);var g={top:-1,bottom:1,left:-1,right:1};n.labelDirection=n.tickDirection=n.nameDirection=g[s];n.labelOffset=o?d[c[s]]-d[c.onZero]:0;if(e.get("axisTick.inside")){n.tickDirection=-n.tickDirection}if(X(r.labelInside,e.get("axisLabel.inside"))){n.labelDirection=-n.labelDirection}var m=e.get("axisLabel.rotate");n.labelRotate=l==="top"?-m:m;n.z2=1;return n}var Ux=["axisLine","axisTickLabel","axisName"];var Xx=["splitArea","splitLine"];var Yx=Gx.extend({type:"cartesianAxis",axisPointerClass:"CartesianAxisPointer",render:function(e,t,r,i){this.group.removeAll();var a=this._axisGroup;this._axisGroup=new Or;this.group.add(this._axisGroup);if(!e.get("show")){return}var n=e.getCoordSysModel();var o=Zx(n,e);var s=new px(e,o);L(Ux,s.add,s);this._axisGroup.add(s.getGroup());L(Xx,function(t){if(e.get(t+".show")){this["_"+t](e,n)}},this);Ul(a,this._axisGroup,e);Yx.superCall(this,"render",e,t,r,i)},remove:function(){this._splitAreaColors=null},_splitLine:function(t,e){var r=t.axis;if(r.scale.isBlank()){return}var i=t.getModel("splitLine");var a=i.getModel("lineStyle");var n=a.get("color");n=B(n)?n:[n];var o=e.coordinateSystem.getRect();var s=r.isHorizontal();var l=0;var u=r.getTicksCoords({tickModel:i});var h=[];var f=[];var c=a.getLineStyle();for(var v=0;v<u.length;v++){var d=r.toGlobalCoord(u[v].coord);if(s){h[0]=d;h[1]=o.y;f[0]=d;f[1]=o.y+o.height}else{h[0]=o.x;h[1]=d;f[0]=o.x+o.width;f[1]=d}var p=l++%n.length;var g=u[v].tickValue;this._axisGroup.add(new Gs(ul({anid:g!=null?"line_"+u[v].tickValue:null,shape:{x1:h[0],y1:h[1],x2:f[0],y2:f[1]},style:C({stroke:n[p]},c),silent:true})))}},_splitArea:function(t,e){var r=t.axis;if(r.scale.isBlank()){return}var i=t.getModel("splitArea");var a=i.getModel("areaStyle");var n=a.get("color");var o=e.coordinateSystem.getRect();var s=r.getTicksCoords({tickModel:i,clamp:true});if(!s.length){return}var l=n.length;var u=this._splitAreaColors;var h=it();var f=0;if(u){for(var c=0;c<s.length;c++){var v=u.get(s[c].tickValue);if(v!=null){f=(v+(l-1)*c)%l;break}}}var d=r.toGlobalCoord(s[0].coord);var p=a.getAreaStyle();n=B(n)?n:[n];for(var c=1;c<s.length;c++){var g=r.toGlobalCoord(s[c].coord);var m;var y;var x;var _;if(r.isHorizontal()){m=d;y=o.y;x=g-m;_=o.height;d=m+x}else{m=o.x;y=d;x=o.width;_=g-y;d=y+_}var w=s[c-1].tickValue;w!=null&&h.set(w,f);this._axisGroup.add(new Bs({anid:w!=null?"area_"+w:null,shape:{x:m,y:y,width:x,height:_},style:C({fill:n[f]},p),silent:true}));f=(f+1)%l}this._splitAreaColors=h}});Yx.extend({type:"xAxis"});Yx.extend({type:"yAxis"});Jd({type:"grid",render:function(t,e){this.group.removeAll();if(t.get("show")){this.group.add(new Bs({shape:t.coordinateSystem.getRect(),style:C({fill:t.get("backgroundColor")},t.getItemStyle()),silent:true,z2:-1}))}}});Fd(function(t){if(t.xAxis&&t.yAxis&&!t.grid){t.grid={}}});jd(Wy("line","circle","line"));Yd(Hy("line"));Wd(Zv.PROCESSOR.STATISTIC,Xy("line"));var jx=rc.extend({type:"series.__base_bar__",getInitialData:function(t,e){return Xp(this.getSource(),this)},getMarkerPosition:function(t){var e=this.coordinateSystem;if(e){var r=e.dataToPoint(e.clampData(t));var i=this.getData();var a=i.getLayout("offset");var n=i.getLayout("size");var o=e.getBaseAxis().isHorizontal()?0:1;r[o]+=a+n/2;return r}return[NaN,NaN]},defaultOption:{zlevel:0,z:2,coordinateSystem:"cartesian2d",legendHoverLink:true,barMinHeight:0,barMinAngle:0,large:false,largeThreshold:400,progressive:3e3,progressiveChunkMode:"mod",itemStyle:{},emphasis:{}}});jx.extend({type:"series.bar",dependencies:["grid","polar"],brushSelector:"rect",getProgressive:function(){return this.get("large")?this.get("progressive"):false},getProgressiveThreshold:function(){var t=this.get("progressiveThreshold");var e=this.get("largeThreshold");if(e>t){t=e}return t}});function qx(t,e,r,i,a,n,o){var s=r.getModel("label");var l=r.getModel("emphasis.label");Cl(t,e,s,l,{labelFetcher:a,labelDataIndex:n,defaultText:Ym(a.getData(),n),isRectText:true,autoColor:i});Kx(t);Kx(e)}function Kx(t,e){if(t.textPosition==="outside"){t.textPosition=e}}var $x=An([["fill","color"],["stroke","borderColor"],["lineWidth","borderWidth"],["stroke","barBorderColor"],["lineWidth","barBorderWidth"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"]]);var Jx={getBarItemStyle:function(t){var e=$x(this,t);if(this.getBorderLineDash){var r=this.getBorderLineDash();r&&(e.lineDash=r)}return e}};var Qx=["itemStyle","barBorderWidth"];N(ru.prototype,Jx);tp({type:"bar",render:function(t,e,r){this._updateDrawMode(t);var i=t.get("coordinateSystem");if(i==="cartesian2d"||i==="polar"){this._isLargeDraw?this._renderLarge(t,e,r):this._renderNormal(t,e,r)}else if(D){console.warn("Only cartesian2d and polar supported for bar.")}return this.group},incrementalPrepareRender:function(t,e,r){this._clear();this._updateDrawMode(t)},incrementalRender:function(t,e,r,i){this._incrementalRenderLarge(t,e)},_updateDrawMode:function(t){var e=t.pipelineContext.large;if(this._isLargeDraw==null||e^this._isLargeDraw){this._isLargeDraw=e;this._clear()}},_renderNormal:function(n,t,e){var o=this.group;var s=n.getData();var l=this._data;var u=n.coordinateSystem;var r=u.getBaseAxis();var h;if(u.type==="cartesian2d"){h=r.isHorizontal()}else if(u.type==="polar"){h=r.dim==="angle"}var f=n.isAnimationEnabled()?n:null;s.diff(l).add(function(t){if(!s.hasValue(t)){return}var e=s.getItemModel(t);var r=i_[u.type](s,t,e);var i=t_[u.type](s,t,e,r,h,f);s.setItemGraphicEl(t,i);o.add(i);a_(i,s,t,e,r,n,h,u.type==="polar")}).update(function(t,e){var r=l.getItemGraphicEl(e);if(!s.hasValue(t)){o.remove(r);return}var i=s.getItemModel(t);var a=i_[u.type](s,t,i);if(r){Gl(r,{shape:a},f,t)}else{r=t_[u.type](s,t,i,a,h,f,true)}s.setItemGraphicEl(t,r);o.add(r);a_(r,s,t,i,a,n,h,u.type==="polar")}).remove(function(t){var e=l.getItemGraphicEl(t);if(u.type==="cartesian2d"){e&&e_(t,f,e)}else{e&&r_(t,f,e)}}).execute();this._data=s},_renderLarge:function(t,e,r){this._clear();s_(t,this.group)},_incrementalRenderLarge:function(t,e){s_(e,this.group,true)},dispose:nt,remove:function(t){this._clear(t)},_clear:function(e){var t=this.group;var r=this._data;if(e&&e.get("animation")&&r&&!this._isLargeDraw){r.eachItemGraphicEl(function(t){if(t.type==="sector"){r_(t.dataIndex,e,t)}else{e_(t.dataIndex,e,t)}})}else{t.removeAll()}this._data=null}});var t_={cartesian2d:function(t,e,r,i,a,n,o){var s=new Bs({shape:N({},i)});if(n){var l=s.shape;var u=a?"height":"width";var h={};l[u]=0;h[u]=i[u];ql[o?"updateProps":"initProps"](s,{shape:h},n,e)}return s},polar:function(t,e,r,i,a,n,o){var s=i.startAngle<i.endAngle;var l=new Is({shape:C({clockwise:s},i)});if(n){var u=l.shape;var h=a?"r":"endAngle";var f={};u[h]=a?0:i.startAngle;f[h]=i[h];ql[o?"updateProps":"initProps"](l,{shape:f},n,e)}return l}};function e_(t,e,r){r.style.text=null;Gl(r,{shape:{width:0}},e,t,function(){r.parent&&r.parent.remove(r)})}function r_(t,e,r){r.style.text=null;Gl(r,{shape:{r:r.shape.r0}},e,t,function(){r.parent&&r.parent.remove(r)})}var i_={cartesian2d:function(t,e,r){var i=t.getItemLayout(e);var a=n_(r,i);var n=i.width>0?1:-1;var o=i.height>0?1:-1;return{x:i.x+n*a/2,y:i.y+o*a/2,width:i.width-n*a,height:i.height-o*a}},polar:function(t,e,r){var i=t.getItemLayout(e);return{cx:i.cx,cy:i.cy,r0:i.r0,r:i.r,startAngle:i.startAngle,endAngle:i.endAngle}}};function a_(t,e,r,i,a,n,o,s){var l=e.getItemVisual(r,"color");var u=e.getItemVisual(r,"opacity");var h=i.getModel("itemStyle");var f=i.getModel("emphasis.itemStyle").getBarItemStyle();if(!s){t.setShape("r",h.get("barBorderRadius")||0)}t.useStyle(C({fill:l,opacity:u},h.getBarItemStyle()));var c=i.getShallow("cursor");c&&t.attr("cursor",c);var v=o?a.height>0?"bottom":"top":a.width>0?"left":"right";if(!s){qx(t.style,f,i,l,n,r,v)}Al(t,f)}function n_(t,e){var r=t.get(Qx)||0;return Math.min(r,Math.abs(e.width),Math.abs(e.height))}var o_=ts.extend({type:"largeBar",shape:{points:[]},buildPath:function(t,e){var r=e.points;var i=this.__startPoint;var a=this.__valueIdx;for(var n=0;n<r.length;n+=2){i[this.__valueIdx]=r[n+a];t.moveTo(i[0],i[1]);t.lineTo(r[n],r[n+1])}}});function s_(t,e,r){var i=t.getData();var a=[];var n=i.getLayout("valueAxisHorizontal")?1:0;a[1-n]=i.getLayout("valueAxisStart");var o=new o_({shape:{points:i.getLayout("largePoints")},incremental:!!r,__startPoint:a,__valueIdx:n});e.add(o);l_(o,t,i)}function l_(t,e,r){var i=r.getVisual("borderColor")||r.getVisual("color");var a=e.getModel("itemStyle").getItemStyle(["color","borderColor"]);t.useStyle(a);t.style.fill=null;t.style.stroke=i;t.style.lineWidth=r.getLayout("barWidth")}Yd(z(_g,"bar"));Yd(wg);jd({seriesType:"bar",reset:function(t){t.getData().setVisual("legendSymbol","roundRect")}});var u_=function(t,e,r){e=B(e)&&{coordDimensions:e}||N({},e);var i=t.getSource();var a=Wp(i,e);var n=new Ip(a,t);n.initData(i,r);return n};var h_={updateSelectedMap:function(t){this._targetList=B(t)?t.slice():[];this._selectTargetMap=T(t||[],function(t,e){t.set(e.name,e);return t},it())},select:function(t,e){var r=e!=null?this._targetList[e]:this._selectTargetMap.get(t);var i=this.get("selectedMode");if(i==="single"){this._selectTargetMap.each(function(t){t.selected=false})}r&&(r.selected=true)},unSelect:function(t,e){var r=e!=null?this._targetList[e]:this._selectTargetMap.get(t);r&&(r.selected=false)},toggleSelected:function(t,e){var r=e!=null?this._targetList[e]:this._selectTargetMap.get(t);if(r!=null){this[r.selected?"unSelect":"select"](t,e);return r.selected}},isSelected:function(t,e){var r=e!=null?this._targetList[e]:this._selectTargetMap.get(t);return r&&r.selected}};var f_=Qd({type:"series.pie",init:function(t){f_.superApply(this,"init",arguments);this.legendDataProvider=function(){return this.getRawData()};this.updateSelectedMap(this._createSelectableList());this._defaultLabelLine(t)},mergeOption:function(t){f_.superCall(this,"mergeOption",t);this.updateSelectedMap(this._createSelectableList())},getInitialData:function(t,e){return u_(this,["value"])},_createSelectableList:function(){var t=this.getRawData();var e=t.mapDimension("value");var r=[];for(var i=0,a=t.count();i<a;i++){r.push({name:t.getName(i),value:t.get(e,i),selected:Xf(t,i,"selected")})}return r},getDataParams:function(t){var e=this.getData();var r=f_.superCall(this,"getDataParams",t);var i=[];e.each(e.mapDimension("value"),function(t){i.push(t)});r.percent=yu(i,t,e.hostModel.get("percentPrecision"));r.$vars.push("percent");return r},_defaultLabelLine:function(t){Qa(t,"labelLine",["show"]);var e=t.labelLine;var r=t.emphasis.labelLine;e.show=e.show&&t.label.show;r.show=r.show&&t.emphasis.label.show},defaultOption:{zlevel:0,z:2,legendHoverLink:true,hoverAnimation:true,center:["50%","50%"],radius:[0,"75%"],clockwise:true,startAngle:90,minAngle:0,selectedOffset:10,hoverOffset:10,avoidLabelOverlap:true,percentPrecision:2,stillShowZeroSum:true,label:{rotate:false,show:true,position:"outer"},labelLine:{show:true,length:15,length2:15,smooth:false,lineStyle:{width:1,type:"solid"}},itemStyle:{borderWidth:1},animationType:"expansion",animationEasing:"cubicOut"}});I(f_,h_);function c_(t,e,r,i){var a=e.getData();var n=this.dataIndex;var o=a.getName(n);var s=e.get("selectedOffset");i.dispatchAction({type:"pieToggleSelect",from:t,name:o,seriesId:e.id});a.each(function(t){v_(a.getItemGraphicEl(t),a.getItemLayout(t),e.isSelected(a.getName(t)),s,r)})}function v_(t,e,r,i,a){var n=(e.startAngle+e.endAngle)/2;var o=Math.cos(n);var s=Math.sin(n);var l=r?i:0;var u=[o*l,s*l];a?t.animate().when(200,{position:u}).start("bounceOut"):t.attr("position",u)}function d_(t,e){Or.call(this);var r=new Is({z2:2});var i=new Ps;var a=new ws;this.add(r);this.add(i);this.add(a);this.updateData(t,e,true);function n(){i.ignore=i.hoverIgnore;a.ignore=a.hoverIgnore}function o(){i.ignore=i.normalIgnore;a.ignore=a.normalIgnore}this.on("emphasis",n).on("normal",o).on("mouseover",n).on("mouseout",o)}var p_=d_.prototype;p_.updateData=function(t,e,r){var i=this.childAt(0);var a=t.hostModel;var n=t.getItemModel(e);var o=t.getItemLayout(e);var s=N({},o);s.label=null;if(r){i.setShape(s);var l=a.getShallow("animationType");if(l==="scale"){i.shape.r=o.r0;Fl(i,{shape:{r:o.r}},a,e)}else{i.shape.endAngle=o.startAngle;Gl(i,{shape:{endAngle:o.endAngle}},a,e)}}else{Gl(i,{shape:s},a,e)}var u=t.getItemVisual(e,"color");i.useStyle(C({lineJoin:"bevel",fill:u},n.getModel("itemStyle").getItemStyle()));i.hoverStyle=n.getModel("emphasis.itemStyle").getItemStyle();var h=n.getShallow("cursor");h&&i.attr("cursor",h);v_(this,t.getItemLayout(e),a.isSelected(null,e),a.get("selectedOffset"),a.get("animation"));function f(){i.stopAnimation(true);i.animateTo({shape:{r:o.r+a.get("hoverOffset")}},300,"elasticOut")}function c(){i.stopAnimation(true);i.animateTo({shape:{r:o.r}},300,"elasticOut")}i.off("mouseover").off("mouseout").off("emphasis").off("normal");if(n.get("hoverAnimation")&&a.isAnimationEnabled()){i.on("mouseover",f).on("mouseout",c).on("emphasis",f).on("normal",c)}this._updateLabel(t,e);Al(this)};p_._updateLabel=function(t,e){var r=this.childAt(1);var i=this.childAt(2);var a=t.hostModel;var n=t.getItemModel(e);var o=t.getItemLayout(e);var s=o.label;var l=t.getItemVisual(e,"color");Gl(r,{shape:{points:s.linePoints||[[s.x,s.y],[s.x,s.y],[s.x,s.y]]}},a,e);Gl(i,{style:{x:s.x,y:s.y}},a,e);i.attr({rotation:s.rotation,origin:[s.x,s.y],z2:10});var u=n.getModel("label");var h=n.getModel("emphasis.label");var f=n.getModel("labelLine");var c=n.getModel("emphasis.labelLine");var l=t.getItemVisual(e,"color");Cl(i.style,i.hoverStyle={},u,h,{labelFetcher:t.hostModel,labelDataIndex:e,defaultText:t.getName(e),autoColor:l,useInsideStyle:!!s.inside},{textAlign:s.textAlign,textVerticalAlign:s.verticalAlign,opacity:t.getItemVisual(e,"opacity")});i.ignore=i.normalIgnore=!u.get("show");i.hoverIgnore=!h.get("show");r.ignore=r.normalIgnore=!f.get("show");r.hoverIgnore=!c.get("show");r.setStyle({stroke:l,opacity:t.getItemVisual(e,"opacity")});r.setStyle(f.getModel("lineStyle").getLineStyle());r.hoverStyle=c.getModel("lineStyle").getLineStyle();var v=f.get("smooth");if(v&&v===true){v=.4}r.setShape({smooth:v})};M(d_,Or);var g_=gc.extend({type:"pie",init:function(){var t=new Or;this._sectorGroup=t},render:function(t,e,r,i){if(i&&i.from===this.uid){return}var a=t.getData();var n=this._data;var o=this.group;var s=e.get("animation");var l=!n;var u=t.get("animationType");var h=z(c_,this.uid,t,s,r);var f=t.get("selectedMode");a.diff(n).add(function(t){var e=new d_(a,t);if(l&&u!=="scale"){e.eachChild(function(t){t.stopAnimation(true)})}f&&e.on("click",h);a.setItemGraphicEl(t,e);o.add(e)}).update(function(t,e){var r=n.getItemGraphicEl(e);r.updateData(a,t);r.off("click");f&&r.on("click",h);o.add(r);a.setItemGraphicEl(t,r)}).remove(function(t){var e=n.getItemGraphicEl(t);o.remove(e)}).execute();if(s&&l&&a.count()>0&&u!=="scale"){var c=a.getItemLayout(0);var v=Math.max(r.getWidth(),r.getHeight())/2;var d=R(o.removeClipPath,o);o.setClipPath(this._createClipPath(c.cx,c.cy,v,c.startAngle,c.clockwise,d,t))}else{o.removeClipPath()}this._data=a},dispose:function(){},_createClipPath:function(t,e,r,i,a,n,o){var s=new Is({shape:{cx:t,cy:e,r0:0,r:r,startAngle:i,endAngle:i,clockwise:a}});Fl(s,{shape:{endAngle:i+(a?1:-1)*Math.PI*2}},o,n);return s},containPoint:function(t,e){var r=e.getData();var i=r.getItemLayout(0);if(i){var a=t[0]-i.cx;var n=t[1]-i.cy;var o=Math.sqrt(a*a+n*n);return o<=i.r&&o>=i.r0}}});var m_=function(r,t){L(t,function(n){n.update="updateView";Zd(n,function(t,e){var a={};e.eachComponent({mainType:"series",subType:r,query:t},function(r){if(r[n.method]){r[n.method](t.name,t.dataIndex)}var i=r.getData();i.each(function(t){var e=i.getName(t);a[e]=r.isSelected(e)||false})});return{name:t.name,selected:a}})})};var y_=function(i){return{getTargetSeries:function(t){var e={};var r=it();t.eachSeriesByType(i,function(t){t.__paletteScope=e;r.set(t.uid,t)});return r},reset:function(n,t){var o=n.getRawData();var s={};var l=n.getData();l.each(function(t){var e=l.getRawIndex(t);s[e]=t});o.each(function(t){var e=s[t];var r=e!=null&&l.getItemVisual(e,"color",true);if(!r){var i=o.getItemModel(t);var a=i.get("itemStyle.color")||n.getColorFromPalette(o.getName(t)||t+"",n.__paletteScope,o.count());o.setItemVisual(t,"color",a);if(e!=null){l.setItemVisual(e,"color",a)}}else{o.setItemVisual(t,"color",r)}})}}};function x_(n,t,e,r,i,a,o){n.sort(function(t,e){return t.y-e.y});function s(t,e,r,i){for(var a=t;a<e;a++){n[a].y+=r;if(a>t&&a+1<e&&n[a+1].y>n[a].y+n[a].height){l(a,r/2);return}}l(e-1,r/2)}function l(t,e){for(var r=t;r>=0;r--){n[r].y-=e;if(r>0&&n[r].y>n[r-1].y+n[r-1].height){break}}}function u(t,e,r,i,a,n){var o=n>0?e?Number.MAX_VALUE:0:e?Number.MAX_VALUE:0;for(var s=0,l=t.length;s<l;s++){var u=Math.abs(t[s].y-i);var h=t[s].len;var f=t[s].len2;var c=u<a+h?Math.sqrt((a+h+f)*(a+h+f)-u*u):Math.abs(t[s].x-r);if(e&&c>=o){c=o-10}if(!e&&c<=o){c=o+10}t[s].x=r+c*n;o=c}}var h=0;var f;var c=n.length;var v=[];var d=[];for(var p=0;p<c;p++){f=n[p].y-h;if(f<0){s(p,c,-f,i)}h=n[p].y+n[p].height}if(o-h<0){l(c-1,h-o)}for(var p=0;p<c;p++){if(n[p].y>=e){d.push(n[p])}else{v.push(n[p])}}u(v,false,t,e,r,i);u(d,true,t,e,r,i)}function __(t,e,r,i,a,n){var o=[];var s=[];for(var l=0;l<t.length;l++){if(w_(t[l])){continue}if(t[l].x<e){o.push(t[l])}else{s.push(t[l])}}x_(s,e,r,i,1,a,n);x_(o,e,r,i,-1,a,n);for(var l=0;l<t.length;l++){if(w_(t[l])){continue}var u=t[l].linePoints;if(u){var h=u[1][0]-u[2][0];if(t[l].x<e){u[2][0]=t[l].x+3}else{u[2][0]=t[l].x-3}u[1][1]=u[2][1]=t[l].y;u[1][0]=u[2][0]+h}}}function w_(t){return t.position==="center"}var b_=function(T,A,t,e){var D=T.getData();var C=[];var L;var k;var P=false;D.each(function(t){var e=D.getItemLayout(t);var r=D.getItemModel(t);var i=r.getModel("label");var a=i.get("position")||r.get("emphasis.label.position");var n=r.getModel("labelLine");var o=n.get("length");var s=n.get("length2");var l=(e.startAngle+e.endAngle)/2;var u=Math.cos(l);var h=Math.sin(l);var f;var c;var v;var d;L=e.cx;k=e.cy;var p=a==="inside"||a==="inner";if(a==="center"){f=e.cx;c=e.cy;d="center"}else{var g=(p?(e.r+e.r0)/2*u:e.r*u)+L;var m=(p?(e.r+e.r0)/2*h:e.r*h)+k;f=g+u*3;c=m+h*3;if(!p){var y=g+u*(o+A-e.r);var x=m+h*(o+A-e.r);var _=y+(u<0?-1:1)*s;var w=x;f=_+(u<0?-5:5);c=w;v=[[g,m],[y,x],[_,w]]}d=p?"center":u>0?"left":"right"}var b=i.getFont();var S=i.get("rotate")?u<0?-l+Math.PI:-l:0;var M=T.getFormattedLabel(t,"normal")||D.getName(t);var I=bi(M,b,d,"top");P=!!S;e.label={x:f,y:c,position:a,height:I.height,len:o,len2:s,linePoints:v,textAlign:d,verticalAlign:"middle",rotation:S,inside:p};if(!p){C.push(e.label)}});if(!P&&T.get("avoidLabelOverlap")){__(C,L,k,A,t,e)}};var S_=Math.PI*2;var M_=Math.PI/180;var I_=function(t,e,T,r){e.eachSeriesByType(t,function(t){var a=t.getData();var e=a.mapDimension("value");var r=t.get("center");var i=t.get("radius");if(!B(i)){i=[0,i]}if(!B(r)){r=[r,r]}var n=T.getWidth();var o=T.getHeight();var s=Math.min(n,o);var l=cu(r[0],n);var u=cu(r[1],o);var h=cu(i[0],s/2);var f=cu(i[1],s/2);var c=-t.get("startAngle")*M_;var v=t.get("minAngle")*M_;var d=0;a.each(e,function(t){!isNaN(t)&&d++});var p=a.getSum(e);var g=Math.PI/(p||d)*2;var m=t.get("clockwise");var y=t.get("roseType");var x=t.get("stillShowZeroSum");var _=a.getDataExtent(e);_[0]=0;var w=S_;var b=0;var S=c;var M=m?1:-1;a.each(e,function(t,e){var r;if(isNaN(t)){a.setItemLayout(e,{angle:NaN,startAngle:NaN,endAngle:NaN,clockwise:m,cx:l,cy:u,r0:h,r:y?NaN:f});return}if(y!=="area"){r=p===0&&x?g:t*g}else{r=S_/d}if(r<v){r=v;w-=v}else{b+=t}var i=S+M*r;a.setItemLayout(e,{angle:r,startAngle:S,endAngle:i,clockwise:m,cx:l,cy:u,r0:h,r:y?fu(t,_,[h,f]):f});S=i});if(w<S_&&d){if(w<=.001){var I=S_/d;a.each(e,function(t,e){if(!isNaN(t)){var r=a.getItemLayout(e);r.angle=I;r.startAngle=c+M*e*I;r.endAngle=c+M*(e+1)*I}})}else{g=w/b;S=c;a.each(e,function(t,e){if(!isNaN(t)){var r=a.getItemLayout(e);var i=r.angle===v?v:t*g;r.startAngle=S;r.endAngle=S+M*i;S+=M*i}})}}b_(t,f,n,o)})};var T_=function(t){return{seriesType:t,reset:function(t,e){var i=e.findComponents({mainType:"legend"});if(!i||!i.length){return}var a=t.getData();a.filterSelf(function(t){var e=a.getName(t);for(var r=0;r<i.length;r++){if(!i[r].isSelected(e)){return false}}return true})}}};m_("pie",[{type:"pieToggleSelect",event:"pieselectchanged",method:"toggleSelected"},{type:"pieSelect",event:"pieselected",method:"select"},{type:"pieUnSelect",event:"pieunselected",method:"unSelect"}]);jd(y_("pie"));Yd(z(I_,"pie"));Wd(T_("pie"));rc.extend({type:"series.scatter",dependencies:["grid","polar","geo","singleAxis","calendar"],getInitialData:function(t,e){return Xp(this.getSource(),this)},brushSelector:"point",getProgressive:function(){var t=this.option.progressive;if(t==null){return this.option.large?5e3:this.get("progressive")}return t},getProgressiveThreshold:function(){var t=this.option.progressiveThreshold;if(t==null){return this.option.large?1e4:this.get("progressiveThreshold")}return t},defaultOption:{coordinateSystem:"cartesian2d",zlevel:0,z:2,legendHoverLink:true,hoverAnimation:true,symbolSize:10,large:false,largeThreshold:2e3,itemStyle:{opacity:.8}}});var A_=4;var D_=rl({shape:{points:null},symbolProxy:null,buildPath:function(t,e){var r=e.points;var i=e.size;var a=this.symbolProxy;var n=a.shape;var o=t.getContext?t.getContext():t;var s=o&&i[0]<A_;if(s){return}for(var l=0;l<r.length;){var u=r[l++];var h=r[l++];if(isNaN(u)||isNaN(h)){continue}n.x=u-i[0]/2;n.y=h-i[1]/2;n.width=i[0];n.height=i[1];a.buildPath(t,n,true)}},afterBrush:function(t){var e=this.shape;var r=e.points;var i=e.size;var a=i[0]<A_;if(!a){return}this.setTransform(t);for(var n=0;n<r.length;){var o=r[n++];var s=r[n++];if(isNaN(o)||isNaN(s)){continue}t.fillRect(o-i[0]/2,s-i[1]/2,i[0],i[1])}this.restoreTransform(t)},findDataIndex:function(t,e){var r=this.shape;var i=r.points;var a=r.size;var n=Math.max(a[0],4);var o=Math.max(a[1],4);for(var s=i.length/2-1;s>=0;s--){var l=s*2;var u=i[l]-n/2;var h=i[l+1]-o/2;if(t>=u&&e>=h&&t<=u+n&&e<=h+o){return s}}return-1}});function C_(){this.group=new Or}var L_=C_.prototype;L_.isPersistent=function(){return!this._incremental};L_.updateData=function(t){this.group.removeAll();var e=new D_({rectHover:true,cursor:"default"});e.setShape({points:t.getLayout("symbolPoints")});this._setCommon(e,t);this.group.add(e);this._incremental=null};L_.updateLayout=function(t){if(this._incremental){return}var i=t.getLayout("symbolPoints");this.group.eachChild(function(t){if(t.startIndex!=null){var e=(t.endIndex-t.startIndex)*2;var r=t.startIndex*4*2;i=new Float32Array(i.buffer,r,e)}t.setShape("points",i)})};L_.incrementalPrepareUpdate=function(t){this.group.removeAll();this._clearIncremental();if(t.count()>2e6){if(!this._incremental){this._incremental=new qs({silent:true})}this.group.add(this._incremental)}else{this._incremental=null}};L_.incrementalUpdate=function(t,e){var r;if(this._incremental){r=new D_;this._incremental.addDisplayable(r,true)}else{r=new D_({rectHover:true,cursor:"default",startIndex:t.start,endIndex:t.end});r.incremental=true;this.group.add(r)}r.setShape({points:e.getLayout("symbolPoints")});this._setCommon(r,e,!!this._incremental)};L_._setCommon=function(r,t,e){var i=t.hostModel;var a=t.getVisual("symbolSize");r.setShape("size",a instanceof Array?a:[a,a]);r.symbolProxy=cm(t.getVisual("symbol"),0,0,0,0);r.setColor=r.symbolProxy.setColor;var n=r.shape.size[0]<A_;r.useStyle(i.getModel("itemStyle").getItemStyle(n?["color","shadowBlur","shadowColor"]:["color"]));var o=t.getVisual("color");if(o){r.setColor(o)}if(!e){r.seriesIndex=i.seriesIndex;r.on("mousemove",function(t){r.dataIndex=null;var e=r.findDataIndex(t.offsetX,t.offsetY);if(e>=0){r.dataIndex=e+(r.startIndex||0)}})}};L_.remove=function(){this._clearIncremental();this._incremental=null;this.group.removeAll()};L_._clearIncremental=function(){var t=this._incremental;if(t){t.clearDisplaybles()}};tp({type:"scatter",render:function(t,e,r){var i=t.getData();var a=this._updateSymbolDraw(i,t);a.updateData(i);this._finished=true},incrementalPrepareRender:function(t,e,r){var i=t.getData();var a=this._updateSymbolDraw(i,t);a.incrementalPrepareUpdate(i);this._finished=false},incrementalRender:function(t,e,r){this._symbolDraw.incrementalUpdate(t,e.getData());this._finished=t.end===e.getData().count()},updateTransform:function(t,e,r){var i=t.getData();this.group.dirty();if(!this._finished||i.count()>1e4||!this._symbolDraw.isPersistent()){return{update:true}}else{var a=Hy().reset(t);if(a.progress){a.progress({start:0,end:i.count()},i)}this._symbolDraw.updateLayout(i)}},_updateSymbolDraw:function(t,e){var r=this._symbolDraw;var i=e.pipelineContext;var a=i.large;if(!r||a!==this._isLargeDraw){r&&r.remove();r=this._symbolDraw=a?new C_:new sy;this._isLargeDraw=a;this.group.removeAll()}this.group.add(r.group);return r},remove:function(t,e){this._symbolDraw&&this._symbolDraw.remove(true);this._symbolDraw=null},dispose:function(){}});jd(Wy("scatter","circle"));Yd(Hy("scatter"));function k_(t,e,r){Fm.call(this,t,e,r);this.type="value";this.angle=0;this.name="";this.model}M(k_,Fm);function P_(t,e,r){this._model=t;this.dimensions=[];this._indicatorAxes=A(t.getIndicatorModels(),function(t,e){var r="indicator_"+e;var i=new k_(r,new ug);i.name=t.get("name");i.model=t;t.axis=i;this.dimensions.push(r);return i},this);this.resize(t,r);this.cx;this.cy;this.r;this.r0;this.startAngle}P_.prototype.getIndicatorAxes=function(){return this._indicatorAxes};P_.prototype.dataToPoint=function(t,e){var r=this._indicatorAxes[e];return this.coordToPoint(r.dataToCoord(t),e)};P_.prototype.coordToPoint=function(t,e){var r=this._indicatorAxes[e];var i=r.angle;var a=this.cx+t*Math.cos(i);var n=this.cy-t*Math.sin(i);return[a,n]};P_.prototype.pointToData=function(t){var e=t[0]-this.cx;var r=t[1]-this.cy;var i=Math.sqrt(e*e+r*r);e/=i;r/=i;var a=Math.atan2(-r,e);var n=Infinity;var o;var s=-1;for(var l=0;l<this._indicatorAxes.length;l++){var u=this._indicatorAxes[l];var h=Math.abs(a-u.angle);if(h<n){o=u;s=l;n=h}}return[s,+(o&&o.coodToData(i))]};P_.prototype.resize=function(t,e){var r=t.get("center");var i=e.getWidth();var a=e.getHeight();var n=Math.min(i,a)/2;this.cx=cu(r[0],i);this.cy=cu(r[1],a);this.startAngle=t.get("startAngle")*Math.PI/180;var o=t.get("radius");if(typeof o==="string"||typeof o==="number"){o=[0,o]}this.r0=cu(o[0],n);this.r=cu(o[1],n);L(this._indicatorAxes,function(t,e){t.setExtent(this.r0,this.r);var r=this.startAngle+e*Math.PI*2/this._indicatorAxes.length;r=Math.atan2(Math.sin(r),Math.cos(r));t.angle=r},this)};P_.prototype.update=function(i,t){var a=this._indicatorAxes;var n=this._model;L(a,function(t){t.scale.setExtent(Infinity,-Infinity)});i.eachSeriesByType("radar",function(t,e){if(t.get("coordinateSystem")!=="radar"||i.getComponent("radar",t.get("radarIndex"))!==n){return}var r=t.getData();L(a,function(t){t.scale.unionExtentFromData(r,r.mapDimension(t.dim))})},this);var v=n.get("splitNumber");function d(t){var e=Math.pow(10,Math.floor(Math.log(t)/Math.LN10));var r=t/e;if(r===2){r=5}else{r*=2}return r*e}L(a,function(t,e){var r=Ug(t.scale,t.model);Yg(t.scale,t.model);var i=t.model;var a=t.scale;var n=i.getMin();var o=i.getMax();var s=a.getInterval();if(n!=null&&o!=null){a.setExtent(+n,+o);a.setInterval((o-n)/v)}else if(n!=null){var l;do{l=n+s*v;a.setExtent(+n,l);a.setInterval(s);s=d(s)}while(l<r[1]&&isFinite(l)&&isFinite(r[1]))}else if(o!=null){var u;do{u=o-s*v;a.setExtent(u,+o);a.setInterval(s);s=d(s)}while(u>r[0]&&isFinite(u)&&isFinite(r[0]))}else{var h=a.getTicks().length-1;if(h>v){s=d(s)}var f=Math.round((r[0]+r[1])/2/s)*s;var c=Math.round(v/2);a.setExtent(vu(f-c*s),vu(f+(v-c)*s));a.setInterval(s)}})};P_.dimensions=[];P_.create=function(r,i){var a=[];r.eachComponent("radar",function(t){var e=new P_(t,r,i);a.push(e);t.coordinateSystem=e});r.eachSeriesByType("radar",function(t){if(t.get("coordinateSystem")==="radar"){t.coordinateSystem=a[t.get("radarIndex")||0]}});return a};ef.register("radar",P_);var N_=Jy.valueAxis;function O_(t,e){return C({show:e},t)}var E_=$d({type:"radar",optionUpdated:function(){var a=this.get("boundaryGap");var n=this.get("splitNumber");var o=this.get("scale");var s=this.get("axisLine");var l=this.get("axisTick");var u=this.get("axisLabel");var h=this.get("name");var f=this.get("name.show");var c=this.get("name.formatter");var v=this.get("nameGap");var d=this.get("triggerEvent");var t=A(this.get("indicator")||[],function(t){if(t.max!=null&&t.max>0&&!t.min){t.min=0}else if(t.min!=null&&t.min<0&&!t.max){t.max=0}var e=h;if(t.color!=null){e=C({color:t.color},h)}t=m(P(t),{boundaryGap:a,splitNumber:n,scale:o,axisLine:s,axisTick:l,axisLabel:u,name:t.text,nameLocation:"end",nameGap:v,nameTextStyle:e,triggerEvent:d},false);if(!f){t.name=""}if(typeof c==="string"){var r=t.name;t.name=c.replace("{value}",r!=null?r:"")}else if(typeof c==="function"){t.name=c(t.name,t)}var i=N(new ru(t,null,this.ecModel),rm);i.mainType="radar";i.componentIndex=this.componentIndex;return i},this);this.getIndicatorModels=function(){return t}},defaultOption:{zlevel:0,z:0,center:["50%","50%"],radius:"75%",startAngle:90,name:{show:true},boundaryGap:[0,0],splitNumber:5,nameGap:15,scale:false,shape:"polygon",axisLine:m({lineStyle:{color:"#bbb"}},N_.axisLine),axisLabel:O_(N_.axisLabel,false),axisTick:O_(N_.axisTick,false),splitLine:O_(N_.splitLine,true),splitArea:O_(N_.splitArea,true),indicator:[]}});var R_=["axisLine","axisTickLabel","axisName"];Jd({type:"radar",render:function(t,e,r){var i=this.group;i.removeAll();this._buildAxes(t);this._buildSplitLineAndArea(t)},_buildAxes:function(t){var r=t.coordinateSystem;var e=r.getIndicatorAxes();var i=A(e,function(t){var e=new px(t.model,{position:[r.cx,r.cy],rotation:t.angle,labelDirection:-1,tickDirection:-1,nameDirection:1});return e});L(i,function(t){L(R_,t.add,t);this.group.add(t.getGroup())},this)},_buildSplitLineAndArea:function(t){var i=t.coordinateSystem;var e=i.getIndicatorAxes();if(!e.length){return}var r=t.get("shape");var a=t.getModel("splitLine");var n=t.getModel("splitArea");var o=a.getModel("lineStyle");var s=n.getModel("areaStyle");var l=a.get("show");var u=n.get("show");var h=o.get("color");var f=s.get("color");h=B(h)?h:[h];f=B(f)?f:[f];var c=[];var v=[];function d(t,e,r){var i=r%e.length;t[i]=t[i]||[];return i}if(r==="circle"){var p=e[0].getTicksCoords();var g=i.cx;var m=i.cy;for(var y=0;y<p.length;y++){if(l){var x=d(c,h,y);c[x].push(new bs({shape:{cx:g,cy:m,r:p[y].coord}}))}if(u&&y<p.length-1){var x=d(v,f,y);v[x].push(new Ts({shape:{cx:g,cy:m,r0:p[y].coord,r:p[y+1].coord}}))}}}else{var _;var w=A(e,function(t,e){var r=t.getTicksCoords();_=_==null?r.length-1:Math.min(r.length-1,_);return A(r,function(t){return i.coordToPoint(t.coord,e)})});var b=[];for(var y=0;y<=_;y++){var S=[];for(var M=0;M<e.length;M++){S.push(w[M][y])}if(S[0]){S.push(S[0].slice())}else{if(D){console.error("Can't draw value axis "+y)}}if(l){var x=d(c,h,y);c[x].push(new Ps({shape:{points:S}}))}if(u&&b){var x=d(v,f,y-1);v[x].push(new ks({shape:{points:S.concat(b)}}))}b=S.slice().reverse()}}var I=o.getLineStyle();var T=s.getAreaStyle();L(v,function(t,e){this.group.add(sl(t,{style:C({stroke:"none",fill:f[e%f.length]},T),silent:true}))},this);L(c,function(t,e){this.group.add(sl(t,{style:C({fill:"none",stroke:h[e%h.length]},I),silent:true}))},this)}});var z_=rc.extend({type:"series.radar",dependencies:["radar"],init:function(t){z_.superApply(this,"init",arguments);this.legendDataProvider=function(){return this.getRawData()}},getInitialData:function(t,e){return u_(this,{generateCoord:"indicator_",generateCoordCount:Infinity})},formatTooltip:function(i){var a=this.getData();var t=this.coordinateSystem;var e=t.getIndicatorAxes();var r=this.getData().getName(i);return Ru(r===""?this.name:r)+"<br/>"+A(e,function(t,e){var r=a.get(a.mapDimension(t.dim),i);return Ru(t.name+" : "+r)}).join("<br />")},defaultOption:{zlevel:0,z:2,coordinateSystem:"radar",legendHoverLink:true,radarIndex:0,lineStyle:{width:2,type:"solid"},label:{position:"top"},symbol:"emptyCircle",symbolSize:4}});function B_(t){if(!B(t)){t=[+t,+t]}return t}tp({type:"radar",render:function(l,t,e){var r=l.coordinateSystem;var m=this.group;var y=l.getData();var s=this._data;function u(t,e){var r=t.getItemVisual(e,"symbol")||"circle";var i=t.getItemVisual(e,"color");if(r==="none"){return}var a=B_(t.getItemVisual(e,"symbolSize"));var n=cm(r,-1,-1,2,2,i);n.attr({style:{strokeNoScale:true},z2:100,scale:[a[0]/2,a[1]/2]});return n}function h(t,e,r,i,a,n){r.removeAll();for(var o=0;o<e.length-1;o++){var s=u(i,a);if(s){s.__dimIdx=o;if(t[o]){s.attr("position",t[o]);ql[n?"initProps":"updateProps"](s,{position:e[o]},l,a)}else{s.attr("position",e[o])}r.add(s)}}}function f(t){return A(t,function(t){return[r.cx,r.cy]})}y.diff(s).add(function(t){var e=y.getItemLayout(t);if(!e){return}var r=new ks;var i=new Ps;var a={shape:{points:e}};r.shape.points=f(e);i.shape.points=f(e);Fl(r,a,l,t);Fl(i,a,l,t);var n=new Or;var o=new Or;n.add(i);n.add(r);n.add(o);h(i.shape.points,e,o,y,t,true);y.setItemGraphicEl(t,n)}).update(function(t,e){var r=s.getItemGraphicEl(e);var i=r.childAt(0);var a=r.childAt(1);var n=r.childAt(2);var o={shape:{points:y.getItemLayout(t)}};if(!o.shape.points){return}h(i.shape.points,o.shape.points,n,y,t,false);Gl(i,o,l);Gl(a,o,l);y.setItemGraphicEl(t,r)}).remove(function(t){m.remove(s.getItemGraphicEl(t))}).execute();y.eachItemGraphicEl(function(t,e){var r=y.getItemModel(e);var i=t.childAt(0);var a=t.childAt(1);var n=t.childAt(2);var o=y.getItemVisual(e,"color");m.add(t);i.useStyle(C(r.getModel("lineStyle").getLineStyle(),{fill:"none",stroke:o}));i.hoverStyle=r.getModel("emphasis.lineStyle").getLineStyle();var s=r.getModel("areaStyle");var l=r.getModel("emphasis.areaStyle");var u=s.isEmpty()&&s.parentModel.isEmpty();var h=l.isEmpty()&&l.parentModel.isEmpty();h=h&&u;a.ignore=u;a.useStyle(C(s.getAreaStyle(),{fill:o,opacity:.7}));a.hoverStyle=l.getAreaStyle();var f=r.getModel("itemStyle").getItemStyle(["color"]);var c=r.getModel("emphasis.itemStyle").getItemStyle();var v=r.getModel("label");var d=r.getModel("emphasis.label");n.eachChild(function(t){t.setStyle(f);t.hoverStyle=P(c);Cl(t.style,t.hoverStyle,v,d,{labelFetcher:y.hostModel,labelDataIndex:e,labelDimIndex:t.__dimIdx,defaultText:y.get(y.dimensions[t.__dimIdx],e),autoColor:o,isRectText:true})});function p(){a.attr("ignore",h)}function g(){a.attr("ignore",u)}t.off("mouseover").off("mouseout").off("normal").off("emphasis");t.on("emphasis",p).on("mouseover",p).on("normal",g).on("mouseout",g);Al(t)});this._data=y},remove:function(){this.group.removeAll();this._data=null},dispose:function(){}});var V_=function(t){t.eachSeriesByType("radar",function(t){var e=t.getData();var r=[];var i=t.coordinateSystem;if(!i){return}function a(t,e){r[e]=r[e]||[];r[e][o]=i.dataToPoint(t,o)}var n=i.getIndicatorAxes();for(var o=0;o<n.length;o++){e.each(e.mapDimension(n[o].dim),a)}e.each(function(t){r[t][0]&&r[t].push(r[t][0].slice());e.setItemLayout(t,r[t])})})};var G_=function(r){var t=r.polar;if(t){if(!B(t)){t=[t]}var i=[];L(t,function(t,e){if(t.indicator){if(t.type&&!t.shape){t.shape=t.type}r.radar=r.radar||[];if(!B(r.radar)){r.radar=[r.radar]}r.radar.push(t)}else{i.push(t)}});r.polar=i}L(r.series,function(t){if(t&&t.type==="radar"&&t.polarIndex){t.radarIndex=t.polarIndex}})};jd(y_("radar"));jd(Wy("radar","circle"));Yd(V_);Wd(T_("radar"));Fd(G_);var F_=[126,25];var W_=[[[0,3.5],[7,11.2],[15,11.9],[30,7],[42,.7],[52,.7],[56,7.7],[59,.7],[64,.7],[64,0],[5,0],[0,3.5]],[[13,16.1],[19,14.7],[16,21.7],[11,23.1],[13,16.1]],[[12,32.2],[14,38.5],[15,38.5],[13,32.2],[12,32.2]],[[16,47.6],[12,53.2],[13,53.2],[18,47.6],[16,47.6]],[[6,64.4],[8,70],[9,70],[8,64.4],[6,64.4]],[[23,82.6],[29,79.8],[30,79.8],[25,82.6],[23,82.6]],[[37,70.7],[43,62.3],[44,62.3],[39,70.7],[37,70.7]],[[48,51.1],[51,45.5],[53,45.5],[50,51.1],[48,51.1]],[[51,35],[51,28.7],[53,28.7],[53,35],[51,35]],[[52,22.4],[55,17.5],[56,17.5],[53,22.4],[52,22.4]],[[58,12.6],[62,7],[63,7],[60,12.6],[58,12.6]],[[0,3.5],[0,93.1],[64,93.1],[64,0],[63,0],[63,92.4],[1,92.4],[1,3.5],[0,3.5]]];for(var H_=0;H_<W_.length;H_++){for(var Z_=0;Z_<W_[H_].length;Z_++){W_[H_][Z_][0]/=10.5;W_[H_][Z_][1]/=-10.5/.75;W_[H_][Z_][0]+=F_[0];W_[H_][Z_][1]+=F_[1]}}var U_=function(t,e){if(t==="china"){e.push(new wm("南海诸岛",A(W_,function(t){return{type:"polygon",exterior:t}}),F_))}};var X_={"南海诸岛":[32,80],"广东":[0,-10],"香港":[10,5],"澳门":[-10,10],"天津":[5,5]};var Y_=function(t,e){if(t==="china"){var r=X_[e.name];if(r){var i=e.center;i[0]+=r[0]/10.5;i[1]+=-r[1]/(10.5/.75)}}};var j_={Russia:[100,60],"United States":[-99,38],"United States of America":[-99,38]};var q_=function(t,e){if(t==="world"){var r=j_[e.name];if(r){var i=e.center;i[0]=r[0];i[1]=r[1]}}};var K_=[[[123.45165252685547,25.73527164402261],[123.49731445312499,25.73527164402261],[123.49731445312499,25.750734064600884],[123.45165252685547,25.750734064600884],[123.45165252685547,25.73527164402261]]];var $_=function(t,e){if(t==="china"&&e.name==="台湾"){e.geometries.push({type:"polygon",exterior:K_[0]})}};var J_=hn();var Q_={load:function(i,t){var e=J_(t).parsed;if(e){return e}var a=t.specialAreas||{};var r=t.geoJSON;var n;try{n=r?Mm(r):[]}catch(t){throw new Error("Invalid geoJson format\n"+t.message)}L(n,function(t){var e=t.name;Y_(i,t);q_(i,t);$_(i,t);var r=a[e];if(r){t.transformTo(r.left,r.top,r.width,r.height)}});U_(i,n);return J_(t).parsed={regions:n,boundingRect:tw(n)}}};function tw(t){var e;for(var r=0;r<t.length;r++){var i=t[r].getBoundingRect();e=e||i.clone();e.union(i)}return e}var ew=hn();var rw={load:function(t,e){var r=ew(e).originRoot;if(r){return{root:r,boundingRect:ew(e).boundingRect}}var i=iw(e);ew(e).originRoot=i.root;ew(e).boundingRect=i.boundingRect;return i},makeGraphic:function(t,e,r){var i=ew(e);var a=i.rootMap||(i.rootMap=it());var n=a.get(r);if(n){return n}var o=i.originRoot;var s=i.boundingRect;if(!i.originRootHostKey){i.originRootHostKey=r;n=o}else{n=iw(e,s).root}return a.set(r,n)},removeGraphic:function(t,e,r){var i=ew(e);var a=i.rootMap;a&&a.removeKey(r);if(r===i.originRootHostKey){i.originRootHostKey=null}}};function iw(t,e){var r=t.svgXML;var i;var a;try{i=r&&Iv(r,{ignoreViewBox:true,ignoreRootClip:true})||{};a=i.root;$(a!=null)}catch(t){throw new Error("Invalid svg format\n"+t.message)}var n=i.width;var o=i.height;var s=i.viewBoxRect;if(!e){e=n==null||o==null?a.getBoundingRect():new Nr(0,0,0,0);if(n!=null){e.width=n}if(o!=null){e.height=o}}if(s){var l=Mv(s,e.width,e.height);var u=a;a=new Or;a.add(u);u.scale=l.scale;u.position=l.position}a.setClipPath(new Bs({shape:e.plain()}));return{root:a,boundingRect:e}}var aw={geoJSON:Q_,svg:rw};var nw={load:function(i,a){var n=[];var o=it();var s=it();var l;var t=lw(i);L(t,function(t){var e=aw[t.type].load(i,t);L(e.regions,function(t){var e=t.name;if(a&&a.hasOwnProperty(e)){t=t.cloneShallow(e=a[e])}n.push(t);o.set(e,t);s.set(e,t.center)});var r=e.boundingRect;if(r){l?l.union(r):l=r.clone()}});return{regions:n,regionsMap:o,nameCoordMap:s,boundingRect:l||new Nr(0,0,0,0)}},makeGraphic:ow("makeGraphic"),removeGraphic:ow("removeGraphic")};function ow(n){return function(r,i){var t=lw(r);var a=[];L(t,function(t){var e=aw[t.type][n];e&&a.push(e(r,t,i))});return a}}function sw(t){if(D){console.error("Map "+t+" not exists. You can download map file on http://echarts.baidu.com/download-map.html")}}function lw(t){var e=Av.retrieveMap(t)||[];if(D){if(!e.length){sw(t)}}return e}var uw=rc.extend({type:"series.map",dependencies:["geo"],layoutMode:"box",needsDrawMap:false,seriesGroup:[],getInitialData:function(t){var e=u_(this,["value"]);var r=e.mapDimension("value");var i=it();var a=[];var n=[];for(var o=0,s=e.count();o<s;o++){var l=e.getName(o);i.set(l,true);a.push({name:l,value:e.get(r,o),selected:Xf(e,o,"selected")})}var u=nw.load(this.getMapType(),this.option.nameMap);L(u.regions,function(t){var e=t.name;if(!i.get(e)){a.push({name:e});n.push(e)}});this.updateSelectedMap(a);e.appendValues([],n);return e},getHostGeoModel:function(){var t=this.option.geoIndex;return t!=null?this.dependentModels.geo[t]:null},getMapType:function(){return(this.getHostGeoModel()||this).option.map},getRawValue:function(t){var e=this.getData();return e.get(e.mapDimension("value"),t)},getRegionModel:function(t){var e=this.getData();return e.getItemModel(e.indexOfName(t))},formatTooltip:function(t){var e=this.getData();var r=ku(this.getRawValue(t));var i=e.getName(t);var a=this.seriesGroup;var n=[];for(var o=0;o<a.length;o++){var s=a[o].originalData.indexOfName(i);var l=e.mapDimension("value");if(!isNaN(a[o].originalData.get(l,s))){n.push(Ru(a[o].name))}}return n.join(", ")+"<br />"+Ru(i+" : "+r)},getTooltipPosition:function(t){if(t!=null){var e=this.getData().getName(t);var r=this.coordinateSystem;var i=r.getRegion(e);return i&&r.dataToPoint(i.center)}},setZoom:function(t){this.option.zoom=t},setCenter:function(t){this.option.center=t},defaultOption:{zlevel:0,z:2,coordinateSystem:"geo",map:"",left:"center",top:"center",aspectScale:.75,showLegendSymbol:true,dataRangeHoverLink:true,boundingCoords:null,center:null,zoom:1,scaleLimit:null,label:{show:false,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444",areaColor:"#eee"},emphasis:{label:{show:true,color:"rgb(100,0,0)"},itemStyle:{areaColor:"rgba(255,215,0,0.8)"}}}});I(uw,h_);var hw="\0_ec_interaction_mutex";function fw(t,e,r){var i=dw(t);i[e]=r}function cw(t,e,r){var i=dw(t);var a=i[e];if(a===r){i[e]=null}}function vw(t,e){return!!dw(t)[e]}function dw(t){return t[hw]||(t[hw]={})}Zd({type:"takeGlobalCursor",event:"globalCursorTaken",update:"update"},function(){});function pw(r){this.pointerChecker;this._zr=r;this._opt={};var t=R;var i=t(gw,this);var a=t(mw,this);var n=t(yw,this);var o=t(xw,this);var s=t(_w,this);zt.call(this);this.setPointerChecker=function(t){this.pointerChecker=t};this.enable=function(t,e){this.disable();this._opt=C(P(e)||{},{zoomOnMouseWheel:true,moveOnMouseMove:true,moveOnMouseWheel:false,preventDefaultMouseMove:true});if(t==null){t=true}if(t===true||(t==="move"||t==="pan")){r.on("mousedown",i);r.on("mousemove",a);r.on("mouseup",n)}if(t===true||(t==="scale"||t==="zoom")){r.on("mousewheel",o);r.on("pinch",s)}};this.disable=function(){r.off("mousedown",i);r.off("mousemove",a);r.off("mouseup",n);r.off("mousewheel",o);r.off("pinch",s)};this.dispose=this.disable;this.isDragging=function(){return this._dragging};this.isPinching=function(){return this._pinching}}I(pw,zt);function gw(t){if(qt(t)||t.target&&t.target.draggable){return}var e=t.offsetX;var r=t.offsetY;if(this.pointerChecker&&this.pointerChecker(t,e,r)){this._x=e;this._y=r;this._dragging=true}}function mw(t){if(!this._dragging||!Sw("moveOnMouseMove",t,this._opt)||t.gestureEvent==="pinch"||vw(this._zr,"globalPan")){return}var e=t.offsetX;var r=t.offsetY;var i=this._x;var a=this._y;var n=e-i;var o=r-a;this._x=e;this._y=r;this._opt.preventDefaultMouseMove&&jt(t.event);bw(this,"pan","moveOnMouseMove",t,{dx:n,dy:o,oldX:i,oldY:a,newX:e,newY:r})}function yw(t){if(!qt(t)){this._dragging=false}}function xw(t){var e=Sw("zoomOnMouseWheel",t,this._opt);var r=Sw("moveOnMouseWheel",t,this._opt);var i=t.wheelDelta;var a=Math.abs(i);var n=t.offsetX;var o=t.offsetY;if(i===0||!e&&!r){return}if(e){var s=a>3?1.4:a>1?1.2:1.1;var l=i>0?s:1/s;ww(this,"zoom","zoomOnMouseWheel",t,{scale:l,originX:n,originY:o})}if(r){var u=Math.abs(i);var h=(i>0?1:-1)*(u>3?.4:u>1?.15:.05);ww(this,"scrollMove","moveOnMouseWheel",t,{scrollDelta:h,originX:n,originY:o})}}function _w(t){if(vw(this._zr,"globalPan")){return}var e=t.pinchScale>1?1.1:1/1.1;ww(this,"zoom",null,t,{scale:e,originX:t.pinchX,originY:t.pinchY})}function ww(t,e,r,i,a){if(t.pointerChecker&&t.pointerChecker(i,a.originX,a.originY)){jt(i.event);bw(t,e,r,i,a)}}function bw(t,e,r,i,a){a.isAvailableBehavior=R(Sw,null,r,i);t.trigger(e,a)}function Sw(t,e,r){var i=r[t];return!t||i&&(!G(i)||e.event[i+"Key"])}function Mw(t,e,r){var i=t.target;var a=i.position;a[0]+=e;a[1]+=r;i.dirty()}function Iw(t,e,r,i){var a=t.target;var n=t.zoomLimit;var o=a.position;var s=a.scale;var l=t.zoom=t.zoom||1;l*=e;if(n){var u=n.min||0;var h=n.max||Infinity;l=Math.max(Math.min(h,l),u)}var f=l/t.zoom;t.zoom=l;o[0]-=(r-o[0])*(f-1);o[1]-=(i-o[1])*(f-1);s[0]*=f;s[1]*=f;a.dirty()}var Tw={axisPointer:1,tooltip:1,brush:1};function Aw(t,e,r){var i=e.getComponentByElement(t.topTarget);var a=i&&i.coordinateSystem;return i&&i!==r&&!Tw[i.mainType]&&(a&&a.model!==r)}function Dw(t,e){var r=t.getItemStyle();var i=t.get("areaColor");if(i!=null){r.fill=i}return r}function Cw(i,a,n,o,s){n.off("click");n.off("mousedown");if(a.get("selectedMode")){n.on("mousedown",function(){i._mouseDownFlag=true});n.on("click",function(t){if(!i._mouseDownFlag){return}i._mouseDownFlag=false;var e=t.target;while(!e.__regions){e=e.parent}if(!e){return}var r={type:(a.mainType==="geo"?"geo":"map")+"ToggleSelect",batch:A(e.__regions,function(t){return{name:t.name,from:s.uid}})};r[a.mainType+"Id"]=a.id;o.dispatchAction(r);Lw(a,n)})}}function Lw(r,t){t.eachChild(function(e){L(e.__regions,function(t){e.trigger(r.isSelected(t.name)?"emphasis":"normal")})})}function kw(t,e){var r=new Or;this.uid=ou("ec_map_draw");this._controller=new pw(t.getZr());this._controllerHost={target:e?r:null};this.group=r;this._updateGroup=e;this._mouseDownFlag;this._mapName;this._initialized;r.add(this._regionsGroup=new Or);r.add(this._backgroundGroup=new Or)}kw.prototype={constructor:kw,draw:function(_,t,e,r,i){var w=_.mainType==="geo";var b=_.getData&&_.getData();w&&t.eachComponent({mainType:"series",subType:"map"},function(t){if(!b&&t.getHostGeoModel()===_){b=t.getData()}});var a=_.coordinateSystem;this._updateBackground(a);var S=this._regionsGroup;var n=this.group;var M=a.scale;var o={position:a.position,scale:M};if(!S.childAt(0)||i){n.attr(o)}else{Gl(n,o,_)}S.removeAll();var I=["itemStyle"];var T=["emphasis","itemStyle"];var A=["label"];var D=["emphasis","label"];var C=it();L(a.regions,function(t){var e=C.get(t.name)||C.set(t.name,new Or);var r=new Us({shape:{paths:[]}});e.add(r);var i=_.getRegionModel(t.name)||_;var a=i.getModel(I);var n=i.getModel(T);var o=Dw(a,M);var s=Dw(n,M);var l=i.getModel(A);var u=i.getModel(D);var h;if(b){h=b.indexOfName(t.name);var f=b.getItemVisual(h,"color",true);if(f){o.fill=f}}L(t.geometries,function(t){if(t.type!=="polygon"){return}r.shape.paths.push(new ks({shape:{points:t.exterior}}));for(var e=0;e<(t.interiors?t.interiors.length:0);e++){r.shape.paths.push(new ks({shape:{points:t.interiors[e]}}))}});r.setStyle(o);r.style.strokeNoScale=true;r.culling=true;var c=l.get("show");var v=u.get("show");var d=b&&isNaN(b.get(b.mapDimension("value"),h));var p=b&&b.getItemLayout(h);if(w||d&&(c||v)||p&&p.showLabel){var g=!w?h:t.name;var m;if(!b||h>=0){m=_}var y=new ws({position:t.center.slice(),scale:[1/M[0],1/M[1]],z2:10,silent:true});Cl(y.style,y.hoverStyle={},l,u,{labelFetcher:m,labelDataIndex:g,defaultText:t.name,useInsideStyle:false},{textAlign:"center",textVerticalAlign:"middle"});e.add(y)}if(b){b.setItemGraphicEl(h,e)}else{var i=_.getRegionModel(t.name);r.eventData={componentType:"geo",componentIndex:_.componentIndex,geoIndex:_.componentIndex,name:t.name,region:i&&i.option||{}}}var x=e.__regions||(e.__regions=[]);x.push(t);Al(e,s,{hoverSilentOnTouch:!!_.get("selectedMode")});S.add(e)});this._updateController(_,t,e);Cw(this,_,S,e,r);Lw(_,S)},remove:function(){this._regionsGroup.removeAll();this._backgroundGroup.removeAll();this._controller.dispose();this._mapName&&nw.removeGraphic(this._mapName,this.uid);this._mapName=null;this._controllerHost={}},_updateBackground:function(t){var e=t.map;if(this._mapName!==e){L(nw.makeGraphic(e,this.uid),function(t){this._backgroundGroup.add(t)},this)}this._mapName=e},_updateController:function(i,t,a){var n=i.coordinateSystem;var e=this._controller;var r=this._controllerHost;r.zoomLimit=i.get("scaleLimit");r.zoom=n.getZoom();e.enable(i.get("roam")||false);var o=i.mainType;function s(){var t={type:"geoRoam",componentType:o};t[o+"Id"]=i.id;return t}e.off("pan").on("pan",function(t){this._mouseDownFlag=false;Mw(r,t.dx,t.dy);a.dispatchAction(N(s(),{dx:t.dx,dy:t.dy}))},this);e.off("zoom").on("zoom",function(t){this._mouseDownFlag=false;Iw(r,t.scale,t.originX,t.originY);a.dispatchAction(N(s(),{zoom:t.scale,originX:t.originX,originY:t.originY}));if(this._updateGroup){var e=this.group.scale;this._regionsGroup.traverse(function(t){if(t.type==="text"){t.attr("scale",[1/e[0],1/e[1]])}})}},this);e.setPointerChecker(function(t,e,r){return n.getViewRectAfterRoam().contain(e,r)&&!Aw(t,a,i)})}};var Pw="__seriesMapHighDown";var Nw="__seriesMapCallKey";tp({type:"map",render:function(t,e,r,i){if(i&&i.type==="mapToggleSelect"&&i.from===this.uid){return}var a=this.group;a.removeAll();if(t.getHostGeoModel()){return}if(!(i&&i.type==="geoRoam"&&i.componentType==="series"&&i.seriesId===t.id)){if(t.needsDrawMap){var n=this._mapDraw||new kw(r,true);a.add(n.group);n.draw(t,e,r,this,i);this._mapDraw=n}else{this._mapDraw&&this._mapDraw.remove();this._mapDraw=null}}else{var n=this._mapDraw;n&&a.add(n.group)}t.get("showLegendSymbol")&&e.getComponent("legend")&&this._renderSymbols(t,e,r)},remove:function(){this._mapDraw&&this._mapDraw.remove();this._mapDraw=null;this.group.removeAll()},dispose:function(){this._mapDraw&&this._mapDraw.remove();this._mapDraw=null},_renderSymbols:function(x,t,e){var _=x.originalData;var w=this.group;_.each(_.mapDimension("value"),function(t,e){if(isNaN(t)){return}var r=_.getItemLayout(e);if(!r||!r.point){return}var i=r.point;var a=r.offset;var n=new bs({style:{fill:x.getData().getVisual("color")},shape:{cx:i[0]+a*9,cy:i[1],r:3},silent:true,z2:8+(!a?el+1:0)});if(!a){var o=x.mainSeries.getData();var s=_.getName(e);var l=o.indexOfName(s);var u=_.getItemModel(e);var h=u.getModel("label");var f=u.getModel("emphasis.label");var c=o.getItemGraphicEl(l);var v=Y(x.getFormattedLabel(l,"normal"),s);var d=Y(x.getFormattedLabel(l,"emphasis"),v);var p=c[Pw];var g=Math.random();if(!p){p=c[Pw]={};var m=z(Ow,true);var y=z(Ow,false);c.on("mouseover",m).on("mouseout",y).on("emphasis",m).on("normal",y)}c[Nw]=g;N(p,{recordVersion:g,circle:n,labelModel:h,hoverLabelModel:f,emphasisText:d,normalText:v});Ew(p,false)}w.add(n)})}});function Ow(t){var e=this[Pw];if(e&&e.recordVersion===this[Nw]){Ew(e,t)}}function Ew(t,e){var r=t.circle;var i=t.labelModel;var a=t.hoverLabelModel;var n=t.emphasisText;var o=t.normalText;if(e){r.style.extendFrom(Ll({},a,{text:a.get("show")?n:null},{isRectText:true,useInsideStyle:false},true));r.__mapOriginalZ2=r.z2;r.z2+=el}else{Ll(r.style,i,{text:i.get("show")?o:null,textPosition:i.getShallow("position")||"bottom"},{isRectText:true,useInsideStyle:false});r.dirty(false);if(r.__mapOriginalZ2!=null){r.z2=r.__mapOriginalZ2;r.__mapOriginalZ2=null}}}function Rw(t,e,r){var i=t.getZoom();var a=t.getCenter();var n=e.zoom;var o=t.dataToPoint(a);if(e.dx!=null&&e.dy!=null){o[0]-=e.dx;o[1]-=e.dy;var a=t.pointToData(o);t.setCenter(a)}if(n!=null){if(r){var s=r.min||0;var l=r.max||Infinity;n=Math.max(Math.min(i*n,l),s)/i}t.scale[0]*=n;t.scale[1]*=n;var u=t.position;var h=(e.originX-u[0])*(n-1);var f=(e.originY-u[1])*(n-1);u[0]-=h;u[1]-=f;t.updateTransform();var a=t.pointToData(o);t.setCenter(a);t.setZoom(n*i)}return{center:t.getCenter(),zoom:t.getZoom()}}Zd({type:"geoRoam",event:"geoRoam",update:"updateTransform"},function(i,t){var a=i.componentType||"series";t.eachComponent({mainType:a,query:i},function(t){var e=t.coordinateSystem;if(e.type!=="geo"){return}var r=Rw(e,i,t.get("scaleLimit"));t.setCenter&&t.setCenter(r.center);t.setZoom&&t.setZoom(r.zoom);if(a==="series"){L(t.seriesGroup,function(t){t.setCenter(r.center);t.setZoom(r.zoom)})}})});var zw=Lt;function Bw(){we.call(this)}I(Bw,we);function Vw(t){this.name=t;this.zoomLimit;we.call(this);this._roamTransformable=new Bw;this._rawTransformable=new Bw;this._center;this._zoom}Vw.prototype={constructor:Vw,type:"view",dimensions:["x","y"],setBoundingRect:function(t,e,r,i){this._rect=new Nr(t,e,r,i);return this._rect},getBoundingRect:function(){return this._rect},setViewRect:function(t,e,r,i){this.transformTo(t,e,r,i);this._viewRect=new Nr(t,e,r,i)},transformTo:function(t,e,r,i){var a=this.getBoundingRect();var n=this._rawTransformable;n.transform=a.calculateTransform(new Nr(t,e,r,i));n.decomposeTransform();this._updateTransform()},setCenter:function(t){if(!t){return}this._center=t;this._updateCenterAndZoom()},setZoom:function(t){t=t||1;var e=this.zoomLimit;if(e){if(e.max!=null){t=Math.min(e.max,t)}if(e.min!=null){t=Math.max(e.min,t)}}this._zoom=t;this._updateCenterAndZoom()},getDefaultCenter:function(){var t=this.getBoundingRect();var e=t.x+t.width/2;var r=t.y+t.height/2;return[e,r]},getCenter:function(){return this._center||this.getDefaultCenter()},getZoom:function(){return this._zoom||1},getRoamTransform:function(){return this._roamTransformable.getLocalTransform()},_updateCenterAndZoom:function(){var t=this._rawTransformable.getLocalTransform();var e=this._roamTransformable;var r=this.getDefaultCenter();var i=this.getCenter();var a=this.getZoom();i=Lt([],i,t);r=Lt([],r,t);e.origin=i;e.position=[r[0]-i[0],r[1]-i[1]];e.scale=[a,a];this._updateTransform()},_updateTransform:function(){var t=this._roamTransformable;var e=this._rawTransformable;e.parent=t;t.updateTransform();e.updateTransform();he(this.transform||(this.transform=[]),e.transform||le());this._rawTransform=e.getLocalTransform();this.invTransform=this.invTransform||[];pe(this.invTransform,this.transform);this.decomposeTransform()},getViewRect:function(){return this._viewRect},getViewRectAfterRoam:function(){var t=this.getBoundingRect().clone();t.applyTransform(this.transform);return t},dataToPoint:function(t,e,r){var i=e?this._rawTransform:this.transform;r=r||[];return i?zw(r,t,i):ut(r,t)},pointToData:function(t){var e=this.invTransform;return e?zw([],t,e):[t[0],t[1]]},convertToPixel:z(Gw,"dataToPoint"),convertFromPixel:z(Gw,"pointToData"),containPoint:function(t){return this.getViewRectAfterRoam().contain(t[0],t[1])}};I(Vw,we);function Gw(t,e,r,i){var a=r.seriesModel;var n=a?a.coordinateSystem:null;return n===this?n[t](i):null}function Fw(t,e,r,i){Vw.call(this,t);this.map=e;var a=nw.load(e,r);this._nameCoordMap=a.nameCoordMap;this._regionsMap=a.regionsMap;this._invertLongitute=i==null?true:i;this.regions=a.regions;this._rect=a.boundingRect}Fw.prototype={constructor:Fw,type:"geo",dimensions:["lng","lat"],containCoord:function(t){var e=this.regions;for(var r=0;r<e.length;r++){if(e[r].contain(t)){return true}}return false},transformTo:function(t,e,r,i){var a=this.getBoundingRect();var n=this._invertLongitute;a=a.clone();if(n){a.y=-a.y-a.height}var o=this._rawTransformable;o.transform=a.calculateTransform(new Nr(t,e,r,i));o.decomposeTransform();if(n){var s=o.scale;s[1]=-s[1]}o.updateTransform();this._updateTransform()},getRegion:function(t){return this._regionsMap.get(t)},getRegionByCoord:function(t){var e=this.regions;for(var r=0;r<e.length;r++){if(e[r].contain(t)){return e[r]}}},addGeoCoord:function(t,e){this._nameCoordMap.set(t,e)},getGeoCoord:function(t){return this._nameCoordMap.get(t)},getBoundingRect:function(){return this._rect},dataToPoint:function(t,e,r){if(typeof t==="string"){t=this.getGeoCoord(t)}if(t){return Vw.prototype.dataToPoint.call(this,t,e,r)}},convertToPixel:z(Ww,"dataToPoint"),convertFromPixel:z(Ww,"pointToData")};I(Fw,Vw);function Ww(t,e,r,i){var a=r.geoModel;var n=r.seriesModel;var o=a?a.coordinateSystem:n?n.coordinateSystem||(n.getReferringComponents("geo")[0]||{}).coordinateSystem:null;return o===this?o[t](i):null}function Hw(t,e){var r=t.get("boundingCoords");if(r!=null){var i=r[0];var a=r[1];if(isNaN(i[0])||isNaN(i[1])||isNaN(a[0])||isNaN(a[1])){if(D){console.error("Invalid boundingCoords")}}else{this.setBoundingRect(i[0],i[1],a[0]-i[0],a[1]-i[1])}}var n=this.getBoundingRect();var o;var s=t.get("layoutCenter");var l=t.get("layoutSize");var u=e.getWidth();var h=e.getHeight();var f=n.width/n.height*this.aspectScale;var c=false;if(s&&l){s=[cu(s[0],u),cu(s[1],h)];l=cu(l,Math.min(u,h));if(!isNaN(s[0])&&!isNaN(s[1])&&!isNaN(l)){c=true}else{if(D){console.warn("Given layoutCenter or layoutSize data are invalid. Use left/top/width/height instead.")}}}var v;if(c){var v={};if(f>1){v.width=l;v.height=l/f}else{v.height=l;v.width=l*f}v.y=s[1]-v.height/2;v.x=s[0]-v.width/2}else{o=t.getBoxLayoutParams();o.aspect=f;v=rh(o,{width:u,height:h})}this.setViewRect(v.x,v.y,v.width,v.height);this.setCenter(t.get("center"));this.setZoom(t.get("zoom"))}function Zw(r,t){L(t.get("geoCoord"),function(t,e){r.addGeoCoord(e,t)})}var Uw={dimensions:Fw.prototype.dimensions,create:function(t,s){var l=[];t.eachComponent("geo",function(t,e){var r=t.get("map");var i=t.get("aspectScale");var a=true;var n=Av.retrieveMap(r);if(n&&n[0]&&n[0].type==="svg"){i==null&&(i=1);a=false}else{i==null&&(i=.75)}var o=new Fw(r+e,r,t.get("nameMap"),a);o.aspectScale=i;o.zoomLimit=t.get("scaleLimit");l.push(o);Zw(o,t);t.coordinateSystem=o;o.model=t;o.resize=Hw;o.resize(t,s)});t.eachSeries(function(t){var e=t.get("coordinateSystem");if(e==="geo"){var r=t.get("geoIndex")||0;t.coordinateSystem=l[r]}});var r={};t.eachSeriesByType("map",function(t){if(!t.getHostGeoModel()){var e=t.getMapType();r[e]=r[e]||[];r[e].push(t)}});L(r,function(t,e){var r=A(t,function(t){return t.get("nameMap")});var i=new Fw(e,e,x(r));i.zoomLimit=X.apply(null,A(t,function(t){return t.get("scaleLimit")}));l.push(i);i.resize=Hw;i.aspectScale=t[0].get("aspectScale");i.resize(t[0],s);L(t,function(t){t.coordinateSystem=i;Zw(i,t)})});return l},getFilledRegions:function(t,e,r){var i=(t||[]).slice();var a=it();for(var n=0;n<i.length;n++){a.set(i[n].name,i[n])}var o=nw.load(e,r);L(o.regions,function(t){var e=t.name;!a.get(e)&&i.push({name:e})});return i}};Ud("geo",Uw);var Xw=function(r){var a={};r.eachSeriesByType("map",function(t){var e=t.getMapType();if(t.getHostGeoModel()||a[e]){return}var l={};L(t.seriesGroup,function(t){var o=t.coordinateSystem;var s=t.originalData;if(t.get("showLegendSymbol")&&r.getComponent("legend")){s.each(s.mapDimension("value"),function(t,e){var r=s.getName(e);var i=o.getRegion(r);if(!i||isNaN(t)){return}var a=l[r]||0;var n=o.dataToPoint(i.center);l[r]=a+1;s.setItemLayout(e,{point:n,offset:a})})}});var i=t.getData();i.each(function(t){var e=i.getName(t);var r=i.getItemLayout(t)||{};r.showLabel=!l[e];i.setItemLayout(t,r)});a[e]=true})};var Yw=function(t){t.eachSeriesByType("map",function(t){var e=t.get("color");var r=t.getModel("itemStyle");var i=r.get("areaColor");var a=r.get("color")||e[t.seriesIndex%e.length];t.getData().setVisual({areaColor:i,color:a})})};function jw(u,h){var f={};L(u,function(i){i.each(i.mapDimension("value"),function(t,e){var r="ec-"+i.getName(e);f[r]=f[r]||[];if(!isNaN(t)){f[r].push(t)}})});return u[0].map(u[0].mapDimension("value"),function(t,e){var r="ec-"+u[0].getName(e);var i=0;var a=Infinity;var n=-Infinity;var o=f[r].length;for(var s=0;s<o;s++){a=Math.min(a,f[r][s]);n=Math.max(n,f[r][s]);i+=f[r][s]}var l;if(h==="min"){l=a}else if(h==="max"){l=n}else if(h==="average"){l=i/o}else{l=i}return o===0?NaN:l})}var qw=function(t){var i={};t.eachSeriesByType("map",function(t){var e=t.getHostGeoModel();var r=e?"o"+e.id:"i"+t.getMapType();(i[r]=i[r]||[]).push(t)});L(i,function(t,e){var r=jw(A(t,function(t){return t.getData()}),t[0].get("mapValueCalculation"));for(var i=0;i<t.length;i++){t[i].originalData=t[i].getData()}for(var i=0;i<t.length;i++){t[i].seriesGroup=t;t[i].needsDrawMap=i===0&&!t[i].getHostGeoModel();t[i].setData(r.cloneShallow());t[i].mainSeries=t[0]}})};var Kw=function(t){var e=[];L(t.series,function(t){if(t&&t.type==="map"){e.push(t);t.map=t.map||t.mapType;C(t,t.mapLocation)}})};Yd(Xw);jd(Yw);Wd(Zv.PROCESSOR.STATISTIC,qw);Fd(Kw);m_("map",[{type:"mapToggleSelect",event:"mapselectchanged",method:"toggleSelected"},{type:"mapSelect",event:"mapselected",method:"select"},{type:"mapUnSelect",event:"mapunselected",method:"unSelect"}]);var $w=L;var Jw="\0__link_datas";var Qw="\0__link_mainData";function tb(r){var i=r.mainData;var t=r.datas;if(!t){t={main:i};r.datasAttr={main:"data"}}r.datas=r.mainData=null;ob(i,t,r);$w(t,function(e){$w(i.TRANSFERABLE_METHODS,function(t){e.wrapMethod(t,z(eb,r))})});i.wrapMethod("cloneShallow",z(ib,r));$w(i.CHANGABLE_METHODS,function(t){i.wrapMethod(t,z(rb,r))});$(t[i.dataType]===i)}function eb(t,e){if(nb(this)){var r=N({},this[Jw]);r[this.dataType]=e;ob(e,r,t)}else{sb(e,this.dataType,this[Qw],t)}return e}function rb(t,e){t.struct&&t.struct.update(this);return e}function ib(r,i){$w(i[Jw],function(t,e){t!==i&&sb(t.cloneShallow(),e,i,r)});return i}function ab(t){var e=this[Qw];return t==null||e==null?e:e[Jw][t]}function nb(t){return t[Qw]===t}function ob(r,t,i){r[Jw]={};$w(t,function(t,e){sb(t,e,r,i)})}function sb(t,e,r,i){r[Jw][e]=t;t[Qw]=r;t.dataType=e;if(i.struct){t[i.structAttr]=i.struct;i.struct[i.datasAttr[e]]=t}t.getLinkedData=ab}var lb=function(t,e){this.name=t||"";this.depth=0;this.height=0;this.parentNode=null;this.dataIndex=-1;this.children=[];this.viewChildren=[];this.hostTree=e};lb.prototype={constructor:lb,isRemoved:function(){return this.dataIndex<0},eachNode:function(t,e,r){if(typeof t==="function"){r=e;e=t;t=null}t=t||{};if(G(t)){t={order:t}}var i=t.order||"preorder";var a=this[t.attr||"children"];var n;i==="preorder"&&(n=e.call(r,this));for(var o=0;!n&&o<a.length;o++){a[o].eachNode(t,e,r)}i==="postorder"&&e.call(r,this)},updateDepthAndHeight:function(t){var e=0;this.depth=t;for(var r=0;r<this.children.length;r++){var i=this.children[r];i.updateDepthAndHeight(t+1);if(i.height>e){e=i.height}}this.height=e+1},getNodeById:function(t){if(this.getId()===t){return this}for(var e=0,r=this.children,i=r.length;e<i;e++){var a=r[e].getNodeById(t);if(a){return a}}},contains:function(t){if(t===this){return true}for(var e=0,r=this.children,i=r.length;e<i;e++){var a=r[e].contains(t);if(a){return a}}},getAncestors:function(t){var e=[];var r=t?this:this.parentNode;while(r){e.push(r);r=r.parentNode}e.reverse();return e},getValue:function(t){var e=this.hostTree.data;return e.get(e.getDimension(t||"value"),this.dataIndex)},setLayout:function(t,e){this.dataIndex>=0&&this.hostTree.data.setItemLayout(this.dataIndex,t,e)},getLayout:function(){return this.hostTree.data.getItemLayout(this.dataIndex)},getModel:function(t){if(this.dataIndex<0){return}var e=this.hostTree;var r=e.data.getItemModel(this.dataIndex);var i=this.getLevelModel();var a;if(!i&&(this.children.length===0||this.children.length!==0&&this.isExpand===false)){a=this.getLeavesModel()}return r.getModel(t,(i||a||e.hostModel).getModel(t))},getLevelModel:function(){return(this.hostTree.levelModels||[])[this.depth]},getLeavesModel:function(){return this.hostTree.leavesModel},setVisual:function(t,e){this.dataIndex>=0&&this.hostTree.data.setItemVisual(this.dataIndex,t,e)},getVisual:function(t,e){return this.hostTree.data.getItemVisual(this.dataIndex,t,e)},getRawIndex:function(){return this.hostTree.data.getRawIndex(this.dataIndex)},getId:function(){return this.hostTree.data.getId(this.dataIndex)},isAncestorOf:function(t){var e=t.parentNode;while(e){if(e===this){return true}e=e.parentNode}return false},isDescendantOf:function(t){return t!==this&&t.isAncestorOf(this)}};function ub(e,t,r){this.root;this.data;this._nodes=[];this.hostModel=e;this.levelModels=A(t||[],function(t){return new ru(t,e,e.ecModel)});this.leavesModel=new ru(r||{},e,e.ecModel)}ub.prototype={constructor:ub,type:"tree",eachNode:function(t,e,r){this.root.eachNode(t,e,r)},getNodeByDataIndex:function(t){var e=this.data.getRawIndex(t);return this._nodes[e]},getNodeByName:function(t){return this.root.getNodeByName(t)},update:function(){var t=this.data;var e=this._nodes;for(var r=0,i=e.length;r<i;r++){e[r].dataIndex=-1}for(var r=0,i=t.count();r<i;r++){e[t.getRawIndex(r)].dataIndex=r}},clearLayouts:function(){this.data.clearItemLayouts()}};ub.createTree=function(t,e,r){var o=new ub(e,r.levels,r.leaves);var s=[];var l=1;u(t);function u(t,e){var r=t.value;l=Math.max(l,B(r)?r.length:1);s.push(t);var i=new lb(t.name,o);e?hb(i,e):o.root=i;o._nodes.push(i);var a=t.children;if(a){for(var n=0;n<a.length;n++){u(a[n],i)}}}o.root.updateDepthAndHeight(0);var i=Wp(s,{coordDimensions:["value"],dimensionsCount:l});var a=new Ip(i,e);a.initData(s);tb({mainData:a,struct:o,structAttr:"tree"});o.update();return o};function hb(t,e){var r=e.children;if(t.parentNode===e){return}r.push(t);t.parentNode=e}rc.extend({type:"series.tree",layoutInfo:null,layoutMode:"box",getInitialData:function(t){var e={name:t.name,children:t.data};var r=t.leaves||{};var i={};i.leaves=r;var a=ub.createTree(e,this,i);var n=0;a.eachNode("preorder",function(t){if(t.depth>n){n=t.depth}});var o=t.expandAndCollapse;var s=o&&t.initialTreeDepth>=0?t.initialTreeDepth:n;a.root.eachNode("preorder",function(t){var e=t.hostTree.data.getRawDataItem(t.dataIndex);t.isExpand=e&&e.collapsed!=null?!e.collapsed:t.depth<=s});return a.data},getOrient:function(){var t=this.get("orient");if(t==="horizontal"){t="LR"}else if(t==="vertical"){t="TB"}return t},setZoom:function(t){this.option.zoom=t},setCenter:function(t){this.option.center=t},formatTooltip:function(t){var e=this.getData().tree;var r=e.root.children[0];var i=e.getNodeByDataIndex(t);var a=i.getValue();var n=i.name;while(i&&i!==r){n=i.parentNode.name+"."+n;i=i.parentNode}return Ru(n+(isNaN(a)||a==null?"":" : "+a))},defaultOption:{zlevel:0,z:2,coordinateSystem:"view",left:"12%",top:"12%",right:"12%",bottom:"12%",layout:"orthogonal",roam:false,nodeScaleRatio:.4,center:null,zoom:1,orient:"LR",symbol:"emptyCircle",symbolSize:7,expandAndCollapse:true,initialTreeDepth:2,lineStyle:{color:"#ccc",width:1.5,curveness:.5},itemStyle:{color:"lightsteelblue",borderColor:"#c23531",borderWidth:1.5},label:{show:true,color:"#555"},leaves:{label:{show:true}},animationEasing:"linear",animationDuration:700,animationDurationUpdate:1e3}});function fb(t){t.hierNode={defaultAncestor:null,ancestor:t,prelim:0,modifier:0,change:0,shift:0,i:0,thread:null};var e=[t];var r;var i;while(r=e.pop()){i=r.children;if(r.isExpand&&i.length){var a=i.length;for(var n=a-1;n>=0;n--){var o=i[n];o.hierNode={defaultAncestor:null,ancestor:o,prelim:0,modifier:0,change:0,shift:0,i:n,thread:null};e.push(o)}}}}function cb(t,e){var r=t.isExpand?t.children:[];var i=t.parentNode.children;var a=t.hierNode.i?i[t.hierNode.i-1]:null;if(r.length){mb(t);var n=(r[0].hierNode.prelim+r[r.length-1].hierNode.prelim)/2;if(a){t.hierNode.prelim=a.hierNode.prelim+e(t,a);t.hierNode.modifier=t.hierNode.prelim-n}else{t.hierNode.prelim=n}}else if(a){t.hierNode.prelim=a.hierNode.prelim+e(t,a)}t.parentNode.hierNode.defaultAncestor=yb(t,a,t.parentNode.hierNode.defaultAncestor||i[0],e)}function vb(t){var e=t.hierNode.prelim+t.parentNode.hierNode.modifier;t.setLayout({x:e},true);t.hierNode.modifier+=t.parentNode.hierNode.modifier}function db(t){return arguments.length?t:Sb}function pb(t,e){var r={};t-=Math.PI/2;r.x=e*Math.cos(t);r.y=e*Math.sin(t);return r}function gb(t,e){return rh(t.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()})}function mb(t){var e=t.children;var r=e.length;var i=0;var a=0;while(--r>=0){var n=e[r];n.hierNode.prelim+=i;n.hierNode.modifier+=i;a+=n.hierNode.change;i+=n.hierNode.shift+a}}function yb(t,e,r,i){if(e){var a=t;var n=t;var o=n.parentNode.children[0];var s=e;var l=a.hierNode.modifier;var u=n.hierNode.modifier;var h=o.hierNode.modifier;var f=s.hierNode.modifier;while(s=xb(s),n=_b(n),s&&n){a=xb(a);o=_b(o);a.hierNode.ancestor=t;var c=s.hierNode.prelim+f-n.hierNode.prelim-u+i(s,n);if(c>0){bb(wb(s,t,r),t,c);u+=c;l+=c}f+=s.hierNode.modifier;u+=n.hierNode.modifier;l+=a.hierNode.modifier;h+=o.hierNode.modifier}if(s&&!xb(a)){a.hierNode.thread=s;a.hierNode.modifier+=f-l}if(n&&!_b(o)){o.hierNode.thread=n;o.hierNode.modifier+=u-h;r=t}}return r}function xb(t){var e=t.children;return e.length&&t.isExpand?e[e.length-1]:t.hierNode.thread}function _b(t){var e=t.children;return e.length&&t.isExpand?e[0]:t.hierNode.thread}function wb(t,e,r){return t.hierNode.ancestor.parentNode===e.parentNode?t.hierNode.ancestor:r}function bb(t,e,r){var i=r/(e.hierNode.i-t.hierNode.i);e.hierNode.change-=i;e.hierNode.shift+=r;e.hierNode.modifier+=r;e.hierNode.prelim+=r;t.hierNode.change+=i}function Sb(t,e){return t.parentNode===e.parentNode?1:2}tp({type:"tree",init:function(t,e){this._oldTree;this._mainGroup=new Or;this._controller=new pw(e.getZr());this._controllerHost={target:this.group};this.group.add(this._mainGroup)},render:function(i,t,r,e){var a=i.getData();var n=i.layoutInfo;var o=this._mainGroup;var s=i.get("layout");if(s==="radial"){o.attr("position",[n.x+n.width/2,n.y+n.height/2])}else{o.attr("position",[n.x,n.y])}this._updateViewCoordSys(i);this._updateController(i,t,r);var l=this._data;var u={expandAndCollapse:i.get("expandAndCollapse"),layout:s,orient:i.getOrient(),curvature:i.get("lineStyle.curveness"),symbolRotate:i.get("symbolRotate"),symbolOffset:i.get("symbolOffset"),hoverAnimation:i.get("hoverAnimation"),useNameLabel:true,fadeIn:true};a.diff(l).add(function(t){if(Mb(a,t)){Tb(a,t,null,o,i,u)}}).update(function(t,e){var r=l.getItemGraphicEl(e);if(!Mb(a,t)){r&&Ab(l,e,r,o,i,u);return}Tb(a,t,r,o,i,u)}).remove(function(t){var e=l.getItemGraphicEl(t);if(e){Ab(l,t,e,o,i,u)}}).execute();this._nodeScaleRatio=i.get("nodeScaleRatio");this._updateNodeAndLinkScale(i);if(u.expandAndCollapse===true){a.eachItemGraphicEl(function(t,e){t.off("click").on("click",function(){r.dispatchAction({type:"treeExpandAndCollapse",seriesId:i.id,dataIndex:e})})})}this._data=a},_updateViewCoordSys:function(t){var r=t.getData();var i=[];r.each(function(t){var e=r.getItemLayout(t);if(e&&!isNaN(e.x)&&!isNaN(e.y)){i.push([+e.x,+e.y])}});var e=[];var a=[];uo(i,e,a);if(a[0]-e[0]===0){a[0]+=1;e[0]-=1}if(a[1]-e[1]===0){a[1]+=1;e[1]-=1}var n=t.coordinateSystem=new Vw;n.zoomLimit=t.get("scaleLimit");n.setBoundingRect(e[0],e[1],a[0]-e[0],a[1]-e[1]);n.setCenter(t.get("center"));n.setZoom(t.get("zoom"));this.group.attr({position:n.position,scale:n.scale});this._viewCoordSys=n},_updateController:function(a,t,n){var e=this._controller;var r=this._controllerHost;var o=this.group;e.setPointerChecker(function(t,e,r){var i=o.getBoundingRect();i.applyTransform(o.transform);return i.contain(e,r)&&!Aw(t,n,a)});e.enable(a.get("roam"));r.zoomLimit=a.get("scaleLimit");r.zoom=a.coordinateSystem.getZoom();e.off("pan").off("zoom").on("pan",function(t){Mw(r,t.dx,t.dy);n.dispatchAction({seriesId:a.id,type:"treeRoam",dx:t.dx,dy:t.dy})},this).on("zoom",function(t){Iw(r,t.scale,t.originX,t.originY);n.dispatchAction({seriesId:a.id,type:"treeRoam",zoom:t.scale,originX:t.originX,originY:t.originY});this._updateNodeAndLinkScale(a)},this)},_updateNodeAndLinkScale:function(t){var e=t.getData();var r=this._getNodeGlobalScale(t);var i=[r,r];e.eachItemGraphicEl(function(t,e){t.attr("scale",i)})},_getNodeGlobalScale:function(t){var e=t.coordinateSystem;if(e.type!=="view"){return 1}var r=this._nodeScaleRatio;var i=e.scale;var a=i&&i[0]||1;var n=e.getZoom();var o=(n-1)*r+1;return o/a},dispose:function(){this._controller&&this._controller.dispose();this._controllerHost={}},remove:function(){this._mainGroup.removeAll();this._data=null}});function Mb(t,e){var r=t.getItemLayout(e);return r&&!isNaN(r.x)&&!isNaN(r.y)&&t.getItemVisual(e,"symbol")!=="none"}function Ib(t,e,r){r.itemModel=e;r.itemStyle=e.getModel("itemStyle").getItemStyle();r.hoverItemStyle=e.getModel("emphasis.itemStyle").getItemStyle();r.lineStyle=e.getModel("lineStyle").getLineStyle();r.labelModel=e.getModel("label");r.hoverLabelModel=e.getModel("emphasis.label");if(t.isExpand===false&&t.children.length!==0){r.symbolInnerColor=r.itemStyle.fill}else{r.symbolInnerColor="#fff"}return r}function Tb(t,e,r,i,a,n){var o=!r;var s=t.tree.getNodeByDataIndex(e);var l=s.getModel();var n=Ib(s,l,n);var u=t.tree.root;var h=s.parentNode===u?s:s.parentNode||s;var f=t.getItemGraphicEl(h.dataIndex);var c=h.getLayout();var v=f?{x:f.position[0],y:f.position[1],rawX:f.__radialOldRawX,rawY:f.__radialOldRawY}:c;var d=s.getLayout();if(o){r=new jm(t,e,n);r.attr("position",[v.x,v.y])}else{r.updateData(t,e,n)}r.__radialOldRawX=r.__radialRawX;r.__radialOldRawY=r.__radialRawY;r.__radialRawX=d.rawX;r.__radialRawY=d.rawY;i.add(r);t.setItemGraphicEl(e,r);Gl(r,{position:[d.x,d.y]},a);var p=r.getSymbolPath();if(n.layout==="radial"){var g=u.children[0];var m=g.getLayout();var y=g.children.length;var x;var _;if(d.x===m.x&&s.isExpand===true){var w={};w.x=(g.children[0].getLayout().x+g.children[y-1].getLayout().x)/2;w.y=(g.children[0].getLayout().y+g.children[y-1].getLayout().y)/2;x=Math.atan2(w.y-m.y,w.x-m.x);if(x<0){x=Math.PI*2+x}_=w.x<m.x;if(_){x=x-Math.PI}}else{x=Math.atan2(d.y-m.y,d.x-m.x);if(x<0){x=Math.PI*2+x}if(s.children.length===0||s.children.length!==0&&s.isExpand===false){_=d.x<m.x;if(_){x=x-Math.PI}}else{_=d.x>m.x;if(!_){x=x-Math.PI}}}var b=_?"left":"right";p.setStyle({textPosition:b,textRotation:-x,textOrigin:"center",verticalAlign:"middle"})}if(s.parentNode&&s.parentNode!==u){var S=r.__edge;if(!S){S=r.__edge=new Hs({shape:Db(n,v,v),style:C({opacity:0,strokeNoScale:true},n.lineStyle)})}Gl(S,{shape:Db(n,c,d),style:{opacity:1}},a);i.add(S)}}function Ab(t,e,r,i,a,n){var o=t.tree.getNodeByDataIndex(e);var s=t.tree.root;var l=o.getModel();var n=Ib(o,l,n);var u=o.parentNode===s?o:o.parentNode||o;var h;while(h=u.getLayout(),h==null){u=u.parentNode===s?u:u.parentNode||u}Gl(r,{position:[h.x+1,h.y+1]},a,function(){i.remove(r);t.setItemGraphicEl(e,null)});r.fadeOut(null,{keepLabel:true});var f=r.__edge;if(f){Gl(f,{shape:Db(n,h,h),style:{opacity:0}},a,function(){i.remove(f)})}}function Db(t,e,r){var i;var a;var n;var o;var s=t.orient;var l;var u;var h;var f;if(t.layout==="radial"){l=e.rawX;h=e.rawY;u=r.rawX;f=r.rawY;var c=pb(l,h);var v=pb(l,h+(f-h)*t.curvature);var d=pb(u,f+(h-f)*t.curvature);var p=pb(u,f);return{x1:c.x,y1:c.y,x2:p.x,y2:p.y,cpx1:v.x,cpy1:v.y,cpx2:d.x,cpy2:d.y}}else{l=e.x;h=e.y;u=r.x;f=r.y;if(s==="LR"||s==="RL"){i=l+(u-l)*t.curvature;a=h;n=u+(l-u)*t.curvature;o=f}if(s==="TB"||s==="BT"){i=l;a=h+(f-h)*t.curvature;n=u;o=f+(h-f)*t.curvature}}return{x1:l,y1:h,x2:u,y2:f,cpx1:i,cpy1:a,cpx2:n,cpy2:o}}Zd({type:"treeExpandAndCollapse",event:"treeExpandAndCollapse",update:"update"},function(a,t){t.eachComponent({mainType:"series",subType:"tree",query:a},function(t){var e=a.dataIndex;var r=t.getData().tree;var i=r.getNodeByDataIndex(e);i.isExpand=!i.isExpand})});Zd({type:"treeRoam",event:"treeRoam",update:"none"},function(i,t){t.eachComponent({mainType:"series",subType:"tree",query:i},function(t){var e=t.coordinateSystem;var r=Rw(e,i);t.setCenter&&t.setCenter(r.center);t.setZoom&&t.setZoom(r.zoom)})});function Cb(t,e,r){var i=[t];var a=[];var n;while(n=i.pop()){a.push(n);if(n.isExpand){var o=n.children;if(o.length){for(var s=0;s<o.length;s++){i.push(o[s])}}}}while(n=a.pop()){e(n,r)}}function Lb(t,e){var r=[t];var i;while(i=r.pop()){e(i);if(i.isExpand){var a=i.children;if(a.length){for(var n=a.length-1;n>=0;n--){r.push(a[n])}}}}}var kb=function(t,e){t.eachSeriesByType("tree",function(t){Pb(t,e)})};function Pb(t,e){var r=gb(t,e);t.layoutInfo=r;var i=t.get("layout");var a=0;var n=0;var o=null;if(i==="radial"){a=2*Math.PI;n=Math.min(r.height,r.width)/2;o=db(function(t,e){return(t.parentNode===e.parentNode?1:2)/t.depth})}else{a=r.width;n=r.height;o=db()}var s=t.getData().tree.root;var l=s.children[0];if(l){fb(s);Cb(l,cb,o);s.hierNode.modifier=-l.hierNode.prelim;Lb(l,vb);var u=l;var h=l;var f=l;Lb(l,function(t){var e=t.getLayout().x;if(e<u.getLayout().x){u=t}if(e>h.getLayout().x){h=t}if(t.depth>f.depth){f=t}});var c=u===h?1:o(u,h)/2;var v=c-u.getLayout().x;var d=0;var p=0;var g=0;var m=0;if(i==="radial"){d=a/(h.getLayout().x+c+v);p=n/(f.depth-1||1);Lb(l,function(t){g=(t.getLayout().x+v)*d;m=(t.depth-1)*p;var e=pb(g,m);t.setLayout({x:e.x,y:e.y,rawX:g,rawY:m},true)})}else{var y=t.getOrient();if(y==="RL"||y==="LR"){p=n/(h.getLayout().x+c+v);d=a/(f.depth-1||1);Lb(l,function(t){m=(t.getLayout().x+v)*p;g=y==="LR"?(t.depth-1)*d:a-(t.depth-1)*d;t.setLayout({x:g,y:m},true)})}else if(y==="TB"||y==="BT"){d=a/(h.getLayout().x+c+v);p=n/(f.depth-1||1);Lb(l,function(t){g=(t.getLayout().x+v)*d;m=y==="TB"?(t.depth-1)*p:n-(t.depth-1)*p;t.setLayout({x:g,y:m},true)})}}}}jd(Wy("tree","circle"));Yd(kb);function Nb(t,e,r){if(t&&S(e,t.type)>=0){var i=r.getData().tree.root;var a=t.targetNode;if(typeof a==="string"){a=i.getNodeById(a)}if(a&&i.contains(a)){return{node:a}}var n=t.targetNodeId;if(n!=null&&(a=i.getNodeById(n))){return{node:a}}}}function Ob(t){var e=[];while(t){t=t.parentNode;t&&e.push(t)}return e.reverse()}function Eb(t,e){var r=Ob(t);return S(r,e)>=0}function Rb(t,e){var r=[];while(t){var i=t.dataIndex;r.push({name:t.name,dataIndex:i,value:e.getRawValue(i)});t=t.parentNode}r.reverse();return r}rc.extend({type:"series.treemap",layoutMode:"box",dependencies:["grid","polar"],_viewRoot:null,defaultOption:{progressive:0,hoverLayerThreshold:Infinity,left:"center",top:"middle",right:null,bottom:null,width:"80%",height:"80%",sort:true,clipWindow:"origin",squareRatio:.5*(1+Math.sqrt(5)),leafDepth:null,drillDownIcon:"▶",zoomToNodeRatio:.32*.32,roam:true,nodeClick:"zoomToNode",animation:true,animationDurationUpdate:900,animationEasing:"quinticInOut",breadcrumb:{show:true,height:22,left:"center",top:"bottom",emptyItemWidth:25,itemStyle:{color:"rgba(0,0,0,0.7)",borderColor:"rgba(255,255,255,0.7)",borderWidth:1,shadowColor:"rgba(150,150,150,1)",shadowBlur:3,shadowOffsetX:0,shadowOffsetY:0,textStyle:{color:"#fff"}},emphasis:{textStyle:{}}},label:{show:true,distance:0,padding:5,position:"inside",color:"#fff",ellipsis:true},upperLabel:{show:false,position:[0,"50%"],height:20,color:"#fff",ellipsis:true,verticalAlign:"middle"},itemStyle:{color:null,colorAlpha:null,colorSaturation:null,borderWidth:0,gapWidth:0,borderColor:"#fff",borderColorSaturation:null},emphasis:{upperLabel:{show:true,position:[0,"50%"],color:"#fff",ellipsis:true,verticalAlign:"middle"}},visualDimension:0,visualMin:null,visualMax:null,color:[],colorAlpha:null,colorSaturation:null,colorMappingBy:"index",visibleMin:10,childrenVisibleMin:null,levels:[]},getInitialData:function(t,e){var r={name:t.name,children:t.data};zb(r);var i=t.levels||[];i=t.levels=Bb(i,e);var a={};a.levels=i;return ub.createTree(r,this,a).data},optionUpdated:function(){this.resetViewRoot()},formatTooltip:function(t){var e=this.getData();var r=this.getRawValue(t);var i=B(r)?ku(r[0]):ku(r);var a=e.getName(t);return Ru(a+": "+i)},getDataParams:function(t){var e=rc.prototype.getDataParams.apply(this,arguments);var r=this.getData().tree.getNodeByDataIndex(t);e.treePathInfo=Rb(r,this);return e},setLayoutInfo:function(t){this.layoutInfo=this.layoutInfo||{};N(this.layoutInfo,t)},mapIdToIndex:function(t){var e=this._idIndexMap;if(!e){e=this._idIndexMap=it();this._idIndexMapCount=0}var r=e.get(t);if(r==null){e.set(t,r=this._idIndexMapCount++)}return r},getViewRoot:function(){return this._viewRoot},resetViewRoot:function(t){t?this._viewRoot=t:t=this._viewRoot;var e=this.getRawData().tree.root;if(!t||t!==e&&!e.contains(t)){this._viewRoot=e}}});function zb(t){var r=0;L(t.children,function(t){zb(t);var e=t.value;B(e)&&(e=e[0]);r+=e});var e=t.value;if(B(e)){e=e[0]}if(e==null||isNaN(e)){e=r}if(e<0){e=0}B(t.value)?t.value[0]=e:t.value=e}function Bb(t,e){var r=e.get("color");if(!r){return}t=t||[];var i;L(t,function(t){var e=new ru(t);var r=e.get("color");if(e.get("itemStyle.color")||r&&r!=="none"){i=true}});if(!i){var a=t[0]||(t[0]={});a.color=r.slice()}return t}var Vb=8;var Gb=8;var Fb=5;function Wb(t){this.group=new Or;t.add(this.group)}Wb.prototype={constructor:Wb,render:function(t,e,r,i){var a=t.getModel("breadcrumb");var n=this.group;n.removeAll();if(!a.get("show")||!r){return}var o=a.getModel("itemStyle");var s=o.getModel("textStyle");var l={pos:{left:a.get("left"),right:a.get("right"),top:a.get("top"),bottom:a.get("bottom")},box:{width:e.getWidth(),height:e.getHeight()},emptyItemWidth:a.get("emptyItemWidth"),totalWidth:0,renderList:[]};this._prepare(r,l,s);this._renderContent(t,l,o,s,i);ih(n,l.pos,l.box)},_prepare:function(t,e,r){for(var i=t;i;i=i.parentNode){var a=i.getModel().get("name");var n=r.getTextRect(a);var o=Math.max(n.width+Vb*2,e.emptyItemWidth);e.totalWidth+=o+Gb;e.renderList.push({node:i,text:a,width:o})}},_renderContent:function(t,e,r,i,a){var n=0;var o=e.emptyItemWidth;var s=t.get("breadcrumb.height");var l=eh(e.pos,e.box);var u=e.totalWidth;var h=e.renderList;for(var f=h.length-1;f>=0;f--){var c=h[f];var v=c.node;var d=c.width;var p=c.text;if(u>l.width){u-=d-o;d=o;p=null}var g=new ks({shape:{points:Hb(n,0,d,s,f===h.length-1,f===0)},style:C(r.getItemStyle(),{lineJoin:"bevel",text:p,textFill:i.getTextColor(),textFont:i.getFont()}),z:10,onclick:z(a,v)});this.group.add(g);Zb(g,t,v);n+=d+Gb}},remove:function(){this.group.removeAll()}};function Hb(t,e,r,i,a,n){var o=[[a?t:t-Fb,e],[t+r,e],[t+r,e+i],[a?t:t-Fb,e+i]];!n&&o.splice(2,0,[t+r+Fb,e+i/2]);!a&&o.push([t,e+i/2]);return o}function Zb(t,e,r){t.eventData={componentType:"series",componentSubType:"treemap",componentIndex:e.componentIndex,seriesIndex:e.componentIndex,seriesName:e.name,seriesType:"treemap",selfType:"breadcrumb",nodeData:{dataIndex:r&&r.dataIndex,name:r&&r.name},treePathInfo:r&&Rb(r,e)}}function Ub(){var n=[];var o={};var s;return{add:function(t,e,r,i,a){if(G(i)){a=i;i=0}if(o[t.id]){return false}o[t.id]=1;n.push({el:t,target:e,time:r,delay:i,easing:a});return true},done:function(t){s=t;return this},start:function(){var t=n.length;for(var e=0,r=n.length;e<r;e++){var i=n[e];i.el.animateTo(i.target,i.time,i.delay,i.easing,a)}return this;function a(){t--;if(!t){n.length=0;o={};s&&s()}}}}}var Xb=R;var Yb=Or;var jb=Bs;var qb=L;var Kb=3;var $b=["label"];var Jb=["emphasis","label"];var Qb=["upperLabel"];var tS=["emphasis","upperLabel"];var eS=10;var rS=1;var iS=2;var aS=An([["fill","color"],["stroke","strokeColor"],["lineWidth","strokeWidth"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"]]);var nS=function(t){var e=aS(t);e.stroke=e.fill=e.lineWidth=null;return e};tp({type:"treemap",init:function(t,e){this._containerGroup;this._storage=oS();this._oldTree;this._breadcrumb;this._controller;this._state="ready"},render:function(t,e,r,i){var a=e.findComponents({mainType:"series",subType:"treemap",query:i});if(S(a,t)<0){return}this.seriesModel=t;this.api=r;this.ecModel=e;var n=["treemapZoomToNode","treemapRootToNode"];var o=Nb(i,n,t);var s=i&&i.type;var l=t.layoutInfo;var u=!this._oldTree;var h=this._storage;var f=s==="treemapRootToNode"&&o&&h?{rootNodeGroup:h.nodeGroup[o.node.getRawIndex()],direction:i.direction}:null;var c=this._giveContainerGroup(l);var v=this._doRender(c,t,f);!u&&(!s||s==="treemapZoomToNode"||s==="treemapRootToNode")?this._doAnimation(c,v,t,f):v.renderFinally();this._resetController(r);this._renderBreadcrumb(t,r,o)},_giveContainerGroup:function(t){var e=this._containerGroup;if(!e){e=this._containerGroup=new Yb;this._initEvents(e);this.group.add(e)}e.attr("position",[t.x,t.y]);return e},_doRender:function(t,e,r){var i=e.getData().tree;var a=this._oldTree;var n=oS();var o=oS();var s=this._storage;var l=[];var h=z(sS,e,o,s,r,n,l);f(i.root?[i.root]:[],a&&a.root?[a.root]:[],t,i===a||!a,0);var u=c(s);this._oldTree=i;this._storage=o;return{lastsForAnimation:n,willDeleteEls:u,renderFinally:v};function f(n,o,s,l,u){if(l){o=n;qb(n,function(t,e){!t.isRemoved()&&r(e,e)})}else{new op(o,n,t,t).add(r).update(r).remove(z(r,null)).execute()}function t(t){return t.getId()}function r(t,e){var r=t!=null?n[t]:null;var i=e!=null?o[e]:null;var a=h(r,i,s,u);a&&f(r&&r.viewChildren||[],i&&i.viewChildren||[],a,l,u+1)}}function c(t){var i=oS();t&&qb(t,function(t,e){var r=i[e];qb(t,function(t){t&&(r.push(t),t.__tmWillDelete=1)})});return i}function v(){qb(u,function(t){qb(t,function(t){t.parent&&t.parent.remove(t)})});qb(l,function(t){t.invisible=true;t.dirty()})}},_doAnimation:function(t,n,e,s){if(!e.get("animation")){return}var l=e.get("animationDurationUpdate");var u=e.get("animationEasing");var h=Ub();qb(n.willDeleteEls,function(t,o){qb(t,function(t,e){if(t.invisible){return}var r=t.parent;var i;if(s&&s.direction==="drillDown"){i=r===s.rootNodeGroup?{shape:{x:0,y:0,width:r.__tmNodeWidth,height:r.__tmNodeHeight},style:{opacity:0}}:{style:{opacity:0}}}else{var a=0;var n=0;if(!r.__tmWillDelete){a=r.__tmNodeWidth/2;n=r.__tmNodeHeight/2}i=o==="nodeGroup"?{position:[a,n],style:{opacity:0}}:{shape:{x:a,y:n,width:0,height:0},style:{opacity:0}}}i&&h.add(t,i,l,u)})});qb(this._storage,function(t,a){qb(t,function(t,e){var r=n.lastsForAnimation[a][e];var i={};if(!r){return}if(a==="nodeGroup"){if(r.old){i.position=t.position.slice();t.attr("position",r.old)}}else{if(r.old){i.shape=N({},t.shape);t.setShape(r.old)}if(r.fadein){t.setStyle("opacity",0);i.style={opacity:1}}else if(t.style.opacity!==1){i.style={opacity:1}}}h.add(t,i,l,u)})},this);this._state="animating";h.done(Xb(function(){this._state="ready";n.renderFinally()},this)).start()},_resetController:function(t){var e=this._controller;if(!e){e=this._controller=new pw(t.getZr());e.enable(this.seriesModel.get("roam"));e.on("pan",Xb(this._onPan,this));e.on("zoom",Xb(this._onZoom,this))}var i=new Nr(0,0,t.getWidth(),t.getHeight());e.setPointerChecker(function(t,e,r){return i.contain(e,r)})},_clearController:function(){var t=this._controller;if(t){t.dispose();t=null}},_onPan:function(t){if(this._state!=="animating"&&(Math.abs(t.dx)>Kb||Math.abs(t.dy)>Kb)){var e=this.seriesModel.getData().tree.root;if(!e){return}var r=e.getLayout();if(!r){return}this.api.dispatchAction({type:"treemapMove",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:r.x+t.dx,y:r.y+t.dy,width:r.width,height:r.height}})}},_onZoom:function(t){var e=t.originX;var r=t.originY;if(this._state!=="animating"){var i=this.seriesModel.getData().tree.root;if(!i){return}var a=i.getLayout();if(!a){return}var n=new Nr(a.x,a.y,a.width,a.height);var o=this.seriesModel.layoutInfo;e-=o.x;r-=o.y;var s=le();ce(s,s,[-e,-r]);de(s,s,[t.scale,t.scale]);ce(s,s,[e,r]);n.applyTransform(s);this.api.dispatchAction({type:"treemapRender",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:n.x,y:n.y,width:n.width,height:n.height}})}},_initEvents:function(t){t.on("click",function(t){if(this._state!=="ready"){return}var e=this.seriesModel.get("nodeClick",true);if(!e){return}var r=this.findTarget(t.offsetX,t.offsetY);if(!r){return}var i=r.node;if(i.getLayout().isLeafRoot){this._rootToNode(r)}else{if(e==="zoomToNode"){this._zoomToNode(r)}else if(e==="link"){var a=i.hostTree.data.getItemModel(i.dataIndex);var n=a.get("link",true);var o=a.get("target",true)||"blank";n&&window.open(n,o)}}},this)},_renderBreadcrumb:function(e,t,r){if(!r){r=e.get("leafDepth",true)!=null?{node:e.getViewRoot()}:this.findTarget(t.getWidth()/2,t.getHeight()/2);if(!r){r={node:e.getData().tree.root}}}(this._breadcrumb||(this._breadcrumb=new Wb(this.group))).render(e,t,r.node,Xb(i,this));function i(t){if(this._state!=="animating"){Eb(e.getViewRoot(),t)?this._rootToNode({node:t}):this._zoomToNode({node:t})}}},remove:function(){this._clearController();this._containerGroup&&this._containerGroup.removeAll();this._storage=oS();this._state="ready";this._breadcrumb&&this._breadcrumb.remove()},dispose:function(){this._clearController()},_zoomToNode:function(t){this.api.dispatchAction({type:"treemapZoomToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:t.node})},_rootToNode:function(t){this.api.dispatchAction({type:"treemapRootToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:t.node})},findTarget:function(a,n){var o;var t=this.seriesModel.getViewRoot();t.eachNode({attr:"viewChildren",order:"preorder"},function(t){var e=this._storage.background[t.getRawIndex()];if(e){var r=e.transformCoordToLocal(a,n);var i=e.shape;if(i.x<=r[0]&&r[0]<=i.x+i.width&&i.y<=r[1]&&r[1]<=i.y+i.height){o={node:t,offsetX:r[0],offsetY:r[1]}}else{return false}}},this);return o}});function oS(){return{nodeGroup:[],background:[],content:[]}}function sS(c,o,s,l,u,r,v,t,e,i){if(!v){return}var d=v.getLayout();if(!d||!d.isInView){return}var h=d.width;var f=d.height;var p=d.borderWidth;var g=d.invisible;var m=v.getRawIndex();var y=t&&t.getRawIndex();var a=v.viewChildren;var x=d.upperHeight;var n=a&&a.length;var _=v.getModel("itemStyle");var w=v.getModel("emphasis.itemStyle");var b=C("nodeGroup",Yb);if(!b){return}e.add(b);b.attr("position",[d.x||0,d.y||0]);b.__tmNodeWidth=h;b.__tmNodeHeight=f;if(d.isAboveViewRoot){return b}var S=C("background",jb,i,rS);S&&I(b,S,n&&d.upperHeight);if(!n){var M=C("content",jb,i,iS);M&&T(b,M)}return b;function I(t,i,a){i.dataIndex=v.dataIndex;i.seriesIndex=c.seriesIndex;i.setShape({x:0,y:0,width:h,height:f});var n=v.getVisual("borderColor",true);var o=w.get("borderColor");A(i,function(){var t=nS(_);t.fill=n;var e=aS(w);e.fill=o;if(a){var r=h-2*p;D(t,e,n,r,x,{x:p,y:0,width:r,height:x})}else{t.text=e.text=null}i.setStyle(t);Al(i,e)});t.add(i)}function T(t,r){r.dataIndex=v.dataIndex;r.seriesIndex=c.seriesIndex;var i=Math.max(h-2*p,0);var a=Math.max(f-2*p,0);r.culling=true;r.setShape({x:p,y:p,width:i,height:a});var n=v.getVisual("color",true);A(r,function(){var t=nS(_);t.fill=n;var e=aS(w);D(t,e,n,i,a);r.setStyle(t);Al(r,e)});t.add(r)}function A(t,e){if(!g){e();if(!t.__tmWillVisible){t.invisible=false}}else{!t.invisible&&r.push(t)}}function D(t,e,r,i,a,n){var o=v.getModel();var s=X(c.getFormattedLabel(v.dataIndex,"normal",null,null,n?"upperLabel":"label"),o.get("name"));if(!n&&d.isLeafRoot){var l=c.get("drillDownIcon",true);s=l?l+" "+s:s}var u=o.getModel(n?Qb:$b);var h=o.getModel(n?tS:Jb);var f=u.getShallow("show");Cl(t,e,u,h,{defaultText:f?s:null,autoColor:r,isRectText:true});n&&(t.textRect=P(n));t.truncate=f&&u.get("ellipsis")?{outerWidth:i,outerHeight:a,minChar:2}:null}function C(t,e,r,i){var a=y!=null&&s[t][y];var n=u[t];if(a){s[t][y]=null;L(n,a,t)}else if(!g){a=new e({z:lS(r,i)});a.__tmDepth=r;a.__tmStorageName=t;k(n,a,t)}return o[t][m]=a}function L(t,e,r){var i=t[m]={};i.old=r==="nodeGroup"?e.position.slice():N({},e.shape)}function k(t,e,r){var i=t[m]={};var a=v.parentNode;if(a&&(!l||l.direction==="drillDown")){var n=0;var o=0;var s=u.background[a.getRawIndex()];if(!l&&s&&s.old){n=s.old.width;o=s.old.height}i.old=r==="nodeGroup"?[0,o]:{x:n,y:o,width:0,height:0}}i.fadein=r!=="nodeGroup"}}function lS(t,e){var r=t*eS+e;return(r-1)/r}var uS=function(){};var hS=["treemapZoomToNode","treemapRender","treemapMove"];for(var fS=0;fS<hS.length;fS++){Zd({type:hS[fS],update:"updateView"},uS)}Zd({type:"treemapRootToNode",update:"updateView"},function(n,t){t.eachComponent({mainType:"series",subType:"treemap",query:n},e);function e(t,e){var r=["treemapZoomToNode","treemapRootToNode"];var i=Nb(n,r,t);if(i){var a=t.getViewRoot();if(a){n.direction=Eb(a,i.node)?"rollUp":"drillDown"}t.resetViewRoot(i.node)}}});var cS=L;var vS=F;var dS=-1;var pS=function(t){var e=t.mappingMethod;var r=t.type;var i=this.option=P(t);this.type=r;this.mappingMethod=e;this._normalizeData=DS[e];var a=gS[r];this.applyVisual=a.applyVisual;this.getColorMapper=a.getColorMapper;this._doMap=a._doMap[e];if(e==="piecewise"){xS(i);mS(i)}else if(e==="category"){i.categories?yS(i):xS(i,true)}else{$(e!=="linear"||i.dataExtent);xS(i)}};pS.prototype={constructor:pS,mapValueToVisual:function(t){var e=this._normalizeData(t);return this._doMap(e,t)},getNormalizer:function(){return R(this._normalizeData,this)}};var gS=pS.visualHandlers={color:{applyVisual:bS("color"),getColorMapper:function(){var a=this.option;return R(a.mappingMethod==="category"?function(t,e){!e&&(t=this._normalizeData(t));return SS.call(this,t)}:function(t,e,r){var i=!!r;!e&&(t=this._normalizeData(t));r=$e(t,a.parsedVisual,r);return i?r:ir(r,"rgba")},this)},_doMap:{linear:function(t){return ir($e(t,this.option.parsedVisual),"rgba")},category:SS,piecewise:function(t,e){var r=TS.call(this,e);if(r==null){r=ir($e(t,this.option.parsedVisual),"rgba")}return r},fixed:MS}},colorHue:_S(function(t,e){return er(t,e)}),colorSaturation:_S(function(t,e){return er(t,null,e)}),colorLightness:_S(function(t,e){return er(t,null,null,e)}),colorAlpha:_S(function(t,e){return rr(t,e)}),opacity:{applyVisual:bS("opacity"),_doMap:IS([0,1])},liftZ:{applyVisual:bS("liftZ"),_doMap:{linear:MS,category:MS,piecewise:MS,fixed:MS}},symbol:{applyVisual:function(t,e,r){var i=this.mapValueToVisual(t);if(G(i)){r("symbol",i)}else if(vS(i)){for(var a in i){if(i.hasOwnProperty(a)){r(a,i[a])}}}},_doMap:{linear:wS,category:SS,piecewise:function(t,e){var r=TS.call(this,e);if(r==null){r=wS.call(this,t)}return r},fixed:MS}},symbolSize:{applyVisual:bS("symbolSize"),_doMap:IS([0,1])}};function mS(r){var t=r.pieceList;r.hasSpecialVisual=false;L(t,function(t,e){t.originIndex=e;if(t.visual!=null){r.hasSpecialVisual=true}})}function yS(t){var e=t.categories;var r=t.visual;var i=t.categoryMap={};cS(e,function(t,e){i[t]=e});if(!B(r)){var a=[];if(F(r)){cS(r,function(t,e){var r=i[e];a[r!=null?r:dS]=t})}else{a[dS]=r}r=AS(t,a)}for(var n=e.length-1;n>=0;n--){if(r[n]==null){delete i[e[n]];e.pop()}}}function xS(t,e){var r=t.visual;var i=[];if(F(r)){cS(r,function(t){i.push(t)})}else if(r!=null){i.push(r)}var a={color:1,symbol:1};if(!e&&i.length===1&&!a.hasOwnProperty(t.type)){i[1]=i[0]}AS(t,i)}function _S(i){return{applyVisual:function(t,e,r){t=this.mapValueToVisual(t);r("color",i(e("color"),t))},_doMap:IS([0,1])}}function wS(t){var e=this.option.visual;return e[Math.round(fu(t,[0,1],[0,e.length-1],true))]||{}}function bS(i){return function(t,e,r){r(i,this.mapValueToVisual(t))}}function SS(t){var e=this.option.visual;return e[this.option.loop&&t!==dS?t%e.length:t]}function MS(){return this.option.visual[0]}function IS(i){return{linear:function(t){return fu(t,i,this.option.visual,true)},category:SS,piecewise:function(t,e){var r=TS.call(this,e);if(r==null){r=fu(t,i,this.option.visual,true)}return r},fixed:MS}}function TS(t){var e=this.option;var r=e.pieceList;if(e.hasSpecialVisual){var i=pS.findPieceIndex(t,r);var a=r[i];if(a&&a.visual){return a.visual[this.type]}}}function AS(t,e){t.visual=e;if(t.type==="color"){t.parsedVisual=A(e,function(t){return Xe(t)})}return e}var DS={linear:function(t){return fu(t,this.option.dataExtent,[0,1],true)},piecewise:function(t){var e=this.option.pieceList;var r=pS.findPieceIndex(t,e,true);if(r!=null){return fu(r,[0,e.length-1],[0,1],true)}},category:function(t){var e=this.option.categories?this.option.categoryMap[t]:t;return e==null?dS:e},fixed:nt};pS.listVisualTypes=function(){var r=[];L(gS,function(t,e){r.push(e)});return r};pS.addVisualHandler=function(t,e){gS[t]=e};pS.isValidType=function(t){return gS.hasOwnProperty(t)};pS.eachVisual=function(t,e,r){if(F(t)){L(t,e,r)}else{e.call(r,t)}};pS.mapVisual=function(t,i,a){var n;var o=B(t)?[]:F(t)?{}:(n=true,null);pS.eachVisual(t,function(t,e){var r=i.call(a,t,e);n?o=r:o[e]=r});return o};pS.retrieveVisuals=function(r){var i={};var a;r&&cS(gS,function(t,e){if(r.hasOwnProperty(e)){i[e]=r[e];a=true}});return a?i:null};pS.prepareVisualTypes=function(t){if(vS(t)){var r=[];cS(t,function(t,e){r.push(e)});t=r}else if(B(t)){t=t.slice()}else{return[]}t.sort(function(t,e){return e==="color"&&t!=="color"&&t.indexOf("color")===0?1:-1});return t};pS.dependsOn=function(t,e){return e==="color"?!!(t&&t.indexOf(e)===0):t===e};pS.findPieceIndex=function(i,t,e){var a;var n=Infinity;for(var r=0,o=t.length;r<o;r++){var s=t[r].value;if(s!=null){if(s===i||typeof s==="string"&&s===i+""){return r}e&&f(s,r)}}for(var r=0,o=t.length;r<o;r++){var l=t[r];var u=l.interval;var h=l.close;if(u){if(u[0]===-Infinity){if(CS(h[1],i,u[1])){return r}}else if(u[1]===Infinity){if(CS(h[0],u[0],i)){return r}}else if(CS(h[0],u[0],i)&&CS(h[1],i,u[1])){return r}e&&f(u[0],r);e&&f(u[1],r)}}if(e){return i===Infinity?t.length-1:i===-Infinity?0:a}function f(t,e){var r=Math.abs(t-i);if(r<n){n=r;a=e}}};function CS(t,e,r){return t?e<=r:e<r}var LS=B;var kS="itemStyle";var PS={seriesType:"treemap",reset:function(t,e,r,i){var a=t.getData().tree;var n=a.root;var o=t.getModel(kS);if(n.isRemoved()){return}var s=A(a.levelModels,function(t){return t?t.get(kS):null});NS(n,{},s,o,t.getViewRoot().getAncestors(),t)}};function NS(t,e,i,a,n,o){var s=t.getModel();var r=t.getLayout();if(!r||r.invisible||!r.isInView){return}var l=t.getModel(kS);var u=i[t.depth];var h=OS(l,e,u,a);var f=l.get("borderColor");var c=l.get("borderColorSaturation");var v;if(c!=null){v=ES(h,t);f=RS(c,v)}t.setVisual("borderColor",f);var d=t.viewChildren;if(!d||!d.length){v=ES(h,t);t.setVisual("color",v)}else{var p=BS(t,s,r,l,h,d);L(d,function(t,e){if(t.depth>=n.length||t===n[t.depth]){var r=GS(s,h,t,e,p,o);NS(t,r,i,a,n,o)}})}}function OS(r,i,a,n){var o=N({},i);L(["color","colorAlpha","colorSaturation"],function(t){var e=r.get(t,true);e==null&&a&&(e=a[t]);e==null&&(e=i[t]);e==null&&(e=n.get(t));e!=null&&(o[t]=e)});return o}function ES(t){var e=zS(t,"color");if(e){var r=zS(t,"colorAlpha");var i=zS(t,"colorSaturation");if(i){e=er(e,null,null,i)}if(r){e=rr(e,r)}return e}}function RS(t,e){return e!=null?er(e,null,null,t):null}function zS(t,e){var r=t[e];if(r!=null&&r!=="none"){return r}}function BS(t,e,r,i,a,n){if(!n||!n.length){return}var o=VS(e,"color")||a.color!=null&&a.color!=="none"&&(VS(e,"colorAlpha")||VS(e,"colorSaturation"));if(!o){return}var s=e.get("visualMin");var l=e.get("visualMax");var u=r.dataExtent.slice();s!=null&&s<u[0]&&(u[0]=s);l!=null&&l>u[1]&&(u[1]=l);var h=e.get("colorMappingBy");var f={type:o.name,dataExtent:u,visual:o.range};if(f.type==="color"&&(h==="index"||h==="id")){f.mappingMethod="category";f.loop=true}else{f.mappingMethod="linear"}var c=new pS(f);c.__drColorMappingBy=h;return c}function VS(t,e){var r=t.get(e);return LS(r)&&r.length?{name:e,range:r}:null}function GS(t,e,r,i,a,n){var o=N({},e);if(a){var s=a.type;var l=s==="color"&&a.__drColorMappingBy;var u=l==="index"?i:l==="id"?n.mapIdToIndex(r.getId()):r.getValue(t.get("visualDimension"));o[s]=a.mapValueToVisual(u)}return o}var FS=Math.max;var WS=Math.min;var HS=X;var ZS=L;var US=["itemStyle","borderWidth"];var XS=["itemStyle","gapWidth"];var YS=["upperLabel","show"];var jS=["upperLabel","height"];var qS={seriesType:"treemap",reset:function(t,e,r,i){var a=r.getWidth();var n=r.getHeight();var o=t.option;var s=rh(t.getBoxLayoutParams(),{width:r.getWidth(),height:r.getHeight()});var l=o.size||[];var u=cu(HS(s.width,l[0]),a);var h=cu(HS(s.height,l[1]),n);var f=i&&i.type;var c=["treemapZoomToNode","treemapRootToNode"];var v=Nb(i,c,t);var d=f==="treemapRender"||f==="treemapMove"?i.rootRect:null;var p=t.getViewRoot();var g=Ob(p);if(f!=="treemapMove"){var m=f==="treemapZoomToNode"?iM(t,v,p,u,h):d?[d.width,d.height]:[u,h];var y=o.sort;if(y&&y!=="asc"&&y!=="desc"){y="desc"}var x={squareRatio:o.squareRatio,sort:y,leafDepth:o.leafDepth};p.hostTree.clearLayouts();var _={x:0,y:0,width:m[0],height:m[1],area:m[0]*m[1]};p.setLayout(_);KS(p,x,false,0);var _=p.getLayout();ZS(g,function(t,e){var r=(g[e+1]||p).getValue();t.setLayout(N({dataExtent:[r,r],borderWidth:0,upperHeight:0},_))})}var w=t.getData().tree.root;w.setLayout(aM(s,d,v),true);t.setLayoutInfo(s);nM(w,new Nr(-s.x,-s.y,a,n),g,p,0)}};function KS(t,e,r,i){var a;var n;if(t.isRemoved()){return}var o=t.getLayout();a=o.width;n=o.height;var s=t.getModel();var l=s.get(US);var u=s.get(XS)/2;var h=oM(s);var f=Math.max(l,h);var c=l-u;var v=f-u;var s=t.getModel();t.setLayout({borderWidth:l,upperHeight:f,upperLabelHeight:h},true);a=FS(a-2*c,0);n=FS(n-c-v,0);var d=a*n;var p=$S(t,s,d,e,r,i);if(!p.length){return}var g={x:c,y:v,width:a,height:n};var m=WS(a,n);var y=Infinity;var x=[];x.area=0;for(var _=0,w=p.length;_<w;){var b=p[_];x.push(b);x.area+=b.getLayout().area;var S=eM(x,m,e.squareRatio);if(S<=y){_++;y=S}else{x.area-=x.pop().getLayout().area;rM(x,m,g,u,false);m=WS(g.width,g.height);x.length=x.area=0;y=Infinity}}if(x.length){rM(x,m,g,u,true)}if(!r){var M=s.get("childrenVisibleMin");if(M!=null&&d<M){r=true}}for(var _=0,w=p.length;_<w;_++){KS(p[_],e,r,i+1)}}function $S(t,e,r,i,a,n){var o=t.children||[];var s=i.sort;s!=="asc"&&s!=="desc"&&(s=null);var l=i.leafDepth!=null&&i.leafDepth<=n;if(a&&!l){return t.viewChildren=[]}o=O(o,function(t){return!t.isRemoved()});QS(o,s);var u=tM(e,o,s);if(u.sum===0){return t.viewChildren=[]}u.sum=JS(e,r,u.sum,s,o);if(u.sum===0){return t.viewChildren=[]}for(var h=0,f=o.length;h<f;h++){var c=o[h].getValue()/u.sum*r;o[h].setLayout({area:c})}if(l){o.length&&t.setLayout({isLeafRoot:true},true);o.length=0}t.viewChildren=o;t.setLayout({dataExtent:u.dataExtent},true);return o}function JS(t,e,r,i,a){if(!i){return r}var n=t.get("visibleMin");var o=a.length;var s=o;for(var l=o-1;l>=0;l--){var u=a[i==="asc"?o-l-1:l].getValue();if(u/r*e<n){s=l;r-=u}}i==="asc"?a.splice(0,o-s):a.splice(s,o-s);return r}function QS(t,i){if(i){t.sort(function(t,e){var r=i==="asc"?t.getValue()-e.getValue():e.getValue()-t.getValue();return r===0?i==="asc"?t.dataIndex-e.dataIndex:e.dataIndex-t.dataIndex:r})}return t}function tM(t,e,r){var i=0;for(var a=0,n=e.length;a<n;a++){i+=e[a].getValue()}var o=t.get("visualDimension");var s;if(!e||!e.length){s=[NaN,NaN]}else if(o==="value"&&r){s=[e[e.length-1].getValue(),e[0].getValue()];r==="asc"&&s.reverse()}else{var s=[Infinity,-Infinity];ZS(e,function(t){var e=t.getValue(o);e<s[0]&&(s[0]=e);e>s[1]&&(s[1]=e)})}return{sum:i,dataExtent:s}}function eM(t,e,r){var i=0;var a=Infinity;for(var n=0,o,s=t.length;n<s;n++){o=t[n].getLayout().area;if(o){o<a&&(a=o);o>i&&(i=o)}}var l=t.area*t.area;var u=e*e*r;return l?FS(u*i/l,l/(u*a)):Infinity}function rM(t,e,r,i,a){var n=e===r.width?0:1;var o=1-n;var s=["x","y"];var l=["width","height"];var u=r[s[n]];var h=e?t.area/e:0;if(a||h>r[l[o]]){h=r[l[o]]}for(var f=0,c=t.length;f<c;f++){var v=t[f];var d={};var p=h?v.getLayout().area/h:0;var g=d[l[o]]=FS(h-2*i,0);var m=r[s[n]]+r[l[n]]-u;var y=f===c-1||m<p?m:p;var x=d[l[n]]=FS(y-2*i,0);d[s[o]]=r[s[o]]+WS(i,g/2);d[s[n]]=u+WS(i,x/2);u+=y;v.setLayout(d,true)}r[s[o]]+=h;r[l[o]]-=h}function iM(t,e,r,i,a){var n=(e||{}).node;var o=[i,a];if(!n||n===r){return o}var s;var l=i*a;var u=l*t.option.zoomToNodeRatio;while(s=n.parentNode){var h=0;var f=s.children;for(var c=0,v=f.length;c<v;c++){h+=f[c].getValue()}var d=n.getValue();if(d===0){return o}u*=h/d;var p=s.getModel();var g=p.get(US);var m=Math.max(g,oM(p,g));u+=4*g*g+(3*g+m)*Math.pow(u,.5);u>xu&&(u=xu);n=s}u<l&&(u=l);var y=Math.pow(u/l,.5);return[i*y,a*y]}function aM(t,e,r){if(e){return{x:e.x,y:e.y}}var i={x:0,y:0};if(!r){return i}var a=r.node;var n=a.getLayout();if(!n){return i}var o=[n.width/2,n.height/2];var s=a;while(s){var l=s.getLayout();o[0]+=l.x;o[1]+=l.y;s=s.parentNode}return{x:t.width/2-o[0],y:t.height/2-o[1]}}function nM(t,e,r,i,a){var n=t.getLayout();var o=r[a];var s=o&&o===t;if(o&&!s||a===r.length&&t!==i){return}t.setLayout({isInView:true,invisible:!s&&!e.intersect(n),isAboveViewRoot:s},true);var l=new Nr(e.x-n.x,e.y-n.y,e.width,e.height);ZS(t.viewChildren||[],function(t){nM(t,l,r,i,a+1)})}function oM(t){return t.get(YS)?t.get(jS):0}jd(PS);Yd(qS);function sM(t){return"_EC_"+t}var lM=function(t){this._directed=t||false;this.nodes=[];this.edges=[];this._nodesMap={};this._edgesMap={};this.data;this.edgeData};var uM=lM.prototype;uM.type="graph";uM.isDirected=function(){return this._directed};uM.addNode=function(t,e){t=t||""+e;var r=this._nodesMap;if(r[sM(t)]){if(D){console.error("Graph nodes have duplicate name or id")}return}var i=new hM(t,e);i.hostGraph=this;this.nodes.push(i);r[sM(t)]=i;return i};uM.getNodeByIndex=function(t){var e=this.data.getRawIndex(t);return this.nodes[e]};uM.getNodeById=function(t){return this._nodesMap[sM(t)]};uM.addEdge=function(t,e,r){var i=this._nodesMap;var a=this._edgesMap;if(typeof t==="number"){t=this.nodes[t]}if(typeof e==="number"){e=this.nodes[e]}if(!hM.isInstance(t)){t=i[sM(t)]}if(!hM.isInstance(e)){e=i[sM(e)]}if(!t||!e){return}var n=t.id+"-"+e.id;if(a[n]){return}var o=new fM(t,e,r);o.hostGraph=this;if(this._directed){t.outEdges.push(o);e.inEdges.push(o)}t.edges.push(o);if(t!==e){e.edges.push(o)}this.edges.push(o);a[n]=o;return o};uM.getEdgeByIndex=function(t){var e=this.edgeData.getRawIndex(t);return this.edges[e]};uM.getEdge=function(t,e){if(hM.isInstance(t)){t=t.id}if(hM.isInstance(e)){e=e.id}var r=this._edgesMap;if(this._directed){return r[t+"-"+e]}else{return r[t+"-"+e]||r[e+"-"+t]}};uM.eachNode=function(t,e){var r=this.nodes;var i=r.length;for(var a=0;a<i;a++){if(r[a].dataIndex>=0){t.call(e,r[a],a)}}};uM.eachEdge=function(t,e){var r=this.edges;var i=r.length;for(var a=0;a<i;a++){if(r[a].dataIndex>=0&&r[a].node1.dataIndex>=0&&r[a].node2.dataIndex>=0){t.call(e,r[a],a)}}};uM.breadthFirstTraverse=function(t,e,r,i){if(!hM.isInstance(e)){e=this._nodesMap[sM(e)]}if(!e){return}var a=r==="out"?"outEdges":r==="in"?"inEdges":"edges";for(var n=0;n<this.nodes.length;n++){this.nodes[n].__visited=false}if(t.call(i,e,null)){return}var o=[e];while(o.length){var s=o.shift();var l=s[a];for(var n=0;n<l.length;n++){var u=l[n];var h=u.node1===s?u.node2:u.node1;if(!h.__visited){if(t.call(i,h,s)){return}o.push(h);h.__visited=true}}}};uM.update=function(){var t=this.data;var r=this.edgeData;var e=this.nodes;var i=this.edges;for(var a=0,n=e.length;a<n;a++){e[a].dataIndex=-1}for(var a=0,n=t.count();a<n;a++){e[t.getRawIndex(a)].dataIndex=a}r.filterSelf(function(t){var e=i[r.getRawIndex(t)];return e.node1.dataIndex>=0&&e.node2.dataIndex>=0});for(var a=0,n=i.length;a<n;a++){i[a].dataIndex=-1}for(var a=0,n=r.count();a<n;a++){i[r.getRawIndex(a)].dataIndex=a}};uM.clone=function(){var t=new lM(this._directed);var e=this.nodes;var r=this.edges;for(var i=0;i<e.length;i++){t.addNode(e[i].id,e[i].dataIndex)}for(var i=0;i<r.length;i++){var a=r[i];t.addEdge(a.node1.id,a.node2.id,a.dataIndex)}return t};function hM(t,e){this.id=t==null?"":t;this.inEdges=[];this.outEdges=[];this.edges=[];this.hostGraph;this.dataIndex=e==null?-1:e}hM.prototype={constructor:hM,degree:function(){return this.edges.length},inDegree:function(){return this.inEdges.length},outDegree:function(){return this.outEdges.length},getModel:function(t){if(this.dataIndex<0){return}var e=this.hostGraph;var r=e.data.getItemModel(this.dataIndex);return r.getModel(t)}};function fM(t,e,r){this.node1=t;this.node2=e;this.dataIndex=r==null?-1:r}fM.prototype.getModel=function(t){if(this.dataIndex<0){return}var e=this.hostGraph;var r=e.edgeData.getItemModel(this.dataIndex);return r.getModel(t)};var cM=function(r,i){return{getValue:function(t){var e=this[r][i];return e.get(e.getDimension(t||"value"),this.dataIndex)},setVisual:function(t,e){this.dataIndex>=0&&this[r][i].setItemVisual(this.dataIndex,t,e)},getVisual:function(t,e){return this[r][i].getItemVisual(this.dataIndex,t,e)},setLayout:function(t,e){this.dataIndex>=0&&this[r][i].setItemLayout(this.dataIndex,t,e)},getLayout:function(){return this[r][i].getItemLayout(this.dataIndex)},getGraphicEl:function(){return this[r][i].getItemGraphicEl(this.dataIndex)},getRawIndex:function(){return this[r][i].getRawIndex(this.dataIndex)}}};I(hM,cM("hostGraph","data"));I(fM,cM("hostGraph","edgeData"));lM.Node=hM;lM.Edge=fM;Sn(hM);Sn(fM);var vM=function(t,e,r,i,a){var n=new lM(i);for(var o=0;o<t.length;o++){n.addNode(X(t[o].id,t[o].name,o),o)}var s=[];var l=[];var u=0;for(var o=0;o<e.length;o++){var h=e[o];var f=h.source;var c=h.target;if(n.addEdge(f,c,u)){l.push(h);s.push(X(h.id,f+" > "+c));u++}}var v=r.get("coordinateSystem");var d;if(v==="cartesian2d"||v==="polar"){d=Xp(t,r)}else{var p=ef.get(v);var g=p&&p.type!=="view"?p.dimensions||[]:[];if(S(g,"value")<0){g.concat(["value"])}var m=Wp(t,{coordDimensions:g});d=new Ip(m,r);d.initData(t)}var y=new Ip(["value"],r);y.initData(l,s);a&&a(d,y);tb({mainData:d,struct:n,structAttr:"graph",datas:{node:d,edge:y},datasAttr:{node:"data",edge:"edgeData"}});n.update();return n};var dM=Qd({type:"series.graph",init:function(t){dM.superApply(this,"init",arguments);this.legendDataProvider=function(){return this._categoriesData};this.fillDataTextStyle(t.edges||t.links);this._updateCategoriesData()},mergeOption:function(t){dM.superApply(this,"mergeOption",arguments);this.fillDataTextStyle(t.edges||t.links);this._updateCategoriesData()},mergeDefaultAndTheme:function(t){dM.superApply(this,"mergeDefaultAndTheme",arguments);Qa(t,["edgeLabel"],["show"])},getInitialData:function(t,s){var e=t.edges||t.links||[];var r=t.data||t.nodes||[];var l=this;if(r&&e){return vM(r,e,this,true,i).data}function i(t,e){t.wrapMethod("getItemModel",function(t){var e=l._categoriesModels;var r=t.getShallow("category");var i=e[r];if(i){i.parentModel=t.parentModel;t.parentModel=i}return t});var r=l.getModel("edgeLabel");var i=new ru({label:r.option},r.parentModel,s);var a=l.getModel("emphasis.edgeLabel");var n=new ru({emphasis:{label:a.option}},a.parentModel,s);e.wrapMethod("getItemModel",function(t){t.customizeGetParent(o);return t});function o(t){t=this.parsePath(t);return t&&t[0]==="label"?i:t&&t[0]==="emphasis"&&t[1]==="label"?n:this.parentModel}}},getGraph:function(){return this.getData().graph},getEdgeData:function(){return this.getGraph().edgeData},getCategoriesData:function(){return this._categoriesData},formatTooltip:function(t,e,r){if(r==="edge"){var i=this.getData();var a=this.getDataParams(t,r);var n=i.graph.getEdgeByIndex(t);var o=i.getName(n.node1.dataIndex);var s=i.getName(n.node2.dataIndex);var l=[];o!=null&&l.push(o);s!=null&&l.push(s);l=Ru(l.join(" > "));if(a.value){l+=" : "+Ru(a.value)}return l}else{return dM.superApply(this,"formatTooltip",arguments)}},_updateCategoriesData:function(){var t=A(this.option.categories||[],function(t){return t.value!=null?t:N({value:0},t)});var e=new Ip(["value"],this);e.initData(t);this._categoriesData=e;this._categoriesModels=e.mapArray(function(t){return e.getItemModel(t,true)})},setZoom:function(t){this.option.zoom=t},setCenter:function(t){this.option.center=t},isAnimationEnabled:function(){return dM.superCall(this,"isAnimationEnabled")&&!(this.get("layout")==="force"&&this.get("force.layoutAnimation"))},defaultOption:{zlevel:0,z:2,coordinateSystem:"view",legendHoverLink:true,hoverAnimation:true,layout:null,focusNodeAdjacency:false,circular:{rotateLabel:false},force:{initLayout:null,repulsion:[0,50],gravity:.1,edgeLength:30,layoutAnimation:true},left:"center",top:"center",symbol:"circle",symbolSize:10,edgeSymbol:["none","none"],edgeSymbolSize:10,edgeLabel:{position:"middle"},draggable:false,roam:false,center:null,zoom:1,nodeScaleRatio:.6,label:{show:false,formatter:"{b}"},itemStyle:{},lineStyle:{color:"#aaa",width:1,curveness:0,opacity:.5},emphasis:{label:{show:true}}}});var pM=Gs.prototype;var gM=Hs.prototype;function mM(t){return isNaN(+t.cpx1)||isNaN(+t.cpy1)}var yM=rl({type:"ec-line",style:{stroke:"#000",fill:null},shape:{x1:0,y1:0,x2:0,y2:0,percent:1,cpx1:null,cpy1:null},buildPath:function(t,e){(mM(e)?pM:gM).buildPath(t,e)},pointAt:function(t){return mM(this.shape)?pM.pointAt.call(this,t):gM.pointAt.call(this,t)},tangentAt:function(t){var e=this.shape;var r=mM(e)?[e.x2-e.x1,e.y2-e.y1]:gM.tangentAt.call(this,t);return St(r,r)}});var xM=["fromSymbol","toSymbol"];function _M(t){return"_"+t+"Type"}function wM(t,e,r){var i=e.getItemVisual(r,"color");var a=e.getItemVisual(r,t);var n=e.getItemVisual(r,t+"Size");if(!a||a==="none"){return}if(!B(n)){n=[n,n]}var o=cm(a,-n[0]/2,-n[1]/2,n[0],n[1],i);o.name=t;return o}function bM(t){var e=new yM({name:"line"});SM(e.shape,t);return e}function SM(t,e){var r=e[0];var i=e[1];var a=e[2];t.x1=r[0];t.y1=r[1];t.x2=i[0];t.y2=i[1];t.percent=1;if(a){t.cpx1=a[0];t.cpy1=a[1]}else{t.cpx1=NaN;t.cpy1=NaN}}function MM(){var t=this;var e=t.childOfName("fromSymbol");var r=t.childOfName("toSymbol");var i=t.childOfName("label");if(!e&&!r&&i.ignore){return}var a=1;var n=this.parent;while(n){if(n.scale){a/=n.scale[0]}n=n.parent}var o=t.childOfName("line");if(!this.__dirty&&!o.__dirty){return}var s=o.shape.percent;var l=o.pointAt(0);var u=o.pointAt(s);var h=dt([],u,l);St(h,h);if(e){e.attr("position",l);var f=o.tangentAt(0);e.attr("rotation",Math.PI/2-Math.atan2(f[1],f[0]));e.attr("scale",[a*s,a*s])}if(r){r.attr("position",u);var f=o.tangentAt(1);r.attr("rotation",-Math.PI/2-Math.atan2(f[1],f[0]));r.attr("scale",[a*s,a*s])}if(!i.ignore){i.attr("position",u);var c;var v;var d;var p=5*a;if(i.__position==="end"){c=[h[0]*p+u[0],h[1]*p+u[1]];v=h[0]>.8?"left":h[0]<-.8?"right":"center";d=h[1]>.8?"top":h[1]<-.8?"bottom":"middle"}else if(i.__position==="middle"){var g=s/2;var f=o.tangentAt(g);var m=[f[1],-f[0]];var y=o.pointAt(g);if(m[1]>0){m[0]=-m[0];m[1]=-m[1]}c=[y[0]+m[0]*p,y[1]+m[1]*p];v="center";d="bottom";var x=-Math.atan2(f[1],f[0]);if(u[0]<l[0]){x=Math.PI+x}i.attr("rotation",x)}else{c=[-h[0]*p+l[0],-h[1]*p+l[1]];v=h[0]>.8?"right":h[0]<-.8?"left":"center";d=h[1]>.8?"bottom":h[1]<-.8?"top":"middle"}i.attr({style:{textVerticalAlign:i.__verticalAlign||d,textAlign:i.__textAlign||v},position:c,scale:[a,a]})}}function IM(t,e,r){Or.call(this);this._createLine(t,e,r)}var TM=IM.prototype;TM.beforeUpdate=MM;TM._createLine=function(r,i,t){var e=r.hostModel;var a=r.getItemLayout(i);var n=bM(a);n.shape.percent=0;Fl(n,{shape:{percent:1}},e,i);this.add(n);var o=new ws({name:"label",lineLabelOriginalOpacity:1});this.add(o);L(xM,function(t){var e=wM(t,r,i);this.add(e);this[_M(t)]=r.getItemVisual(i,t)},this);this._updateCommonStl(r,i,t)};TM.updateData=function(a,n,t){var e=a.hostModel;var r=this.childOfName("line");var i=a.getItemLayout(n);var o={shape:{}};SM(o.shape,i);Gl(r,o,e,n);L(xM,function(t){var e=a.getItemVisual(n,t);var r=_M(t);if(this[r]!==e){this.remove(this.childOfName(t));var i=wM(t,a,n);this.add(i)}this[r]=e},this);this._updateCommonStl(a,n,t)};TM._updateCommonStl=function(t,e,r){var i=t.hostModel;var a=this.childOfName("line");var n=r&&r.lineStyle;var o=r&&r.hoverLineStyle;var s=r&&r.labelModel;var l=r&&r.hoverLabelModel;if(!r||t.hasItemOption){var u=t.getItemModel(e);n=u.getModel("lineStyle").getLineStyle();o=u.getModel("emphasis.lineStyle").getLineStyle();s=u.getModel("label");l=u.getModel("emphasis.label")}var h=t.getItemVisual(e,"color");var f=j(t.getItemVisual(e,"opacity"),n.opacity,1);a.useStyle(C({strokeNoScale:true,fill:"none",stroke:h,opacity:f},n));a.hoverStyle=o;L(xM,function(t){var e=this.childOfName(t);if(e){e.setColor(h);e.setStyle({opacity:f})}},this);var c=s.getShallow("show");var v=l.getShallow("show");var d=this.childOfName("label");var p;var g;if(c||v){p=h||"#000";g=i.getFormattedLabel(e,"normal",t.dataType);if(g==null){var m=i.getRawValue(e);g=m==null?t.getName(e):isFinite(m)?vu(m):m}}var y=c?g:null;var x=v?Y(i.getFormattedLabel(e,"emphasis",t.dataType),g):null;var _=d.style;if(y!=null||x!=null){Ll(d.style,s,{text:y},{autoColor:p});d.__textAlign=_.textAlign;d.__verticalAlign=_.textVerticalAlign;d.__position=s.get("position")||"middle"}if(x!=null){d.hoverStyle={text:x,textFill:l.getTextColor(true),fontStyle:l.getShallow("fontStyle"),fontWeight:l.getShallow("fontWeight"),fontSize:l.getShallow("fontSize"),fontFamily:l.getShallow("fontFamily")}}else{d.hoverStyle={text:null}}d.ignore=!c&&!v;Al(this)};TM.highlight=function(){this.trigger("emphasis")};TM.downplay=function(){this.trigger("normal")};TM.updateLayout=function(t,e){this.setLinePoints(t.getItemLayout(e))};TM.setLinePoints=function(t){var e=this.childOfName("line");SM(e.shape,t);e.dirty()};M(IM,Or);function AM(t){this._ctor=t||IM;this.group=new Or}var DM=AM.prototype;DM.isPersistent=function(){return true};DM.updateData=function(r){var i=this;var e=i.group;var a=i._lineData;i._lineData=r;if(!a){e.removeAll()}var n=kM(r);r.diff(a).add(function(t){CM(i,r,t,n)}).update(function(t,e){LM(i,a,r,e,t,n)}).remove(function(t){e.remove(a.getItemGraphicEl(t))}).execute()};function CM(t,e,r,i){var a=e.getItemLayout(r);if(!NM(a)){return}var n=new t._ctor(e,r,i);e.setItemGraphicEl(r,n);t.group.add(n)}function LM(t,e,r,i,a,n){var o=e.getItemGraphicEl(i);if(!NM(r.getItemLayout(a))){t.group.remove(o);return}if(!o){o=new t._ctor(r,a,n)}else{o.updateData(r,a,n)}r.setItemGraphicEl(a,o);t.group.add(o)}DM.updateLayout=function(){var r=this._lineData;if(!r){return}r.eachItemGraphicEl(function(t,e){t.updateLayout(r,e)},this)};DM.incrementalPrepareUpdate=function(t){this._seriesScope=kM(t);this._lineData=null;this.group.removeAll()};DM.incrementalUpdate=function(t,e){function r(t){if(!t.isGroup){t.incremental=t.useHoverLayer=true}}for(var i=t.start;i<t.end;i++){var a=e.getItemLayout(i);if(NM(a)){var n=new this._ctor(e,i,this._seriesScope);n.traverse(r);this.group.add(n);e.setItemGraphicEl(i,n)}}};function kM(t){var e=t.hostModel;return{lineStyle:e.getModel("lineStyle").getLineStyle(),hoverLineStyle:e.getModel("emphasis.lineStyle").getLineStyle(),labelModel:e.getModel("label"),hoverLabelModel:e.getModel("emphasis.label")}}DM.remove=function(){this._clearIncremental();this._incremental=null;this.group.removeAll()};DM._clearIncremental=function(){var t=this._incremental;if(t){t.clearDisplaybles()}};function PM(t){return isNaN(t[0])||isNaN(t[1])}function NM(t){return!PM(t[0])&&!PM(t[1])}var OM=[];var EM=[];var RM=[];var zM=qn;var BM=At;var VM=Math.abs;function GM(t,e,r){var i=t[0];var a=t[1];var n=t[2];var o=Infinity;var s;var l=r*r;var u=.1;for(var h=.1;h<=.9;h+=.1){OM[0]=zM(i[0],a[0],n[0],h);OM[1]=zM(i[1],a[1],n[1],h);var f=VM(BM(OM,e)-l);if(f<o){o=f;s=h}}for(var c=0;c<32;c++){var v=s+u;EM[0]=zM(i[0],a[0],n[0],s);EM[1]=zM(i[1],a[1],n[1],s);RM[0]=zM(i[0],a[0],n[0],v);RM[1]=zM(i[1],a[1],n[1],v);var f=BM(EM,e)-l;if(VM(f)<.01){break}var d=BM(RM,e)-l;u/=2;if(f<0){if(d>=0){s=s+u}else{s=s-u}}else{if(d>=0){s=s-u}else{s=s+u}}}return s}var FM=function(t,l){var u=[];var h=Qn;var f=[[],[],[]];var c=[[],[]];var v=[];l/=2;function d(t){var e=t.getVisual("symbolSize");if(e instanceof Array){e=(e[0]+e[1])/2}return e}t.eachEdge(function(t,e){var r=t.getLayout();var i=t.getVisual("fromSymbol");var a=t.getVisual("toSymbol");if(!r.__original){r.__original=[ht(r[0]),ht(r[1])];if(r[2]){r.__original.push(ht(r[2]))}}var n=r.__original;if(r[2]!=null){ut(f[0],n[0]);ut(f[1],n[2]);ut(f[2],n[1]);if(i&&i!=="none"){var o=d(t.node1);var s=GM(f,n[0],o*l);h(f[0][0],f[1][0],f[2][0],s,u);f[0][0]=u[3];f[1][0]=u[4];h(f[0][1],f[1][1],f[2][1],s,u);f[0][1]=u[3];f[1][1]=u[4]}if(a&&a!=="none"){var o=d(t.node2);var s=GM(f,n[1],o*l);h(f[0][0],f[1][0],f[2][0],s,u);f[1][0]=u[1];f[2][0]=u[2];h(f[0][1],f[1][1],f[2][1],s,u);f[1][1]=u[1];f[2][1]=u[2]}ut(r[0],f[0]);ut(r[1],f[2]);ut(r[2],f[1])}else{ut(c[0],n[0]);ut(c[1],n[1]);dt(v,c[1],c[0]);St(v,v);if(i&&i!=="none"){var o=d(t.node1);vt(c[0],c[0],v,o*l)}if(a&&a!=="none"){var o=d(t.node2);vt(c[1],c[1],v,-o*l)}ut(r[0],c[0]);ut(r[1],c[1])}})};var WM="__focusNodeAdjacency";var HM="__unfocusNodeAdjacency";var ZM=["itemStyle","opacity"];var UM=["lineStyle","opacity"];function XM(t,e){return t.getVisual("opacity")||t.getModel().get(e)}function YM(t,e,r){var i=t.getGraphicEl();var a=XM(t,e);if(r!=null){a==null&&(a=1);a*=r}i.downplay&&i.downplay();i.traverse(function(t){if(t.type!=="group"){var e=t.lineLabelOriginalOpacity;if(e==null||r!=null){e=a}t.setStyle("opacity",e)}})}function jM(t,e){var r=XM(t,e);var i=t.getGraphicEl();i.highlight&&i.highlight();i.traverse(function(t){if(t.type!=="group"){t.setStyle("opacity",r)}})}tp({type:"graph",init:function(t,e){var r=new sy;var i=new AM;var a=this.group;this._controller=new pw(e.getZr());this._controllerHost={target:a};a.add(r.group);a.add(i.group);this._symbolDraw=r;this._lineDraw=i;this._firstRender=true},render:function(a,t,n){var e=a.coordinateSystem;this._model=a;this._nodeScaleRatio=a.get("nodeScaleRatio");var r=this._symbolDraw;var i=this._lineDraw;var o=this.group;if(e.type==="view"){var s={position:e.position,scale:e.scale};if(this._firstRender){o.attr(s)}else{Gl(o,s,a)}}FM(a.getGraph(),this._getNodeGlobalScale(a));var l=a.getData();r.updateData(l);var u=a.getEdgeData();i.updateData(u);this._updateNodeAndLinkScale();this._updateController(a,t,n);clearTimeout(this._layoutTimeout);var h=a.forceLayout;var f=a.get("force.layoutAnimation");if(h){this._startForceLayoutIteration(h,f)}l.eachItemGraphicEl(function(t,e){var r=l.getItemModel(e);t.off("drag").off("dragend");var i=r.get("draggable");if(i){t.on("drag",function(){if(h){h.warmUp();!this._layouting&&this._startForceLayoutIteration(h,f);h.setFixed(e);l.setItemLayout(e,t.position)}},this).on("dragend",function(){if(h){h.setUnfixed(e)}},this)}t.setDraggable(i&&h);t[WM]&&t.off("mouseover",t[WM]);t[HM]&&t.off("mouseout",t[HM]);if(r.get("focusNodeAdjacency")){t.on("mouseover",t[WM]=function(){n.dispatchAction({type:"focusNodeAdjacency",seriesId:a.id,dataIndex:t.dataIndex})});t.on("mouseout",t[HM]=function(){n.dispatchAction({type:"unfocusNodeAdjacency",seriesId:a.id})})}},this);l.graph.eachEdge(function(t){var e=t.getGraphicEl();e[WM]&&e.off("mouseover",e[WM]);e[HM]&&e.off("mouseout",e[HM]);if(t.getModel().get("focusNodeAdjacency")){e.on("mouseover",e[WM]=function(){n.dispatchAction({type:"focusNodeAdjacency",seriesId:a.id,edgeDataIndex:t.dataIndex})});e.on("mouseout",e[HM]=function(){n.dispatchAction({type:"unfocusNodeAdjacency",seriesId:a.id})})}});var c=a.get("layout")==="circular"&&a.get("circular.rotateLabel");var v=l.getLayout("cx");var d=l.getLayout("cy");l.eachItemGraphicEl(function(t,e){var r=t.getSymbolPath();if(c){var i=l.getItemLayout(e);var a=Math.atan2(i[1]-d,i[0]-v);if(a<0){a=Math.PI*2+a}var n=i[0]<v;if(n){a=a-Math.PI}var o=n?"left":"right";r.setStyle({textRotation:-a,textPosition:o,textOrigin:"center"});r.hoverStyle&&(r.hoverStyle.textPosition=o)}else{r.setStyle({textRotation:0})}});this._firstRender=false},dispose:function(){this._controller&&this._controller.dispose();this._controllerHost={}},focusNodeAdjacency:function(t,e,r,i){var a=this._model.getData();var n=a.graph;var o=i.dataIndex;var s=i.edgeDataIndex;var l=n.getNodeByIndex(o);var u=n.getEdgeByIndex(s);if(!l&&!u){return}n.eachNode(function(t){YM(t,ZM,.1)});n.eachEdge(function(t){YM(t,UM,.1)});if(l){jM(l,ZM);L(l.edges,function(t){if(t.dataIndex<0){return}jM(t,UM);jM(t.node1,ZM);jM(t.node2,ZM)})}if(u){jM(u,UM);jM(u.node1,ZM);jM(u.node2,ZM)}},unfocusNodeAdjacency:function(t,e,r,i){var a=this._model.getData().graph;a.eachNode(function(t){YM(t,ZM)});a.eachEdge(function(t){YM(t,UM)})},_startForceLayoutIteration:function(t,r){var i=this;(function e(){t.step(function(t){i.updateLayout(i._model);(i._layouting=!t)&&(r?i._layoutTimeout=setTimeout(e,16):e())})})()},_updateController:function(a,t,n){var e=this._controller;var r=this._controllerHost;var o=this.group;e.setPointerChecker(function(t,e,r){var i=o.getBoundingRect();i.applyTransform(o.transform);return i.contain(e,r)&&!Aw(t,n,a)});if(a.coordinateSystem.type!=="view"){e.disable();return}e.enable(a.get("roam"));r.zoomLimit=a.get("scaleLimit");r.zoom=a.coordinateSystem.getZoom();e.off("pan").off("zoom").on("pan",function(t){Mw(r,t.dx,t.dy);n.dispatchAction({seriesId:a.id,type:"graphRoam",dx:t.dx,dy:t.dy})}).on("zoom",function(t){Iw(r,t.scale,t.originX,t.originY);n.dispatchAction({seriesId:a.id,type:"graphRoam",zoom:t.scale,originX:t.originX,originY:t.originY});this._updateNodeAndLinkScale();FM(a.getGraph(),this._getNodeGlobalScale(a));this._lineDraw.updateLayout()},this)},_updateNodeAndLinkScale:function(){var t=this._model;var e=t.getData();var r=this._getNodeGlobalScale(t);var i=[r,r];e.eachItemGraphicEl(function(t,e){t.attr("scale",i)})},_getNodeGlobalScale:function(t){var e=t.coordinateSystem;if(e.type!=="view"){return 1}var r=this._nodeScaleRatio;var i=e.scale;var a=i&&i[0]||1;var n=e.getZoom();var o=(n-1)*r+1;return o/a},updateLayout:function(t){FM(t.getGraph(),this._getNodeGlobalScale(t));this._symbolDraw.updateLayout();this._lineDraw.updateLayout()},remove:function(t,e){this._symbolDraw&&this._symbolDraw.remove();this._lineDraw&&this._lineDraw.remove()}});Zd({type:"focusNodeAdjacency",event:"focusNodeAdjacency",update:"series:focusNodeAdjacency"},function(){});Zd({type:"unfocusNodeAdjacency",event:"unfocusNodeAdjacency",update:"series:unfocusNodeAdjacency"},function(){});var qM={type:"graphRoam",event:"graphRoam",update:"none"};Zd(qM,function(i,t){t.eachComponent({mainType:"series",query:i},function(t){var e=t.coordinateSystem;var r=Rw(e,i);t.setCenter&&t.setCenter(r.center);t.setZoom&&t.setZoom(r.zoom)})});var KM=function(t){var o=t.findComponents({mainType:"legend"});if(!o||!o.length){return}t.eachSeriesByType("graph",function(t){var e=t.getCategoriesData();var r=t.getGraph();var a=r.data;var n=e.mapArray(e.getName);a.filterSelf(function(t){var e=a.getItemModel(t);var r=e.getShallow("category");if(r!=null){if(typeof r==="number"){r=n[r]}for(var i=0;i<o.length;i++){if(!o[i].isSelected(r)){return false}}}return true})},this)};var $M=function(t){var s={};t.eachSeriesByType("graph",function(a){var n=a.getCategoriesData();var i=a.getData();var o={};n.each(function(t){var e=n.getName(t);o["ec-"+e]=t;var r=n.getItemModel(t);var i=r.get("itemStyle.color")||a.getColorFromPalette(e,s);n.setItemVisual(t,"color",i)});if(n.count()){i.each(function(t){var e=i.getItemModel(t);var r=e.getShallow("category");if(r!=null){if(typeof r==="string"){r=o["ec-"+r]}if(!i.getItemVisual(t,"color",true)){i.setItemVisual(t,"color",n.getItemVisual(r,"color"))}}})}})};function JM(t){if(!(t instanceof Array)){t=[t,t]}return t}var QM=function(t){t.eachSeriesByType("graph",function(t){var s=t.getGraph();var l=t.getEdgeData();var e=JM(t.get("edgeSymbol"));var r=JM(t.get("edgeSymbolSize"));var u="lineStyle.color".split(".");var h="lineStyle.opacity".split(".");l.setVisual("fromSymbol",e&&e[0]);l.setVisual("toSymbol",e&&e[1]);l.setVisual("fromSymbolSize",r&&r[0]);l.setVisual("toSymbolSize",r&&r[1]);l.setVisual("color",t.get(u));l.setVisual("opacity",t.get(h));l.each(function(t){var e=l.getItemModel(t);var r=s.getEdgeByIndex(t);var i=JM(e.getShallow("symbol",true));var a=JM(e.getShallow("symbolSize",true));var n=e.get(u);var o=e.get(h);switch(n){case"source":n=r.node1.getVisual("color");break;case"target":n=r.node2.getVisual("color");break}i[0]&&r.setVisual("fromSymbol",i[0]);i[1]&&r.setVisual("toSymbol",i[1]);a[0]&&r.setVisual("fromSymbolSize",a[0]);a[1]&&r.setVisual("toSymbolSize",a[1]);r.setVisual("color",n);r.setVisual("opacity",o)})})};function tI(t){var e=t.coordinateSystem;if(e&&e.type!=="view"){return}var r=t.getGraph();r.eachNode(function(t){var e=t.getModel();t.setLayout([+e.get("x"),+e.get("y")])});eI(r)}function eI(t){t.eachEdge(function(t){var e=t.getModel().get("lineStyle.curveness")||0;var r=ht(t.node1.getLayout());var i=ht(t.node2.getLayout());var a=[r,i];if(+e){a.push([(r[0]+i[0])/2-(r[1]-i[1])*e,(r[1]+i[1])/2-(i[0]-r[0])*e])}t.setLayout(a)})}var rI=function(t,e){t.eachSeriesByType("graph",function(t){var e=t.get("layout");var r=t.coordinateSystem;if(r&&r.type!=="view"){var i=t.getData();var a=[];L(r.dimensions,function(t){a=a.concat(i.mapDimension(t,true))});for(var n=0;n<i.count();n++){var o=[];var s=false;for(var l=0;l<a.length;l++){var u=i.get(a[l],n);if(!isNaN(u)){s=true}o.push(u)}if(s){i.setItemLayout(n,r.dataToPoint(o))}else{i.setItemLayout(n,[NaN,NaN])}}eI(i.graph)}else if(!e||e==="none"){tI(t)}})};function iI(t){var e=t.coordinateSystem;if(e&&e.type!=="view"){return}var r=e.getBoundingRect();var i=t.getData();var a=i.graph;var n=0;var o=i.getSum("value");var s=Math.PI*2/(o||i.count());var l=r.width/2+r.x;var u=r.height/2+r.y;var h=Math.min(r.width,r.height)/2;a.eachNode(function(t){var e=t.getValue("value");n+=s*(o?e:1)/2;t.setLayout([h*Math.cos(n)+l,h*Math.sin(n)+u]);n+=s*(o?e:1)/2});i.setLayout({cx:l,cy:u});a.eachEdge(function(t){var e=t.getModel().get("lineStyle.curveness")||0;var r=ht(t.node1.getLayout());var i=ht(t.node2.getLayout());var a;var n=(r[0]+i[0])/2;var o=(r[1]+i[1])/2;if(+e){e*=3;a=[l*e+n*(1-e),u*e+o*(1-e)]}t.setLayout([r,i,a])})}var aI=function(t){t.eachSeriesByType("graph",function(t){if(t.get("layout")==="circular"){iI(t)}})};var nI=vt;function oI(v,d,t){var e=t.rect;var r=e.width;var i=e.height;var p=[e.x+r/2,e.y+i/2];var g=t.gravity==null?.1:t.gravity;for(var a=0;a<v.length;a++){var n=v[a];if(!n.p){n.p=lt(r*(Math.random()-.5)+p[0],i*(Math.random()-.5)+p[1])}n.pp=ht(n.p);n.edges=null}var m=.6;return{warmUp:function(){m=.5},setFixed:function(t){v[t].fixed=true},setUnfixed:function(t){v[t].fixed=false},step:function(t){var e=[];var r=v.length;for(var i=0;i<d.length;i++){var a=d[i];var n=a.n1;var o=a.n2;dt(e,o.p,n.p);var s=pt(e)-a.d;var l=o.w/(n.w+o.w);if(isNaN(l)){l=0}St(e,e);!n.fixed&&nI(n.p,n.p,e,l*s*m);!o.fixed&&nI(o.p,o.p,e,-(1-l)*s*m)}for(var i=0;i<r;i++){var u=v[i];if(!u.fixed){dt(e,p,u.p);nI(u.p,u.p,e,g*m)}}for(var i=0;i<r;i++){var n=v[i];for(var h=i+1;h<r;h++){var o=v[h];dt(e,o.p,n.p);var s=pt(e);if(s===0){ft(e,Math.random()-.5,Math.random()-.5);s=1}var f=(n.rep+o.rep)/s/s;!n.fixed&&nI(n.pp,n.pp,e,f);!o.fixed&&nI(o.pp,o.pp,e,-f)}}var c=[];for(var i=0;i<r;i++){var u=v[i];if(!u.fixed){dt(c,u.p,u.pp);nI(u.p,u.p,c,m);ut(u.pp,u.p)}}m=m*.992;t&&t(v,d,m<.01)}}}var sI=function(t){t.eachSeriesByType("graph",function(t){var e=t.coordinateSystem;if(e&&e.type!=="view"){return}if(t.get("layout")==="force"){var f=t.preservedPoints||{};var c=t.getGraph();var v=c.data;var r=c.edgeData;var i=t.getModel("force");var a=i.get("initLayout");if(t.preservedPoints){v.each(function(t){var e=v.getId(t);v.setItemLayout(t,f[e]||[NaN,NaN])})}else if(!a||a==="none"){tI(t)}else if(a==="circular"){iI(t)}var n=v.getDataExtent("value");var o=r.getDataExtent("value");var s=i.get("repulsion");var l=i.get("edgeLength");if(!B(s)){s=[s,s]}if(!B(l)){l=[l,l]}l=[l[1],l[0]];var u=v.mapArray("value",function(t,e){var r=v.getItemLayout(e);var i=fu(t,n,s);if(isNaN(i)){i=(s[0]+s[1])/2}return{w:i,rep:i,fixed:v.getItemModel(e).get("fixed"),p:!r||isNaN(r[0])||isNaN(r[1])?null:r}});var h=r.mapArray("value",function(t,e){var r=c.getEdgeByIndex(e);var i=fu(t,o,l);if(isNaN(i)){i=(l[0]+l[1])/2}return{n1:u[r.node1.dataIndex],n2:u[r.node2.dataIndex],d:i,curveness:r.getModel().get("lineStyle.curveness")||0}});var e=t.coordinateSystem;var d=e.getBoundingRect();var p=oI(u,h,{rect:d,gravity:i.get("gravity")});var g=p.step;p.step=function(h){for(var t=0,e=u.length;t<e;t++){if(u[t].fixed){ut(u[t].p,c.getNodeByIndex(t).getLayout())}}g(function(t,e,r){for(var i=0,a=t.length;i<a;i++){if(!t[i].fixed){c.getNodeByIndex(i).setLayout(t[i].p)}f[v.getId(i)]=t[i].p}for(var i=0,a=e.length;i<a;i++){var n=e[i];var o=c.getEdgeByIndex(i);var s=n.n1.p;var l=n.n2.p;var u=o.getLayout();u=u?u.slice():[];u[0]=u[0]||[];u[1]=u[1]||[];ut(u[0],s);ut(u[1],l);if(+n.curveness){u[2]=[(s[0]+l[0])/2-(s[1]-l[1])*n.curveness,(s[1]+l[1])/2-(l[0]-s[0])*n.curveness]}o.setLayout(u)}h&&h(r)})};t.forceLayout=p;t.preservedPoints=f;p.step()}else{t.forceLayout=null}})};function lI(t,e,r){var i=t.getBoxLayoutParams();i.aspect=r;return rh(i,{width:e.getWidth(),height:e.getHeight()})}var uI=function(t,v){var d=[];t.eachSeriesByType("graph",function(t){var e=t.get("coordinateSystem");if(!e||e==="view"){var r=t.getData();var i=r.mapArray(function(t){var e=r.getItemModel(t);return[+e.get("x"),+e.get("y")]});var a=[];var n=[];uo(i,a,n);if(n[0]-a[0]===0){n[0]+=1;a[0]-=1}if(n[1]-a[1]===0){n[1]+=1;a[1]-=1}var o=(n[0]-a[0])/(n[1]-a[1]);var s=lI(t,v,o);if(isNaN(o)){a=[s.x,s.y];n=[s.x+s.width,s.y+s.height]}var l=n[0]-a[0];var u=n[1]-a[1];var h=s.width;var f=s.height;var c=t.coordinateSystem=new Vw;c.zoomLimit=t.get("scaleLimit");c.setBoundingRect(a[0],a[1],l,u);c.setViewRect(s.x,s.y,h,f);c.setCenter(t.get("center"));c.setZoom(t.get("zoom"));d.push(c)}});return d};Wd(KM);jd(Wy("graph","circle",null));jd($M);jd(QM);Yd(rI);Yd(aI);Yd(sI);Ud("graphView",{create:uI});var hI=rc.extend({type:"series.gauge",getInitialData:function(t,e){var r=t.data||[];if(!B(r)){r=[r]}t.data=r;return u_(this,["value"])},defaultOption:{zlevel:0,z:2,center:["50%","50%"],legendHoverLink:true,radius:"75%",startAngle:225,endAngle:-45,clockwise:true,min:0,max:100,splitNumber:10,axisLine:{show:true,lineStyle:{color:[[.2,"#91c7ae"],[.8,"#63869e"],[1,"#c23531"]],width:30}},splitLine:{show:true,length:30,lineStyle:{color:"#eee",width:2,type:"solid"}},axisTick:{show:true,splitNumber:5,length:8,lineStyle:{color:"#eee",width:1,type:"solid"}},axisLabel:{show:true,distance:5,color:"auto"},pointer:{show:true,length:"80%",width:8},itemStyle:{color:"auto"},title:{show:true,offsetCenter:[0,"-40%"],color:"#333",fontSize:15},detail:{show:true,backgroundColor:"rgba(0,0,0,0)",borderWidth:0,borderColor:"#ccc",width:100,height:null,padding:[5,10],offsetCenter:[0,"40%"],color:"auto",fontSize:30}}});var fI=ts.extend({type:"echartsGaugePointer",shape:{angle:0,width:10,r:10,x:0,y:0},buildPath:function(t,e){var r=Math.cos;var i=Math.sin;var a=e.r;var n=e.width;var o=e.angle;var s=e.x-r(o)*n*(n>=a/3?1:2);var l=e.y-i(o)*n*(n>=a/3?1:2);o=e.angle-Math.PI/2;t.moveTo(s,l);t.lineTo(e.x+r(o)*n,e.y+i(o)*n);t.lineTo(e.x+r(e.angle)*a,e.y+i(e.angle)*a);t.lineTo(e.x-r(o)*n,e.y-i(o)*n);t.lineTo(s,l);return}});function cI(t,e){var r=t.get("center");var i=e.getWidth();var a=e.getHeight();var n=Math.min(i,a);var o=cu(r[0],e.getWidth());var s=cu(r[1],e.getHeight());var l=cu(t.get("radius"),n/2);return{cx:o,cy:s,r:l}}function vI(t,e){if(e){if(typeof e==="string"){t=e.replace("{value}",t!=null?t:"")}else if(typeof e==="function"){t=e(t)}}return t}var dI=Math.PI*2;var pI=gc.extend({type:"gauge",render:function(t,e,r){this.group.removeAll();var i=t.get("axisLine.lineStyle.color");var a=cI(t,r);this._renderMain(t,e,r,i,a)},dispose:function(){},_renderMain:function(t,e,r,i,a){var n=this.group;var o=t.getModel("axisLine");var s=o.getModel("lineStyle");var l=t.get("clockwise");var u=-t.get("startAngle")/180*Math.PI;var h=-t.get("endAngle")/180*Math.PI;var f=(h-u)%dI;var c=u;var v=s.get("width");for(var d=0;d<i.length;d++){var p=Math.min(Math.max(i[d][0],0),1);var h=u+f*p;var g=new Is({shape:{startAngle:c,endAngle:h,cx:a.cx,cy:a.cy,clockwise:l,r0:a.r-v,r:a.r},silent:true});g.setStyle({fill:i[d][1]});g.setStyle(s.getLineStyle(["color","borderWidth","borderColor"]));n.add(g);c=h}var m=function(t){if(t<=0){return i[0][1]}for(var e=0;e<i.length;e++){if(i[e][0]>=t&&(e===0?0:i[e-1][0])<t){return i[e][1]}}return i[e-1][1]};if(!l){var y=u;u=h;h=y}this._renderTicks(t,e,r,m,a,u,h,l);this._renderPointer(t,e,r,m,a,u,h,l);this._renderTitle(t,e,r,m,a);this._renderDetail(t,e,r,m,a)},_renderTicks:function(t,e,r,i,a,n,o,s){var l=this.group;var u=a.cx;var h=a.cy;var f=a.r;var c=+t.get("min");var v=+t.get("max");var d=t.getModel("splitLine");var p=t.getModel("axisTick");var g=t.getModel("axisLabel");var m=t.get("splitNumber");var y=p.get("splitNumber");var x=cu(d.get("length"),f);var _=cu(p.get("length"),f);var w=n;var b=(o-n)/m;var S=b/y;var M=d.getModel("lineStyle").getLineStyle();var I=p.getModel("lineStyle").getLineStyle();for(var T=0;T<=m;T++){var A=Math.cos(w);var D=Math.sin(w);if(d.get("show")){var C=new Gs({shape:{x1:A*f+u,y1:D*f+h,x2:A*(f-x)+u,y2:D*(f-x)+h},style:M,silent:true});if(M.stroke==="auto"){C.setStyle({stroke:i(T/m)})}l.add(C)}if(g.get("show")){var L=vI(vu(T/m*(v-c)+c),g.get("formatter"));var k=g.get("distance");var P=i(T/m);l.add(new ws({style:Ll({},g,{text:L,x:A*(f-x-k)+u,y:D*(f-x-k)+h,textVerticalAlign:D<-.4?"top":D>.4?"bottom":"middle",textAlign:A<-.4?"left":A>.4?"right":"center"},{autoColor:P}),silent:true}))}if(p.get("show")&&T!==m){for(var N=0;N<=y;N++){var A=Math.cos(w);var D=Math.sin(w);var O=new Gs({shape:{x1:A*f+u,y1:D*f+h,x2:A*(f-_)+u,y2:D*(f-_)+h},silent:true,style:I});if(I.stroke==="auto"){O.setStyle({stroke:i((T+N/y)/m)})}l.add(O);w+=S}w-=S}else{w+=b}}},_renderPointer:function(i,t,e,a,n,r,o,s){var l=this.group;var u=this._data;if(!i.get("pointer.show")){u&&u.eachItemGraphicEl(function(t){l.remove(t)});return}var h=[+i.get("min"),+i.get("max")];var f=[r,o];var c=i.getData();var v=c.mapDimension("value");c.diff(u).add(function(t){var e=new fI({shape:{angle:r}});Fl(e,{shape:{angle:fu(c.get(v,t),h,f,true)}},i);l.add(e);c.setItemGraphicEl(t,e)}).update(function(t,e){var r=u.getItemGraphicEl(e);Gl(r,{shape:{angle:fu(c.get(v,t),h,f,true)}},i);l.add(r);c.setItemGraphicEl(t,r)}).remove(function(t){var e=u.getItemGraphicEl(t);l.remove(e)}).execute();c.eachItemGraphicEl(function(t,e){var r=c.getItemModel(e);var i=r.getModel("pointer");t.setShape({x:n.cx,y:n.cy,width:cu(i.get("width"),n.r),r:cu(i.get("length"),n.r)});t.useStyle(r.getModel("itemStyle").getItemStyle());if(t.style.fill==="auto"){t.setStyle("fill",a(fu(c.get(v,e),h,[0,1],true)))}Al(t,r.getModel("emphasis.itemStyle").getItemStyle())});this._data=c},_renderTitle:function(t,e,r,i,a){var n=t.getData();var o=n.mapDimension("value");var s=t.getModel("title");if(s.get("show")){var l=s.get("offsetCenter");var u=a.cx+cu(l[0],a.r);var h=a.cy+cu(l[1],a.r);var f=+t.get("min");var c=+t.get("max");var v=t.getData().get(o,0);var d=i(fu(v,[f,c],[0,1],true));this.group.add(new ws({silent:true,style:Ll({},s,{x:u,y:h,text:n.getName(0),textAlign:"center",textVerticalAlign:"middle"},{autoColor:d,forceRich:true})}))}},_renderDetail:function(t,e,r,i,a){var n=t.getModel("detail");var o=+t.get("min");var s=+t.get("max");if(n.get("show")){var l=n.get("offsetCenter");var u=a.cx+cu(l[0],a.r);var h=a.cy+cu(l[1],a.r);var f=cu(n.get("width"),a.r);var c=cu(n.get("height"),a.r);var v=t.getData();var d=v.get(v.mapDimension("value"),0);var p=i(fu(d,[o,s],[0,1],true));this.group.add(new ws({silent:true,style:Ll({},n,{x:u,y:h,text:vI(d,n.get("formatter")),textWidth:isNaN(f)?null:f,textHeight:isNaN(c)?null:c,textAlign:"center",textVerticalAlign:"middle"},{autoColor:p,forceRich:true})}))}}});var gI=Qd({type:"series.funnel",init:function(t){gI.superApply(this,"init",arguments);this.legendDataProvider=function(){return this.getRawData()};this._defaultLabelLine(t)},getInitialData:function(t,e){return u_(this,["value"])},_defaultLabelLine:function(t){Qa(t,"labelLine",["show"]);var e=t.labelLine;var r=t.emphasis.labelLine;e.show=e.show&&t.label.show;r.show=r.show&&t.emphasis.label.show},getDataParams:function(t){var e=this.getData();var r=gI.superCall(this,"getDataParams",t);var i=e.mapDimension("value");var a=e.getSum(i);r.percent=!a?0:+(e.get(i,t)/a*100).toFixed(2);r.$vars.push("percent");return r},defaultOption:{zlevel:0,z:2,legendHoverLink:true,left:80,top:60,right:80,bottom:60,minSize:"0%",maxSize:"100%",sort:"descending",gap:0,funnelAlign:"center",label:{show:true,position:"outer"},labelLine:{show:true,length:20,lineStyle:{width:1,type:"solid"}},itemStyle:{borderColor:"#fff",borderWidth:1},emphasis:{label:{show:true}}}});function mI(t,e){Or.call(this);var r=new ks;var i=new Ps;var a=new ws;this.add(r);this.add(i);this.add(a);this.updateData(t,e,true);function n(){i.ignore=i.hoverIgnore;a.ignore=a.hoverIgnore}function o(){i.ignore=i.normalIgnore;a.ignore=a.normalIgnore}this.on("emphasis",n).on("normal",o).on("mouseover",n).on("mouseout",o)}var yI=mI.prototype;var xI=["itemStyle","opacity"];yI.updateData=function(t,e,r){var i=this.childAt(0);var a=t.hostModel;var n=t.getItemModel(e);var o=t.getItemLayout(e);var s=t.getItemModel(e).get(xI);s=s==null?1:s;i.useStyle({});if(r){i.setShape({points:o.points});i.setStyle({opacity:0});Fl(i,{style:{opacity:s}},a,e)}else{Gl(i,{style:{opacity:s},shape:{points:o.points}},a,e)}var l=n.getModel("itemStyle");var u=t.getItemVisual(e,"color");i.setStyle(C({lineJoin:"round",fill:u},l.getItemStyle(["opacity"])));i.hoverStyle=l.getModel("emphasis").getItemStyle();this._updateLabel(t,e);Al(this)};yI._updateLabel=function(t,e){var r=this.childAt(1);var i=this.childAt(2);var a=t.hostModel;var n=t.getItemModel(e);var o=t.getItemLayout(e);var s=o.label;var l=t.getItemVisual(e,"color");Gl(r,{shape:{points:s.linePoints||s.linePoints}},a,e);Gl(i,{style:{x:s.x,y:s.y}},a,e);i.attr({rotation:s.rotation,origin:[s.x,s.y],z2:10});var u=n.getModel("label");var h=n.getModel("emphasis.label");var f=n.getModel("labelLine");var c=n.getModel("emphasis.labelLine");var l=t.getItemVisual(e,"color");Cl(i.style,i.hoverStyle={},u,h,{labelFetcher:t.hostModel,labelDataIndex:e,defaultText:t.getName(e),autoColor:l,useInsideStyle:!!s.inside},{textAlign:s.textAlign,textVerticalAlign:s.verticalAlign});i.ignore=i.normalIgnore=!u.get("show");i.hoverIgnore=!h.get("show");r.ignore=r.normalIgnore=!f.get("show");r.hoverIgnore=!c.get("show");r.setStyle({stroke:l});r.setStyle(f.getModel("lineStyle").getLineStyle());r.hoverStyle=c.getModel("lineStyle").getLineStyle()};M(mI,Or);var _I=gc.extend({type:"funnel",render:function(t,e,r){var i=t.getData();var a=this._data;var n=this.group;i.diff(a).add(function(t){var e=new mI(i,t);i.setItemGraphicEl(t,e);n.add(e)}).update(function(t,e){var r=a.getItemGraphicEl(e);r.updateData(i,t);n.add(r);i.setItemGraphicEl(t,r)}).remove(function(t){var e=a.getItemGraphicEl(t);n.remove(e)}).execute();this._data=i},remove:function(){this.group.removeAll();this._data=null},dispose:function(){}});function wI(t,e){return rh(t.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()})}function bI(t,e){var r=t.mapDimension("value");var i=t.mapArray(r,function(t){return t});var a=[];var n=e==="ascending";for(var o=0,s=t.count();o<s;o++){a[o]=o}if(typeof e==="function"){a.sort(e)}else if(e!=="none"){a.sort(function(t,e){return n?i[t]-i[e]:i[e]-i[t]})}return a}function SI(m){m.each(function(t){var e=m.getItemModel(t);var r=e.getModel("label");var i=r.get("position");var a=e.getModel("labelLine");var n=m.getItemLayout(t);var o=n.points;var s=i==="inner"||i==="inside"||i==="center";var l;var u;var h;var f;if(s){u=(o[0][0]+o[1][0]+o[2][0]+o[3][0])/4;h=(o[0][1]+o[1][1]+o[2][1]+o[3][1])/4;l="center";f=[[u,h],[u,h]]}else{var c;var v;var d;var p=a.get("length");if(i==="left"){c=(o[3][0]+o[0][0])/2;v=(o[3][1]+o[0][1])/2;d=c-p;u=d-5;l="right"}else{c=(o[1][0]+o[2][0])/2;v=(o[1][1]+o[2][1])/2;d=c+p;u=d+5;l="left"}var g=v;f=[[c,v],[d,g]];h=g}n.label={linePoints:f,x:u,y:h,verticalAlign:"middle",textAlign:l,inside:s}})}var MI=function(t,b,e){t.eachSeriesByType("funnel",function(t){var n=t.getData();var o=n.mapDimension("value");var e=t.get("sort");var s=wI(t,b);var r=bI(n,e);var l=[cu(t.get("minSize"),s.width),cu(t.get("maxSize"),s.width)];var i=n.getDataExtent(o);var u=t.get("min");var h=t.get("max");if(u==null){u=Math.min(i[0],0)}if(h==null){h=i[1]}var f=t.get("funnelAlign");var a=t.get("gap");var c=(s.height-a*(n.count()-1))/n.count();var v=s.y;var d=function(t,e){var r=n.get(o,t)||0;var i=fu(r,[u,h],l,true);var a;switch(f){case"left":a=s.x;break;case"center":a=s.x+(s.width-i)/2;break;case"right":a=s.x+s.width-i;break}return[[a,e],[a+i,e]]};if(e==="ascending"){c=-c;a=-a;v+=s.height;r=r.reverse()}for(var p=0;p<r.length;p++){var g=r[p];var m=r[p+1];var y=n.getItemModel(g);var x=y.get("itemStyle.height");if(x==null){x=c}else{x=cu(x,s.height);if(e==="ascending"){x=-x}}var _=d(g,v);var w=d(m,v+x);v+=x+a;n.setItemLayout(g,{points:_.concat(w.slice().reverse())})}SI(n)})};jd(y_("funnel"));Yd(MI);Wd(T_("funnel"));var II=function(t){TI(t);AI(t)};function TI(t){if(t.parallel){return}var e=false;L(t.series,function(t){if(t&&t.type==="parallel"){e=true}});if(e){t.parallel=[{}]}}function AI(i){var t=Ja(i.parallelAxis);L(t,function(t){if(!F(t)){return}var e=t.parallelIndex||0;var r=Ja(i.parallel)[e];if(r&&r.parallelAxisDefault){m(t,r.parallelAxisDefault,false)}})}var DI=function(t,e,r,i,a){Fm.call(this,t,e,r);this.type=i||"value";this.axisIndex=a};DI.prototype={constructor:DI,model:null,isHorizontal:function(){return this.coordinateSystem.getModel().get("layout")!=="horizontal"}};M(DI,Fm);var CI=function(t,e,r,i,a,n){e[0]=kI(e[0],r);e[1]=kI(e[1],r);t=t||0;var o=r[1]-r[0];if(a!=null){a=kI(a,[0,o])}if(n!=null){n=Math.max(n,a!=null?a:0)}if(i==="all"){a=n=Math.abs(e[1]-e[0]);i=0}var s=LI(e,i);e[i]+=t;var l=a||0;var u=r.slice();s.sign<0?u[0]+=l:u[1]-=l;e[i]=kI(e[i],u);var h=LI(e,i);if(a!=null&&(h.sign!==s.sign||h.span<a)){e[1-i]=e[i]+s.sign*a}var h=LI(e,i);if(n!=null&&h.span>n){e[1-i]=e[i]+h.sign*n}return e};function LI(t,e){var r=t[e]-t[1-e];return{span:Math.abs(r),sign:r>0?-1:r<0?1:e?-1:1}}function kI(t,e){return Math.min(e[1],Math.max(e[0],t))}var PI=L;var NI=Math.min;var OI=Math.max;var EI=Math.floor;var RI=Math.ceil;var zI=vu;var BI=Math.PI;function VI(t,e,r){this._axesMap=it();this._axesLayout={};this.dimensions=t.dimensions;this._rect;this._model=t;this._init(t,e,r)}VI.prototype={type:"parallel",constructor:VI,_init:function(t,o,e){var r=t.dimensions;var s=t.parallelAxisIndex;PI(r,function(t,e){var r=s[e];var i=o.getComponent("parallelAxis",r);var a=this._axesMap.set(t,new DI(t,jg(i),[0,0],i.get("type"),r));var n=a.type==="category";a.onBand=n&&i.get("boundaryGap");a.inverse=i.get("inverse");i.axis=a;a.model=i;a.coordinateSystem=i.coordinateSystem=this},this)},update:function(t,e){this._updateAxesFromSeries(this._model,t)},containPoint:function(t){var e=this._makeLayoutInfo();var r=e.axisBase;var i=e.layoutBase;var a=e.pixelDimIndex;var n=t[1-a];var o=t[a];return n>=r&&n<=r+e.axisLength&&o>=i&&o<=i+e.layoutLength},getModel:function(){return this._model},_updateAxesFromSeries:function(e,i){i.eachSeries(function(t){if(!e.contains(t,i)){return}var r=t.getData();PI(this.dimensions,function(t){var e=this._axesMap.get(t);e.scale.unionExtentFromData(r,r.mapDimension(t));Yg(e.scale,e.model)},this)},this)},resize:function(t,e){this._rect=rh(t.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()});this._layoutAxes()},getRect:function(){return this._rect},_makeLayoutInfo:function(){var t=this._model;var e=this._rect;var r=["x","y"];var i=["width","height"];var a=t.get("layout");var n=a==="horizontal"?0:1;var o=e[i[n]];var s=[0,o];var l=this.dimensions.length;var u=GI(t.get("axisExpandWidth"),s);var h=GI(t.get("axisExpandCount")||0,[0,l]);var f=t.get("axisExpandable")&&l>3&&l>h&&h>1&&u>0&&o>0;var c=t.get("axisExpandWindow");var v;if(!c){v=GI(u*(h-1),s);var d=t.get("axisExpandCenter")||EI(l/2);c=[u*d-v/2];c[1]=c[0]+v}else{v=GI(c[1]-c[0],s);c[1]=c[0]+v}var p=(o-v)/(l-h);p<3&&(p=0);var g=[EI(zI(c[0]/u,1))+1,RI(zI(c[1]/u,1))-1];var m=p/u*c[0];return{layout:a,pixelDimIndex:n,layoutBase:e[r[n]],layoutLength:o,axisBase:e[r[1-n]],axisLength:e[i[1-n]],axisExpandable:f,axisExpandWidth:u,axisCollapseWidth:p,axisExpandWindow:c,axisCount:l,winInnerIndices:g,axisExpandWindow0Pos:m}},_layoutAxes:function(){var l=this._rect;var t=this._axesMap;var e=this.dimensions;var u=this._makeLayoutInfo();var h=u.layout;t.each(function(t){var e=[0,u.axisLength];var r=t.inverse?1:0;t.setExtent(e[r],e[1-r])});PI(e,function(t,e){var r=(u.axisExpandable?WI:FI)(e,u);var i={horizontal:{x:r.position,y:u.axisLength},vertical:{x:0,y:r.position}};var a={horizontal:BI/2,vertical:0};var n=[i[h].x+l.x,i[h].y+l.y];var o=a[h];var s=le();ve(s,s,o);ce(s,s,n);this._axesLayout[t]={position:n,rotation:o,transform:s,axisNameAvailableWidth:r.axisNameAvailableWidth,axisLabelShow:r.axisLabelShow,nameTruncateMaxWidth:r.nameTruncateMaxWidth,tickDirection:1,labelDirection:1}},this)},getAxis:function(t){return this._axesMap.get(t)},dataToPoint:function(t,e){return this.axisCoordToPoint(this._axesMap.get(e).dataToCoord(t),e)},eachActiveState:function(e,t,r,i){r==null&&(r=0);i==null&&(i=e.count());var a=this._axesMap;var n=this.dimensions;var o=[];var s=[];L(n,function(t){o.push(e.mapDimension(t));s.push(a.get(t).model)});var l=this.hasAxisBrushed();for(var u=r;u<i;u++){var h;if(!l){h="normal"}else{h="active";var f=e.getValues(o,u);for(var c=0,v=n.length;c<v;c++){var d=s[c].getActiveState(f[c]);if(d==="inactive"){h="inactive";break}}}t(h,u)}},hasAxisBrushed:function(){var t=this.dimensions;var e=this._axesMap;var r=false;for(var i=0,a=t.length;i<a;i++){if(e.get(t[i]).model.getActiveState()!=="normal"){r=true}}return r},axisCoordToPoint:function(t,e){var r=this._axesLayout[e];return Hl([t,0],r.transform)},getAxisLayout:function(t){return P(this._axesLayout[t])},getSlidedAxisExpandWindow:function(t){var e=this._makeLayoutInfo();var r=e.pixelDimIndex;var i=e.axisExpandWindow.slice();var a=i[1]-i[0];var n=[0,e.axisExpandWidth*(e.axisCount-1)];if(!this.containPoint(t)){return{behavior:"none",axisExpandWindow:i}}var o=t[r]-e.layoutBase-e.axisExpandWindow0Pos;var s;var l="slide";var u=e.axisCollapseWidth;var h=this._model.get("axisExpandSlideTriggerArea");var f=h[0]!=null;if(u){if(f&&u&&o<a*h[0]){l="jump";s=o-a*h[2]}else if(f&&u&&o>a*(1-h[0])){l="jump";s=o-a*(1-h[2])}else{(s=o-a*h[1])>=0&&(s=o-a*(1-h[1]))<=0&&(s=0)}s*=e.axisExpandWidth/u;s?CI(s,i,n,"all"):l="none"}else{var a=i[1]-i[0];var c=n[1]*o/a;i=[OI(0,c-a/2)];i[1]=NI(n[1],i[0]+a);i[0]=i[1]-a}return{axisExpandWindow:i,behavior:l}}};function GI(t,e){return NI(OI(t,e[0]),e[1])}function FI(t,e){var r=e.layoutLength/(e.axisCount-1);return{position:r*t,axisNameAvailableWidth:r,axisLabelShow:true}}function WI(t,e){var r=e.layoutLength;var i=e.axisExpandWidth;var a=e.axisCount;var n=e.axisCollapseWidth;var o=e.winInnerIndices;var s;var l=n;var u=false;var h;if(t<o[0]){s=t*n;h=n}else if(t<=o[1]){s=e.axisExpandWindow0Pos+t*i-e.axisExpandWindow[0];l=i;u=true}else{s=r-(a-1-t)*n;h=n}return{position:s,axisNameAvailableWidth:l,axisLabelShow:u,nameTruncateMaxWidth:h}}function HI(i,a){var n=[];i.eachComponent("parallel",function(t,e){var r=new VI(t,i,a);r.name="parallel_"+e;r.resize(t,a);t.coordinateSystem=r;r.model=t;n.push(r)});i.eachSeries(function(t){if(t.get("coordinateSystem")==="parallel"){var e=i.queryComponents({mainType:"parallel",index:t.get("parallelIndex"),id:t.get("parallelId")})[0];t.coordinateSystem=e.coordinateSystem}});return n}ef.register("parallel",{create:HI});var ZI=hh.extend({type:"baseParallelAxis",axis:null,activeIntervals:[],getAreaSelectStyle:function(){return An([["fill","color"],["lineWidth","borderWidth"],["stroke","borderColor"],["width","width"],["opacity","opacity"]])(this.getModel("areaSelectStyle"))},setActiveIntervals:function(t){var e=this.activeIntervals=P(t);if(e){for(var r=e.length-1;r>=0;r--){du(e[r])}}},getActiveState:function(t){var e=this.activeIntervals;if(!e.length){return"normal"}if(t==null||isNaN(t)){return"inactive"}if(e.length===1){var r=e[0];if(r[0]<=t&&t<=r[1]){return"active"}}else{for(var i=0,a=e.length;i<a;i++){if(e[i][0]<=t&&t<=e[i][1]){return"active"}}}return"inactive"}});var UI={type:"value",dim:null,areaSelectStyle:{width:20,borderWidth:1,borderColor:"rgba(160,197,232)",color:"rgba(160,197,232)",opacity:.3},realtime:true,z:10};m(ZI.prototype,rm);function XI(t,e){return e.type||(e.data?"category":"value")}tx("parallel",ZI,XI,UI);hh.extend({type:"parallel",dependencies:["parallelAxis"],coordinateSystem:null,dimensions:null,parallelAxisIndex:null,layoutMode:"box",defaultOption:{zlevel:0,z:0,left:80,top:60,right:80,bottom:60,layout:"horizontal",axisExpandable:false,axisExpandCenter:null,axisExpandCount:0,axisExpandWidth:50,axisExpandRate:17,axisExpandDebounce:50,axisExpandSlideTriggerArea:[-.15,.05,.4],axisExpandTriggerOn:"click",parallelAxisDefault:null},init:function(){hh.prototype.init.apply(this,arguments);this.mergeOption({})},mergeOption:function(t){var e=this.option;t&&m(e,t,true);this._initDimensions()},contains:function(t,e){var r=t.get("parallelIndex");return r!=null&&e.getComponent("parallel",r)===this},setAxisExpand:function(e){L(["axisExpandable","axisExpandCenter","axisExpandCount","axisExpandWidth","axisExpandWindow"],function(t){if(e.hasOwnProperty(t)){this.option[t]=e[t]}},this)},_initDimensions:function(){var e=this.dimensions=[];var r=this.parallelAxisIndex=[];var t=O(this.dependentModels.parallelAxis,function(t){return(t.get("parallelIndex")||0)===this.componentIndex},this);L(t,function(t){e.push("dim"+t.get("dim"));r.push(t.componentIndex)})}});var YI={type:"axisAreaSelect",event:"axisAreaSelected"};Zd(YI,function(e,t){t.eachComponent({mainType:"parallelAxis",query:e},function(t){t.axis.model.setActiveIntervals(e.intervals)})});Zd("parallelAxisExpand",function(e,t){t.eachComponent({mainType:"parallel",query:e},function(t){t.setAxisExpand(e)})});var jI=z;var qI=L;var KI=A;var $I=Math.min;var JI=Math.max;var QI=Math.pow;var tT=1e4;var eT=6;var rT=6;var iT="globalPan";var aT={w:[0,0],e:[0,1],n:[1,0],s:[1,1]};var nT={w:"ew",e:"ew",n:"ns",s:"ns",ne:"nesw",sw:"nesw",nw:"nwse",se:"nwse"};var oT={brushStyle:{lineWidth:2,stroke:"rgba(0,0,0,0.3)",fill:"rgba(0,0,0,0.1)"},transformable:true,brushMode:"single",removeOnClick:false};var sT=0;function lT(t){if(D){$(t)}zt.call(this);this._zr=t;this.group=new Or;this._brushType;this._brushOption;this._panels;this._track=[];this._dragging;this._covers=[];this._creatingCover;this._creatingPanel;this._enableGlobalPan;if(D){this._mounted}this._uid="brushController_"+sT++;this._handlers={};qI(FT,function(t,e){this._handlers[e]=R(t,this)},this)}lT.prototype={constructor:lT,enableBrush:function(t){if(D){$(this._mounted)}this._brushType&&hT(this);t.brushType&&uT(this,t);return this},setPanels:function(t){if(t&&t.length){var e=this._panels={};L(t,function(t){e[t.panelId]=P(t)})}else{this._panels=null}return this},mount:function(t){t=t||{};if(D){this._mounted=true}this._enableGlobalPan=t.enableGlobalPan;var e=this.group;this._zr.add(e);e.attr({position:t.position||[0,0],rotation:t.rotation||0,scale:t.scale||[1,1]});this._transform=e.getLocalTransform();return this},eachCover:function(t,e){qI(this._covers,t,e)},updateCovers:function(a){if(D){$(this._mounted)}a=A(a,function(t){return m(P(oT),t,true)});var r="\0-brush-index-";var n=this._covers;var o=this._covers=[];var s=this;var l=this._creatingCover;new op(n,a,t,i).add(e).update(e).remove(u).execute();return this;function i(t,e){return(t.id!=null?t.id:r+e)+"-"+t.brushType}function t(t,e){return i(t.__brushOption,e)}function e(t,e){var r=a[t];if(e!=null&&n[e]===l){o[t]=n[e]}else{var i=o[t]=e!=null?(n[e].__brushOption=r,n[e]):cT(s,fT(s,r));pT(s,i)}}function u(t){if(n[t]!==l){s.group.remove(n[t])}}},unmount:function(){if(D){if(!this._mounted){return}}this.enableBrush(false);xT(this);this._zr.remove(this.group);if(D){this._mounted=false}return this},dispose:function(){this.unmount();this.off()}};I(lT,zt);function uT(t,e){var r=t._zr;if(!t._enableGlobalPan){fw(r,iT,t._uid)}qI(t._handlers,function(t,e){r.on(e,t)});t._brushType=e.brushType;t._brushOption=m(P(oT),e,true)}function hT(t){var r=t._zr;cw(r,iT,t._uid);qI(t._handlers,function(t,e){r.off(e,t)});t._brushType=t._brushOption=null}function fT(t,e){var r=HT[e.brushType].createCover(t,e);r.__brushOption=e;dT(r,e);t.group.add(r);return r}function cT(t,e){var r=gT(e);if(r.endCreating){r.endCreating(t,e);dT(e,e.__brushOption)}return e}function vT(t,e){var r=e.__brushOption;gT(e).updateCoverShape(t,e,r.range,r)}function dT(t,e){var r=e.z;r==null&&(r=tT);t.traverse(function(t){t.z=r;t.z2=r})}function pT(t,e){gT(e).updateCommon(t,e);vT(t,e)}function gT(t){return HT[t.__brushOption.brushType]}function mT(t,e,r){var i=t._panels;if(!i){return true}var a;var n=t._transform;qI(i,function(t){t.isTargetByCursor(e,r,n)&&(a=t)});return a}function yT(t,e){var r=t._panels;if(!r){return true}var i=e.__brushOption.panelId;return i!=null?r[i]:true}function xT(e){var t=e._covers;var r=t.length;qI(t,function(t){e.group.remove(t)},e);t.length=0;return!!r}function _T(t,e){var r=KI(t._covers,function(t){var e=t.__brushOption;var r=P(e.range);return{brushType:e.brushType,panelId:e.panelId,range:r}});t.trigger("brush",r,{isEnd:!!e.isEnd,removeOnClick:!!e.removeOnClick})}function wT(t){var e=t._track;if(!e.length){return false}var r=e[e.length-1];var i=e[0];var a=r[0]-i[0];var n=r[1]-i[1];var o=QI(a*a+n*n,.5);return o>eT}function bT(t){var e=t.length-1;e<0&&(e=0);return[t[0],t[e]]}function ST(e,r,t,i){var a=new Or;a.add(new Bs({name:"main",style:AT(t),silent:true,draggable:true,cursor:"move",drift:jI(e,r,a,"nswe"),ondragend:jI(_T,r,{isEnd:true})}));qI(i,function(t){a.add(new Bs({name:t,style:{opacity:0},draggable:true,silent:true,invisible:true,drift:jI(e,r,a,t),ondragend:jI(_T,r,{isEnd:true})}))});return a}function MT(t,e,r,i){var a=i.brushStyle.lineWidth||0;var n=JI(a,rT);var o=r[0][0];var s=r[1][0];var l=o-a/2;var u=s-a/2;var h=r[0][1];var f=r[1][1];var c=h-n+a/2;var v=f-n+a/2;var d=h-o;var p=f-s;var g=d+a;var m=p+a;TT(t,e,"main",o,s,d,p);if(i.transformable){TT(t,e,"w",l,u,n,m);TT(t,e,"e",c,u,n,m);TT(t,e,"n",l,u,g,n);TT(t,e,"s",l,v,g,n);TT(t,e,"nw",l,u,n,n);TT(t,e,"ne",c,u,n,n);TT(t,e,"sw",l,v,n,n);TT(t,e,"se",c,v,n,n)}}function IT(i,a){var t=a.__brushOption;var n=t.transformable;var e=a.childAt(0);e.useStyle(AT(t));e.attr({silent:!n,cursor:n?"move":"default"});qI(["w","e","n","s","se","sw","ne","nw"],function(t){var e=a.childOfName(t);var r=LT(i,t);e&&e.attr({silent:!n,invisible:!n,cursor:n?nT[r]+"-resize":null})})}function TT(t,e,r,i,a,n,o){var s=e.childOfName(r);s&&s.setShape(ET(OT(t,e,[[i,a],[i+n,a+o]])))}function AT(t){return C({strokeNoScale:true},t.brushStyle)}function DT(t,e,r,i){var a=[$I(t,r),$I(e,i)];var n=[JI(t,r),JI(e,i)];return[[a[0],n[0]],[a[1],n[1]]]}function CT(t){return Wl(t.group)}function LT(t,e){if(e.length>1){e=e.split("");var r=[LT(t,e[0]),LT(t,e[1])];(r[0]==="e"||r[0]==="w")&&r.reverse();return r.join("")}else{var i={w:"left",e:"right",n:"top",s:"bottom"};var a={left:"w",right:"e",top:"n",bottom:"s"};var r=Zl(i[e],CT(t));return a[r]}}function kT(t,e,r,i,a,n,o,s){var l=i.__brushOption;var u=t(l.range);var h=NT(r,n,o);qI(a.split(""),function(t){var e=aT[t];u[e[0]][e[1]]+=h[e[0]]});l.range=e(DT(u[0][0],u[1][0],u[0][1],u[1][1]));pT(r,i);_T(r,{isEnd:false})}function PT(t,e,r,i,a){var n=e.__brushOption.range;var o=NT(t,r,i);qI(n,function(t){t[0]+=o[0];t[1]+=o[1]});pT(t,e);_T(t,{isEnd:false})}function NT(t,e,r){var i=t.group;var a=i.transformCoordToLocal(e,r);var n=i.transformCoordToLocal(0,0);return[a[0]-n[0],a[1]-n[1]]}function OT(t,e,r){var i=yT(t,e);return i&&i!==true?i.clipPath(r,t._transform):P(r)}function ET(t){var e=$I(t[0][0],t[1][0]);var r=$I(t[0][1],t[1][1]);var i=JI(t[0][0],t[1][0]);var a=JI(t[0][1],t[1][1]);return{x:e,y:r,width:i-e,height:a-r}}function RT(t,e,r){if(!t._brushType){return}var i=t._zr;var a=t._covers;var n=mT(t,e,r);if(!t._dragging){for(var o=0;o<a.length;o++){var s=a[o].__brushOption;if(n&&(n===true||s.panelId===n.panelId)&&HT[s.brushType].contain(a[o],r[0],r[1])){return}}}n&&i.setCursorStyle("crosshair")}function zT(t){var e=t.event;e.preventDefault&&e.preventDefault()}function BT(t,e,r){return t.childOfName("main").contain(e,r)}function VT(t,e,r,i){var a=t._creatingCover;var n=t._creatingPanel;var o=t._brushOption;var s;t._track.push(r.slice());if(wT(t)||a){if(n&&!a){o.brushMode==="single"&&xT(t);var l=P(o);l.brushType=GT(l.brushType,n);l.panelId=n===true?null:n.panelId;a=t._creatingCover=fT(t,l);t._covers.push(a)}if(a){var u=HT[GT(t._brushType,n)];var h=a.__brushOption;h.range=u.getCreatingRange(OT(t,a,t._track));if(i){cT(t,a);u.updateCommon(t,a)}vT(t,a);s={isEnd:i}}}else if(i&&o.brushMode==="single"&&o.removeOnClick){if(mT(t,e,r)&&xT(t)){s={isEnd:i,removeOnClick:true}}}return s}function GT(t,e){if(t==="auto"){if(D){$(e&&e.defaultBrushType,'MUST have defaultBrushType when brushType is "atuo"')}return e.defaultBrushType}return t}var FT={mousedown:function(t){if(this._dragging){WT.call(this,t)}else if(!t.target||!t.target.draggable){zT(t);var e=this.group.transformCoordToLocal(t.offsetX,t.offsetY);this._creatingCover=null;var r=this._creatingPanel=mT(this,t,e);if(r){this._dragging=true;this._track=[e.slice()]}}},mousemove:function(t){var e=this.group.transformCoordToLocal(t.offsetX,t.offsetY);RT(this,t,e);if(this._dragging){zT(t);var r=VT(this,t,e,false);r&&_T(this,r)}},mouseup:WT};function WT(t){if(this._dragging){zT(t);var e=this.group.transformCoordToLocal(t.offsetX,t.offsetY);var r=VT(this,t,e,true);this._dragging=false;this._track=[];this._creatingCover=null;r&&_T(this,r)}}var HT={lineX:ZT(0),lineY:ZT(1),rect:{createCover:function(t,e){return ST(jI(kT,function(t){return t},function(t){return t}),t,e,["w","e","n","s","se","sw","ne","nw"])},getCreatingRange:function(t){var e=bT(t);return DT(e[1][0],e[1][1],e[0][0],e[0][1])},updateCoverShape:function(t,e,r,i){MT(t,e,r,i)},updateCommon:IT,contain:BT},polygon:{createCover:function(t,e){var r=new Or;r.add(new Ps({name:"main",style:AT(e),silent:true}));return r},getCreatingRange:function(t){return t},endCreating:function(t,e){e.remove(e.childAt(0));e.add(new ks({name:"main",draggable:true,drift:jI(PT,t,e),ondragend:jI(_T,t,{isEnd:true})}))},updateCoverShape:function(t,e,r,i){e.childAt(0).setShape({points:OT(t,e,r)})},updateCommon:IT,contain:BT}};function ZT(l){return{createCover:function(t,e){return ST(jI(kT,function(t){var e=[t,[0,100]];l&&e.reverse();return e},function(t){return t[l]}),t,e,[["w","e"],["n","s"]][l])},getCreatingRange:function(t){var e=bT(t);var r=$I(e[0][l],e[1][l]);var i=JI(e[0][l],e[1][l]);return[r,i]},updateCoverShape:function(t,e,r,i){var a;var n=yT(t,e);if(n!==true&&n.getLinearBrushOtherExtent){a=n.getLinearBrushOtherExtent(l,t._transform)}else{var o=t._zr;a=[0,[o.getWidth(),o.getHeight()][1-l]]}var s=[r,a];l&&s.reverse();MT(t,e,s,i)},updateCommon:IT,contain:BT}}function UT(r){r=jT(r);return function(t,e){return Xl(t,r)}}function XT(a,n){a=jT(a);return function(t){var e=n!=null?n:t;var r=e?a.width:a.height;var i=e?a.x:a.y;return[i,i+(r||0)]}}function YT(i,a,n){i=jT(i);return function(t,e,r){return i.contain(e[0],e[1])&&!Aw(t,a,n)}}function jT(t){return Nr.create(t)}var qT=["axisLine","axisTickLabel","axisName"];var KT=Jd({type:"parallelAxis",init:function(t,e){KT.superApply(this,"init",arguments);(this._brushController=new lT(e.getZr())).on("brush",R(this._onBrush,this))},render:function(t,e,r,i){if($T(t,e,i)){return}this.axisModel=t;this.api=r;this.group.removeAll();var a=this._axisGroup;this._axisGroup=new Or;this.group.add(this._axisGroup);if(!t.get("show")){return}var n=QT(t,e);var o=n.coordinateSystem;var s=t.getAreaSelectStyle();var l=s.width;var u=t.axis.dim;var h=o.getAxisLayout(u);var f=N({strokeContainThreshold:l},h);var c=new px(t,f);L(qT,c.add,c);this._axisGroup.add(c.getGroup());this._refreshBrushController(f,s,t,n,l,r);var v=i&&i.animation===false?null:t;Ul(a,this._axisGroup,v)},_refreshBrushController:function(t,e,r,i,a,n){var o=r.axis.getExtent();var s=o[1]-o[0];var l=Math.min(30,Math.abs(s)*.1);var u=Nr.create({x:o[0],y:-a/2,width:s,height:a});u.x-=l;u.width+=2*l;this._brushController.mount({enableGlobalPan:true,rotation:t.rotation,position:t.position}).setPanels([{panelId:"pl",clipPath:UT(u),isTargetByCursor:YT(u,n,i),getLinearBrushOtherExtent:XT(u,0)}]).enableBrush({brushType:"lineX",brushStyle:e,removeOnClick:true}).updateCovers(JT(r))},_onBrush:function(t,e){var r=this.axisModel;var i=r.axis;var a=A(t,function(t){return[i.coordToData(t.range[0],true),i.coordToData(t.range[1],true)]});if(!r.option.realtime===e.isEnd||e.removeOnClick){this.api.dispatchAction({type:"axisAreaSelect",parallelAxisId:r.id,intervals:a})}},dispose:function(){this._brushController.dispose()}});function $T(t,e,r){return r&&r.type==="axisAreaSelect"&&e.findComponents({mainType:"parallelAxis",query:r})[0]===t}function JT(t){var e=t.axis;return A(t.activeIntervals,function(t){return{brushType:"lineX",panelId:"pl",range:[e.dataToCoord(t[0],true),e.dataToCoord(t[1],true)]}})}function QT(t,e){return e.getComponent("parallel",t.get("parallelIndex"))}var tA=5;Jd({type:"parallel",render:function(t,e,r){this._model=t;this._api=r;if(!this._handlers){this._handlers={};L(eA,function(t,e){r.getZr().on(e,this._handlers[e]=R(t,this))},this)}Ac(this,"_throttledDispatchExpand",t.get("axisExpandRate"),"fixRate")},dispose:function(t,r){L(this._handlers,function(t,e){r.getZr().off(e,t)});this._handlers=null},_throttledDispatchExpand:function(t){this._dispatchExpand(t)},_dispatchExpand:function(t){t&&this._api.dispatchAction(N({type:"parallelAxisExpand"},t))}});var eA={mousedown:function(t){if(rA(this,"click")){this._mouseDownPoint=[t.offsetX,t.offsetY]}},mouseup:function(t){var e=this._mouseDownPoint;if(rA(this,"click")&&e){var r=[t.offsetX,t.offsetY];var i=Math.pow(e[0]-r[0],2)+Math.pow(e[1]-r[1],2);if(i>tA){return}var a=this._model.coordinateSystem.getSlidedAxisExpandWindow([t.offsetX,t.offsetY]);a.behavior!=="none"&&this._dispatchExpand({axisExpandWindow:a.axisExpandWindow})}this._mouseDownPoint=null},mousemove:function(t){if(this._mouseDownPoint||!rA(this,"mousemove")){return}var e=this._model;var r=e.coordinateSystem.getSlidedAxisExpandWindow([t.offsetX,t.offsetY]);var i=r.behavior;i==="jump"&&this._throttledDispatchExpand.debounceNextCall(e.get("axisExpandDebounce"));this._throttledDispatchExpand(i==="none"?null:{axisExpandWindow:r.axisExpandWindow,animation:i==="jump"?null:false})}};function rA(t,e){var r=t._model;return r.get("axisExpandable")&&r.get("axisExpandTriggerOn")===e}Fd(II);rc.extend({type:"series.parallel",dependencies:["parallel"],visualColorAccessPath:"lineStyle.color",getInitialData:function(t,e){var r=this.getSource();iA(r,this);return Xp(r,this)},getRawIndicesByActiveState:function(r){var t=this.coordinateSystem;var i=this.getData();var a=[];t.eachActiveState(i,function(t,e){if(r===t){a.push(i.getRawIndex(e))}});return a},defaultOption:{zlevel:0,z:2,coordinateSystem:"parallel",parallelIndex:0,label:{show:false},inactiveOpacity:.05,activeOpacity:1,lineStyle:{width:1,opacity:.45,type:"solid"},emphasis:{label:{show:false}},progressive:500,smooth:false,animationEasing:"linear"}});function iA(t,e){if(t.encodeDefine){return}var r=e.ecModel.getComponent("parallel",e.get("parallelIndex"));if(!r){return}var i=t.encodeDefine=it();L(r.dimensions,function(t){var e=aA(t);i.set(t,e)})}function aA(t){return+t.replace("dim","")}var nA=.3;var oA=gc.extend({type:"parallel",init:function(){this._dataGroup=new Or;this.group.add(this._dataGroup);this._data;this._initialized},render:function(n,t,e,o){var r=this._dataGroup;var s=n.getData();var l=this._data;var u=n.coordinateSystem;var h=u.dimensions;var f=hA(n);s.diff(l).add(i).update(a).remove(c).execute();function i(t){var e=uA(s,r,t,h,u);fA(e,s,t,f)}function a(t,e){var r=l.getItemGraphicEl(e);var i=lA(s,t,h,u);s.setItemGraphicEl(t,r);var a=o&&o.animation===false?null:n;Gl(r,{shape:{points:i}},a,t);fA(r,s,t,f)}function c(t){var e=l.getItemGraphicEl(t);r.remove(e)}if(!this._initialized){this._initialized=true;var v=sA(u,n,function(){setTimeout(function(){r.removeClipPath()})});r.setClipPath(v)}this._data=s},incrementalPrepareRender:function(t,e,r){this._initialized=true;this._data=null;this._dataGroup.removeAll()},incrementalRender:function(t,e,r){var i=e.getData();var a=e.coordinateSystem;var n=a.dimensions;var o=hA(e);for(var s=t.start;s<t.end;s++){var l=uA(i,this._dataGroup,s,n,a);l.incremental=true;fA(l,i,s,o)}},dispose:function(){},remove:function(){this._dataGroup&&this._dataGroup.removeAll();this._data=null}});function sA(t,e,r){var i=t.model;var a=t.getRect();var n=new Bs({shape:{x:a.x,y:a.y,width:a.width,height:a.height}});var o=i.get("layout")==="horizontal"?"width":"height";n.setShape(o,0);Fl(n,{shape:{width:a.width,height:a.height}},e,r);return n}function lA(t,e,r,i){var a=[];for(var n=0;n<r.length;n++){var o=r[n];var s=t.get(t.mapDimension(o),e);if(!cA(s,i.getAxis(o).type)){a.push(i.dataToPoint(s,o))}}return a}function uA(t,e,r,i,a){var n=lA(t,r,i,a);var o=new Ps({shape:{points:n},silent:true,z2:10});e.add(o);t.setItemGraphicEl(r,o);return o}function hA(t){var e=t.get("smooth",true);e===true&&(e=nA);return{lineStyle:t.getModel("lineStyle").getLineStyle(),smooth:e!=null?e:nA}}function fA(t,e,r,i){var a=i.lineStyle;if(e.hasItemOption){var n=e.getItemModel(r).getModel("lineStyle");a=n.getLineStyle()}t.useStyle(a);var o=t.style;o.fill=null;o.stroke=e.getItemVisual(r,"color");o.opacity=e.getItemVisual(r,"opacity");i.smooth&&(t.shape.smooth=i.smooth)}function cA(t,e){return e==="category"?t==null:t==null||isNaN(t)}var vA=["lineStyle","normal","opacity"];var dA={seriesType:"parallel",reset:function(t,e,r){var i=t.getModel("itemStyle");var a=t.getModel("lineStyle");var n=e.get("color");var o=a.get("color")||i.get("color")||n[t.seriesIndex%n.length];var s=t.get("inactiveOpacity");var l=t.get("activeOpacity");var u=t.getModel("lineStyle").getLineStyle();var h=t.coordinateSystem;var f=t.getData();var c={normal:u.opacity,active:l,inactive:s};f.setVisual("color",o);function v(t,a){h.eachActiveState(a,function(t,e){var r=c[t];if(t==="normal"&&a.hasItemOption){var i=a.getItemModel(e).get(vA,true);i!=null&&(r=i)}a.setItemVisual(e,"opacity",r)},t.start,t.end)}return{progress:v}}};jd(dA);var pA=rc.extend({type:"series.sankey",layoutInfo:null,getInitialData:function(t){var e=t.edges||t.links;var r=t.data||t.nodes;if(r&&e){var i=vM(r,e,this,true);return i.data}},setNodePosition:function(t,e){var r=this.option.data[t];r.localX=e[0];r.localY=e[1]},getGraph:function(){return this.getData().graph},getEdgeData:function(){return this.getGraph().edgeData},formatTooltip:function(t,e,r){if(r==="edge"){var i=this.getDataParams(t,r);var a=i.data;var n=a.source+" -- "+a.target;if(i.value){n+=" : "+i.value}return Ru(n)}return pA.superCall(this,"formatTooltip",t,e)},optionUpdated:function(){var t=this.option;if(t.focusNodeAdjacency===true){t.focusNodeAdjacency="allEdges"}},defaultOption:{zlevel:0,z:2,coordinateSystem:"view",layout:null,left:"5%",top:"5%",right:"20%",bottom:"5%",orient:"horizontal",nodeWidth:20,nodeGap:8,draggable:true,focusNodeAdjacency:false,layoutIterations:32,label:{show:true,position:"right",color:"#000",fontSize:12},itemStyle:{borderWidth:1,borderColor:"#333"},lineStyle:{color:"#314656",opacity:.2,curveness:.5},emphasis:{label:{show:true},lineStyle:{opacity:.6}},animationEasing:"linear",animationDuration:1e3}});var gA=["itemStyle","opacity"];var mA=["lineStyle","opacity"];function yA(t,e){return t.getVisual("opacity")||t.getModel().get(e)}function xA(t,e,r){var i=t.getGraphicEl();var a=yA(t,e);if(r!=null){a==null&&(a=1);a*=r}i.downplay&&i.downplay();i.traverse(function(t){if(t.type!=="group"){t.setStyle("opacity",a)}})}function _A(t,e){var r=yA(t,e);var i=t.getGraphicEl();i.highlight&&i.highlight();i.traverse(function(t){if(t.type!=="group"){t.setStyle("opacity",r)}})}var wA=rl({shape:{x1:0,y1:0,x2:0,y2:0,cpx1:0,cpy1:0,cpx2:0,cpy2:0,extent:0,orient:""},buildPath:function(t,e){var r=e.extent;var i=e.orient;if(i==="vertical"){t.moveTo(e.x1,e.y1);t.bezierCurveTo(e.cpx1,e.cpy1,e.cpx2,e.cpy2,e.x2,e.y2);t.lineTo(e.x2+r,e.y2);t.bezierCurveTo(e.cpx2+r,e.cpy2,e.cpx1+r,e.cpy1,e.x1+r,e.y1)}else{t.moveTo(e.x1,e.y1);t.bezierCurveTo(e.cpx1,e.cpy1,e.cpx2,e.cpy2,e.x2,e.y2);t.lineTo(e.x2,e.y2+r);t.bezierCurveTo(e.cpx2,e.cpy2+r,e.cpx1,e.cpy1+r,e.x1,e.y1+r)}t.closePath()}});tp({type:"sankey",_model:null,_focusAdjacencyDisabled:false,render:function(w,t,i){var a=this;var e=w.getGraph();var b=this.group;var r=w.layoutInfo;var S=r.width;var M=r.height;var u=w.getData();var I=w.getData("edge");var T=w.get("orient");this._model=w;b.removeAll();b.attr("position",[r.x,r.y]);e.eachEdge(function(t){var e=new wA;e.dataIndex=t.dataIndex;e.seriesIndex=w.seriesIndex;e.dataType="edge";var r=t.getModel("lineStyle");var i=r.get("curveness");var a=t.node1.getLayout();var n=t.node1.getModel();var o=n.get("localX");var s=n.get("localY");var l=t.node2.getLayout();var u=t.node2.getModel();var h=u.get("localX");var f=u.get("localY");var c=t.getLayout();var v;var d;var p;var g;var m;var y;var x;var _;e.shape.extent=Math.max(1,c.dy);e.shape.orient=T;if(T==="vertical"){v=(o!=null?o*S:a.x)+c.sy;d=(s!=null?s*M:a.y)+a.dy;p=(h!=null?h*S:l.x)+c.ty;g=f!=null?f*M:l.y;m=v;y=d*(1-i)+g*i;x=p;_=d*i+g*(1-i)}else{v=(o!=null?o*S:a.x)+a.dx;d=(s!=null?s*M:a.y)+c.sy;p=h!=null?h*S:l.x;g=(f!=null?f*M:l.y)+c.ty;m=v*(1-i)+p*i;y=d;x=v*i+p*(1-i);_=g}e.setShape({x1:v,y1:d,x2:p,y2:g,cpx1:m,cpy1:y,cpx2:x,cpy2:_});e.setStyle(r.getItemStyle());switch(e.style.fill){case"source":e.style.fill=t.node1.getVisual("color");break;case"target":e.style.fill=t.node2.getVisual("color");break}Al(e,t.getModel("emphasis.lineStyle").getItemStyle());b.add(e);I.setItemGraphicEl(t.dataIndex,e)});e.eachNode(function(t){var e=t.getLayout();var r=t.getModel();var i=r.get("localX");var a=r.get("localY");var n=r.getModel("label");var o=r.getModel("emphasis.label");var s=new Bs({shape:{x:i!=null?i*S:e.x,y:a!=null?a*M:e.y,width:e.dx,height:e.dy},style:r.getModel("itemStyle").getItemStyle()});var l=t.getModel("emphasis.itemStyle").getItemStyle();Cl(s.style,l,n,o,{labelFetcher:w,labelDataIndex:t.dataIndex,defaultText:t.id,isRectText:true});s.setStyle("fill",t.getVisual("color"));Al(s,l);b.add(s);u.setItemGraphicEl(t.dataIndex,s);s.dataType="node"});u.eachItemGraphicEl(function(t,r){var e=u.getItemModel(r);if(e.get("draggable")){t.drift=function(t,e){a._focusAdjacencyDisabled=true;this.shape.x+=t;this.shape.y+=e;this.dirty();i.dispatchAction({type:"dragNode",seriesId:w.id,dataIndex:u.getRawIndex(r),localX:this.shape.x/S,localY:this.shape.y/M})};t.ondragend=function(){a._focusAdjacencyDisabled=false};t.draggable=true;t.cursor="move"}if(e.get("focusNodeAdjacency")){t.off("mouseover").on("mouseover",function(){if(!a._focusAdjacencyDisabled){i.dispatchAction({type:"focusNodeAdjacency",seriesId:w.id,dataIndex:t.dataIndex})}});t.off("mouseout").on("mouseout",function(){if(!a._focusAdjacencyDisabled){i.dispatchAction({type:"unfocusNodeAdjacency",seriesId:w.id})}})}});I.eachItemGraphicEl(function(t,e){var r=I.getItemModel(e);if(r.get("focusNodeAdjacency")){t.off("mouseover").on("mouseover",function(){if(!a._focusAdjacencyDisabled){i.dispatchAction({type:"focusNodeAdjacency",seriesId:w.id,edgeDataIndex:t.dataIndex})}});t.off("mouseout").on("mouseout",function(){if(!a._focusAdjacencyDisabled){i.dispatchAction({type:"unfocusNodeAdjacency",seriesId:w.id})}})}});if(!this._data&&w.get("animation")){b.setClipPath(bA(b.getBoundingRect(),w,function(){b.removeClipPath()}))}this._data=w.getData()},dispose:function(){},focusNodeAdjacency:function(t,e,r,i){var a=this._model.getData();var n=a.graph;var o=i.dataIndex;var s=a.getItemModel(o);var l=i.edgeDataIndex;if(o==null&&l==null){return}var u=n.getNodeByIndex(o);var h=n.getEdgeByIndex(l);n.eachNode(function(t){xA(t,gA,.1)});n.eachEdge(function(t){xA(t,mA,.1)});if(u){_A(u,gA);var f=s.get("focusNodeAdjacency");if(f==="outEdges"){L(u.outEdges,function(t){if(t.dataIndex<0){return}_A(t,mA);_A(t.node2,gA)})}else if(f==="inEdges"){L(u.inEdges,function(t){if(t.dataIndex<0){return}_A(t,mA);_A(t.node1,gA)})}else if(f==="allEdges"){L(u.edges,function(t){if(t.dataIndex<0){return}_A(t,mA);_A(t.node1,gA);_A(t.node2,gA)})}}if(h){_A(h,mA);_A(h.node1,gA);_A(h.node2,gA)}},unfocusNodeAdjacency:function(t,e,r,i){var a=this._model.getGraph();a.eachNode(function(t){xA(t,gA)});a.eachEdge(function(t){xA(t,mA)})}});function bA(t,e,r){var i=new Bs({shape:{x:t.x-10,y:t.y-10,width:0,height:t.height+20}});Fl(i,{shape:{width:t.width+20,height:t.height+20}},e,r);return i}Zd({type:"dragNode",event:"dragNode",update:"update"},function(e,t){t.eachComponent({mainType:"series",subType:"sankey",query:e},function(t){t.setNodePosition(e.dataIndex,[e.localX,e.localY])})});function SA(){var u=[];var e=[];function h(t,r){if(r>=u.length){return t}var e=-1;var i=t.length;var a=u[r++];var n={};var o={};while(++e<i){var s=a(t[e]);var l=o[s];if(l){l.push(t[e])}else{o[s]=[t[e]]}}L(o,function(t,e){n[e]=h(t,r)});return n}function n(t,r){if(r>=u.length){return t}var i=[];var a=e[r++];L(t,function(t,e){i.push({key:e,values:n(t,r)})});if(a){return i.sort(function(t,e){return a(t.key,e.key)})}return i}return{key:function(t){u.push(t);return this},sortKeys:function(t){e[u.length-1]=t;return this},entries:function(t){return n(h(t,0),0)}}}var MA=function(t,c,e){t.eachSeriesByType("sankey",function(t){var e=t.get("nodeWidth");var r=t.get("nodeGap");var i=IA(t,c);t.layoutInfo=i;var a=i.width;var n=i.height;var o=t.getGraph();var s=o.nodes;var l=o.edges;AA(s);var u=O(s,function(t){return t.getLayout().value===0});var h=u.length!==0?0:t.get("layoutIterations");var f=t.get("orient");TA(s,l,e,r,a,n,h,f)})};function IA(t,e){return rh(t.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()})}function TA(t,e,r,i,a,n,o,s){DA(t,e,r,a,n,s);kA(t,e,n,a,i,o,s);WA(t,s)}function AA(t){L(t,function(t){var e=GA(t.outEdges,VA);var r=GA(t.inEdges,VA);var i=Math.max(e,r);t.setLayout({value:i},true)})}function DA(t,e,r,i,a,n){var o=[];var s=[];var l=[];var u=[];var h=0;var f=0;for(var c=0;c<e.length;c++){o[c]=1}for(c=0;c<t.length;c++){s[c]=t[c].inEdges.length;if(s[c]===0){l.push(t[c])}}while(l.length){for(var v=0;v<l.length;v++){var d=l[v];if(n==="vertical"){d.setLayout({y:h},true);d.setLayout({dy:r},true)}else{d.setLayout({x:h},true);d.setLayout({dx:r},true)}for(var p=0;p<d.outEdges.length;p++){var g=d.outEdges[p];var m=e.indexOf(g);o[m]=0;var y=g.node2;var x=t.indexOf(y);if(--s[x]===0){u.push(y)}}}++h;l=u;u=[]}for(c=0;c<o.length;c++){if(D){if(o[c]===1){throw new Error("Sankey is a DAG, the original data has cycle!")}}}CA(t,h,n);if(n==="vertical"){f=(a-r)/(h-1)}else{f=(i-r)/(h-1)}LA(t,f,n)}function CA(t,e,r){L(t,function(t){if(!t.outEdges.length){if(r==="vertical"){t.setLayout({y:e-1},true)}else{t.setLayout({x:e-1},true)}}})}function LA(t,i,a){L(t,function(t){if(a==="vertical"){var e=t.getLayout().y*i;t.setLayout({y:e},true)}else{var r=t.getLayout().x*i;t.setLayout({x:r},true)}})}function kA(t,e,r,i,a,n,o){var s=SA().key(PA(o)).sortKeys(function(t,e){return t-e}).entries(t).map(function(t){return t.values});NA(t,s,e,r,i,a,o);OA(s,a,r,i,o);for(var l=1;n>0;n--){l*=.99;EA(s,l,o);OA(s,a,r,i,o);FA(s,l,o);OA(s,a,r,i,o)}}function PA(t){if(t==="vertical"){return function(t){return t.getLayout().y}}return function(t){return t.getLayout().x}}function NA(t,e,r,a,n,o,s){var l=[];L(e,function(t){var e=t.length;var r=0;var i=0;L(t,function(t){r+=t.getLayout().value});if(s==="vertical"){i=(n-(e-1)*o)/r}else{i=(a-(e-1)*o)/r}l.push(i)});l.sort(function(t,e){return t-e});var i=l[0];L(e,function(t){L(t,function(t,e){var r=t.getLayout().value*i;if(s==="vertical"){t.setLayout({x:e},true);t.setLayout({dx:r},true)}else{t.setLayout({y:e},true);t.setLayout({dy:r},true)}})});L(r,function(t){var e=+t.getValue()*i;t.setLayout({dy:e},true)})}function OA(t,l,u,h,f){L(t,function(t){var e;var r;var i=0;var a=t.length;var n;if(f==="vertical"){var o;t.sort(function(t,e){return t.getLayout().x-e.getLayout().x});for(n=0;n<a;n++){e=t[n];r=i-e.getLayout().x;if(r>0){o=e.getLayout().x+r;e.setLayout({x:o},true)}i=e.getLayout().x+e.getLayout().dx+l}r=i-l-h;if(r>0){o=e.getLayout().x-r;e.setLayout({x:o},true);i=o;for(n=a-2;n>=0;--n){e=t[n];r=e.getLayout().x+e.getLayout().dx+l-i;if(r>0){o=e.getLayout().x-r;e.setLayout({x:o},true)}i=e.getLayout().x}}}else{var s;t.sort(function(t,e){return t.getLayout().y-e.getLayout().y});for(n=0;n<a;n++){e=t[n];r=i-e.getLayout().y;if(r>0){s=e.getLayout().y+r;e.setLayout({y:s},true)}i=e.getLayout().y+e.getLayout().dy+l}r=i-l-u;if(r>0){s=e.getLayout().y-r;e.setLayout({y:s},true);i=s;for(n=a-2;n>=0;--n){e=t[n];r=e.getLayout().y+e.getLayout().dy+l-i;if(r>0){s=e.getLayout().y-r;e.setLayout({y:s},true)}i=e.getLayout().y}}}})}function EA(t,a,n){L(t.slice().reverse(),function(t){L(t,function(t){if(t.outEdges.length){var e=GA(t.outEdges,RA,n)/GA(t.outEdges,VA,n);if(n==="vertical"){var r=t.getLayout().x+(e-BA(t,n))*a;t.setLayout({x:r},true)}else{var i=t.getLayout().y+(e-BA(t,n))*a;t.setLayout({y:i},true)}}})})}function RA(t,e){return BA(t.node2,e)*t.getValue()}function zA(t,e){return BA(t.node1,e)*t.getValue()}function BA(t,e){if(e==="vertical"){return t.getLayout().x+t.getLayout().dx/2}return t.getLayout().y+t.getLayout().dy/2}function VA(t){return t.getValue()}function GA(t,e,r){var i=0;var a=t.length;var n=-1;while(++n<a){var o=+e.call(t,t[n],r);if(!isNaN(o)){i+=o}}return i}function FA(t,a,n){L(t,function(t){L(t,function(t){if(t.inEdges.length){var e=GA(t.inEdges,zA,n)/GA(t.inEdges,VA,n);if(n==="vertical"){var r=t.getLayout().x+(e-BA(t,n))*a;t.setLayout({x:r},true)}else{var i=t.getLayout().y+(e-BA(t,n))*a;t.setLayout({y:i},true)}}})})}function WA(t,e){L(t,function(t){if(e==="vertical"){t.outEdges.sort(function(t,e){return t.node2.getLayout().x-e.node2.getLayout().x});t.inEdges.sort(function(t,e){return t.node1.getLayout().x-e.node1.getLayout().x})}else{t.outEdges.sort(function(t,e){return t.node2.getLayout().y-e.node2.getLayout().y});t.inEdges.sort(function(t,e){return t.node1.getLayout().y-e.node1.getLayout().y})}});L(t,function(t){var e=0;var r=0;L(t.outEdges,function(t){t.setLayout({sy:e},true);e+=t.getLayout().dy});L(t.inEdges,function(t){t.setLayout({ty:r},true);r+=t.getLayout().dy})})}var HA=function(t,e){t.eachSeriesByType("sankey",function(n){var t=n.getGraph();var e=t.nodes;if(e.length){var o=Infinity;var s=-Infinity;L(e,function(t){var e=t.getLayout().value;if(e<o){o=e}if(e>s){s=e}});L(e,function(t){var e=new pS({type:"color",mappingMethod:"linear",dataExtent:[o,s],visual:n.get("color")});var r=e.mapValueToVisual(t.getLayout().value);t.setVisual("color",r);var i=t.getModel();var a=i.get("itemStyle.color");if(a!=null){t.setVisual("color",a)}})}})};Yd(MA);jd(HA);var ZA={_baseAxisDim:null,getInitialData:function(t,e){var r;var i=e.getComponent("xAxis",this.get("xAxisIndex"));var a=e.getComponent("yAxis",this.get("yAxisIndex"));var n=i.get("type");var o=a.get("type");var s;if(n==="category"){t.layout="horizontal";r=i.getOrdinalMeta();s=true}else if(o==="category"){t.layout="vertical";r=a.getOrdinalMeta();s=true}else{t.layout=t.layout||"horizontal"}var l=["x","y"];var u=t.layout==="horizontal"?0:1;var h=this._baseAxisDim=l[u];var f=l[1-u];var c=[i,a];var v=c[u].get("type");var d=c[1-u].get("type");var p=t.data;if(p&&s){var g=[];L(p,function(t,e){var r;if(t.value&&B(t.value)){r=t.value.slice();t.value.unshift(e)}else if(B(t)){r=t.slice();t.unshift(e)}else{r=t}g.push(r)});t.data=g}var m=this.defaultValueDimensions;return u_(this,{coordDimensions:[{name:h,type:hp(v),ordinalMeta:r,otherDims:{tooltip:false,itemName:0},dimsDef:["base"]},{name:f,type:hp(d),dimsDef:m.slice()}],dimensionsCount:m.length+1})},getBaseAxis:function(){var t=this._baseAxisDim;return this.ecModel.getComponent(t+"Axis",this.get(t+"AxisIndex")).axis}};var UA=rc.extend({type:"series.boxplot",dependencies:["xAxis","yAxis","grid"],defaultValueDimensions:[{name:"min",defaultTooltip:true},{name:"Q1",defaultTooltip:true},{name:"median",defaultTooltip:true},{name:"Q3",defaultTooltip:true},{name:"max",defaultTooltip:true}],dimensions:null,defaultOption:{zlevel:0,z:2,coordinateSystem:"cartesian2d",legendHoverLink:true,hoverAnimation:true,layout:null,boxWidth:[7,50],itemStyle:{color:"#fff",borderWidth:1},emphasis:{itemStyle:{borderWidth:2,shadowBlur:5,shadowOffsetX:2,shadowOffsetY:2,shadowColor:"rgba(0,0,0,0.4)"}},animationEasing:"elasticOut",animationDuration:800}});I(UA,ZA,true);var XA=["itemStyle"];var YA=["emphasis","itemStyle"];var jA=gc.extend({type:"boxplot",render:function(t,e,r){var a=t.getData();var n=this.group;var o=this._data;if(!this._data){n.removeAll()}var s=t.get("layout")==="horizontal"?1:0;a.diff(o).add(function(t){if(a.hasValue(t)){var e=a.getItemLayout(t);var r=KA(e,a,t,s,true);a.setItemGraphicEl(t,r);n.add(r)}}).update(function(t,e){var r=o.getItemGraphicEl(e);if(!a.hasValue(t)){n.remove(r);return}var i=a.getItemLayout(t);if(!r){r=KA(i,a,t,s)}else{$A(i,r,a,t)}n.add(r);a.setItemGraphicEl(t,r)}).remove(function(t){var e=o.getItemGraphicEl(t);e&&n.remove(e)}).execute();this._data=a},remove:function(t){var e=this.group;var r=this._data;this._data=null;r&&r.eachItemGraphicEl(function(t){t&&e.remove(t)})},dispose:nt});var qA=ts.extend({type:"boxplotBoxPath",shape:{},buildPath:function(t,e){var r=e.points;var i=0;t.moveTo(r[i][0],r[i][1]);i++;for(;i<4;i++){t.lineTo(r[i][0],r[i][1])}t.closePath();for(;i<r.length;i++){t.moveTo(r[i][0],r[i][1]);i++;t.lineTo(r[i][0],r[i][1])}}});function KA(t,e,r,i,a){var n=t.ends;var o=new qA({shape:{points:a?JA(n,i,t):n}});$A(t,o,e,r,a);return o}function $A(t,e,r,i,a){var n=r.hostModel;var o=ql[a?"initProps":"updateProps"];o(e,{shape:{points:t.ends}},n,i);var s=r.getItemModel(i);var l=s.getModel(XA);var u=r.getItemVisual(i,"color");var h=l.getItemStyle(["borderColor"]);h.stroke=u;h.strokeNoScale=true;e.useStyle(h);e.z2=100;var f=s.getModel(YA).getItemStyle();Al(e,f)}function JA(t,e,r){return A(t,function(t){t=t.slice();t[e]=r.initBaseline;return t})}var QA=["itemStyle","borderColor"];var tD=function(i,t){var a=i.get("color");i.eachRawSeriesByType("boxplot",function(t){var e=a[t.seriesIndex%a.length];var r=t.getData();r.setVisual({legendSymbol:"roundRect",color:t.get(QA)||e});if(!i.isSeriesFiltered(t)){r.each(function(t){var e=r.getItemModel(t);r.setItemVisual(t,{color:e.get(QA,true)})})}})};var eD=L;var rD=function(t){var e=iD(t);eD(e,function(r){var t=r.seriesModels;if(!t.length){return}aD(r);eD(t,function(t,e){nD(t,r.boxOffsetList[e],r.boxWidthList[e])})})};function iD(t){var i=[];var a=[];t.eachSeriesByType("boxplot",function(t){var e=t.getBaseAxis();var r=S(a,e);if(r<0){r=a.length;a[r]=e;i[r]={axis:e,seriesModels:[]}}i[r].seriesModels.push(t)});return i}function aD(t){var e;var r=t.axis;var i=t.seriesModels;var a=i.length;var n=t.boxWidthList=[];var o=t.boxOffsetList=[];var s=[];var l;if(r.type==="category"){l=r.getBandWidth()}else{var u=0;eD(i,function(t){u=Math.max(u,t.getData().count())});e=r.getExtent(),Math.abs(e[1]-e[0])/u}eD(i,function(t){var e=t.get("boxWidth");if(!B(e)){e=[e,e]}s.push([cu(e[0],l)||0,cu(e[1],l)||0])});var h=l*.8-2;var f=h/a*.3;var c=(h-f*(a-1))/a;var v=c/2-h/2;eD(i,function(t,e){o.push(v);v+=f+c;n.push(Math.min(Math.max(c,s[e][0]),s[e][1]))})}function nD(t,o,e){var s=t.coordinateSystem;var l=t.getData();var n=e/2;var u=t.get("layout")==="horizontal"?0:1;var h=1-u;var r=["x","y"];var i=l.mapDimension(r[u]);var a=l.mapDimension(r[h],true);if(i==null||a.length<5){return}for(var f=0;f<l.count();f++){var c=l.get(i,f);var v=x(c,a[2],f);var d=x(c,a[0],f);var p=x(c,a[1],f);var g=x(c,a[3],f);var m=x(c,a[4],f);var y=[];_(y,p,0);_(y,g,1);y.push(d,p,m,g);w(y,d);w(y,m);w(y,v);l.setItemLayout(f,{initBaseline:v[h],ends:y})}function x(t,e,r){var i=l.get(e,r);var a=[];a[u]=t;a[h]=i;var n;if(isNaN(t)||isNaN(i)){n=[NaN,NaN]}else{n=s.dataToPoint(a);n[u]+=o}return n}function _(t,e,r){var i=e.slice();var a=e.slice();i[u]+=n;a[u]-=n;r?t.push(i,a):t.push(a,i)}function w(t,e){var r=e.slice();var i=e.slice();r[u]-=n;i[u]+=n;t.push(r,i)}}jd(tD);Yd(rD);var oD=rc.extend({type:"series.candlestick",dependencies:["xAxis","yAxis","grid"],defaultValueDimensions:[{name:"open",defaultTooltip:true},{name:"close",defaultTooltip:true},{name:"lowest",defaultTooltip:true},{name:"highest",defaultTooltip:true}],dimensions:null,defaultOption:{zlevel:0,z:2,coordinateSystem:"cartesian2d",legendHoverLink:true,hoverAnimation:true,layout:null,itemStyle:{color:"#c23531",color0:"#314656",borderWidth:1,borderColor:"#c23531",borderColor0:"#314656"},emphasis:{itemStyle:{borderWidth:2}},barMaxWidth:null,barMinWidth:null,barWidth:null,large:true,largeThreshold:600,progressive:3e3,progressiveThreshold:1e4,progressiveChunkMode:"mod",animationUpdate:false,animationEasing:"linear",animationDuration:300},getShadowDim:function(){return"open"},brushSelector:function(t,e,r){var i=e.getItemLayout(t);return i&&r.rect(i.brushRect)}});I(oD,ZA,true);var sD=["itemStyle"];var lD=["emphasis","itemStyle"];var uD=["color","color0","borderColor","borderColor0"];var hD=gc.extend({type:"candlestick",render:function(t,e,r){this._updateDrawMode(t);this._isLargeDraw?this._renderLarge(t):this._renderNormal(t)},incrementalPrepareRender:function(t,e,r){this._clear();this._updateDrawMode(t)},incrementalRender:function(t,e,r,i){this._isLargeDraw?this._incrementalRenderLarge(t,e):this._incrementalRenderNormal(t,e)},_updateDrawMode:function(t){var e=t.pipelineContext.large;if(this._isLargeDraw==null||e^this._isLargeDraw){this._isLargeDraw=e;this._clear()}},_renderNormal:function(a){var n=a.getData();var o=this._data;var s=this.group;var l=n.getLayout("isSimpleBox");if(!this._data){s.removeAll()}n.diff(o).add(function(t){if(n.hasValue(t)){var e;var r=n.getItemLayout(t);e=cD(r,t,true);Fl(e,{shape:{points:r.ends}},a,t);vD(e,n,t,l);s.add(e);n.setItemGraphicEl(t,e)}}).update(function(t,e){var r=o.getItemGraphicEl(e);if(!n.hasValue(t)){s.remove(r);return}var i=n.getItemLayout(t);if(!r){r=cD(i,t)}else{Gl(r,{shape:{points:i.ends}},a,t)}vD(r,n,t,l);s.add(r);n.setItemGraphicEl(t,r)}).remove(function(t){var e=o.getItemGraphicEl(t);e&&s.remove(e)}).execute();this._data=n},_renderLarge:function(t){this._clear();gD(t,this.group)},_incrementalRenderNormal:function(t,e){var r=e.getData();var i=r.getLayout("isSimpleBox");var a;while((a=t.next())!=null){var n;var o=r.getItemLayout(a);n=cD(o,a);vD(n,r,a,i);n.incremental=true;this.group.add(n)}},_incrementalRenderLarge:function(t,e){gD(e,this.group,true)},remove:function(t){this._clear()},_clear:function(){this.group.removeAll();this._data=null},dispose:nt});var fD=ts.extend({type:"normalCandlestickBox",shape:{},buildPath:function(t,e){var r=e.points;if(this.__simpleBox){t.moveTo(r[4][0],r[4][1]);t.lineTo(r[6][0],r[6][1])}else{t.moveTo(r[0][0],r[0][1]);t.lineTo(r[1][0],r[1][1]);t.lineTo(r[2][0],r[2][1]);t.lineTo(r[3][0],r[3][1]);t.closePath();t.moveTo(r[4][0],r[4][1]);t.lineTo(r[5][0],r[5][1]);t.moveTo(r[6][0],r[6][1]);t.lineTo(r[7][0],r[7][1])}}});function cD(t,e,r){var i=t.ends;return new fD({shape:{points:r?dD(i,t):i},z2:100})}function vD(t,e,r,i){var a=e.getItemModel(r);var n=a.getModel(sD);var o=e.getItemVisual(r,"color");var s=e.getItemVisual(r,"borderColor")||o;var l=n.getItemStyle(uD);t.useStyle(l);t.style.strokeNoScale=true;t.style.fill=o;t.style.stroke=s;t.__simpleBox=i;var u=a.getModel(lD).getItemStyle();Al(t,u)}function dD(t,e){return A(t,function(t){t=t.slice();t[1]=e.initBaseline;return t})}var pD=ts.extend({type:"largeCandlestickBox",shape:{},buildPath:function(t,e){var r=e.points;for(var i=0;i<r.length;){if(this.__sign===r[i++]){var a=r[i++];t.moveTo(a,r[i++]);t.lineTo(a,r[i++])}else{i+=3}}}});function gD(t,e,r){var i=t.getData();var a=i.getLayout("largePoints");var n=new pD({shape:{points:a},__sign:1});e.add(n);var o=new pD({shape:{points:a},__sign:-1});e.add(o);mD(1,n,t,i);mD(-1,o,t,i);if(r){n.incremental=true;o.incremental=true}}function mD(t,e,r,i){var a=t>0?"P":"N";var n=i.getVisual("borderColor"+a)||i.getVisual("color"+a);var o=r.getModel(sD).getItemStyle(uD);e.useStyle(o);e.style.fill=null;e.style.stroke=n}var yD=function(t){if(!t||!B(t.series)){return}L(t.series,function(t){if(F(t)&&t.type==="k"){t.type="candlestick"}})};var xD=["itemStyle","borderColor"];var _D=["itemStyle","borderColor0"];var wD=["itemStyle","color"];var bD=["itemStyle","color0"];var SD={seriesType:"candlestick",plan:vc(),performRawSeries:true,reset:function(t,e){var r=t.getData();var i=t.pipelineContext.large;r.setVisual({legendSymbol:"roundRect",colorP:n(1,t),colorN:n(-1,t),borderColorP:o(1,t),borderColorN:o(-1,t)});if(e.isSeriesFiltered(t)){return}return!i&&{progress:a};function a(t,e){var r;while((r=t.next())!=null){var i=e.getItemModel(r);var a=e.getItemLayout(r).sign;e.setItemVisual(r,{color:n(a,i),borderColor:o(a,i)})}}function n(t,e){return e.get(t>0?wD:bD)}function o(t,e){return e.get(t>0?xD:_D)}}};var MD=typeof Float32Array!=="undefined"?Float32Array:Array;var ID={seriesType:"candlestick",plan:vc(),reset:function(t){var x=t.coordinateSystem;var e=t.getData();var _=AD(t,e);var w=0;var b=1;var r=["x","y"];var S=e.mapDimension(r[w]);var i=e.mapDimension(r[b],true);var M=i[0];var I=i[1];var T=i[2];var A=i[3];e.setLayout({candleWidth:_,isSimpleBox:_<=1.3});if(S==null||i.length<4){return}return{progress:t.pipelineContext.large?n:a};function a(t,e){var r;while((r=t.next())!=null){var i=e.get(S,r);var a=e.get(M,r);var n=e.get(I,r);var o=e.get(T,r);var s=e.get(A,r);var l=Math.min(a,n);var u=Math.max(a,n);var h=p(l,i);var f=p(u,i);var c=p(o,i);var v=p(s,i);var d=[];g(d,f,0);g(d,h,1);d.push(y(v),y(f),y(c),y(h));e.setItemLayout(r,{sign:TD(e,r,a,n,I),initBaseline:a>n?f[b]:h[b],ends:d,brushRect:m(o,s,i)})}function p(t,e){var r=[];r[w]=e;r[b]=t;return isNaN(e)||isNaN(t)?[NaN,NaN]:x.dataToPoint(r)}function g(t,e,r){var i=e.slice();var a=e.slice();i[w]=fl(i[w]+_/2,1,false);a[w]=fl(a[w]-_/2,1,true);r?t.push(i,a):t.push(a,i)}function m(t,e,r){var i=p(t,r);var a=p(e,r);i[w]-=_/2;a[w]-=_/2;return{x:i[0],y:i[1],width:b?_:a[0]-i[0],height:b?a[1]-i[1]:_}}function y(t){t[w]=fl(t[w],1);return t}}function n(t,e){var r=new MD(t.count*5);var i=0;var a;var n=[];var o=[];var s;while((s=t.next())!=null){var l=e.get(S,s);var u=e.get(M,s);var h=e.get(I,s);var f=e.get(T,s);var c=e.get(A,s);if(isNaN(l)||isNaN(f)||isNaN(c)){r[i++]=NaN;i+=4;continue}r[i++]=TD(e,s,u,h,I);n[w]=l;n[b]=f;a=x.dataToPoint(n,null,o);r[i++]=a?a[0]:NaN;r[i++]=a?a[1]:NaN;n[b]=c;a=x.dataToPoint(n,null,o);r[i++]=a?a[1]:NaN}e.setLayout("largePoints",r)}}};function TD(t,e,r,i,a){var n;if(r>i){n=-1}else if(r<i){n=1}else{n=e>0?t.get(a,e-1)<=i?1:-1:1}return n}function AD(t,e){var r=t.getBaseAxis();var i;var a=r.type==="category"?r.getBandWidth():(i=r.getExtent(),Math.abs(i[1]-i[0])/e.count());var n=cu(Y(t.get("barMaxWidth"),a),a);var o=cu(Y(t.get("barMinWidth"),1),a);var s=t.get("barWidth");return s!=null?cu(s,a):Math.max(Math.min(a/2,n),o)}Fd(yD);jd(SD);Yd(ID);rc.extend({type:"series.effectScatter",dependencies:["grid","polar"],getInitialData:function(t,e){return Xp(this.getSource(),this)},brushSelector:"point",defaultOption:{coordinateSystem:"cartesian2d",zlevel:0,z:2,legendHoverLink:true,effectType:"ripple",progressive:0,showEffectOn:"render",rippleEffect:{period:4,scale:2.5,brushType:"fill"},symbolSize:10}});var DD=3;function CD(t){if(!B(t)){t=[+t,+t]}return t}function LD(t,e){t.eachChild(function(t){t.attr({z:e.z,zlevel:e.zlevel,style:{stroke:e.brushType==="stroke"?e.color:null,fill:e.brushType==="fill"?e.color:null}})})}function kD(t,e){Or.call(this);var r=new jm(t,e);var i=new Or;this.add(r);this.add(i);i.beforeUpdate=function(){this.attr(r.getScale())};this.updateData(t,e)}var PD=kD.prototype;PD.stopEffectAnimation=function(){this.childAt(1).removeAll()};PD.startEffectAnimation=function(t){var e=t.symbolType;var r=t.color;var i=this.childAt(1);for(var a=0;a<DD;a++){var n=cm(e,-1,-1,2,2,r);n.attr({style:{strokeNoScale:true},z2:99,silent:true,scale:[.5,.5]});var o=-a/DD*t.period+t.effectOffset;n.animate("",true).when(t.period,{scale:[t.rippleScale/2,t.rippleScale/2]}).delay(o).start();n.animateStyle(true).when(t.period,{opacity:0}).delay(o).start();i.add(n)}LD(i,t)};PD.updateEffectAnimation=function(t){var e=this._effectCfg;var r=this.childAt(1);var i=["symbolType","period","rippleScale"];for(var a=0;a<i.length;a++){var n=i[a];if(e[n]!==t[n]){this.stopEffectAnimation();this.startEffectAnimation(t);return}}LD(r,t)};PD.highlight=function(){this.trigger("emphasis")};PD.downplay=function(){this.trigger("normal")};PD.updateData=function(t,e){var r=t.hostModel;this.childAt(0).updateData(t,e);var i=this.childAt(1);var a=t.getItemModel(e);var n=t.getItemVisual(e,"symbol");var o=CD(t.getItemVisual(e,"symbolSize"));var s=t.getItemVisual(e,"color");i.attr("scale",o);i.traverse(function(t){t.attr({fill:s})});var l=a.getShallow("symbolOffset");if(l){var u=i.position;u[0]=cu(l[0],o[0]);u[1]=cu(l[1],o[1])}i.rotation=(a.getShallow("symbolRotate")||0)*Math.PI/180||0;var h={};h.showEffectOn=r.get("showEffectOn");h.rippleScale=a.get("rippleEffect.scale");h.brushType=a.get("rippleEffect.brushType");h.period=a.get("rippleEffect.period")*1e3;h.effectOffset=e/t.count();h.z=a.getShallow("z")||0;h.zlevel=a.getShallow("zlevel")||0;h.symbolType=n;h.color=s;this.off("mouseover").off("mouseout").off("emphasis").off("normal");if(h.showEffectOn==="render"){this._effectCfg?this.updateEffectAnimation(h):this.startEffectAnimation(h);this._effectCfg=h}else{this._effectCfg=null;this.stopEffectAnimation();var f=this.childAt(0);var c=function(){f.highlight();if(h.showEffectOn!=="render"){this.startEffectAnimation(h)}};var v=function(){f.downplay();if(h.showEffectOn!=="render"){this.stopEffectAnimation()}};this.on("mouseover",c,this).on("mouseout",v,this).on("emphasis",c,this).on("normal",v,this)}this._effectCfg=h};PD.fadeOut=function(t){this.off("mouseover").off("mouseout").off("emphasis").off("normal");t&&t()};M(kD,Or);tp({type:"effectScatter",init:function(){this._symbolDraw=new sy(kD)},render:function(t,e,r){var i=t.getData();var a=this._symbolDraw;a.updateData(i);this.group.add(a.group)},updateTransform:function(t,e,r){var i=t.getData();this.group.dirty();var a=Hy().reset(t);if(a.progress){a.progress({start:0,end:i.count()},i)}this._symbolDraw.updateLayout(i)},_updateGroupTransform:function(t){var e=t.coordinateSystem;if(e&&e.getRoamTransform){this.group.transform=ge(e.getRoamTransform());this.group.decomposeTransform()}},remove:function(t,e){this._symbolDraw&&this._symbolDraw.remove(e)},dispose:function(){}});jd(Wy("effectScatter","circle"));Yd(Hy("effectScatter"));var ND=typeof Uint32Array==="undefined"?Array:Uint32Array;var OD=typeof Float64Array==="undefined"?Array:Float64Array;function ED(t){var e=t.data;if(e&&e[0]&&e[0][0]&&e[0][0].coord){if(D){console.warn("Lines data configuration has been changed to"+" { coords:[[1,2],[2,3]] }")}t.data=A(e,function(t){var e=[t[0].coord,t[1].coord];var r={coords:e};if(t[0].name){r.fromName=t[0].name}if(t[1].name){r.toName=t[1].name}return x([r,t[0],t[1]])})}}var RD=rc.extend({type:"series.lines",dependencies:["grid","polar"],visualColorAccessPath:"lineStyle.color",init:function(t){t.data=t.data||[];ED(t);var e=this._processFlatCoordsArray(t.data);this._flatCoords=e.flatCoords;this._flatCoordsOffset=e.flatCoordsOffset;if(e.flatCoords){t.data=new Float32Array(e.count)}RD.superApply(this,"init",arguments)},mergeOption:function(t){t.data=t.data||[];ED(t);if(t.data){var e=this._processFlatCoordsArray(t.data);this._flatCoords=e.flatCoords;this._flatCoordsOffset=e.flatCoordsOffset;if(e.flatCoords){t.data=new Float32Array(e.count)}}RD.superApply(this,"mergeOption",arguments)},appendData:function(t){var e=this._processFlatCoordsArray(t.data);if(e.flatCoords){if(!this._flatCoords){this._flatCoords=e.flatCoords;this._flatCoordsOffset=e.flatCoordsOffset}else{this._flatCoords=at(this._flatCoords,e.flatCoords);this._flatCoordsOffset=at(this._flatCoordsOffset,e.flatCoordsOffset)}t.data=new Float32Array(e.count)}this.getRawData().appendData(t.data)},_getCoordsFromItemModel:function(t){var e=this.getData().getItemModel(t);var r=e.option instanceof Array?e.option:e.getShallow("coords");if(D){if(!(r instanceof Array&&r.length>0&&r[0]instanceof Array)){throw new Error("Invalid coords "+JSON.stringify(r)+". Lines must have 2d coords array in data item.")}}return r},getLineCoordsCount:function(t){if(this._flatCoordsOffset){return this._flatCoordsOffset[t*2+1]}else{return this._getCoordsFromItemModel(t).length}},getLineCoords:function(t,e){if(this._flatCoordsOffset){var r=this._flatCoordsOffset[t*2];var i=this._flatCoordsOffset[t*2+1];for(var a=0;a<i;a++){e[a]=e[a]||[];e[a][0]=this._flatCoords[r+a*2];e[a][1]=this._flatCoords[r+a*2+1]}return i}else{var n=this._getCoordsFromItemModel(t);for(var a=0;a<n.length;a++){e[a]=e[a]||[];e[a][0]=n[a][0];e[a][1]=n[a][1]}return n.length}},_processFlatCoordsArray:function(t){var e=0;if(this._flatCoords){e=this._flatCoords.length}if(typeof t[0]==="number"){var r=t.length;var i=new ND(r);var a=new OD(r);var n=0;var o=0;var s=0;for(var l=0;l<r;){s++;var u=t[l++];i[o++]=n+e;i[o++]=u;for(var h=0;h<u;h++){var f=t[l++];var c=t[l++];a[n++]=f;a[n++]=c;if(l>r){if(D){throw new Error("Invalid data format.")}}}}return{flatCoordsOffset:new Uint32Array(i.buffer,0,o),flatCoords:a,count:s}}return{flatCoordsOffset:null,flatCoords:null,count:t.length}},getInitialData:function(t,e){if(D){var r=ef.get(t.coordinateSystem);if(!r){throw new Error("Unkown coordinate system "+t.coordinateSystem)}}var n=new Ip(["value"],this);n.hasItemOption=false;n.initData(t.data,[],function(t,e,r,i){if(t instanceof Array){return NaN}else{n.hasItemOption=true;var a=t.value;if(a!=null){return a instanceof Array?a[i]:a}}});return n},formatTooltip:function(t){var e=this.getData();var r=e.getItemModel(t);var i=r.get("name");if(i){return i}var a=r.get("fromName");var n=r.get("toName");var o=[];a!=null&&o.push(a);n!=null&&o.push(n);return Ru(o.join(" > "))},preventIncremental:function(){return!!this.get("effect.show")},getProgressive:function(){var t=this.option.progressive;if(t==null){return this.option.large?1e4:this.get("progressive")}return t},getProgressiveThreshold:function(){var t=this.option.progressiveThreshold;if(t==null){return this.option.large?2e4:this.get("progressiveThreshold")}return t},defaultOption:{coordinateSystem:"geo",zlevel:0,z:2,legendHoverLink:true,hoverAnimation:true,xAxisIndex:0,yAxisIndex:0,symbol:["none","none"],symbolSize:[10,10],geoIndex:0,effect:{show:false,period:4,constantSpeed:0,symbol:"circle",symbolSize:3,loop:true,trailLength:.2},large:false,largeThreshold:2e3,polyline:false,label:{show:false,position:"end"},lineStyle:{opacity:.5}}});function zD(t,e,r){Or.call(this);this.add(this.createLine(t,e,r));this._updateEffectSymbol(t,e)}var BD=zD.prototype;BD.createLine=function(t,e,r){return new IM(t,e,r)};BD._updateEffectSymbol=function(t,e){var r=t.getItemModel(e);var i=r.getModel("effect");var a=i.get("symbolSize");var n=i.get("symbol");if(!B(a)){a=[a,a]}var o=i.get("color")||t.getItemVisual(e,"color");var s=this.childAt(1);if(this._symbolType!==n){this.remove(s);s=cm(n,-.5,-.5,1,1,o);s.z2=100;s.culling=true;this.add(s)}if(!s){return}s.setStyle("shadowColor",o);s.setStyle(i.getItemStyle(["color"]));s.attr("scale",a);s.setColor(o);s.attr("scale",a);this._symbolType=n;this._updateEffectAnimation(t,i,e)};BD._updateEffectAnimation=function(e,t,r){var i=this.childAt(1);if(!i){return}var a=this;var n=e.getItemLayout(r);var o=t.get("period")*1e3;var s=t.get("loop");var l=t.get("constantSpeed");var u=X(t.get("delay"),function(t){return t/e.count()*o/3});var h=typeof u==="function";i.ignore=true;this.updateAnimationPoints(i,n);if(l>0){o=this.getLineLength(i)/l*1e3}if(o!==this._period||s!==this._loop){i.stopAnimation();var f=u;if(h){f=u(r)}if(i.__t>0){f=-o*i.__t}i.__t=0;var c=i.animate("",s).when(o,{__t:1}).delay(f).during(function(){a.updateSymbolPosition(i)});if(!s){c.done(function(){a.remove(i)})}c.start()}this._period=o;this._loop=s};BD.getLineLength=function(t){return It(t.__p1,t.__cp1)+It(t.__cp1,t.__p2)};BD.updateAnimationPoints=function(t,e){t.__p1=e[0];t.__p2=e[1];t.__cp1=e[2]||[(e[0][0]+e[1][0])/2,(e[0][1]+e[1][1])/2]};BD.updateData=function(t,e,r){this.childAt(0).updateData(t,e,r);this._updateEffectSymbol(t,e)};BD.updateSymbolPosition=function(t){var e=t.__p1;var r=t.__p2;var i=t.__cp1;var a=t.__t;var n=t.position;var o=qn;var s=Kn;n[0]=o(e[0],i[0],r[0],a);n[1]=o(e[1],i[1],r[1],a);var l=s(e[0],i[0],r[0],a);var u=s(e[1],i[1],r[1],a);t.rotation=-Math.atan2(u,l)-Math.PI/2;t.ignore=false};BD.updateLayout=function(t,e){this.childAt(0).updateLayout(t,e);var r=t.getItemModel(e).getModel("effect");this._updateEffectAnimation(t,r,e)};M(zD,Or);function VD(t,e,r){Or.call(this);this._createPolyline(t,e,r)}var GD=VD.prototype;GD._createPolyline=function(t,e,r){var i=t.getItemLayout(e);var a=new Ps({shape:{points:i}});this.add(a);this._updateCommonStl(t,e,r)};GD.updateData=function(t,e,r){var i=t.hostModel;var a=this.childAt(0);var n={shape:{points:t.getItemLayout(e)}};Gl(a,n,i,e);this._updateCommonStl(t,e,r)};GD._updateCommonStl=function(t,e,r){var i=this.childAt(0);var a=t.getItemModel(e);var n=t.getItemVisual(e,"color");var o=r&&r.lineStyle;var s=r&&r.hoverLineStyle;if(!r||t.hasItemOption){o=a.getModel("lineStyle").getLineStyle();s=a.getModel("emphasis.lineStyle").getLineStyle()}i.useStyle(C({strokeNoScale:true,fill:"none",stroke:n},o));i.hoverStyle=s;Al(this)};GD.updateLayout=function(t,e){var r=this.childAt(0);r.setShape("points",t.getItemLayout(e))};M(VD,Or);function FD(t,e,r){zD.call(this,t,e,r);this._lastFrame=0;this._lastFramePercent=0}var WD=FD.prototype;WD.createLine=function(t,e,r){return new VD(t,e,r)};WD.updateAnimationPoints=function(t,e){this._points=e;var r=[0];var i=0;for(var a=1;a<e.length;a++){var n=e[a-1];var o=e[a];i+=It(n,o);r.push(i)}if(i===0){return}for(var a=0;a<r.length;a++){r[a]/=i}this._offsets=r;this._length=i};WD.getLineLength=function(t){return this._length};WD.updateSymbolPosition=function(t){var e=t.__t;var r=this._points;var i=this._offsets;var a=r.length;if(!i){return}var n=this._lastFrame;var o;if(e<this._lastFramePercent){var s=Math.min(n+1,a-1);for(o=s;o>=0;o--){if(i[o]<=e){break}}o=Math.min(o,a-2)}else{for(var o=n;o<a;o++){if(i[o]>e){break}}o=Math.min(o-1,a-2)}Ct(t.position,r[o],r[o+1],(e-i[o])/(i[o+1]-i[o]));var l=r[o+1][0]-r[o][0];var u=r[o+1][1]-r[o][1];t.rotation=-Math.atan2(u,l)-Math.PI/2;this._lastFrame=o;this._lastFramePercent=e;t.ignore=false};M(FD,zD);var HD=rl({shape:{polyline:false,curveness:0,segs:[]},buildPath:function(t,e){var r=e.segs;var i=e.curveness;if(e.polyline){for(var a=0;a<r.length;){var n=r[a++];if(n>0){t.moveTo(r[a++],r[a++]);for(var o=1;o<n;o++){t.lineTo(r[a++],r[a++])}}}}else{for(var a=0;a<r.length;){var s=r[a++];var l=r[a++];var u=r[a++];var h=r[a++];t.moveTo(s,l);if(i>0){var f=(s+u)/2-(l-h)*i;var c=(l+h)/2-(u-s)*i;t.quadraticCurveTo(f,c,u,h)}else{t.lineTo(u,h)}}}},findDataIndex:function(t,e){var r=this.shape;var i=r.segs;var a=r.curveness;if(r.polyline){var n=0;for(var o=0;o<i.length;){var s=i[o++];if(s>0){var l=i[o++];var u=i[o++];for(var h=1;h<s;h++){var f=i[o++];var c=i[o++];if(Lo(l,u,f,c)){return n}}}n++}}else{var n=0;for(var o=0;o<i.length;){var l=i[o++];var u=i[o++];var f=i[o++];var c=i[o++];if(a>0){var v=(l+f)/2-(u-c)*a;var d=(u+c)/2-(f-l)*a;if(Po(l,u,v,d,f,c)){return n}}else{if(Lo(l,u,f,c)){return n}}n++}}return-1}});function ZD(){this.group=new Or}var UD=ZD.prototype;UD.isPersistent=function(){return!this._incremental};UD.updateData=function(t){this.group.removeAll();var e=new HD({rectHover:true,cursor:"default"});e.setShape({segs:t.getLayout("linesPoints")});this._setCommon(e,t);this.group.add(e);this._incremental=null};UD.incrementalPrepareUpdate=function(t){this.group.removeAll();this._clearIncremental();if(t.count()>5e5){if(!this._incremental){this._incremental=new qs({silent:true})}this.group.add(this._incremental)}else{this._incremental=null}};UD.incrementalUpdate=function(t,e){var r=new HD;r.setShape({segs:e.getLayout("linesPoints")});this._setCommon(r,e,!!this._incremental);if(!this._incremental){r.rectHover=true;r.cursor="default";r.__startIndex=t.start;this.group.add(r)}else{this._incremental.addDisplayable(r,true)}};UD.remove=function(){this._clearIncremental();this._incremental=null;this.group.removeAll()};UD._setCommon=function(r,t,e){var i=t.hostModel;r.setShape({polyline:i.get("polyline"),curveness:i.get("lineStyle.curveness")});r.useStyle(i.getModel("lineStyle").getLineStyle());r.style.strokeNoScale=true;var a=t.getVisual("color");if(a){r.setStyle("stroke",a)}r.setStyle("fill");if(!e){r.seriesIndex=i.seriesIndex;r.on("mousemove",function(t){r.dataIndex=null;var e=r.findDataIndex(t.offsetX,t.offsetY);if(e>0){r.dataIndex=e+r.__startIndex}})}};UD._clearIncremental=function(){var t=this._incremental;if(t){t.clearDisplaybles()}};var XD={seriesType:"lines",plan:vc(),reset:function(p){var g=p.coordinateSystem;var m=p.get("polyline");var y=p.pipelineContext.large;function t(t,e){var r=[];if(y){var i;var a=t.end-t.start;if(m){var n=0;for(var o=t.start;o<t.end;o++){n+=p.getLineCoordsCount(o)}i=new Float32Array(a+n*2)}else{i=new Float32Array(a*4)}var s=0;var l=[];for(var o=t.start;o<t.end;o++){var u=p.getLineCoords(o,r);if(m){i[s++]=u}for(var h=0;h<u;h++){l=g.dataToPoint(r[h],false,l);i[s++]=l[0];i[s++]=l[1]}}e.setLayout("linesPoints",i)}else{for(var o=t.start;o<t.end;o++){var f=e.getItemModel(o);var u=p.getLineCoords(o,r);var c=[];if(m){for(var v=0;v<u;v++){c.push(g.dataToPoint(r[v]))}}else{c[0]=g.dataToPoint(r[0]);c[1]=g.dataToPoint(r[1]);var d=f.get("lineStyle.curveness");if(+d){c[2]=[(c[0][0]+c[1][0])/2-(c[0][1]-c[1][1])*d,(c[0][1]+c[1][1])/2-(c[1][0]-c[0][0])*d]}}e.setItemLayout(o,c)}}}return{progress:t}}};tp({type:"lines",init:function(){},render:function(e,t,r){var i=e.getData();var a=this._updateLineDraw(i,e);var n=e.get("zlevel");var o=e.get("effect.trailLength");var s=r.getZr();var l=s.painter.getType()==="svg";if(!l){s.painter.getLayer(n).clear(true)}if(this._lastZlevel!=null&&!l){s.configLayer(this._lastZlevel,{motionBlur:false})}if(this._showEffect(e)&&o){if(D){var u=false;t.eachSeries(function(t){if(t!==e&&t.get("zlevel")===n){u=true}});u&&console.warn("Lines with trail effect should have an individual zlevel")}if(!l){s.configLayer(n,{motionBlur:true,lastFrameAlpha:Math.max(Math.min(o/10+.9,1),0)})}}a.updateData(i);this._lastZlevel=n;this._finished=true},incrementalPrepareRender:function(t,e,r){var i=t.getData();var a=this._updateLineDraw(i,t);a.incrementalPrepareUpdate(i);this._clearLayer(r);this._finished=false},incrementalRender:function(t,e,r){this._lineDraw.incrementalUpdate(t,e.getData());this._finished=t.end===e.getData().count()},updateTransform:function(t,e,r){var i=t.getData();var a=t.pipelineContext;if(!this._finished||a.large||a.progressiveRender){return{update:true}}else{var n=XD.reset(t);if(n.progress){n.progress({start:0,end:i.count()},i)}this._lineDraw.updateLayout();this._clearLayer(r)}},_updateLineDraw:function(t,e){var r=this._lineDraw;var i=this._showEffect(e);var a=!!e.get("polyline");var n=e.pipelineContext;var o=n.large;if(D){if(i&&o){console.warn("Large lines not support effect")}}if(!r||i!==this._hasEffet||a!==this._isPolyline||o!==this._isLargeDraw){if(r){r.remove()}r=this._lineDraw=o?new ZD:new AM(a?i?FD:VD:i?zD:IM);this._hasEffet=i;this._isPolyline=a;this._isLargeDraw=o;this.group.removeAll()}this.group.add(r.group);return r},_showEffect:function(t){return!!t.get("effect.show")},_clearLayer:function(t){var e=t.getZr();var r=e.painter.getType()==="svg";if(!r&&this._lastZlevel!=null){e.painter.getLayer(this._lastZlevel).clear(true)}},remove:function(t,e){this._lineDraw&&this._lineDraw.remove();this._lineDraw=null;this._clearLayer(e)},dispose:function(){}});function YD(t){if(!(t instanceof Array)){t=[t,t]}return t}var jD="lineStyle.opacity".split(".");var qD={seriesType:"lines",reset:function(t,e,r){var i=YD(t.get("symbol"));var a=YD(t.get("symbolSize"));var n=t.getData();n.setVisual("fromSymbol",i&&i[0]);n.setVisual("toSymbol",i&&i[1]);n.setVisual("fromSymbolSize",a&&a[0]);n.setVisual("toSymbolSize",a&&a[1]);n.setVisual("opacity",t.get(jD));function o(t,e){var r=t.getItemModel(e);var i=YD(r.getShallow("symbol",true));var a=YD(r.getShallow("symbolSize",true));var n=r.get(jD);i[0]&&t.setItemVisual(e,"fromSymbol",i[0]);i[1]&&t.setItemVisual(e,"toSymbol",i[1]);a[0]&&t.setItemVisual(e,"fromSymbolSize",a[0]);a[1]&&t.setItemVisual(e,"toSymbolSize",a[1]);t.setItemVisual(e,"opacity",n)}return{dataEach:n.hasItemOption?o:null}}};Yd(XD);jd(qD);rc.extend({type:"series.heatmap",getInitialData:function(t,e){return Xp(this.getSource(),this,{generateCoord:"value"})},preventIncremental:function(){var t=ef.get(this.get("coordinateSystem"));if(t&&t.dimensions){return t.dimensions[0]==="lng"&&t.dimensions[1]==="lat"}},defaultOption:{coordinateSystem:"cartesian2d",zlevel:0,z:2,geoIndex:0,blurSize:30,pointSize:20,maxOpacity:1,minOpacity:0}});var KD=256;function $D(){var t=_();this.canvas=t;this.blurSize=30;this.pointSize=20;this.maxOpacity=1;this.minOpacity=0;this._gradientPixels={}}$D.prototype={update:function(t,e,r,i,a,n){var o=this._getBrush();var s=this._getGradient(t,a,"inRange");var l=this._getGradient(t,a,"outOfRange");var u=this.pointSize+this.blurSize;var h=this.canvas;var f=h.getContext("2d");var c=t.length;h.width=e;h.height=r;for(var v=0;v<c;++v){var d=t[v];var p=d[0];var g=d[1];var m=d[2];var y=i(m);f.globalAlpha=y;f.drawImage(o,p-u,g-u)}if(!h.width||!h.height){return h}var x=f.getImageData(0,0,h.width,h.height);var _=x.data;var w=0;var b=_.length;var S=this.minOpacity;var M=this.maxOpacity;var I=M-S;while(w<b){var y=_[w+3]/256;var T=Math.floor(y*(KD-1))*4;if(y>0){var A=n(y)?s:l;y>0&&(y=y*I+S);_[w++]=A[T];_[w++]=A[T+1];_[w++]=A[T+2];_[w++]=A[T+3]*y*256}else{w+=4}}f.putImageData(x,0,0);return h},_getBrush:function(){var t=this._brushCanvas||(this._brushCanvas=_());var e=this.pointSize+this.blurSize;var r=e*2;t.width=r;t.height=r;var i=t.getContext("2d");i.clearRect(0,0,r,r);i.shadowOffsetX=r;i.shadowBlur=this.blurSize;i.shadowColor="#000";i.beginPath();i.arc(-e,e,this.pointSize,0,Math.PI*2,true);i.closePath();i.fill();return t},_getGradient:function(t,e,r){var i=this._gradientPixels;var a=i[r]||(i[r]=new Uint8ClampedArray(256*4));var n=[0,0,0,0];var o=0;for(var s=0;s<256;s++){e[r](s/255,true,n);a[o++]=n[0];a[o++]=n[1];a[o++]=n[2];a[o++]=n[3]}return a}};function JD(e,i,a){var r=e[1]-e[0];i=A(i,function(t){return{interval:[(t.interval[0]-e[0])/r,(t.interval[1]-e[0])/r]}});var n=i.length;var o=0;return function(t){for(var e=o;e<n;e++){var r=i[e].interval;if(r[0]<=t&&t<=r[1]){o=e;break}}if(e===n){for(var e=o-1;e>=0;e--){var r=i[e].interval;if(r[0]<=t&&t<=r[1]){o=e;break}}}return e>=0&&e<n&&a[e]}}function QD(t,e){var r=t[1]-t[0];e=[(e[0]-t[0])/r,(e[1]-t[0])/r];return function(t){return t>=e[0]&&t<=e[1]}}function tC(t){var e=t.dimensions;return e[0]==="lng"&&e[1]==="lat"}tp({type:"heatmap",render:function(r,t,e){var i;t.eachComponent("visualMap",function(e){e.eachTargetSeries(function(t){if(t===r){i=e}})});if(D){if(!i){throw new Error("Heatmap must use with visualMap")}}this.group.removeAll();this._incrementalDisplayable=null;var a=r.coordinateSystem;if(a.type==="cartesian2d"||a.type==="calendar"){this._renderOnCartesianAndCalendar(r,e,0,r.getData().count())}else if(tC(a)){this._renderOnGeo(a,r,i,e)}},incrementalPrepareRender:function(t,e,r){this.group.removeAll()},incrementalRender:function(t,e,r,i){var a=e.coordinateSystem;if(a){this._renderOnCartesianAndCalendar(e,i,t.start,t.end,true)}},_renderOnCartesianAndCalendar:function(t,e,r,i,a){var n=t.coordinateSystem;var o;var s;if(n.type==="cartesian2d"){var l=n.getAxis("x");var u=n.getAxis("y");if(D){if(!(l.type==="category"&&u.type==="category")){throw new Error("Heatmap on cartesian must have two category axes")}if(!(l.onBand&&u.onBand)){throw new Error("Heatmap on cartesian must have two axes with boundaryGap true")}}o=l.getBandWidth();s=u.getBandWidth()}var h=this.group;var f=t.getData();var c="itemStyle";var v="emphasis.itemStyle";var d="label";var p="emphasis.label";var g=t.getModel(c).getItemStyle(["color"]);var m=t.getModel(v).getItemStyle();var y=t.getModel(d);var x=t.getModel(p);var _=n.type;var w=_==="cartesian2d"?[f.mapDimension("x"),f.mapDimension("y"),f.mapDimension("value")]:[f.mapDimension("time"),f.mapDimension("value")];for(var b=r;b<i;b++){var S;if(_==="cartesian2d"){if(isNaN(f.get(w[2],b))){continue}var M=n.dataToPoint([f.get(w[0],b),f.get(w[1],b)]);S=new Bs({shape:{x:M[0]-o/2,y:M[1]-s/2,width:o,height:s},style:{fill:f.getItemVisual(b,"color"),opacity:f.getItemVisual(b,"opacity")}})}else{if(isNaN(f.get(w[1],b))){continue}S=new Bs({z2:1,shape:n.dataToRect([f.get(w[0],b)]).contentShape,style:{fill:f.getItemVisual(b,"color"),opacity:f.getItemVisual(b,"opacity")}})}var I=f.getItemModel(b);if(f.hasItemOption){g=I.getModel(c).getItemStyle(["color"]);m=I.getModel(v).getItemStyle();y=I.getModel(d);x=I.getModel(p)}var T=t.getRawValue(b);var A="-";if(T&&T[2]!=null){A=T[2]}Cl(g,m,y,x,{labelFetcher:t,labelDataIndex:b,defaultText:A,isRectText:true});S.setStyle(g);Al(S,f.hasItemOption?m:N({},m));S.incremental=a;if(a){S.useHoverLayer=true}h.add(S);f.setItemGraphicEl(b,S)}},_renderOnGeo:function(a,t,e,r){var i=e.targetVisuals.inRange;var n=e.targetVisuals.outOfRange;var o=t.getData();var s=this._hmLayer||(this._hmLayer||new $D);s.blurSize=t.get("blurSize");s.pointSize=t.get("pointSize");s.minOpacity=t.get("minOpacity");s.maxOpacity=t.get("maxOpacity");var l=a.getViewRect().clone();var u=a.getRoamTransform();l.applyTransform(u);var h=Math.max(l.x,0);var f=Math.max(l.y,0);var c=Math.min(l.width+l.x,r.getWidth());var v=Math.min(l.height+l.y,r.getHeight());var d=c-h;var p=v-f;var g=[o.mapDimension("lng"),o.mapDimension("lat"),o.mapDimension("value")];var m=o.mapArray(g,function(t,e,r){var i=a.dataToPoint([t,e]);i[0]-=h;i[1]-=f;i.push(r);return i});var y=e.getExtent();var x=e.type==="visualMap.continuous"?QD(y,e.option.range):JD(y,e.getPieceList(),e.option.selected);s.update(m,d,p,i.color.getNormalizer(),{inRange:i.color.getColorMapper(),outOfRange:n.color.getColorMapper()},x);var _=new ha({style:{width:d,height:p,x:h,y:f,image:s.canvas},silent:true});this.group.add(_)},dispose:function(){}});var eC=jx.extend({type:"series.pictorialBar",dependencies:["grid"],defaultOption:{symbol:"circle",symbolSize:null,symbolRotate:null,symbolPosition:null,symbolOffset:null,symbolMargin:null,symbolRepeat:false,symbolRepeatDirection:"end",symbolClip:false,symbolBoundingData:null,symbolPatternSize:400,barGap:"-100%",progressive:0,hoverAnimation:false},getInitialData:function(t){t.stack=null;return eC.superApply(this,"getInitialData",arguments)}});var rC=["itemStyle","borderWidth"];var iC=[{xy:"x",wh:"width",index:0,posDesc:["left","right"]},{xy:"y",wh:"height",index:1,posDesc:["top","bottom"]}];var aC=new bs;var nC=tp({type:"pictorialBar",render:function(t,e,r){var o=this.group;var s=t.getData();var l=this._data;var i=t.coordinateSystem;var a=i.getBaseAxis();var n=!!a.isHorizontal();var u=i.grid.getRect();var h={ecSize:{width:r.getWidth(),height:r.getHeight()},seriesModel:t,coordSys:i,coordSysExtent:[[u.x,u.x+u.width],[u.y,u.y+u.height]],isHorizontal:n,valueDim:iC[+n],categoryDim:iC[1-n]};s.diff(l).add(function(t){if(!s.hasValue(t)){return}var e=mC(s,t);var r=oC(s,t,e,h);var i=wC(s,h,r);s.setItemGraphicEl(t,i);o.add(i);AC(i,h,r)}).update(function(t,e){var r=l.getItemGraphicEl(e);if(!s.hasValue(t)){o.remove(r);return}var i=mC(s,t);var a=oC(s,t,i,h);var n=MC(s,a);if(r&&n!==r.__pictorialShapeStr){o.remove(r);s.setItemGraphicEl(t,null);r=null}if(r){bC(r,h,a)}else{r=wC(s,h,a,true)}s.setItemGraphicEl(t,r);r.__pictorialSymbolMeta=a;o.add(r);AC(r,h,a)}).remove(function(t){var e=l.getItemGraphicEl(t);e&&SC(l,t,e.__pictorialSymbolMeta.animationModel,e)}).execute();this._data=s;return this.group},dispose:nt,remove:function(e,t){var r=this.group;var i=this._data;if(e.get("animation")){if(i){i.eachItemGraphicEl(function(t){SC(i,t.dataIndex,e,t)})}}else{r.removeAll()}}});function oC(t,e,r,i){var a=t.getItemLayout(e);var n=r.get("symbolRepeat");var o=r.get("symbolClip");var s=r.get("symbolPosition")||"start";var l=r.get("symbolRotate");var u=(l||0)*Math.PI/180||0;var h=r.get("symbolPatternSize")||2;var f=r.isAnimationEnabled();var c={dataIndex:e,layout:a,itemModel:r,symbolType:t.getItemVisual(e,"symbol")||"circle",color:t.getItemVisual(e,"color"),symbolClip:o,symbolRepeat:n,symbolRepeatDirection:r.get("symbolRepeatDirection"),symbolPatternSize:h,rotation:u,animationModel:f?r:null,hoverAnimation:f&&r.get("hoverAnimation"),z2:r.getShallow("z",true)||0};sC(r,n,a,i,c);uC(t,e,a,n,o,c.boundingLength,c.pxSign,h,i,c);hC(r,c.symbolScale,u,i,c);var v=c.symbolSize;var d=r.get("symbolOffset");if(B(d)){d=[cu(d[0],v[0]),cu(d[1],v[1])]}fC(r,v,a,n,o,d,s,c.valueLineWidth,c.boundingLength,c.repeatCutLength,i,c);return c}function sC(t,e,r,i,a){var n=i.valueDim;var o=t.get("symbolBoundingData");var s=i.coordSys.getOtherAxis(i.coordSys.getBaseAxis());var l=s.toGlobalCoord(s.dataToCoord(0));var u=1-+(r[n.wh]<=0);var h;if(B(o)){var f=[lC(s,o[0])-l,lC(s,o[1])-l];f[1]<f[0]&&f.reverse();h=f[u]}else if(o!=null){h=lC(s,o)-l}else if(e){h=i.coordSysExtent[n.index][u]-l}else{h=r[n.wh]}a.boundingLength=h;if(e){a.repeatCutLength=r[n.wh]}a.pxSign=h>0?1:h<0?-1:0}function lC(t,e){return t.toGlobalCoord(t.dataToCoord(t.scale.parse(e)))}function uC(t,e,r,i,a,n,o,s,l,u){var h=l.valueDim;var f=l.categoryDim;var c=Math.abs(r[f.wh]);var v=t.getItemVisual(e,"symbolSize");if(B(v)){v=v.slice()}else{if(v==null){v="100%"}v=[v,v]}v[f.index]=cu(v[f.index],c);v[h.index]=cu(v[h.index],i?c:Math.abs(n));u.symbolSize=v;var d=u.symbolScale=[v[0]/s,v[1]/s];d[h.index]*=(l.isHorizontal?-1:1)*o}function hC(t,e,r,i,a){var n=t.get(rC)||0;if(n){aC.attr({scale:e.slice(),rotation:r});aC.updateTransform();n/=aC.getLineScale();n*=e[i.valueDim.index]}a.valueLineWidth=n}function fC(t,e,r,i,a,n,o,s,l,u,h,f){var c=h.categoryDim;var v=h.valueDim;var d=f.pxSign;var p=Math.max(e[v.index]+s,0);var g=p;if(i){var m=Math.abs(l);var y=X(t.get("symbolMargin"),"15%")+"";var x=false;if(y.lastIndexOf("!")===y.length-1){x=true;y=y.slice(0,y.length-1)}y=cu(y,e[v.index]);var _=Math.max(p+y*2,0);var w=x?0:y*2;var b=Cu(i);var S=b?i:DC((m+w)/_);var M=m-S*p;y=M/2/(x?S:S-1);_=p+y*2;w=x?0:y*2;if(!b&&i!=="fixed"){S=u?DC((Math.abs(u)+w)/_):0}g=S*_-w;f.repeatTimes=S;f.symbolMargin=y}var I=d*(g/2);var T=f.pathPosition=[];T[c.index]=r[c.wh]/2;T[v.index]=o==="start"?I:o==="end"?l-I:l/2;if(n){T[0]+=n[0];T[1]+=n[1]}var A=f.bundlePosition=[];A[c.index]=r[c.xy];A[v.index]=r[v.xy];var D=f.barRectShape=N({},r);D[v.wh]=d*Math.max(Math.abs(r[v.wh]),Math.abs(T[v.index]+I));D[c.wh]=r[c.wh];var C=f.clipShape={};C[c.xy]=-r[c.xy];C[c.wh]=h.ecSize[c.wh];C[v.xy]=0;C[v.wh]=r[v.wh]}function cC(t){var e=t.symbolPatternSize;var r=cm(t.symbolType,-e/2,-e/2,e,e,t.color);r.attr({culling:true});r.type!=="image"&&r.setStyle({strokeNoScale:true});return r}function vC(t,e,a,r){var i=t.__pictorialBundle;var n=a.symbolSize;var o=a.valueLineWidth;var s=a.pathPosition;var l=e.valueDim;var u=a.repeatTimes||0;var h=0;var f=n[e.valueDim.index]+o+a.symbolMargin*2;IC(t,function(t){t.__pictorialAnimationIndex=h;t.__pictorialRepeatTimes=u;if(h<u){TC(t,null,d(h),a,r)}else{TC(t,null,{scale:[0,0]},a,r,function(){i.remove(t)})}_C(t,a);h++});for(;h<u;h++){var c=cC(a);c.__pictorialAnimationIndex=h;c.__pictorialRepeatTimes=u;i.add(c);var v=d(h);TC(c,{position:v.position,scale:[0,0]},{scale:v.scale,rotation:v.rotation},a,r);c.on("mouseover",p).on("mouseout",g);_C(c,a)}function d(t){var e=s.slice();var r=a.pxSign;var i=t;if(a.symbolRepeatDirection==="start"?r>0:r<0){i=u-1-t}e[l.index]=f*(i-u/2+.5)+s[l.index];return{position:e,scale:a.symbolScale.slice(),rotation:a.rotation}}function p(){IC(t,function(t){t.trigger("emphasis")})}function g(){IC(t,function(t){t.trigger("normal")})}}function dC(t,e,r,i){var a=t.__pictorialBundle;var n=t.__pictorialMainPath;if(!n){n=t.__pictorialMainPath=cC(r);a.add(n);TC(n,{position:r.pathPosition.slice(),scale:[0,0],rotation:r.rotation},{scale:r.symbolScale.slice()},r,i);n.on("mouseover",o).on("mouseout",s)}else{TC(n,null,{position:r.pathPosition.slice(),scale:r.symbolScale.slice(),rotation:r.rotation},r,i)}_C(n,r);function o(){this.trigger("emphasis")}function s(){this.trigger("normal")}}function pC(t,e,r){var i=N({},e.barRectShape);var a=t.__pictorialBarRect;if(!a){a=t.__pictorialBarRect=new Bs({z2:2,shape:i,silent:true,style:{stroke:"transparent",fill:"transparent",lineWidth:0}});t.add(a)}else{TC(a,null,{shape:i},e,r)}}function gC(t,e,r,i){if(r.symbolClip){var a=t.__pictorialClipPath;var n=N({},r.clipShape);var o=e.valueDim;var s=r.animationModel;var l=r.dataIndex;if(a){Gl(a,{shape:n},s,l)}else{n[o.wh]=0;a=new Bs({shape:n});t.__pictorialBundle.setClipPath(a);t.__pictorialClipPath=a;var u={};u[o.wh]=r.clipShape[o.wh];ql[i?"updateProps":"initProps"](a,{shape:u},s,l)}}}function mC(t,e){var r=t.getItemModel(e);r.getAnimationDelayParams=yC;r.isAnimationEnabled=xC;return r}function yC(t){return{index:t.__pictorialAnimationIndex,count:t.__pictorialRepeatTimes}}function xC(){return this.parentModel.isAnimationEnabled()&&!!this.getShallow("animation")}function _C(t,e){t.off("emphasis").off("normal");var r=e.symbolScale.slice();e.hoverAnimation&&t.on("emphasis",function(){this.animateTo({scale:[r[0]*1.1,r[1]*1.1]},400,"elasticOut")}).on("normal",function(){this.animateTo({scale:r.slice()},400,"elasticOut")})}function wC(t,e,r,i){var a=new Or;var n=new Or;a.add(n);a.__pictorialBundle=n;n.attr("position",r.bundlePosition.slice());if(r.symbolRepeat){vC(a,e,r)}else{dC(a,e,r)}pC(a,r,i);gC(a,e,r,i);a.__pictorialShapeStr=MC(t,r);a.__pictorialSymbolMeta=r;return a}function bC(t,e,r){var i=r.animationModel;var a=r.dataIndex;var n=t.__pictorialBundle;Gl(n,{position:r.bundlePosition.slice()},i,a);if(r.symbolRepeat){vC(t,e,r,true)}else{dC(t,e,r,true)}pC(t,r,true);gC(t,e,r,true)}function SC(t,e,r,i){var a=i.__pictorialBarRect;a&&(a.style.text=null);var n=[];IC(i,function(t){n.push(t)});i.__pictorialMainPath&&n.push(i.__pictorialMainPath);i.__pictorialClipPath&&(r=null);L(n,function(t){Gl(t,{scale:[0,0]},r,e,function(){i.parent&&i.parent.remove(i)})});t.setItemGraphicEl(e,null)}function MC(t,e){return[t.getItemVisual(e.dataIndex,"symbol")||"none",!!e.symbolRepeat,!!e.symbolClip].join(":")}function IC(e,r,i){L(e.__pictorialBundle.children(),function(t){t!==e.__pictorialBarRect&&r.call(i,t)})}function TC(t,e,r,i,a,n){e&&t.attr(e);if(i.symbolClip&&!a){r&&t.attr(r)}else{r&&ql[a?"updateProps":"initProps"](t,r,i.animationModel,i.dataIndex,n)}}function AC(t,e,r){var i=r.color;var a=r.dataIndex;var n=r.itemModel;var o=n.getModel("itemStyle").getItemStyle(["color"]);var s=n.getModel("emphasis.itemStyle").getItemStyle();var l=n.getShallow("cursor");IC(t,function(t){t.setColor(i);t.setStyle(C({fill:i,opacity:r.opacity},o));Al(t,s);l&&(t.cursor=l);t.z2=r.z2});var u={};var h=e.valueDim.posDesc[+(r.boundingLength>0)];var f=t.__pictorialBarRect;qx(f.style,u,n,i,e.seriesModel,a,h);Al(f,u)}function DC(t){var e=Math.round(t);return Math.abs(t-e)<1e-4?e:Math.ceil(t)}Yd(z(_g,"pictorialBar"));jd(Wy("pictorialBar","roundRect"));var CC=function(t,e,r,i,a){Fm.call(this,t,e,r);this.type=i||"value";this.position=a||"bottom";this.orient=null};CC.prototype={constructor:CC,model:null,isHorizontal:function(){var t=this.position;return t==="top"||t==="bottom"},pointToData:function(t,e){return this.coordinateSystem.pointToData(t,e)[0]},toGlobalCoord:null,toLocalCoord:null};M(CC,Fm);function LC(t,e,r){this.dimension="single";this.dimensions=["single"];this._axis=null;this._rect;this._init(t,e,r);this.model=t}LC.prototype={type:"singleAxis",axisPointerEnabled:true,constructor:LC,_init:function(t,e,r){var i=this.dimension;var a=new CC(i,jg(t),[0,0],t.get("type"),t.get("position"));var n=a.type==="category";a.onBand=n&&t.get("boundaryGap");a.inverse=t.get("inverse");a.orient=t.get("orient");t.axis=a;a.model=t;a.coordinateSystem=this;this._axis=a},update:function(t,e){t.eachSeries(function(t){if(t.coordinateSystem===this){var e=t.getData();L(e.mapDimension(this.dimension,true),function(t){this._axis.scale.unionExtentFromData(e,t)},this);Yg(this._axis.scale,this._axis.model)}},this)},resize:function(t,e){this._rect=rh({left:t.get("left"),top:t.get("top"),right:t.get("right"),bottom:t.get("bottom"),width:t.get("width"),height:t.get("height")},{width:e.getWidth(),height:e.getHeight()});this._adjustAxis()},getRect:function(){return this._rect},_adjustAxis:function(){var t=this._rect;var e=this._axis;var r=e.isHorizontal();var i=r?[0,t.width]:[0,t.height];var a=e.reverse?1:0;e.setExtent(i[a],i[1-a]);this._updateAxisTransform(e,r?t.x:t.y)},_updateAxisTransform:function(t,e){var r=t.getExtent();var i=r[0]+r[1];var a=t.isHorizontal();t.toGlobalCoord=a?function(t){return t+e}:function(t){return i-t+e};t.toLocalCoord=a?function(t){return t-e}:function(t){return i-t+e}},getAxis:function(){return this._axis},getBaseAxis:function(){return this._axis},getAxes:function(){return[this._axis]},getTooltipAxes:function(){return{baseAxes:[this.getAxis()]}},containPoint:function(t){var e=this.getRect();var r=this.getAxis();var i=r.orient;if(i==="horizontal"){return r.contain(r.toLocalCoord(t[0]))&&(t[1]>=e.y&&t[1]<=e.y+e.height)}else{return r.contain(r.toLocalCoord(t[1]))&&(t[0]>=e.y&&t[0]<=e.y+e.height)}},pointToData:function(t){var e=this.getAxis();return[e.coordToData(e.toLocalCoord(t[e.orient==="horizontal"?0:1]))]},dataToPoint:function(t){var e=this.getAxis();var r=this.getRect();var i=[];var a=e.orient==="horizontal"?0:1;if(t instanceof Array){t=t[0]}i[a]=e.toGlobalCoord(e.dataToCoord(+t));i[1-a]=a===0?r.y+r.height/2:r.x+r.width/2;return i}};function kC(i,a){var n=[];i.eachComponent("singleAxis",function(t,e){var r=new LC(t,i,a);r.name="single_"+e;r.resize(t,a);t.coordinateSystem=r;n.push(r)});i.eachSeries(function(t){if(t.get("coordinateSystem")==="singleAxis"){var e=i.queryComponents({mainType:"singleAxis",index:t.get("singleAxisIndex"),id:t.get("singleAxisId")})[0];t.coordinateSystem=e&&e.coordinateSystem}});return n}ef.register("single",{create:kC,dimensions:LC.prototype.dimensions});function PC(t,e){e=e||{};var r=t.coordinateSystem;var i=t.axis;var a={};var n=i.position;var o=i.orient;var s=r.getRect();var l=[s.x,s.x+s.width,s.y,s.y+s.height];var u={horizontal:{top:l[2],bottom:l[3]},vertical:{left:l[0],right:l[1]}};a.position=[o==="vertical"?u.vertical[n]:l[0],o==="horizontal"?u.horizontal[n]:l[3]];var h={horizontal:0,vertical:1};a.rotation=Math.PI/2*h[o];var f={top:-1,bottom:1,right:1,left:-1};a.labelDirection=a.tickDirection=a.nameDirection=f[n];if(t.get("axisTick.inside")){a.tickDirection=-a.tickDirection}if(X(e.labelInside,t.get("axisLabel.inside"))){a.labelDirection=-a.labelDirection}var c=e.rotate;c==null&&(c=t.get("axisLabel.rotate"));a.labelRotation=n==="top"?-c:c;a.z2=1;return a}var NC=["axisLine","axisTickLabel","axisName"];var OC="splitLine";var EC=Gx.extend({type:"singleAxis",axisPointerClass:"SingleAxisPointer",render:function(t,e,r,i){var a=this.group;a.removeAll();var n=PC(t);var o=new px(t,n);L(NC,o.add,o);a.add(o.getGroup());if(t.get(OC+".show")){this["_"+OC](t)}EC.superCall(this,"render",t,e,r,i)},_splitLine:function(t){var e=t.axis;if(e.scale.isBlank()){return}var r=t.getModel("splitLine");var i=r.getModel("lineStyle");var a=i.get("width");var n=i.get("color");n=n instanceof Array?n:[n];var o=t.coordinateSystem.getRect();var s=e.isHorizontal();var l=[];var u=0;var h=e.getTicksCoords({tickModel:r});var f=[];var c=[];for(var v=0;v<h.length;++v){var d=e.toGlobalCoord(h[v].coord);if(s){f[0]=d;f[1]=o.y;c[0]=d;c[1]=o.y+o.height}else{f[0]=o.x;f[1]=d;c[0]=o.x+o.width;c[1]=d}var p=u++%n.length;l[p]=l[p]||[];l[p].push(new Gs(ul({shape:{x1:f[0],y1:f[1],x2:c[0],y2:c[1]},style:{lineWidth:a},silent:true})))}for(var v=0;v<l.length;++v){this.group.add(sl(l[v],{style:{stroke:n[v%n.length],lineDash:i.getLineDash(a),lineWidth:a},silent:true}))}}});var RC=hh.extend({type:"singleAxis",layoutMode:"box",axis:null,coordinateSystem:null,getCoordSysModel:function(){return this}});var zC={left:"5%",top:"5%",right:"5%",bottom:"5%",type:"value",position:"bottom",orient:"horizontal",axisLine:{show:true,lineStyle:{width:2,type:"solid"}},tooltip:{show:true},axisTick:{show:true,length:6,lineStyle:{width:2}},axisLabel:{show:true,interval:"auto"},splitLine:{show:true,lineStyle:{type:"dashed",opacity:.2}}};function BC(t,e){return e.type||(e.data?"category":"value")}m(RC.prototype,rm);tx("single",RC,BC,zC);var VC=function(t,e){var r=[];var i=t.seriesIndex;var a;if(i==null||!(a=e.getSeriesByIndex(i))){return{point:[]}}var n=a.getData();var o=un(n,t);if(o==null||o<0||B(o)){return{point:[]}}var s=n.getItemGraphicEl(o);var l=a.coordinateSystem;if(a.getTooltipPosition){r=a.getTooltipPosition(o)||[]}else if(l&&l.dataToPoint){r=l.dataToPoint(n.getValues(A(l.dimensions,function(t){return n.mapDimension(t)}),o,true))||[]}else if(s){var u=s.getBoundingRect().clone();u.applyTransform(s.transform);r=[u.x+u.width/2,u.y+u.height/2]}return{point:r,el:s}};var GC=L;var FC=z;var WC=hn();var HC=function(t,e,r){var i=t.currTrigger;var o=[t.x,t.y];var a=t;var n=t.dispatchAction||R(r.dispatchAction,r);var s=e.getComponent("axisPointer").coordSysAxesInfo;if(!s){return}if(QC(o)){o=VC({seriesIndex:a.seriesIndex,dataIndex:a.dataIndex},e).point}var l=QC(o);var u=a.axesInfo;var h=s.axesInfo;var f=i==="leave"||QC(o);var c={};var v={};var d={list:[],map:{}};var p={showPointer:FC(XC,v),showTooltip:FC(YC,d)};GC(s.coordSysMap,function(t,e){var n=l||t.containPoint(o);GC(s.coordSysAxesInfo[e],function(t,e){var r=t.axis;var i=$C(u,t);if(!f&&n&&(!u||i)){var a=i&&i.value;if(a==null&&!l){a=r.pointToData(o)}a!=null&&ZC(t,a,p,false,c)}})});var g={};GC(h,function(a,t){var n=a.linkGroup;if(n&&!v[t]){GC(n.axesInfo,function(t,e){var r=v[e];if(t!==a&&r){var i=r.value;n.mapper&&(i=a.axis.scale.parse(n.mapper(i,JC(t),JC(a))));g[a.key]=i}})}});GC(g,function(t,e){ZC(h[e],t,p,true,c)});jC(v,h,c);qC(d,o,t,n);KC(h,n,r);return c};function ZC(t,e,r,i,a){var n=t.axis;if(n.scale.isBlank()||!n.containData(e)){return}if(!t.involveSeries){r.showPointer(t,e);return}var o=UC(e,t);var s=o.payloadBatch;var l=o.snapToValue;if(s[0]&&a.seriesIndex==null){N(a,s[0])}if(!i&&t.snap){if(n.containData(l)&&l!=null){e=l}}r.showPointer(t,e,s,a);r.showTooltip(t,o,l)}function UC(l,t){var u=t.axis;var h=u.dim;var f=l;var c=[];var v=Number.MAX_VALUE;var d=-1;GC(t.seriesModels,function(e,t){var r=e.getData().mapDimension(h,true);var i;var a;if(e.getAxisTooltipData){var n=e.getAxisTooltipData(r,l,u);a=n.dataIndices;i=n.nestestValue}else{a=e.getData().indicesOfNearest(r[0],l,u.type==="category"?.5:null);if(!a.length){return}i=e.getData().get(r[0],a[0])}if(i==null||!isFinite(i)){return}var o=l-i;var s=Math.abs(o);if(s<=v){if(s<v||o>=0&&d<0){v=s;d=o;f=i;c.length=0}GC(a,function(t){c.push({seriesIndex:e.seriesIndex,dataIndexInside:t,dataIndex:e.getData().getRawIndex(t)})})}});return{payloadBatch:c,snapToValue:f}}function XC(t,e,r,i){t[e.key]={value:r,payloadBatch:i}}function YC(t,e,r,i){var a=r.payloadBatch;var n=e.axis;var o=n.model;var s=e.axisPointerModel;if(!e.triggerTooltip||!a.length){return}var l=e.coordSys.model;var u=Vx(l);var h=t.map[u];if(!h){h=t.map[u]={coordSysId:l.id,coordSysIndex:l.componentIndex,coordSysType:l.type,coordSysMainType:l.mainType,dataByAxis:[]};t.list.push(h)}h.dataByAxis.push({axisDim:n.dim,axisIndex:o.componentIndex,axisType:o.type,axisId:o.id,value:i,valueLabelOpt:{precision:s.get("label.precision"),formatter:s.get("label.formatter")},seriesDataIndices:a.slice()})}function jC(a,t,e){var n=e.axesInfo=[];GC(t,function(t,e){var r=t.axisPointerModel.option;var i=a[e];if(i){!t.useHandle&&(r.status="show");r.value=i.value;r.seriesDataIndices=(i.payloadBatch||[]).slice()}else{!t.useHandle&&(r.status="hide")}r.status==="show"&&n.push({axisDim:t.axis.dim,axisIndex:t.axis.model.componentIndex,value:r.value})})}function qC(t,e,r,i){if(QC(e)||!t.list.length){i({type:"hideTip"});return}var a=((t.list[0].dataByAxis[0]||{}).seriesDataIndices||[])[0]||{};i({type:"showTip",escapeConnect:true,x:e[0],y:e[1],tooltipOption:r.tooltipOption,position:r.position,dataIndexInside:a.dataIndexInside,dataIndex:a.dataIndex,seriesIndex:a.seriesIndex,dataByCoordSys:t.list})}function KC(t,e,r){var i=r.getZr();var a="axisPointerLastHighlights";var n=WC(i)[a]||{};var o=WC(i)[a]={};GC(t,function(t,e){var r=t.axisPointerModel.option;r.status==="show"&&GC(r.seriesDataIndices,function(t){var e=t.seriesIndex+" | "+t.dataIndex;o[e]=t})});var s=[];var l=[];L(n,function(t,e){!o[e]&&l.push(t)});L(o,function(t,e){!n[e]&&s.push(t)});l.length&&r.dispatchAction({type:"downplay",escapeConnect:true,batch:l});s.length&&r.dispatchAction({type:"highlight",escapeConnect:true,batch:s})}function $C(t,e){for(var r=0;r<(t||[]).length;r++){var i=t[r];if(e.axis.dim===i.axisDim&&e.axis.model.componentIndex===i.axisIndex){return i}}}function JC(t){var e=t.axis.model;var r={};var i=r.axisDim=t.axis.dim;r.axisIndex=r[i+"AxisIndex"]=e.componentIndex;r.axisName=r[i+"AxisName"]=e.name;r.axisId=r[i+"AxisId"]=e.id;return r}function QC(t){return!t||t[0]==null||isNaN(t[0])||t[1]==null||isNaN(t[1])}var tL=$d({type:"axisPointer",coordSysAxesInfo:null,defaultOption:{show:"auto",triggerOn:null,zlevel:0,z:50,type:"line",snap:false,triggerTooltip:true,value:null,status:null,link:[],animation:null,animationDurationUpdate:200,lineStyle:{color:"#aaa",width:1,type:"solid"},shadowStyle:{color:"rgba(150,150,150,0.3)"},label:{show:true,formatter:null,precision:"auto",margin:3,color:"#fff",padding:[5,7,5,7],backgroundColor:"auto",borderColor:null,borderWidth:0,shadowBlur:3,shadowColor:"#aaa"},handle:{show:false,icon:"M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7v-1.2h6.6z M13.3,22H6.7v-1.2h6.6z M13.3,19.6H6.7v-1.2h6.6z",size:45,margin:50,color:"#333",shadowBlur:3,shadowColor:"#aaa",shadowOffsetX:0,shadowOffsetY:2,throttle:40}}});var eL=hn();var rL=L;function iL(t,e,r){if(y.node){return}var i=e.getZr();eL(i).records||(eL(i).records={});aL(i,e);var a=eL(i).records[t]||(eL(i).records[t]={});a.handler=r}function aL(a,n){if(eL(a).initialized){return}eL(a).initialized=true;t("click",z(sL,"click"));t("mousemove",z(sL,"mousemove"));t("globalout",oL);function t(t,i){a.on(t,function(e){var r=lL(n);rL(eL(a).records,function(t){t&&i(t,e,r.dispatchAction)});nL(r.pendings,n)})}}function nL(t,e){var r=t.showTip.length;var i=t.hideTip.length;var a;if(r){a=t.showTip[r-1]}else if(i){a=t.hideTip[i-1]}if(a){a.dispatchAction=null;e.dispatchAction(a)}}function oL(t,e,r){t.handler("leave",null,r)}function sL(t,e,r,i){e.handler(t,r,i)}function lL(r){var i={showTip:[],hideTip:[]};var a=function(t){var e=i[t.type];if(e){e.push(t)}else{t.dispatchAction=a;r.dispatchAction(t)}};return{dispatchAction:a,pendings:i}}function uL(t,e){if(y.node){return}var r=e.getZr();var i=(eL(r).records||{})[t];if(i){eL(r).records[t]=null}}var hL=Jd({type:"axisPointer",render:function(t,e,r){var i=e.getComponent("tooltip");var a=t.get("triggerOn")||(i&&i.get("triggerOn")||"mousemove|click");iL("axisPointer",r,function(t,e,r){if(a!=="none"&&(t==="leave"||a.indexOf(t)>=0)){r({type:"updateAxisPointer",currTrigger:t,x:e&&e.offsetX,y:e&&e.offsetY})}})},remove:function(t,e){uL(e.getZr(),"axisPointer");hL.superApply(this._model,"remove",arguments)},dispose:function(t,e){uL("axisPointer",e);hL.superApply(this._model,"dispose",arguments)}});var fL=hn();var cL=P;var vL=R;function dL(){}dL.prototype={_group:null,_lastGraphicKey:null,_handle:null,_dragging:false,_lastValue:null,_lastStatus:null,_payloadInfo:null,animationThreshold:15,render:function(t,e,r,i){var a=e.get("value");var n=e.get("status");this._axisModel=t;this._axisPointerModel=e;this._api=r;if(!i&&this._lastValue===a&&this._lastStatus===n){return}this._lastValue=a;this._lastStatus=n;var o=this._group;var s=this._handle;if(!n||n==="hide"){o&&o.hide();s&&s.hide();return}o&&o.show();s&&s.show();var l={};this.makeElOption(l,a,t,e,r);var u=l.graphicKey;if(u!==this._lastGraphicKey){this.clear(r)}this._lastGraphicKey=u;var h=this._moveAnimation=this.determineAnimation(t,e);if(!o){o=this._group=new Or;this.createPointerEl(o,l,t,e);this.createLabelEl(o,l,t,e);r.getZr().add(o)}else{var f=z(pL,e,h);this.updatePointerEl(o,l,f,e);this.updateLabelEl(o,l,f,e)}xL(o,e,true);this._renderHandle(a)},remove:function(t){this.clear(t)},dispose:function(t){this.clear(t)},determineAnimation:function(t,e){var r=e.get("animation");var i=t.axis;var a=i.type==="category";var n=e.get("snap");if(!n&&!a){return false}if(r==="auto"||r==null){var o=this.animationThreshold;if(a&&i.getBandWidth()>o){return true}if(n){var s=Rx(t).seriesDataCount;var l=i.getExtent();return Math.abs(l[0]-l[1])/s>o}return false}return r===true},makeElOption:function(t,e,r,i,a){},createPointerEl:function(t,e,r,i){var a=e.pointer;if(a){var n=fL(t).pointerEl=new ql[a.type](cL(e.pointer));t.add(n)}},createLabelEl:function(t,e,r,i){if(e.label){var a=fL(t).labelEl=new Bs(cL(e.label));t.add(a);mL(a,i)}},updatePointerEl:function(t,e,r){var i=fL(t).pointerEl;if(i){i.setStyle(e.pointer.style);r(i,{shape:e.pointer.shape})}},updateLabelEl:function(t,e,r,i){var a=fL(t).labelEl;if(a){a.setStyle(e.label.style);r(a,{shape:e.label.shape,position:e.label.position});mL(a,i)}},_renderHandle:function(t){if(this._dragging||!this.updateHandleTransform){return}var e=this._axisPointerModel;var r=this._api.getZr();var i=this._handle;var a=e.getModel("handle");var n=e.get("status");if(!a.get("show")||!n||n==="hide"){i&&r.remove(i);this._handle=null;return}var o;if(!this._handle){o=true;i=this._handle=jl(a.get("icon"),{cursor:"move",draggable:true,onmousemove:function(t){jt(t.event)},onmousedown:vL(this._onHandleDragMove,this,0,0),drift:vL(this._onHandleDragMove,this),ondragend:vL(this._onHandleDragEnd,this)});r.add(i)}xL(i,e,false);var s=["color","borderColor","borderWidth","opacity","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"];i.setStyle(a.getItemStyle(null,s));var l=a.get("size");if(!B(l)){l=[l,l]}i.attr("scale",[l[0]/2,l[1]/2]);Ac(this,"_doDispatchAxisPointer",a.get("throttle")||0,"fixRate");this._moveHandleToValue(t,o)},_moveHandleToValue:function(t,e){pL(this._axisPointerModel,!e&&this._moveAnimation,this._handle,yL(this.getHandleTransform(t,this._axisModel,this._axisPointerModel)))},_onHandleDragMove:function(t,e){var r=this._handle;if(!r){return}this._dragging=true;var i=this.updateHandleTransform(yL(r),[t,e],this._axisModel,this._axisPointerModel);this._payloadInfo=i;r.stopAnimation();r.attr(yL(i));fL(r).lastProp=null;this._doDispatchAxisPointer()},_doDispatchAxisPointer:function(){var t=this._handle;if(!t){return}var e=this._payloadInfo;var r=this._axisModel;this._api.dispatchAction({type:"updateAxisPointer",x:e.cursorPoint[0],y:e.cursorPoint[1],tooltipOption:e.tooltipOption,axesInfo:[{axisDim:r.axis.dim,axisIndex:r.componentIndex}]})},_onHandleDragEnd:function(t){this._dragging=false;var e=this._handle;if(!e){return}var r=this._axisPointerModel.get("value");this._moveHandleToValue(r);this._api.dispatchAction({type:"hideTip"})},getHandleTransform:null,updateHandleTransform:null,clear:function(t){this._lastValue=null;this._lastStatus=null;var e=t.getZr();var r=this._group;var i=this._handle;if(e&&r){this._lastGraphicKey=null;r&&e.remove(r);i&&e.remove(i);this._group=null;this._handle=null;this._payloadInfo=null}},doClear:function(){},buildLabel:function(t,e,r){r=r||0;return{x:t[r],y:t[1-r],width:e[r],height:e[1-r]}}};dL.prototype.constructor=dL;function pL(t,e,r,i){if(!gL(fL(r).lastProp,i)){fL(r).lastProp=i;e?Gl(r,i,t):(r.stopAnimation(),r.attr(i))}}function gL(r,t){if(F(r)&&F(t)){var i=true;L(t,function(t,e){i=i&&gL(r[e],t)});return!!i}else{return r===t}}function mL(t,e){t[e.get("label.show")?"show":"hide"]()}function yL(t){return{position:t.position.slice(),rotation:t.rotation||0}}function xL(t,e,r){var i=e.get("z");var a=e.get("zlevel");t&&t.traverse(function(t){if(t.type!=="group"){i!=null&&(t.z=i);a!=null&&(t.zlevel=a);t.silent=r}})}wn(dL);function _L(t){var e=t.get("type");var r=t.getModel(e+"Style");var i;if(e==="line"){i=r.getLineStyle();i.fill=null}else if(e==="shadow"){i=r.getAreaStyle();i.stroke=null}return i}function wL(t,e,r,i,a){var n=r.get("value");var o=SL(n,e.axis,e.ecModel,r.get("seriesDataIndices"),{precision:r.get("label.precision"),formatter:r.get("label.formatter")});var s=r.getModel("label");var l=Nu(s.get("padding")||0);var u=s.getFont();var h=bi(o,u);var f=a.position;var c=h.width+l[1]+l[3];var v=h.height+l[0]+l[2];var d=a.align;d==="right"&&(f[0]-=c);d==="center"&&(f[0]-=c/2);var p=a.verticalAlign;p==="bottom"&&(f[1]-=v);p==="middle"&&(f[1]-=v/2);bL(f,c,v,i);var g=s.get("backgroundColor");if(!g||g==="auto"){g=e.get("axisLine.lineStyle.color")}t.label={shape:{x:0,y:0,width:c,height:v,r:s.get("borderRadius")},position:f.slice(),style:{text:o,textFont:u,textFill:s.getTextColor(),textPosition:"inside",fill:g,stroke:s.get("borderColor")||"transparent",lineWidth:s.get("borderWidth")||0,shadowBlur:s.get("shadowBlur"),shadowColor:s.get("shadowColor"),shadowOffsetX:s.get("shadowOffsetX"),shadowOffsetY:s.get("shadowOffsetY")},z2:10}}function bL(t,e,r,i){var a=i.getWidth();var n=i.getHeight();t[0]=Math.min(t[0]+e,a)-e;t[1]=Math.min(t[1]+r,n)-r;t[0]=Math.max(t[0],0);t[1]=Math.max(t[1],0)}function SL(t,e,a,r,i){t=e.scale.parse(t);var n=e.scale.getLabel(t,{precision:i.precision});var o=i.formatter;if(o){var s={value:$g(e,t),seriesData:[]};L(r,function(t){var e=a.getSeriesByIndex(t.seriesIndex);var r=t.dataIndexInside;var i=e&&e.getDataParams(r);i&&s.seriesData.push(i)});if(G(o)){n=o.replace("{value}",n)}else if(V(o)){n=o(s)}}return n}function ML(t,e,r){var i=le();ve(i,i,r.rotation);ce(i,i,r.position);return Hl([t.dataToCoord(e),(r.labelOffset||0)+(r.labelDirection||1)*(r.labelMargin||0)],i)}function IL(t,e,r,i,a,n){var o=px.innerTextLayout(r.rotation,0,r.labelDirection);r.labelMargin=a.get("label.margin");wL(e,i,a,n,{position:ML(i.axis,t,r),align:o.textAlign,verticalAlign:o.textVerticalAlign})}function TL(t,e,r){r=r||0;return{x1:t[r],y1:t[1-r],x2:e[r],y2:e[1-r]}}function AL(t,e,r){r=r||0;return{x:t[r],y:t[1-r],width:e[r],height:e[1-r]}}function DL(t,e,r,i,a,n){return{cx:t,cy:e,r0:r,r:i,startAngle:a,endAngle:n,clockwise:true}}var CL=dL.extend({makeElOption:function(t,e,r,i,a){var n=r.axis;var o=n.grid;var s=i.get("type");var l=LL(o,n).getOtherAxis(n).getGlobalExtent();var u=n.toGlobalCoord(n.dataToCoord(e,true));if(s&&s!=="none"){var h=_L(i);var f=kL[s](n,u,l,h);f.style=h;t.graphicKey=f.type;t.pointer=f}var c=Zx(o.model,r);IL(e,t,c,r,i,a)},getHandleTransform:function(t,e,r){var i=Zx(e.axis.grid.model,e,{labelInside:false});i.labelMargin=r.get("handle.margin");return{position:ML(e.axis,t,i),rotation:i.rotation+(i.labelDirection<0?Math.PI:0)}},updateHandleTransform:function(t,e,r,i){var a=r.axis;var n=a.grid;var o=a.getGlobalExtent(true);var s=LL(n,a).getOtherAxis(a).getGlobalExtent();var l=a.dim==="x"?0:1;var u=t.position;u[l]+=e[l];u[l]=Math.min(o[1],u[l]);u[l]=Math.max(o[0],u[l]);var h=(s[1]+s[0])/2;var f=[h,h];f[l]=u[l];var c=[{verticalAlign:"middle"},{align:"center"}];return{position:u,rotation:t.rotation,cursorPoint:f,tooltipOption:c[l]}}});function LL(t,e){var r={};r[e.dim+"AxisIndex"]=e.index;return t.getCartesian(r)}var kL={line:function(t,e,r,i){var a=TL([e,r[0]],[e,r[1]],PL(t));ul({shape:a,style:i});return{type:"Line",shape:a}},shadow:function(t,e,r,i){var a=Math.max(1,t.getBandWidth());var n=r[1]-r[0];return{type:"Rect",shape:AL([e-a/2,r[0]],[a,n],PL(t))}}};function PL(t){return t.dim==="x"?0:1}Gx.registerAxisPointerClass("CartesianAxisPointer",CL);Fd(function(t){if(t){(!t.axisPointer||t.axisPointer.length===0)&&(t.axisPointer={});var e=t.axisPointer.link;if(e&&!B(e)){t.axisPointer.link=[e]}}});Wd(Zv.PROCESSOR.STATISTIC,function(t,e){t.getComponent("axisPointer").coordSysAxesInfo=Cx(t,e)});Zd({type:"updateAxisPointer",event:"updateAxisPointer",update:":updateAxisPointer"},HC);var NL=["x","y"];var OL=["width","height"];var EL=dL.extend({makeElOption:function(t,e,r,i,a){var n=r.axis;var o=n.coordinateSystem;var s=BL(o,1-zL(n));var l=o.dataToPoint(e)[0];var u=i.get("type");if(u&&u!=="none"){var h=_L(i);var f=RL[u](n,l,s,h);f.style=h;t.graphicKey=f.type;t.pointer=f}var c=PC(r);IL(e,t,c,r,i,a)},getHandleTransform:function(t,e,r){var i=PC(e,{labelInside:false});i.labelMargin=r.get("handle.margin");return{position:ML(e.axis,t,i),rotation:i.rotation+(i.labelDirection<0?Math.PI:0)}},updateHandleTransform:function(t,e,r,i){var a=r.axis;var n=a.coordinateSystem;var o=zL(a);var s=BL(n,o);var l=t.position;l[o]+=e[o];l[o]=Math.min(s[1],l[o]);l[o]=Math.max(s[0],l[o]);var u=BL(n,1-o);var h=(u[1]+u[0])/2;var f=[h,h];f[o]=l[o];return{position:l,rotation:t.rotation,cursorPoint:f,tooltipOption:{verticalAlign:"middle"}}}});var RL={line:function(t,e,r,i){var a=TL([e,r[0]],[e,r[1]],zL(t));ul({shape:a,style:i});return{type:"Line",shape:a}},shadow:function(t,e,r,i){var a=t.getBandWidth();var n=r[1]-r[0];return{type:"Rect",shape:AL([e-a/2,r[0]],[a,n],zL(t))}}};function zL(t){return t.isHorizontal()?0:1}function BL(t,e){var r=t.getRect();return[r[NL[e]],r[NL[e]]+r[OL[e]]]}Gx.registerAxisPointerClass("SingleAxisPointer",EL);Jd({type:"single"});var VL=2;var GL=rc.extend({type:"series.themeRiver",dependencies:["singleAxis"],nameMap:null,init:function(t){GL.superApply(this,"init",arguments);this.legendDataProvider=function(){return this.getRawData()}},fixData:function(t){var e=t.length;var r=SA().key(function(t){return t[2]}).entries(t);var i=A(r,function(t){return{name:t.key,dataList:t.values}});var a=i.length;var n=-1;var o=-1;for(var s=0;s<a;++s){var l=i[s].dataList.length;if(l>n){n=l;o=s}}for(var u=0;u<a;++u){if(u===o){continue}var h=i[u].name;for(var f=0;f<n;++f){var c=i[o].dataList[f][0];var v=i[u].dataList.length;var d=-1;for(var p=0;p<v;++p){var g=i[u].dataList[p][0];if(g===c){d=p;break}}if(d===-1){t[e]=[];t[e][0]=c;t[e][1]=0;t[e][2]=h;e++}}}return t},getInitialData:function(t,e){var r=e.queryComponents({mainType:"singleAxis",index:this.get("singleAxisIndex"),id:this.get("singleAxisId")})[0];var i=r.get("type");var a=O(t.data,function(t){return t[2]!==undefined});var n=this.fixData(a||[]);var o=[];var s=this.nameMap=it();var l=0;for(var u=0;u<n.length;++u){o.push(n[u][VL]);if(!s.get(n[u][VL])){s.set(n[u][VL],l);l++}}var h=Wp(n,{coordDimensions:["single"],dimensionsDefine:[{name:"time",type:hp(i)},{name:"value",type:"float"},{name:"name",type:"ordinal"}],encodeDefine:{single:0,value:1,itemName:2}});var f=new Ip(h,this);f.initData(n);return f},getLayerSeries:function(){var r=this.getData();var t=r.count();var e=[];for(var i=0;i<t;++i){e[i]=i}var a=SA().key(function(t){return r.get("name",t)}).entries(e);var n=A(a,function(t){return{name:t.key,indices:t.values}});var o=r.mapDimension("single");for(var s=0;s<n.length;++s){n[s].indices.sort(l)}function l(t,e){return r.get(o,t)-r.get(o,e)}return n},getAxisTooltipData:function(t,e,r){if(!B(t)){t=t?[t]:[]}var i=this.getData();var a=this.getLayerSeries();var n=[];var o=a.length;var s;for(var l=0;l<o;++l){var u=Number.MAX_VALUE;var h=-1;var f=a[l].indices.length;for(var c=0;c<f;++c){var v=i.get(t[0],a[l].indices[c]);var d=Math.abs(v-e);if(d<=u){s=v;u=d;h=a[l].indices[c]}}n.push(h)}return{dataIndices:n,nestestValue:s}},formatTooltip:function(t){var e=this.getData();var r=e.getName(t);var i=e.get(e.mapDimension("value"),t);if(isNaN(i)||i==null){i="-"}return Ru(r+" : "+i)},defaultOption:{zlevel:0,z:2,coordinateSystem:"singleAxis",boundaryGap:["10%","10%"],singleAxisIndex:0,animationEasing:"linear",label:{margin:4,show:true,position:"left",color:"#000",fontSize:11},emphasis:{label:{show:true}}}});tp({type:"themeRiver",init:function(){this._layers=[]},render:function(b,t,e){var S=b.getData();var M=this.group;var I=b.getLayerSeries();var r=S.getLayout("layoutInfo");var i=r.rect;var a=r.boundaryGap;M.attr("position",[0,i.y+a[0]]);function n(t){return t.name}var o=new op(this._layersSeries||[],I,n,n);var T={};o.add(R(s,this,"add")).update(R(s,this,"update")).remove(R(s,this,"remove")).execute();function s(t,e,r){var i=this._layers;if(t==="remove"){M.remove(i[e]);return}var a=[];var n=[];var o;var s=I[e].indices;for(var l=0;l<s.length;l++){var u=S.getItemLayout(s[l]);var h=u.x;var f=u.y0;var c=u.y;a.push([h,f]);n.push([h,f+c]);o=S.getItemVisual(s[l],"color")}var v;var d;var p=S.getItemLayout(s[0]);var g=S.getItemModel(s[l-1]);var m=g.getModel("label");var y=m.get("margin");if(t==="add"){var x=T[e]=new Or;v=new Ly({shape:{points:a,stackedOnPoints:n,smooth:.4,stackedOnSmooth:.4,smoothConstraint:false},z2:0});d=new ws({style:{x:p.x-y,y:p.y0+p.y/2}});x.add(v);x.add(d);M.add(x);v.setClipPath(FL(v.getBoundingRect(),b,function(){v.removeClipPath()}))}else{var x=i[r];v=x.childAt(0);d=x.childAt(1);M.add(x);T[e]=x;Gl(v,{shape:{points:a,stackedOnPoints:n}},b);Gl(d,{style:{x:p.x-y,y:p.y0+p.y/2}},b)}var _=g.getModel("emphasis.itemStyle");var w=g.getModel("itemStyle");Ll(d.style,m,{text:m.get("show")?b.getFormattedLabel(s[l-1],"normal")||S.getName(s[l-1]):null,textVerticalAlign:"middle"});v.setStyle(N({fill:o},w.getItemStyle(["color"])));Al(v,_.getItemStyle())}this._layersSeries=I;this._layers=T},dispose:function(){}});function FL(t,e,r){var i=new Bs({shape:{x:t.x-10,y:t.y-10,width:0,height:t.height+20}});Fl(i,{shape:{width:t.width+20,height:t.height+20}},e,r);return i}var WL=function(t,e){t.eachSeriesByType("themeRiver",function(t){var e=t.getData();var r=t.coordinateSystem;var i={};var a=r.getRect();i.rect=a;var n=t.get("boundaryGap");var o=r.getAxis();i.boundaryGap=n;if(o.orient==="horizontal"){n[0]=cu(n[0],a.height);n[1]=cu(n[1],a.height);var s=a.height-n[0]-n[1];HL(e,t,s)}else{n[0]=cu(n[0],a.width);n[1]=cu(n[1],a.width);var l=a.width-n[0]-n[1];HL(e,t,l)}e.setLayout("layoutInfo",i)})};function HL(r,t,e){if(!r.count()){return}var i=t.coordinateSystem;var a=t.getLayerSeries();var n=r.mapDimension("single");var o=r.mapDimension("value");var s=A(a,function(t){return A(t.indices,function(t){var e=i.dataToPoint(r.get(n,t));e[1]=r.get(o,t);return e})});var l=ZL(s);var u=l.y0;var h=e/l.max;var f=a.length;var c=a[0].indices.length;var v;for(var d=0;d<c;++d){v=u[d]*h;r.setItemLayout(a[0].indices[d],{layerIndex:0,x:s[0][d][0],y0:v,y:s[0][d][1]*h});for(var p=1;p<f;++p){v+=s[p-1][d][1]*h;r.setItemLayout(a[p].indices[d],{layerIndex:p,x:s[p][d][0],y0:v,y:s[p][d][1]*h})}}}function ZL(t){var e=t.length;var r=t[0].length;var i=[];var a=[];var n=0;var o;var s={};for(var l=0;l<r;++l){for(var u=0,o=0;u<e;++u){o+=t[u][l][1]}if(o>n){n=o}i.push(o)}for(var h=0;h<r;++h){a[h]=(n-i[h])/2}n=0;for(var f=0;f<r;++f){var c=i[f]+a[f];if(c>n){n=c}}s.y0=a;s.max=n;return s}var UL=function(t){t.eachSeriesByType("themeRiver",function(a){var n=a.getData();var o=a.getRawData();var s=a.get("color");var l=it();n.each(function(t){l.set(n.getRawIndex(t),t)});o.each(function(t){var e=o.getName(t);var r=s[(a.nameMap.get(e)-1)%s.length];o.setItemVisual(t,"color",r);var i=l.get(t);if(i!=null){n.setItemVisual(i,"color",r)}})})};Yd(WL);jd(UL);Wd(T_("themeRiver"));rc.extend({type:"series.sunburst",_viewRoot:null,getInitialData:function(t,e){var r={name:t.name,children:t.data};XL(r);var i=t.levels||[];var a={};a.levels=i;return ub.createTree(r,this,a).data},optionUpdated:function(){this.resetViewRoot()},getDataParams:function(t){var e=rc.prototype.getDataParams.apply(this,arguments);var r=this.getData().tree.getNodeByDataIndex(t);e.treePathInfo=Rb(r,this);return e},defaultOption:{zlevel:0,z:2,center:["50%","50%"],radius:[0,"75%"],clockwise:true,startAngle:90,minAngle:0,percentPrecision:2,stillShowZeroSum:true,highlightPolicy:"descendant",nodeClick:"rootToNode",renderLabelForZeroData:false,label:{rotate:"radial",show:true,opacity:1,align:"center",position:"inside",distance:5,silent:true,emphasis:{}},itemStyle:{borderWidth:1,borderColor:"white",borderType:"solid",shadowBlur:0,shadowColor:"rgba(0, 0, 0, 0.2)",shadowOffsetX:0,shadowOffsetY:0,opacity:1,emphasis:{},highlight:{opacity:1},downplay:{opacity:.9}},animationType:"expansion",animationDuration:1e3,animationDurationUpdate:500,animationEasing:"cubicOut",data:[],levels:[],sort:"desc"},getViewRoot:function(){return this._viewRoot},resetViewRoot:function(t){t?this._viewRoot=t:t=this._viewRoot;var e=this.getRawData().tree.root;if(!t||t!==e&&!e.contains(t)){this._viewRoot=e}}});function XL(t){var r=0;L(t.children,function(t){XL(t);var e=t.value;B(e)&&(e=e[0]);r+=e});var e=t.value;if(B(e)){e=e[0]}if(e==null||isNaN(e)){e=r}if(e<0){e=0}B(t.value)?t.value[0]=e:t.value=e}var YL={NONE:"none",DESCENDANT:"descendant",ANCESTOR:"ancestor",SELF:"self"};var jL=2;var qL=4;function KL(t,e,r){Or.call(this);var i=new Is({z2:jL});i.seriesIndex=e.seriesIndex;var a=new ws({z2:qL,silent:t.getModel("label").get("silent")});this.add(i);this.add(a);this.updateData(true,t,"normal",e,r);function n(){a.ignore=a.hoverIgnore}function o(){a.ignore=a.normalIgnore}this.on("emphasis",n).on("normal",o).on("mouseover",n).on("mouseout",o)}var $L=KL.prototype;$L.updateData=function(t,e,r,i,a){this.node=e;e.piece=this;i=i||this._seriesModel;a=a||this._ecModel;var n=this.childAt(0);n.dataIndex=e.dataIndex;var o=e.getModel();var s=e.getLayout();var l=N({},s);l.label=null;var u=JL(e,i,a);ek(e,i,u);var h=o.getModel("itemStyle").getItemStyle();var f;if(r==="normal"){f=h}else{var c=o.getModel(r+".itemStyle").getItemStyle();f=m(c,h)}f=C({lineJoin:"bevel",fill:f.fill||u},f);if(t){n.setShape(l);n.shape.r=s.r0;Gl(n,{shape:{r:s.r}},i,e.dataIndex);n.useStyle(f)}else if(typeof f.fill==="object"&&f.fill.type||typeof n.style.fill==="object"&&n.style.fill.type){Gl(n,{shape:l},i);n.useStyle(f)}else{Gl(n,{shape:l,style:f},i)}this._updateLabel(i,u,r);var v=o.getShallow("cursor");v&&n.attr("cursor",v);if(t){var d=i.getShallow("highlightPolicy");this._initEvents(n,e,i,d)}this._seriesModel=i||this._seriesModel;this._ecModel=a||this._ecModel};$L.onEmphasis=function(e){var r=this;this.node.hostTree.root.eachNode(function(t){if(t.piece){if(r.node===t){t.piece.updateData(false,t,"emphasis")}else if(tk(t,r.node,e)){t.piece.childAt(0).trigger("highlight")}else if(e!==YL.NONE){t.piece.childAt(0).trigger("downplay")}}})};$L.onNormal=function(){this.node.hostTree.root.eachNode(function(t){if(t.piece){t.piece.updateData(false,t,"normal")}})};$L.onHighlight=function(){this.updateData(false,this.node,"highlight")};$L.onDownplay=function(){this.updateData(false,this.node,"downplay")};$L._updateLabel=function(t,e,r){var i=this.node.getModel();var a=i.getModel("label");var n=r==="normal"||r==="emphasis"?a:i.getModel(r+".label");var o=i.getModel("emphasis.label");var s=X(t.getFormattedLabel(this.node.dataIndex,"normal",null,null,"label"),this.node.name);if(S("show")===false){s=""}var l=this.node.getLayout();var u=n.get("minAngle");if(u==null){u=a.get("minAngle")}u=u/180*Math.PI;var h=l.endAngle-l.startAngle;if(u!=null&&Math.abs(h)<u){s=""}var f=this.childAt(1);Cl(f.style,f.hoverStyle||{},a,o,{defaultText:n.getShallow("show")?s:null,autoColor:e,useInsideStyle:true});var c=(l.startAngle+l.endAngle)/2;var v=Math.cos(c);var d=Math.sin(c);var p;var g=S("position");var m=S("distance")||0;var y=S("align");if(g==="outside"){p=l.r+m;y=c>Math.PI/2?"right":"left"}else{if(!y||y==="center"){p=(l.r+l.r0)/2;y="center"}else if(y==="left"){p=l.r0+m;if(c>Math.PI/2){y="right"}}else if(y==="right"){p=l.r-m;if(c>Math.PI/2){y="left"}}}f.attr("style",{text:s,textAlign:y,textVerticalAlign:S("verticalAlign")||"middle",opacity:S("opacity")});var x=p*v+l.cx;var _=p*d+l.cy;f.attr("position",[x,_]);var w=S("rotate");var b=0;if(w==="radial"){b=-c;if(b<-Math.PI/2){b+=Math.PI}}else if(w==="tangential"){b=Math.PI/2-c;if(b>Math.PI/2){b-=Math.PI}else if(b<-Math.PI/2){b+=Math.PI}}else if(typeof w==="number"){b=w*Math.PI/180}f.attr("rotation",b);function S(t){var e=n.get(t);if(e==null){return a.get(t)}else{return e}}};$L._initEvents=function(t,e,r,i){t.off("mouseover").off("mouseout").off("emphasis").off("normal");var a=this;var n=function(){a.onEmphasis(i)};var o=function(){a.onNormal()};var s=function(){a.onDownplay()};var l=function(){a.onHighlight()};if(r.isAnimationEnabled()){t.on("mouseover",n).on("mouseout",o).on("emphasis",n).on("normal",o).on("downplay",s).on("highlight",l)}};M(KL,Or);function JL(t,e,r){var i=t.getVisual("color");var a=t.getVisual("visualMeta");if(!a||a.length===0){i=null}var n=t.getModel("itemStyle").get("color");if(n){return n}else if(i){return i}else if(t.depth===0){return r.option.color[0]}else{var o=r.option.color.length;n=r.option.color[QL(t)%o]}return n}function QL(t){var e=t;while(e.depth>1){e=e.parentNode}var r=t.getAncestors()[0];return S(r.children,e)}function tk(t,e,r){if(r===YL.NONE){return false}else if(r===YL.SELF){return t===e}else if(r===YL.ANCESTOR){return t===e||t.isAncestorOf(e)}else{return t===e||t.isDescendantOf(e)}}function ek(t,e,r){var i=e.getData();i.setItemVisual(t.dataIndex,"color",r)}var rk="sunburstRootToNode";var ik=gc.extend({type:"sunburst",init:function(){},render:function(i,a,t,e){var n=this;this.seriesModel=i;this.api=t;this.ecModel=a;var o=i.getData();var s=o.tree.root;var r=i.getViewRoot();var l=this.group;var u=i.get("renderLabelForZeroData");var h=[];r.eachNode(function(t){h.push(t)});var f=this._oldChildren||[];d(h,f);m(s,r);if(e&&e.highlight&&e.highlight.piece){var c=i.getShallow("highlightPolicy");e.highlight.piece.onEmphasis(c)}else if(e&&e.unhighlight){var v=this.virtualPiece;if(!v&&s.children.length){v=s.children[0].piece}if(v){v.onNormal()}}this._initEvents();this._oldChildren=h;function d(a,n){if(a.length===0&&n.length===0){return}new op(n,a,t,t).add(e).update(e).remove(z(e,null)).execute();function t(t){return t.getId()}function e(t,e){var r=t==null?null:a[t];var i=e==null?null:n[e];p(r,i)}}function p(t,e){if(!u&&t&&!t.getValue()){t=null}if(t!==s&&e!==s){if(e&&e.piece){if(t){e.piece.updateData(false,t,"normal",i,a);o.setItemGraphicEl(t.dataIndex,e.piece)}else{g(e)}}else if(t){var r=new KL(t,i,a);l.add(r);o.setItemGraphicEl(t.dataIndex,r)}}}function g(t){if(!t){return}if(t.piece){l.remove(t.piece);t.piece=null}}function m(t,e){if(e.depth>0){if(n.virtualPiece){n.virtualPiece.updateData(false,t,"normal",i,a)}else{n.virtualPiece=new KL(t,i,a);l.add(n.virtualPiece)}if(e.piece._onclickEvent){e.piece.off("click",e.piece._onclickEvent)}var r=function(t){n._rootToNode(e.parentNode)};e.piece._onclickEvent=r;n.virtualPiece.on("click",r)}else if(n.virtualPiece){l.remove(n.virtualPiece);n.virtualPiece=null}}},dispose:function(){},_initEvents:function(){var s=this;var t=function(n){var o=false;var t=s.seriesModel.getViewRoot();t.eachNode(function(t){if(!o&&t.piece&&t.piece.childAt(0)===n.target){var e=t.getModel().get("nodeClick");if(e==="rootToNode"){s._rootToNode(t)}else if(e==="link"){var r=t.getModel();var i=r.get("link");if(i){var a=r.get("target",true)||"_blank";window.open(i,a)}}o=true}})};if(this.group._onclickEvent){this.group.off("click",this.group._onclickEvent)}this.group.on("click",t);this.group._onclickEvent=t},_rootToNode:function(t){if(t!==this.seriesModel.getViewRoot()){this.api.dispatchAction({type:rk,from:this.uid,seriesId:this.seriesModel.id,targetNode:t})}},containPoint:function(t,e){var r=e.getData();var i=r.getItemLayout(0);if(i){var a=t[0]-i.cx;var n=t[1]-i.cy;var o=Math.sqrt(a*a+n*n);return o<=i.r&&o>=i.r0}}});var ak="sunburstRootToNode";Zd({type:ak,update:"updateView"},function(a,t){t.eachComponent({mainType:"series",subType:"sunburst",query:a},e);function e(t,e){var r=Nb(a,[ak],t);if(r){var i=t.getViewRoot();if(i){a.direction=Eb(i,r.node)?"rollUp":"drillDown"}t.resetViewRoot(r.node)}}});var nk="sunburstHighlight";Zd({type:nk,update:"updateView"},function(i,t){t.eachComponent({mainType:"series",subType:"sunburst",query:i},e);function e(t,e){var r=Nb(i,[nk],t);if(r){i.highlight=r.node}}});var ok="sunburstUnhighlight";Zd({type:ok,update:"updateView"},function(r,t){t.eachComponent({mainType:"series",subType:"sunburst",query:r},e);function e(t,e){r.unhighlight=true}});var sk=Math.PI/180;var lk=function(t,e,C,r){e.eachSeriesByType(t,function(t){var e=t.get("center");var r=t.get("radius");if(!B(r)){r=[0,r]}if(!B(e)){e=[e,e]}var i=C.getWidth();var a=C.getHeight();var h=Math.min(i,a);var f=cu(e[0],i);var c=cu(e[1],a);var v=cu(r[0],h/2);var n=cu(r[1],h/2);var o=-t.get("startAngle")*sk;var d=t.get("minAngle")*sk;var p=t.getData().tree.root;var s=t.getViewRoot();var g=s.depth;var l=t.get("sort");if(l!=null){uk(s,l)}var u=0;L(s.children,function(t){!isNaN(t.getValue())&&u++});var m=s.getValue();var y=Math.PI/(m||u)*2;var x=s.depth>0;var _=s.height-(x?-1:1);var w=(n-v)/(_||1);var b=t.get("clockwise");var S=t.get("stillShowZeroSum");var M=b?1:-1;var I=function(t,e){if(!t){return}var r=e;if(t!==p){var i=t.getValue();var a=m===0&&S?y:i*y;if(a<d){a=d}else{}r=e+M*a;var n=t.depth-g-(x?-1:1);var o=v+w*n;var s=v+w*(n+1);var l=t.getModel();if(l.get("r0")!=null){o=cu(l.get("r0"),h/2)}if(l.get("r")!=null){s=cu(l.get("r"),h/2)}t.setLayout({angle:a,startAngle:e,endAngle:r,clockwise:b,cx:f,cy:c,r0:o,r:s})}if(t.children&&t.children.length){var u=0;L(t.children,function(t){u+=I(t,e+u)})}return r-e};if(x){var T=v;var A=v+w;var D=Math.PI*2;p.setLayout({angle:D,startAngle:o,endAngle:o+D,clockwise:b,cx:f,cy:c,r0:T,r:A})}I(s,o)})};function uk(t,e){var r=t.children||[];t.children=hk(r,e);if(r.length){L(t.children,function(t){uk(t,e)})}}function hk(t,e){if(typeof e==="function"){return t.sort(e)}else{var i=e==="asc";return t.sort(function(t,e){var r=(t.getValue()-e.getValue())*(i?1:-1);return r===0?(t.dataIndex-e.dataIndex)*(i?-1:1):r})}}jd(z(y_,"sunburst"));Yd(z(lk,"sunburst"));Wd(z(T_,"sunburst"));function fk(n,o){o=o||[0,0];return A(["x","y"],function(t,e){var r=this.getAxis(t);var i=o[e];var a=n[e]/2;return r.type==="category"?r.getBandWidth():Math.abs(r.dataToCoord(i-a)-r.dataToCoord(i+a))},this)}var ck=function(e){var t=e.grid.getRect();return{coordSys:{type:"cartesian2d",x:t.x,y:t.y,width:t.width,height:t.height},api:{coord:function(t){return e.dataToPoint(t)},size:R(fk,e)}}};function vk(n,o){o=o||[0,0];return A([0,1],function(t){var e=o[t];var r=n[t]/2;var i=[];var a=[];i[t]=e-r;a[t]=e+r;i[1-t]=a[1-t]=o[1-t];return Math.abs(this.dataToPoint(i)[t]-this.dataToPoint(a)[t])},this)}var dk=function(e){var t=e.getBoundingRect();return{coordSys:{type:"geo",x:t.x,y:t.y,width:t.width,height:t.height,zoom:e.getZoom()},api:{coord:function(t){return e.dataToPoint(t)},size:R(vk,e)}}};function pk(t,e){var r=this.getAxis();var i=e instanceof Array?e[0]:e;var a=(t instanceof Array?t[0]:t)/2;return r.type==="category"?r.getBandWidth():Math.abs(r.dataToCoord(i-a)-r.dataToCoord(i+a))}var gk=function(e){var t=e.getRect();return{coordSys:{type:"singleAxis",x:t.x,y:t.y,width:t.width,height:t.height},api:{coord:function(t){return e.dataToPoint(t)},size:R(pk,e)}}};function mk(s,l){return A(["Radius","Angle"],function(t,e){var r=this["get"+t+"Axis"]();var i=l[e];var a=s[e]/2;var n="dataTo"+t;var o=r.type==="category"?r.getBandWidth():Math.abs(r[n](i-a)-r[n](i+a));if(t==="Angle"){o=o*Math.PI/180}return o},this)}var yk=function(a){var n=a.getRadiusAxis();var o=a.getAngleAxis();var t=n.getExtent();t[0]>t[1]&&t.reverse();return{coordSys:{type:"polar",cx:a.cx,cy:a.cy,r:t[1],r0:t[0]},api:{coord:R(function(t){var e=n.dataToRadius(t[0]);var r=o.dataToAngle(t[1]);var i=a.coordToPoint([e,r]);i.push(e,r*Math.PI/180);return i}),size:R(mk,a)}}};var xk=function(r){var t=r.getRect();var e=r.getRangeInfo();return{coordSys:{type:"calendar",x:t.x,y:t.y,width:t.width,height:t.height,cellWidth:r.getCellWidth(),cellHeight:r.getCellHeight(),rangeInfo:{start:e.start,end:e.end,weeks:e.weeks,dayCount:e.allDay}},api:{coord:function(t,e){return r.dataToPoint(t,e)}}}};var _k=["itemStyle"];var wk=["emphasis","itemStyle"];var bk=["label"];var Sk=["emphasis","label"];var Mk="e\0\0";var Ik={cartesian2d:ck,geo:dk,singleAxis:gk,polar:yk,calendar:xk};rc.extend({type:"series.custom",dependencies:["grid","polar","geo","singleAxis","calendar"],defaultOption:{coordinateSystem:"cartesian2d",zlevel:0,z:2,legendHoverLink:true,useTransform:true},getInitialData:function(t,e){return Xp(this.getSource(),this)},getDataParams:function(t,e,r){var i=rc.prototype.getDataParams.apply(this,arguments);r&&(i.info=r.info);return i}});gc.extend({type:"custom",_data:null,render:function(i,t,e,a){var n=this._data;var o=i.getData();var s=this.group;var l=Ck(i,o,t,e);o.diff(n).add(function(t){kk(null,t,l(t,a),i,s,o)}).update(function(t,e){var r=n.getItemGraphicEl(e);kk(r,t,l(t,a),i,s,o)}).remove(function(t){var e=n.getItemGraphicEl(t);e&&s.remove(e)}).execute();this._data=o},incrementalPrepareRender:function(t,e,r){this.group.removeAll();this._data=null},incrementalRender:function(t,e,r,i,a){var n=e.getData();var o=Ck(e,n,r,i);function s(t){if(!t.isGroup){t.incremental=true;t.useHoverLayer=true}}for(var l=t.start;l<t.end;l++){var u=kk(null,l,o(l,a),e,this.group,n);u.traverse(s)}},dispose:nt,filterForExposedEvent:function(t,e,r,i){var a=e.element;if(a==null||r.name===a){return true}while((r=r.parent)&&r!==this.group){if(r.name===a){return true}}return false}});function Tk(t){var e=t.type;var r;if(e==="path"){var i=t.shape;var a=i.width!=null&&i.height!=null?{x:i.x||0,y:i.y||0,width:i.width,height:i.height}:null;var n=Bk(i);r=al(n,null,a,i.layout||"center");r.__customPathData=n}else if(e==="image"){r=new ha({});r.__customImagePath=t.style.image}else if(e==="text"){r=new ws({});r.__customText=t.style.text}else{var o=ql[e.charAt(0).toUpperCase()+e.slice(1)];if(D){$(o,'graphic type "'+e+'" can not be found.')}r=new o}r.__customGraphicType=e;r.name=t.name;return r}function Ak(e,t,r,i,a,n,o){var s={};var l=r.style||{};r.shape&&(s.shape=P(r.shape));r.position&&(s.position=r.position.slice());r.scale&&(s.scale=r.scale.slice());r.origin&&(s.origin=r.origin.slice());r.rotation&&(s.rotation=r.rotation);if(e.type==="image"&&r.style){var u=s.style={};L(["x","y","width","height"],function(t){Dk(t,u,l,e.style,n)})}if(e.type==="text"&&r.style){var u=s.style={};L(["x","y"],function(t){Dk(t,u,l,e.style,n)});!l.hasOwnProperty("textFill")&&l.fill&&(l.textFill=l.fill);!l.hasOwnProperty("textStroke")&&l.stroke&&(l.textStroke=l.stroke)}if(e.type!=="group"){e.useStyle(l);if(n){e.style.opacity=0;var h=l.opacity;h==null&&(h=1);Fl(e,{style:{opacity:h}},i,t)}}if(n){e.attr(s)}else{Gl(e,s,i,t)}r.hasOwnProperty("z2")&&e.attr("z2",r.z2||0);r.hasOwnProperty("silent")&&e.attr("silent",r.silent);r.hasOwnProperty("invisible")&&e.attr("invisible",r.invisible);r.hasOwnProperty("ignore")&&e.attr("ignore",r.ignore);r.hasOwnProperty("info")&&e.attr("info",r.info);var f=r.styleEmphasis;var c=f===false;if(!(e.__cusHasEmphStl&&f==null||!e.__cusHasEmphStl&&c)){wl(e,f);e.__cusHasEmphStl=!c}o&&Dl(e,!c)}function Dk(t,e,r,i,a){if(r[t]!=null&&!a){e[t]=r[t];r[t]=i[t]}}function Ck(a,n,e,r){var i=a.get("renderItem");var o=a.coordinateSystem;var t={};if(o){if(D){$(i,"series.render is required.");$(o.prepareCustoms||Ik[o.type],"This coordSys does not support custom series.")}t=o.prepareCustoms?o.prepareCustoms():Ik[o.type](o)}var s=C({getWidth:r.getWidth,getHeight:r.getHeight,getZr:r.getZr,getDevicePixelRatio:r.getDevicePixelRatio,value:g,style:m,styleEmphasis:y,visual:x,barLayout:_,currentSeriesIndices:w,font:b},t.api||{});var l={context:{},seriesId:a.id,seriesName:a.name,seriesIndex:a.seriesIndex,coordSys:t.coordSys,dataInsideLength:n.count(),encode:Lk(a.getData())};var u;var h=true;var f;var c;var v;var d;return function(t,e){u=t;h=true;return i&&i(C({dataIndexInside:t,dataIndex:n.getRawIndex(t),actionType:e?e.type:null},l),s)};function p(t){t==null&&(t=u);if(h){f=n.getItemModel(t);c=f.getModel(bk);v=f.getModel(Sk);d=n.getItemVisual(t,"color");h=false}}function g(t,e){e==null&&(e=u);return n.get(n.getDimension(t||0),e)}function m(t,e){e==null&&(e=u);p(e);var r=f.getModel(_k).getItemStyle();d!=null&&(r.fill=d);var i=n.getItemVisual(e,"opacity");i!=null&&(r.opacity=i);Ll(r,c,null,{autoColor:d,isRectText:true});r.text=c.getShallow("show")?Y(a.getFormattedLabel(e,"normal"),Ym(n,e)):null;t&&N(r,t);return r}function y(t,e){e==null&&(e=u);p(e);var r=f.getModel(wk).getItemStyle();Ll(r,v,null,{isRectText:true},true);r.text=v.getShallow("show")?j(a.getFormattedLabel(e,"emphasis"),a.getFormattedLabel(e,"normal"),Ym(n,e)):null;t&&N(r,t);return r}function x(t,e){e==null&&(e=u);return n.getItemVisual(e,t)}function _(t){if(o.getBaseAxis){var e=o.getBaseAxis();return pg(C({axis:e},t),r)}}function w(){return e.getCurrentSeriesIndices()}function b(t){return Bl(t,e)}}function Lk(n){var o={};L(n.dimensions,function(t,e){var r=n.getDimensionInfo(t);if(!r.isExtraCoord){var i=r.coordDim;var a=o[i]=o[i]||[];a[r.coordDimIndex]=e}});return o}function kk(t,e,r,i,a,n){t=Pk(t,e,r,i,a,n,true);t&&n.setItemGraphicEl(e,t);return t}function Pk(t,e,r,i,a,n,o){var s=!r;r=r||{};var l=r.type;var u=r.shape;var h=r.style;if(t&&(s||l!=null&&l!==t.__customGraphicType||l==="path"&&Vk(u)&&Bk(u)!==t.__customPathData||l==="image"&&Gk(h,"image")&&h.image!==t.__customImagePath||l==="text"&&Gk(u,"text")&&h.text!==t.__customText)){a.remove(t);t=null}if(s){return}var f=!t;!t&&(t=Tk(r));Ak(t,e,r,i,n,f,o);if(l==="group"){Nk(t,e,r,i,n)}a.add(t);return t}function Nk(t,e,r,i,a){var n=r.children;var o=n?n.length:0;var s=r.$mergeChildren;var l=s==="byName"||r.diffChildrenByName;var u=s===false;if(!o&&!l&&!u){return}if(l){Ok({oldChildren:t.children()||[],newChildren:n||[],dataIndex:e,animatableModel:i,group:t,data:a});return}u&&t.removeAll();var h=0;for(;h<o;h++){n[h]&&Pk(t.childAt(h),e,n[h],i,t,a)}if(D){$(!u||t.childCount()===h,"MUST NOT contain empty item in children array when `group.$mergeChildren` is `false`.")}}function Ok(t){new op(t.oldChildren,t.newChildren,Ek,Ek,t).add(Rk).update(Rk).remove(zk).execute()}function Ek(t,e){var r=t&&t.name;return r!=null?r:Mk+e}function Rk(t,e){var r=this.context;var i=t!=null?r.newChildren[t]:null;var a=e!=null?r.oldChildren[e]:null;Pk(a,r.dataIndex,i,r.animatableModel,r.group,r.data)}function zk(t){var e=this.context;var r=e.oldChildren[t];r&&e.group.remove(r)}function Bk(t){return t&&(t.pathData||t.d)}function Vk(t){return t&&(t.hasOwnProperty("pathData")||t.hasOwnProperty("d"))}function Gk(t,e){return t&&t.hasOwnProperty(e)}Fd(function(t){var e=t.graphic;if(B(e)){if(!e[0]||!e[0].elements){t.graphic=[{elements:e}]}else{t.graphic=[t.graphic[0]]}}else if(e&&!e.elements){t.graphic=[{elements:[e]}]}});var Fk=$d({type:"graphic",defaultOption:{elements:[],parentId:null},_elOptionsToUpdate:null,mergeOption:function(t){var e=this.option.elements;this.option.elements=null;Fk.superApply(this,"mergeOption",arguments);this.option.elements=e},optionUpdated:function(t,e){var r=this.option;var i=(e?r:t).elements;var a=r.elements=e?[]:r.elements;var n=[];this._flatten(i,n);var o=an(a,n);nn(o);var s=this._elOptionsToUpdate=[];L(o,function(t,e){var r=t.option;if(D){$(F(r)||t.exist,"Empty graphic option definition")}if(!r){return}s.push(r);Xk(t,r);Yk(a,e,r);jk(a[e],r)},this);for(var l=a.length-1;l>=0;l--){if(a[l]==null){a.splice(l,1)}else{delete a[l].$action}}},_flatten:function(t,r,i){L(t,function(t){if(!t){return}if(i){t.parentOption=i}r.push(t);var e=t.children;if(t.type==="group"&&e){this._flatten(e,r,t)}delete t.children},this)},useElOptionsToUpdate:function(){var t=this._elOptionsToUpdate;this._elOptionsToUpdate=null;return t}});Jd({type:"graphic",init:function(t,e){this._elMap=it();this._lastGraphicModel},render:function(t,e,r){if(t!==this._lastGraphicModel){this._clear()}this._lastGraphicModel=t;this._updateElements(t);this._relocate(t,r)},_updateElements:function(u){var t=u.useElOptionsToUpdate();if(!t){return}var h=this._elMap;var f=this.group;L(t,function(t){var e=t.$action;var r=t.id;var i=h.get(r);var a=t.parentId;var n=a!=null?h.get(a):f;var o=t.style;if(t.type==="text"&&o){if(t.hv&&t.hv[1]){o.textVerticalAlign=o.textBaseline=null}!o.hasOwnProperty("textFill")&&o.fill&&(o.textFill=o.fill);!o.hasOwnProperty("textStroke")&&o.stroke&&(o.textStroke=o.stroke)}var s=Zk(t);if(D){i&&$(n===i.parent,"Changing parent is not supported.")}if(!e||e==="merge"){i?i.attr(s):Wk(r,n,s,h)}else if(e==="replace"){Hk(i,h);Wk(r,n,s,h)}else if(e==="remove"){Hk(i,h)}var l=h.get(r);if(l){l.__ecGraphicWidth=t.width;l.__ecGraphicHeight=t.height;qk(l,u,t)}})},_relocate:function(t,e){var r=t.option.elements;var i=this.group;var a=this._elMap;for(var n=r.length-1;n>=0;n--){var o=r[n];var s=a.get(o.id);if(!s){continue}var l=s.parent;var u=l===i?{width:e.getWidth(),height:e.getHeight()}:{width:l.__ecGraphicWidth||0,height:l.__ecGraphicHeight||0};ih(s,o,u,null,{hv:o.hv,boundingMode:o.bounding})}},_clear:function(){var e=this._elMap;e.each(function(t){Hk(t,e)});this._elMap=it()},dispose:function(){this._clear()}});function Wk(t,e,r,i){var a=r.type;if(D){$(a,"graphic type MUST be set")}var n=ql[a.charAt(0).toUpperCase()+a.slice(1)];if(D){$(n,"graphic type can not be found")}var o=new n(r);e.add(o);i.set(t,o);o.__ecGraphicId=t}function Hk(t,e){var r=t&&t.parent;if(r){t.type==="group"&&t.traverse(function(t){Hk(t,e)});e.removeKey(t.__ecGraphicId);r.remove(t)}}function Zk(e){e=N({},e);L(["id","parentId","$action","hv","bounding"].concat(qu),function(t){delete e[t]});return e}function Uk(e,t){var r;L(t,function(t){e[t]!=null&&e[t]!=="auto"&&(r=true)});return r}function Xk(t,e){var r=t.exist;e.id=t.keyInfo.id;!e.type&&r&&(e.type=r.type);if(e.parentId==null){var i=e.parentOption;if(i){e.parentId=i.id}else if(r){e.parentId=r.parentId}}e.parentOption=null}function Yk(t,e,r){var i=N({},r);var a=t[e];var n=r.$action||"merge";if(n==="merge"){if(a){if(D){var o=r.type;$(!o||a.type===o,'Please set $action: "replace" to change `type`')}m(a,i,true);nh(a,i,{ignoreSize:true});sh(r,a)}else{t[e]=i}}else if(n==="replace"){t[e]=i}else if(n==="remove"){a&&(t[e]=null)}}function jk(t,e){if(!t){return}t.hv=e.hv=[Uk(e,["left","right"]),Uk(e,["top","bottom"])];if(t.type==="group"){t.width==null&&(t.width=e.width=0);t.height==null&&(t.height=e.height=0)}}function qk(t,e,r){var i=t.eventData;if(!t.silent&&!t.ignore&&!i){i=t.eventData={componentType:"graphic",componentIndex:e.componentIndex,name:t.name}}if(i){i.info=t.info}}var Kk=$d({type:"legend.plain",dependencies:["series"],layoutMode:{type:"box",ignoreSize:true},init:function(t,e,r){this.mergeDefaultAndTheme(t,r);t.selected=t.selected||{}},mergeOption:function(t){Kk.superCall(this,"mergeOption",t)},optionUpdated:function(){this._updateData(this.ecModel);var t=this._data;if(t[0]&&this.get("selectedMode")==="single"){var e=false;for(var r=0;r<t.length;r++){var i=t[r].get("name");if(this.isSelected(i)){this.select(i);e=true;break}}!e&&this.select(t[0].get("name"))}},_updateData:function(n){var o=[];var s=[];n.eachRawSeries(function(t){var e=t.name;s.push(e);var r;if(t.legendDataProvider){var i=t.legendDataProvider();var a=i.mapArray(i.getName);if(!n.isSeriesFiltered(t)){s=s.concat(a)}if(a.length){o=o.concat(a)}else{r=true}}else{r=true}if(r&&on(t)){o.push(t.name)}});this._availableNames=s;var t=this.get("data")||o;var e=A(t,function(t){if(typeof t==="string"||typeof t==="number"){t={name:t}}return new ru(t,this,this.ecModel)},this);this._data=e},getData:function(){return this._data},select:function(t){var e=this.option.selected;var r=this.get("selectedMode");if(r==="single"){var i=this._data;L(i,function(t){e[t.get("name")]=false})}e[t]=true},unSelect:function(t){if(this.get("selectedMode")!=="single"){this.option.selected[t]=false}},toggleSelected:function(t){var e=this.option.selected;if(!e.hasOwnProperty(t)){e[t]=true}this[e[t]?"unSelect":"select"](t)},isSelected:function(t){var e=this.option.selected;return!(e.hasOwnProperty(t)&&!e[t])&&S(this._availableNames,t)>=0},defaultOption:{zlevel:0,z:4,show:true,orient:"horizontal",left:"center",top:0,align:"auto",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemGap:10,itemWidth:25,itemHeight:14,inactiveColor:"#ccc",textStyle:{color:"#333"},selectedMode:true,tooltip:{show:false}}});function $k(e,r,t){var a={};var n=e==="toggleSelected";var o;t.eachComponent("legend",function(i){if(n&&o!=null){i[o?"select":"unSelect"](r.name)}else{i[e](r.name);o=i.isSelected(r.name)}var t=i.getData();L(t,function(t){var e=t.get("name");if(e==="\n"||e===""){return}var r=i.isSelected(e);if(a.hasOwnProperty(e)){a[e]=a[e]&&r}else{a[e]=r}})});return{name:r.name,selected:a}}Zd("legendToggleSelect","legendselectchanged",z($k,"toggleSelected"));Zd("legendSelect","legendselected",z($k,"select"));Zd("legendUnSelect","legendunselected",z($k,"unSelect"));function Jk(t,e,r){var i=e.getBoxLayoutParams();var a=e.get("padding");var n={width:r.getWidth(),height:r.getHeight()};var o=rh(i,n,a);Ju(e.get("orient"),t,e.get("itemGap"),o.width,o.height);ih(t,i,n,a)}function Qk(t,e){var r=Nu(e.get("padding"));var i=e.getItemStyle(["color","opacity"]);i.fill=e.get("backgroundColor");var t=new Bs({shape:{x:t.x-r[3],y:t.y-r[0],width:t.width+r[1]+r[3],height:t.height+r[0]+r[2],r:e.get("borderRadius")},style:i,silent:true,z2:-1});return t}var tP=z;var eP=L;var rP=Or;var iP=Jd({type:"legend.plain",newlineDisabled:false,init:function(){this.group.add(this._contentGroup=new rP);this._backgroundEl;this._isFirstRender=true},getContentGroup:function(){return this._contentGroup},render:function(t,e,r){var i=this._isFirstRender;this._isFirstRender=false;this.resetInner();if(!t.get("show",true)){return}var a=t.get("align");if(!a||a==="auto"){a=t.get("left")==="right"&&t.get("orient")==="vertical"?"right":"left"}this.renderInner(a,t,e,r);var n=t.getBoxLayoutParams();var o={width:r.getWidth(),height:r.getHeight()};var s=t.get("padding");var l=rh(n,o,s);var u=this.layoutInner(t,a,l,i);var h=rh(C({width:u.width,height:u.height},n),o,s);this.group.attr("position",[h.x-u.x,h.y-u.y]);this.group.add(this._backgroundEl=Qk(u,t))},resetInner:function(){this.getContentGroup().removeAll();this._backgroundEl&&this.group.remove(this._backgroundEl)},renderInner:function(u,h,f,c){var v=this.getContentGroup();var d=it();var p=h.get("selectedMode");var g=[];f.eachRawSeries(function(t){!t.get("legendHoverLink")&&g.push(t.id)});eP(h.getData(),function(o,s){var l=o.get("name");if(!this.newlineDisabled&&(l===""||l==="\n")){v.add(new rP({newline:true}));return}var t=f.getSeriesByName(l)[0];if(d.get(l)){return}if(t){var e=t.getData();var r=e.getVisual("color");if(typeof r==="function"){r=r(t.getDataParams(0))}var i=e.getVisual("legendSymbol")||"roundRect";var a=e.getVisual("symbol");var n=this._createItem(l,s,o,h,i,a,u,r,p);n.on("click",tP(aP,l,c)).on("mouseover",tP(nP,t.name,null,c,g)).on("mouseout",tP(oP,t.name,null,c,g));d.set(l,true)}else{f.eachRawSeries(function(t){if(d.get(l)){return}if(t.legendDataProvider){var e=t.legendDataProvider();var r=e.indexOfName(l);if(r<0){return}var i=e.getItemVisual(r,"color");var a="roundRect";var n=this._createItem(l,s,o,h,a,null,u,i,p);n.on("click",tP(aP,l,c)).on("mouseover",tP(nP,null,l,c,g)).on("mouseout",tP(oP,null,l,c,g));d.set(l,true)}},this)}if(D){if(!d.get(l)){console.warn(l+" series not exists. Legend data should be same with series name or data name.")}}},this)},_createItem:function(t,e,r,i,a,n,o,s,l){var u=i.get("itemWidth");var h=i.get("itemHeight");var f=i.get("inactiveColor");var c=i.get("symbolKeepAspect");var v=i.isSelected(t);var d=new rP;var p=r.getModel("textStyle");var g=r.get("icon");var m=r.getModel("tooltip");var y=m.parentModel;a=g||a;d.add(cm(a,0,0,u,h,v?s:f,c==null?true:c));if(!g&&n&&(n!==a||n==="none")){var x=h*.8;if(n==="none"){n="circle"}d.add(cm(n,(u-x)/2,(h-x)/2,x,x,v?s:f,c==null?true:c))}var _=o==="left"?u+5:-5;var w=o;var b=i.get("formatter");var S=t;if(typeof b==="string"&&b){S=b.replace("{name}",t!=null?t:"")}else if(typeof b==="function"){S=b(t)}d.add(new ws({style:Ll({},p,{text:S,x:_,y:h/2,textFill:v?p.getTextColor():f,textAlign:w,textVerticalAlign:"middle"})}));var M=new Bs({shape:d.getBoundingRect(),invisible:true,tooltip:m.get("show")?N({content:t,formatter:y.get("formatter",true)||function(){return t},formatterParams:{componentType:"legend",legendIndex:i.componentIndex,name:t,$vars:["name"]}},m.option):null});d.add(M);d.eachChild(function(t){t.silent=true});M.silent=!l;this.getContentGroup().add(d);Al(d);d.__legendDataIndex=e;return d},layoutInner:function(t,e,r){var i=this.getContentGroup();Ju(t.get("orient"),i,t.get("itemGap"),r.width,r.height);var a=i.getBoundingRect();i.attr("position",[-a.x,-a.y]);return this.group.getBoundingRect()},remove:function(){this.getContentGroup().removeAll();this._isFirstRender=true}});function aP(t,e){e.dispatchAction({type:"legendToggleSelect",name:t})}function nP(t,e,r,i){var a=r.getZr().storage.getDisplayList()[0];if(!(a&&a.useHoverLayer)){r.dispatchAction({type:"highlight",seriesName:t,name:e,excludeSeriesId:i})}}function oP(t,e,r,i){var a=r.getZr().storage.getDisplayList()[0];if(!(a&&a.useHoverLayer)){r.dispatchAction({type:"downplay",seriesName:t,name:e,excludeSeriesId:i})}}var sP=function(t){var r=t.findComponents({mainType:"legend"});if(r&&r.length){t.filterSeries(function(t){for(var e=0;e<r.length;e++){if(!r[e].isSelected(t.name)){return false}}return true})}};Wd(sP);hh.registerSubTypeDefaulter("legend",function(){return"plain"});var lP=Kk.extend({type:"legend.scroll",setScrollDataIndex:function(t){this.option.scrollDataIndex=t},defaultOption:{scrollDataIndex:0,pageButtonItemGap:5,pageButtonGap:null,pageButtonPosition:"end",pageFormatter:"{current}/{total}",pageIcons:{horizontal:["M0,0L12,-10L12,10z","M0,0L-12,-10L-12,10z"],vertical:["M0,0L20,0L10,-20z","M0,0L20,0L10,20z"]},pageIconColor:"#2f4554",pageIconInactiveColor:"#aaa",pageIconSize:15,pageTextStyle:{color:"#333"},animationDurationUpdate:800},init:function(t,e,r,i){var a=oh(t);lP.superCall(this,"init",t,e,r,i);uP(this,t,a)},mergeOption:function(t,e){lP.superCall(this,"mergeOption",t,e);uP(this,this.option,t)},getOrient:function(){return this.get("orient")==="vertical"?{index:1,name:"vertical"}:{index:0,name:"horizontal"}}});function uP(t,e,r){var i=t.getOrient();var a=[1,1];a[i.index]=0;nh(e,r,{type:"box",ignoreSize:a})}var hP=Or;var fP=["width","height"];var cP=["x","y"];var vP=iP.extend({type:"legend.scroll",newlineDisabled:true,init:function(){vP.superCall(this,"init");this._currentIndex=0;this.group.add(this._containerGroup=new hP);this._containerGroup.add(this.getContentGroup());this.group.add(this._controllerGroup=new hP);this._showController},resetInner:function(){vP.superCall(this,"resetInner");this._controllerGroup.removeAll();this._containerGroup.removeClipPath();this._containerGroup.__rectSize=null},renderInner:function(t,a,e,n){var o=this;vP.superCall(this,"renderInner",t,a,e,n);var s=this._controllerGroup;var l=a.get("pageIconSize",true);if(!B(l)){l=[l,l]}i("pagePrev",0);var r=a.getModel("pageTextStyle");s.add(new ws({name:"pageText",style:{textFill:r.getTextColor(),font:r.getFont(),textVerticalAlign:"middle",textAlign:"center"},silent:true}));i("pageNext",1);function i(t,e){var r=t+"DataIndex";var i=jl(a.get("pageIcons",true)[a.getOrient().name][e],{onclick:R(o._pageGo,o,r,a,n)},{x:-l[0]/2,y:-l[1]/2,width:l[0],height:l[1]});i.name=t;s.add(i)}},layoutInner:function(t,e,r,i){var a=this.getContentGroup();var n=this._containerGroup;var o=this._controllerGroup;var s=t.getOrient().index;var l=fP[s];var u=fP[1-s];var h=cP[1-s];Ju(t.get("orient"),a,t.get("itemGap"),!s?null:r.width,s?null:r.height);Ju("horizontal",o,t.get("pageButtonItemGap",true));var f=a.getBoundingRect();var c=o.getBoundingRect();var v=this._showController=f[l]>r[l];var d=[-f.x,-f.y];if(!i){d[s]=a.position[s]}var p=[0,0];var g=[-c.x,-c.y];var m=Y(t.get("pageButtonGap",true),t.get("itemGap",true));if(v){var y=t.get("pageButtonPosition",true);if(y==="end"){g[s]+=r[l]-c[l]}else{p[s]+=c[l]+m}}g[1-s]+=f[u]/2-c[u]/2;a.attr("position",d);n.attr("position",p);o.attr("position",g);var x=this.group.getBoundingRect();var x={x:0,y:0};x[l]=v?r[l]:f[l];x[u]=Math.max(f[u],c[u]);x[h]=Math.min(0,c[h]+g[1-s]);n.__rectSize=r[l];if(v){var _={x:0,y:0};_[l]=Math.max(r[l]-c[l]-m,0);_[u]=x[u];n.setClipPath(new Bs({shape:_}));n.__rectSize=_[l]}else{o.eachChild(function(t){t.attr({invisible:true,silent:true})})}var w=this._getPageInfo(t);w.pageIndex!=null&&Gl(a,{position:w.contentPosition},v?t:false);this._updatePageInfoView(t,w);return x},_pageGo:function(t,e,r){var i=this._getPageInfo(e)[t];i!=null&&r.dispatchAction({type:"legendScroll",scrollDataIndex:i,legendId:e.id})},_updatePageInfoView:function(i,a){var n=this._controllerGroup;L(["pagePrev","pageNext"],function(t){var e=a[t+"DataIndex"]!=null;var r=n.childOfName(t);if(r){r.setStyle("fill",e?i.get("pageIconColor",true):i.get("pageIconInactiveColor",true));r.cursor=e?"pointer":"default"}});var t=n.childOfName("pageText");var e=i.get("pageFormatter");var r=a.pageIndex;var o=r!=null?r+1:0;var s=a.pageCount;t&&e&&t.setStyle("text",G(e)?e.replace("{current}",o).replace("{total}",s):e({current:o,total:s}))},_getPageInfo:function(t){var e=t.get("scrollDataIndex",true);var r=this.getContentGroup();var i=this._containerGroup.__rectSize;var a=t.getOrient().index;var n=fP[a];var o=cP[a];var s=this._findTargetItemIndex(e);var l=r.children();var u=l[s];var h=l.length;var f=!h?0:1;var c={contentPosition:r.position.slice(),pageCount:f,pageIndex:f-1,pagePrevDataIndex:null,pageNextDataIndex:null};if(!u){return c}var v=y(u);c.contentPosition[a]=-v.s;for(var d=s+1,p=v,g=v,m=null;d<=h;++d){m=y(l[d]);if(!m&&g.e>p.s+i||m&&!x(m,p.s)){if(g.i>p.i){p=g}else{p=m}if(p){if(c.pageNextDataIndex==null){c.pageNextDataIndex=p.i}++c.pageCount}}g=m}for(var d=s-1,p=v,g=v,m=null;d>=-1;--d){m=y(l[d]);if((!m||!x(g,m.s))&&p.i<g.i){g=p;if(c.pagePrevDataIndex==null){c.pagePrevDataIndex=p.i}++c.pageCount;++c.pageIndex}p=m}return c;function y(t){if(t){var e=t.getBoundingRect();var r=e[o]+t.position[a];return{s:r,e:r+e[n],i:t.__legendDataIndex}}}function x(t,e){return t.e>=e&&t.s<=e+i}},_findTargetItemIndex:function(r){var i;var t=this.getContentGroup();if(this._showController){t.eachChild(function(t,e){if(t.__legendDataIndex===r){i=e}})}else{i=0}return i}});Zd("legendScroll","legendscroll",function(t,e){var r=t.scrollDataIndex;r!=null&&e.eachComponent({mainType:"legend",subType:"scroll",query:t},function(t){t.setScrollDataIndex(r)})});$d({type:"tooltip",dependencies:["axisPointer"],defaultOption:{zlevel:0,z:60,show:true,showContent:true,trigger:"item",triggerOn:"mousemove|click",alwaysShowContent:false,displayMode:"single",renderMode:"auto",confine:false,showDelay:0,hideDelay:100,transitionDuration:.4,enterable:false,backgroundColor:"rgba(50,50,50,0.7)",borderColor:"#333",borderRadius:4,borderWidth:0,padding:5,extraCssText:"",axisPointer:{type:"line",axis:"auto",animation:"auto",animationDurationUpdate:200,animationEasingUpdate:"exponentialOut",crossStyle:{color:"#999",width:1,type:"dashed",textStyle:{}}},textStyle:{color:"#fff",fontSize:14}}});var dP=L;var pP=Pu;var gP=["","-webkit-","-moz-","-o-"];var mP="position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;";function yP(t){var e="cubic-bezier(0.23, 1, 0.32, 1)";var r="left "+t+"s "+e+","+"top "+t+"s "+e;return A(gP,function(t){return t+"transition:"+r}).join(";")}function xP(r){var i=[];var t=r.get("fontSize");var e=r.getTextColor();e&&i.push("color:"+e);i.push("font:"+r.getFont());t&&i.push("line-height:"+Math.round(t*3/2)+"px");dP(["decoration","align"],function(t){var e=r.get(t);e&&i.push("text-"+t+":"+e)});return i.join(";")}function _P(a){var n=[];var t=a.get("transitionDuration");var e=a.get("backgroundColor");var r=a.getModel("textStyle");var i=a.get("padding");t&&n.push(yP(t));if(e){if(y.canvasSupported){n.push("background-Color:"+e)}else{n.push("background-Color:#"+Ke(e));n.push("filter:alpha(opacity=70)")}}dP(["width","color","radius"],function(t){var e="border-"+t;var r=pP(e);var i=a.get(r);i!=null&&n.push(e+":"+i+(t==="color"?"":"px"))});n.push(xP(r));if(i!=null){n.push("padding:"+Nu(i).join("px ")+"px")}return n.join(";")+";"}function wP(r,t){if(y.wxa){return null}var e=document.createElement("div");var i=this._zr=t.getZr();this.el=e;this._x=t.getWidth()/2;this._y=t.getHeight()/2;r.appendChild(e);this._container=r;this._show=false;this._hideTimeout;var a=this;e.onmouseenter=function(){if(a._enterable){clearTimeout(a._hideTimeout);a._show=true}a._inContent=true};e.onmousemove=function(t){t=t||window.event;if(!a._enterable){var e=i.handler;Ut(r,t,true);e.dispatch("mousemove",t)}};e.onmouseleave=function(){if(a._enterable){if(a._show){a.hideLater(a._hideDelay)}}a._inContent=false}}wP.prototype={constructor:wP,_enterable:true,update:function(){var t=this._container;var e=t.currentStyle||document.defaultView.getComputedStyle(t);var r=t.style;if(r.position!=="absolute"&&e.position!=="absolute"){r.position="relative"}},show:function(t){clearTimeout(this._hideTimeout);var e=this.el;e.style.cssText=mP+_P(t)+";left:"+this._x+"px;top:"+this._y+"px;"+(t.get("extraCssText")||"");e.style.display=e.innerHTML?"block":"none";e.style.pointerEvents=this._enterable?"auto":"none";this._show=true},setContent:function(t){this.el.innerHTML=t==null?"":t},setEnterable:function(t){this._enterable=t},getSize:function(){var t=this.el;return[t.clientWidth,t.clientHeight]},moveTo:function(t,e){var r=this._zr;var i;if(r&&r.painter&&(i=r.painter.getViewportRootOffset())){t+=i.offsetLeft;e+=i.offsetTop}var a=this.el.style;a.left=t+"px";a.top=e+"px";this._x=t;this._y=e},hide:function(){this.el.style.display="none";this._show=false},hideLater:function(t){if(this._show&&!(this._inContent&&this._enterable)){if(t){this._hideDelay=t;this._show=false;this._hideTimeout=setTimeout(R(this.hide,this),t)}else{this.hide()}}},isShow:function(){return this._show},getOuterSize:function(){var t=this.el.clientWidth;var e=this.el.clientHeight;if(document.defaultView&&document.defaultView.getComputedStyle){var r=document.defaultView.getComputedStyle(this.el);if(r){t+=parseInt(r.paddingLeft,10)+parseInt(r.paddingRight,10)+parseInt(r.borderLeftWidth,10)+parseInt(r.borderRightWidth,10);e+=parseInt(r.paddingTop,10)+parseInt(r.paddingBottom,10)+parseInt(r.borderTopWidth,10)+parseInt(r.borderBottomWidth,10)}}return{width:t,height:e}}};function bP(t){this._zr=t.getZr();this._show=false;this._hideTimeout}bP.prototype={constructor:bP,_enterable:true,update:function(){},show:function(t){if(this._hideTimeout){clearTimeout(this._hideTimeout)}this.el.attr("show",true);this._show=true},setContent:function(t,e,r){if(this.el){this._zr.remove(this.el)}var i={};var a=t;var n="{marker";var o="|}";var s=a.indexOf(n);while(s>=0){var l=a.indexOf(o);var u=a.substr(s+n.length,l-s-n.length);if(u.indexOf("sub")>-1){i["marker"+u]={textWidth:4,textHeight:4,textBorderRadius:2,textBackgroundColor:e[u],textOffset:[3,0]}}else{i["marker"+u]={textWidth:10,textHeight:10,textBorderRadius:5,textBackgroundColor:e[u]}}a=a.substr(l+1);s=a.indexOf("{marker")}this.el=new ws({style:{rich:i,text:t,textLineHeight:20,textBackgroundColor:r.get("backgroundColor"),textBorderRadius:r.get("borderRadius"),textFill:r.get("textStyle.color"),textPadding:r.get("padding")},z:r.get("z")});this._zr.add(this.el);var h=this;this.el.on("mouseover",function(){if(h._enterable){clearTimeout(h._hideTimeout);h._show=true}h._inContent=true});this.el.on("mouseout",function(){if(h._enterable){if(h._show){h.hideLater(h._hideDelay)}}h._inContent=false})},setEnterable:function(t){this._enterable=t},getSize:function(){var t=this.el.getBoundingRect();return[t.width,t.height]},moveTo:function(t,e){if(this.el){this.el.attr("position",[t,e])}},hide:function(){this.el.hide();this._show=false},hideLater:function(t){if(this._show&&!(this._inContent&&this._enterable)){if(t){this._hideDelay=t;this._show=false;this._hideTimeout=setTimeout(R(this.hide,this),t)}else{this.hide()}}},isShow:function(){return this._show},getOuterSize:function(){return this.getSize()}};var SP=R;var MP=L;var IP=cu;var TP=new Bs({shape:{x:-1,y:-1,width:2,height:2}});Jd({type:"tooltip",init:function(t,e){if(y.node){return}var r=t.getComponent("tooltip");var i=r.get("renderMode");this._renderMode=gn(i);var a;if(this._renderMode==="html"){a=new wP(e.getDom(),e);this._newLine="<br/>"}else{a=new bP(e);this._newLine="\n"}this._tooltipContent=a},render:function(t,e,r){if(y.node){return}this.group.removeAll();this._tooltipModel=t;this._ecModel=e;this._api=r;this._lastDataByCoordSys=null;this._alwaysShowContent=t.get("alwaysShowContent");var i=this._tooltipContent;i.update();i.setEnterable(t.get("enterable"));this._initGlobalListener();this._keepShow()},_initGlobalListener:function(){var t=this._tooltipModel;var i=t.get("triggerOn");iL("itemTooltip",this._api,SP(function(t,e,r){if(i!=="none"){if(i.indexOf(t)>=0){this._tryShow(e,r)}else if(t==="leave"){this._hide(r)}}},this))},_keepShow:function(){var t=this._tooltipModel;var e=this._ecModel;var r=this._api;if(this._lastX!=null&&this._lastY!=null&&t.get("triggerOn")!=="none"){var i=this;clearTimeout(this._refreshUpdateTimeout);this._refreshUpdateTimeout=setTimeout(function(){i.manuallyShowTip(t,e,r,{x:i._lastX,y:i._lastY})})}},manuallyShowTip:function(t,e,r,i){if(i.from===this.uid||y.node){return}var a=DP(i,r);this._ticket="";var n=i.dataByCoordSys;if(i.tooltip&&i.x!=null&&i.y!=null){var o=TP;o.position=[i.x,i.y];o.update();o.tooltip=i.tooltip;this._tryShow({offsetX:i.x,offsetY:i.y,target:o},a)}else if(n){this._tryShow({offsetX:i.x,offsetY:i.y,position:i.position,event:{},dataByCoordSys:i.dataByCoordSys,tooltipOption:i.tooltipOption},a)}else if(i.seriesIndex!=null){if(this._manuallyAxisShowTip(t,e,r,i)){return}var s=VC(i,e);var l=s.point[0];var u=s.point[1];if(l!=null&&u!=null){this._tryShow({offsetX:l,offsetY:u,position:i.position,target:s.el,event:{}},a)}}else if(i.x!=null&&i.y!=null){r.dispatchAction({type:"updateAxisPointer",x:i.x,y:i.y});this._tryShow({offsetX:i.x,offsetY:i.y,position:i.position,target:r.getZr().findHover(i.x,i.y).target,event:{}},a)}},manuallyHideTip:function(t,e,r,i){var a=this._tooltipContent;if(!this._alwaysShowContent&&this._tooltipModel){a.hideLater(this._tooltipModel.get("hideDelay"))}this._lastX=this._lastY=null;if(i.from!==this.uid){this._hide(DP(i,r))}},_manuallyAxisShowTip:function(t,e,r,i){var a=i.seriesIndex;var n=i.dataIndex;var o=e.getComponent("axisPointer").coordSysAxesInfo;if(a==null||n==null||o==null){return}var s=e.getSeriesByIndex(a);if(!s){return}var l=s.getData();var t=AP([l.getItemModel(n),s,(s.coordinateSystem||{}).model,t]);if(t.get("trigger")!=="axis"){return}r.dispatchAction({type:"updateAxisPointer",seriesIndex:a,dataIndex:n,position:i.position});return true},_tryShow:function(t,e){var r=t.target;var i=this._tooltipModel;if(!i){return}this._lastX=t.offsetX;this._lastY=t.offsetY;var a=t.dataByCoordSys;if(a&&a.length){this._showAxisTooltip(a,t)}else if(r&&r.dataIndex!=null){this._lastDataByCoordSys=null;this._showSeriesItemTooltip(t,r,e)}else if(r&&r.tooltip){this._lastDataByCoordSys=null;this._showComponentItemTooltip(t,r,e)}else{this._lastDataByCoordSys=null;this._hide(e)}},_showOrMove:function(t,e){var r=t.get("showDelay");e=R(e,this);clearTimeout(this._showTimout);r>0?this._showTimout=setTimeout(e,r):e()},_showAxisTooltip:function(t,e){var c=this._ecModel;var r=this._tooltipModel;var i=[e.offsetX,e.offsetY];var a=[];var v=[];var n=AP([e.tooltipOption,r]);var d=this._renderMode;var o=this._newLine;var p={};MP(t,function(t){MP(t.dataByAxis,function(s){var l=c.getComponent(s.axisDim+"Axis",s.axisIndex);var u=s.value;var h=[];if(!l||u==null){return}var f=SL(u,l.axis,c,s.seriesDataIndices,s.valueLabelOpt);L(s.seriesDataIndices,function(t){var e=c.getSeriesByIndex(t.seriesIndex);var r=t.dataIndexInside;var i=e&&e.getDataParams(r);i.axisDim=s.axisDim;i.axisIndex=s.axisIndex;i.axisType=s.axisType;i.axisId=s.axisId;i.axisValue=$g(l.axis,u);i.axisValueLabel=f;if(i){v.push(i);var a=e.formatTooltip(r,true,null,d);var n;if(F(a)){n=a.html;var o=a.markers;m(p,o)}else{n=a}h.push(n)}});var t=f;if(d!=="html"){a.push(h.join(o))}else{a.push((t?Ru(t)+o:"")+h.join(o))}})},this);a.reverse();a=a.join(this._newLine+this._newLine);var s=e.position;this._showOrMove(n,function(){if(this._updateContentNotChangedOnAxis(t)){this._updatePosition(n,s,i[0],i[1],this._tooltipContent,v)}else{this._showTooltipContent(n,a,v,Math.random(),i[0],i[1],s,undefined,p)}})},_showSeriesItemTooltip:function(t,e,r){var i=this._ecModel;var a=e.seriesIndex;var n=i.getSeriesByIndex(a);var o=e.dataModel||n;var s=e.dataIndex;var l=e.dataType;var u=o.getData();var h=AP([u.getItemModel(s),o,n&&(n.coordinateSystem||{}).model,this._tooltipModel]);var f=h.get("trigger");if(f!=null&&f!=="item"){return}var c=o.getDataParams(s,l);var v=o.formatTooltip(s,false,l,this._renderMode);var d;var p;if(F(v)){d=v.html;p=v.markers}else{d=v;p=null}var g="item_"+o.name+"_"+s;this._showOrMove(h,function(){this._showTooltipContent(h,d,c,g,t.offsetX,t.offsetY,t.position,t.target,p)});r({type:"showTip",dataIndexInside:s,dataIndex:u.getRawIndex(s),seriesIndex:a,from:this.uid})},_showComponentItemTooltip:function(t,e,r){var i=e.tooltip;if(typeof i==="string"){var a=i;i={content:a,formatter:a}}var n=new ru(i,this._tooltipModel,this._ecModel);var o=n.get("content");var s=Math.random();this._showOrMove(n,function(){this._showTooltipContent(n,o,n.get("formatterParams")||{},s,t.offsetX,t.offsetY,t.position,e)});r({type:"showTip",from:this.uid})},_showTooltipContent:function(r,t,i,e,a,n,o,s,l){this._ticket="";if(!r.get("showContent")||!r.get("show")){return}var u=this._tooltipContent;var h=r.get("formatter");o=o||r.get("position");var f=t;if(h&&typeof h==="string"){f=Vu(h,i,true)}else if(typeof h==="function"){var c=SP(function(t,e){if(t===this._ticket){u.setContent(e,l,r);this._updatePosition(r,o,a,n,u,i,s)}},this);this._ticket=e;f=h(i,e,c)}u.setContent(f,l,r);u.show(r);this._updatePosition(r,o,a,n,u,i,s)},_updatePosition:function(t,e,r,i,a,n,o){var s=this._api.getWidth();var l=this._api.getHeight();e=e||t.get("position");var u=a.getSize();var h=t.get("align");var f=t.get("verticalAlign");var c=o&&o.getBoundingRect().clone();o&&c.applyTransform(o.transform);if(typeof e==="function"){e=e([r,i],n,a.el,c,{viewSize:[s,l],contentSize:u.slice()})}if(B(e)){r=IP(e[0],s);i=IP(e[1],l)}else if(F(e)){e.width=u[0];e.height=u[1];var v=rh(e,{width:s,height:l});r=v.x;i=v.y;h=null;f=null}else if(typeof e==="string"&&o){var d=kP(e,c,u);r=d[0];i=d[1]}else{var d=CP(r,i,a,s,l,h?null:20,f?null:20);r=d[0];i=d[1]}h&&(r-=PP(h)?u[0]/2:h==="right"?u[0]:0);f&&(i-=PP(f)?u[1]/2:f==="bottom"?u[1]:0);if(t.get("confine")){var d=LP(r,i,a,s,l);r=d[0];i=d[1]}a.moveTo(r,i)},_updateContentNotChangedOnAxis:function(a){var t=this._lastDataByCoordSys;var o=!!t&&t.length===a.length;o&&MP(t,function(t,e){var r=t.dataByAxis||{};var i=a[e]||{};var n=i.dataByAxis||[];o&=r.length===n.length;o&&MP(r,function(t,e){var r=n[e]||{};var i=t.seriesDataIndices||[];var a=r.seriesDataIndices||[];o&=t.value===r.value&&t.axisType===r.axisType&&t.axisId===r.axisId&&i.length===a.length;o&&MP(i,function(t,e){var r=a[e];o&=t.seriesIndex===r.seriesIndex&&t.dataIndex===r.dataIndex})})});this._lastDataByCoordSys=a;return!!o},_hide:function(t){this._lastDataByCoordSys=null;t({type:"hideTip",from:this.uid})},dispose:function(t,e){if(y.node){return}this._tooltipContent.hide();uL("itemTooltip",e)}});function AP(t){var e=t.pop();while(t.length){var r=t.pop();if(r){if(ru.isInstance(r)){r=r.get("tooltip",true)}if(typeof r==="string"){r={formatter:r}}e=new ru(r,e,e.ecModel)}}return e}function DP(t,e){return t.dispatchAction||R(e.dispatchAction,e)}function CP(t,e,r,i,a,n,o){var s=r.getOuterSize();var l=s.width;var u=s.height;if(n!=null){if(t+l+n>i){t-=l+n}else{t+=n}}if(o!=null){if(e+u+o>a){e-=u+o}else{e+=o}}return[t,e]}function LP(t,e,r,i,a){var n=r.getOuterSize();var o=n.width;var s=n.height;t=Math.min(t+o,i)-o;e=Math.min(e+s,a)-s;t=Math.max(t,0);e=Math.max(e,0);return[t,e]}function kP(t,e,r){var i=r[0];var a=r[1];var n=5;var o=0;var s=0;var l=e.width;var u=e.height;switch(t){case"inside":o=e.x+l/2-i/2;s=e.y+u/2-a/2;break;case"top":o=e.x+l/2-i/2;s=e.y-a-n;break;case"bottom":o=e.x+l/2-i/2;s=e.y+u+n;break;case"left":o=e.x-i-n;s=e.y+u/2-a/2;break;case"right":o=e.x+l+n;s=e.y+u/2-a/2}return[o,s]}function PP(t){return t==="center"||t==="middle"}Zd({type:"showTip",event:"showTip",update:"tooltip:manuallyShowTip"},function(){});Zd({type:"hideTip",event:"hideTip",update:"tooltip:manuallyHideTip"},function(){});function NP(t){return t.get("stack")||"__ec_stack_"+t.seriesIndex}function OP(t){return t.dim}function EP(t,e,r){var i=r.getWidth();var a=r.getHeight();var k={};var P=RP(O(e.getSeriesByType(t),function(t){return!e.isSeriesFiltered(t)&&t.coordinateSystem&&t.coordinateSystem.type==="polar"}));e.eachSeriesByType(t,function(t){if(t.coordinateSystem.type!=="polar"){return}var e=t.getData();var r=t.coordinateSystem;var i=r.getBaseAxis();var a=NP(t);var n=P[OP(i)][a];var o=n.offset;var s=n.width;var l=r.getOtherAxis(i);var u=t.coordinateSystem.cx;var h=t.coordinateSystem.cy;var f=t.get("barMinHeight")||0;var c=t.get("barMinAngle")||0;k[a]=k[a]||[];var v=e.mapDimension(l.dim);var d=e.mapDimension(i.dim);var p=Zp(e,v);var g=l.getExtent()[0];for(var m=0,y=e.count();m<y;m++){var x=e.get(v,m);var _=e.get(d,m);if(isNaN(x)){continue}var w=x>=0?"p":"n";var b=g;if(p){if(!k[a][_]){k[a][_]={p:g,n:g}}b=k[a][_][w]}var S;var M;var I;var T;if(l.dim==="radius"){var A=l.dataToRadius(x)-g;var D=i.dataToAngle(_);if(Math.abs(A)<f){A=(A<0?-1:1)*f}S=b;M=b+A;I=D-o;T=I-s;p&&(k[a][_][w]=M)}else{var C=l.dataToAngle(x,true)-g;var L=i.dataToRadius(_);if(Math.abs(C)<c){C=(C<0?-1:1)*c}S=L+o;M=S+s;I=b;T=b+C;p&&(k[a][_][w]=T)}e.setItemLayout(m,{cx:u,cy:h,r0:S,r:M,startAngle:-I*Math.PI/180,endAngle:-T*Math.PI/180})}},this)}function RP(t,e){var d={};L(t,function(t,e){var r=t.getData();var i=t.coordinateSystem;var a=i.getBaseAxis();var n=a.getExtent();var o=a.type==="category"?a.getBandWidth():Math.abs(n[1]-n[0])/r.count();var s=d[OP(a)]||{bandWidth:o,remainedWidth:o,autoWidthCount:0,categoryGap:"20%",gap:"30%",stacks:{}};var l=s.stacks;d[OP(a)]=s;var u=NP(t);if(!l[u]){s.autoWidthCount++}l[u]=l[u]||{width:0,maxWidth:0};var h=cu(t.get("barWidth"),o);var f=cu(t.get("barMaxWidth"),o);var c=t.get("barGap");var v=t.get("barCategoryGap");if(h&&!l[u].width){h=Math.min(s.remainedWidth,h);l[u].width=h;s.remainedWidth-=h}f&&(l[u].maxWidth=f);c!=null&&(s.gap=c);v!=null&&(s.categoryGap=v)});var c={};L(d,function(t,r){c[r]={};var e=t.stacks;var i=t.bandWidth;var a=cu(t.categoryGap,i);var n=cu(t.gap,1);var o=t.remainedWidth;var s=t.autoWidthCount;var l=(o-a)/(s+(s-1)*n);l=Math.max(l,0);L(e,function(t,e){var r=t.maxWidth;if(r&&r<l){r=Math.min(r,o);if(t.width){r=Math.min(r,t.width)}o-=r;t.width=r;s--}});l=(o-a)/(s+(s-1)*n);l=Math.max(l,0);var u=0;var h;L(e,function(t,e){if(!t.width){t.width=l}h=t;u+=t.width*(1+n)});if(h){u-=h.width*n}var f=-u/2;L(e,function(t,e){c[r][e]=c[r][e]||{offset:f,width:t.width};f+=t.width*(1+n)})});return c}function zP(t,e){Fm.call(this,"radius",t,e);this.type="category"}zP.prototype={constructor:zP,pointToData:function(t,e){return this.polar.pointToData(t,e)[this.dim==="radius"?0:1]},dataToRadius:Fm.prototype.dataToCoord,radiusToData:Fm.prototype.coordToData};M(zP,Fm);var BP=hn();function VP(t,e){e=e||[0,360];Fm.call(this,"angle",t,e);this.type="category"}VP.prototype={constructor:VP,pointToData:function(t,e){return this.polar.pointToData(t,e)[this.dim==="radius"?0:1]},dataToAngle:Fm.prototype.dataToCoord,angleToData:Fm.prototype.coordToData,calculateCategoryInterval:function(){var t=this;var e=t.getLabelModel();var r=t.scale;var i=r.getExtent();var a=r.count();if(i[1]-i[0]<1){return 0}var n=i[0];var o=t.dataToCoord(n+1)-t.dataToCoord(n);var s=Math.abs(o);var l=bi(n,e.getFont(),"center","top");var u=Math.max(l.height,7);var h=u/s;isNaN(h)&&(h=Infinity);var f=Math.max(0,Math.floor(h));var c=BP(t.model);var v=c.lastAutoInterval;var d=c.lastTickCount;if(v!=null&&d!=null&&Math.abs(v-f)<=1&&Math.abs(d-a)<=1&&v>f){f=v}else{c.lastTickCount=a;c.lastAutoInterval=f}return f}};M(VP,Fm);var GP=function(t){this.name=t||"";this.cx=0;this.cy=0;this._radiusAxis=new zP;this._angleAxis=new VP;this._radiusAxis.polar=this._angleAxis.polar=this};GP.prototype={type:"polar",axisPointerEnabled:true,constructor:GP,dimensions:["radius","angle"],model:null,containPoint:function(t){var e=this.pointToCoord(t);return this._radiusAxis.contain(e[0])&&this._angleAxis.contain(e[1])},containData:function(t){return this._radiusAxis.containData(t[0])&&this._angleAxis.containData(t[1])},getAxis:function(t){return this["_"+t+"Axis"]},getAxes:function(){return[this._radiusAxis,this._angleAxis]},getAxesByScale:function(t){var e=[];var r=this._angleAxis;var i=this._radiusAxis;r.scale.type===t&&e.push(r);i.scale.type===t&&e.push(i);return e},getAngleAxis:function(){return this._angleAxis},getRadiusAxis:function(){return this._radiusAxis},getOtherAxis:function(t){var e=this._angleAxis;return t===e?this._radiusAxis:e},getBaseAxis:function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAngleAxis()},getTooltipAxes:function(t){var e=t!=null&&t!=="auto"?this.getAxis(t):this.getBaseAxis();return{baseAxes:[e],otherAxes:[this.getOtherAxis(e)]}},dataToPoint:function(t,e){return this.coordToPoint([this._radiusAxis.dataToRadius(t[0],e),this._angleAxis.dataToAngle(t[1],e)])},pointToData:function(t,e){var r=this.pointToCoord(t);return[this._radiusAxis.radiusToData(r[0],e),this._angleAxis.angleToData(r[1],e)]},pointToCoord:function(t){var e=t[0]-this.cx;var r=t[1]-this.cy;var i=this.getAngleAxis();var a=i.getExtent();var n=Math.min(a[0],a[1]);var o=Math.max(a[0],a[1]);i.inverse?n=o-360:o=n+360;var s=Math.sqrt(e*e+r*r);e/=s;r/=s;var l=Math.atan2(-r,e)/Math.PI*180;var u=l<n?1:-1;while(l<n||l>o){l+=u*360}return[s,l]},coordToPoint:function(t){var e=t[0];var r=t[1]/180*Math.PI;var i=Math.cos(r)*e+this.cx;var a=-Math.sin(r)*e+this.cy;return[i,a]}};var FP=hh.extend({type:"polarAxis",axis:null,getCoordSysModel:function(){return this.ecModel.queryComponents({mainType:"polar",index:this.option.polarIndex,id:this.option.polarId})[0]}});m(FP.prototype,rm);var WP={angle:{startAngle:90,clockwise:true,splitNumber:12,axisLabel:{rotate:false}},radius:{splitNumber:5}};function HP(t,e){return e.type||(e.data?"category":"value")}tx("angle",FP,HP,WP.angle);tx("radius",FP,HP,WP.radius);$d({type:"polar",dependencies:["polarAxis","angleAxis"],coordinateSystem:null,findAxisModel:function(t){var e;var r=this.ecModel;r.eachComponent(t,function(t){if(t.getCoordSysModel()===this){e=t}},this);return e},defaultOption:{zlevel:0,z:0,center:["50%","50%"],radius:"80%"}});function ZP(t,e,r){var i=e.get("center");var a=r.getWidth();var n=r.getHeight();t.cx=cu(i[0],a);t.cy=cu(i[1],n);var o=t.getRadiusAxis();var s=Math.min(a,n)/2;var l=cu(e.get("radius"),s);o.inverse?o.setExtent(l,0):o.setExtent(0,l)}function UP(t,e){var r=this;var i=r.getAngleAxis();var a=r.getRadiusAxis();i.scale.setExtent(Infinity,-Infinity);a.scale.setExtent(Infinity,-Infinity);t.eachSeries(function(t){if(t.coordinateSystem===r){var e=t.getData();L(e.mapDimension("radius",true),function(t){a.scale.unionExtentFromData(e,Up(e,t))});L(e.mapDimension("angle",true),function(t){i.scale.unionExtentFromData(e,Up(e,t))})}});Yg(i.scale,i.model);Yg(a.scale,a.model);if(i.type==="category"&&!i.onBand){var n=i.getExtent();var o=360/i.scale.count();i.inverse?n[1]+=o:n[1]-=o;i.setExtent(n[0],n[1])}}function XP(t,e){t.type=e.get("type");t.scale=jg(e);t.onBand=e.get("boundaryGap")&&t.type==="category";t.inverse=e.get("inverse");if(e.mainType==="angleAxis"){t.inverse^=e.get("clockwise");var r=e.get("startAngle");t.setExtent(r,r+(t.inverse?-360:360))}e.axis=t;t.model=e}var YP={dimensions:GP.prototype.dimensions,create:function(r,s){var l=[];r.eachComponent("polar",function(t,e){var r=new GP(e);r.update=UP;var i=r.getRadiusAxis();var a=r.getAngleAxis();var n=t.findAxisModel("radiusAxis");var o=t.findAxisModel("angleAxis");XP(i,n);XP(a,o);ZP(r,t,s);l.push(r);t.coordinateSystem=r;r.model=t});r.eachSeries(function(t){if(t.get("coordinateSystem")==="polar"){var e=r.queryComponents({mainType:"polar",index:t.get("polarIndex"),id:t.get("polarId")})[0];if(D){if(!e){throw new Error('Polar "'+X(t.get("polarIndex"),t.get("polarId"),0)+'" not found')}}t.coordinateSystem=e.coordinateSystem}});return l}};ef.register("polar",YP);var jP=["axisLine","axisLabel","axisTick","splitLine","splitArea"];function qP(t,e,r){e[1]>e[0]&&(e=e.slice().reverse());var i=t.coordToPoint([e[0],r]);var a=t.coordToPoint([e[1],r]);return{x1:i[0],y1:i[1],x2:a[0],y2:a[1]}}function KP(t){var e=t.getRadiusAxis();return e.inverse?0:1}function $P(t){var e=t[0];var r=t[t.length-1];if(e&&r&&Math.abs(Math.abs(e.coord-r.coord)-360)<1e-4){t.pop()}}Gx.extend({type:"angleAxis",axisPointerClass:"PolarAxisPointer",render:function(e,t){this.group.removeAll();if(!e.get("show")){return}var r=e.axis;var i=r.polar;var a=i.getRadiusAxis().getExtent();var n=r.getTicksCoords();var o=A(r.getViewLabels(),function(t){var t=P(t);t.coord=r.dataToCoord(t.tickValue);return t});$P(o);$P(n);L(jP,function(t){if(e.get(t+".show")&&(!r.scale.isBlank()||t==="axisLine")){this["_"+t](e,i,n,a,o)}},this)},_axisLine:function(t,e,r,i){var a=t.getModel("axisLine.lineStyle");var n=new bs({shape:{cx:e.cx,cy:e.cy,r:i[KP(e)]},style:a.getLineStyle(),z2:1,silent:true});n.style.fill=null;this.group.add(n)},_axisTick:function(t,e,r,i){var a=t.getModel("axisTick");var n=(a.get("inside")?-1:1)*a.get("length");var o=i[KP(e)];var s=A(r,function(t){return new Gs({shape:qP(e,[o,o+n],t.coord)})});this.group.add(sl(s,{style:C(a.getModel("lineStyle").getLineStyle(),{stroke:t.get("axisLine.lineStyle.color")})}))},_axisLabel:function(f,c,t,v,e){var d=f.getCategories(true);var p=f.getModel("axisLabel");var g=p.get("margin");L(e,function(t,e){var r=p;var i=t.tickValue;var a=v[KP(c)];var n=c.coordToPoint([a+g,t.coord]);var o=c.cx;var s=c.cy;var l=Math.abs(n[0]-o)/a<.3?"center":n[0]>o?"left":"right";var u=Math.abs(n[1]-s)/a<.3?"middle":n[1]>s?"top":"bottom";if(d&&d[i]&&d[i].textStyle){r=new ru(d[i].textStyle,p,p.ecModel)}var h=new ws({silent:true});this.group.add(h);Ll(h.style,r,{x:n[0],y:n[1],textFill:r.getTextColor()||f.get("axisLine.lineStyle.color"),text:t.formattedLabel,textAlign:l,textVerticalAlign:u})},this)},_splitLine:function(t,e,r,i){var a=t.getModel("splitLine");var n=a.getModel("lineStyle");var o=n.get("color");var s=0;o=o instanceof Array?o:[o];var l=[];for(var u=0;u<r.length;u++){var h=s++%o.length;l[h]=l[h]||[];l[h].push(new Gs({shape:qP(e,i,r[u].coord)}))}for(var u=0;u<l.length;u++){this.group.add(sl(l[u],{style:C({stroke:o[u%o.length]},n.getLineStyle()),silent:true,z:t.get("z")}))}},_splitArea:function(t,e,r,i){if(!r.length){return}var a=t.getModel("splitArea");var n=a.getModel("areaStyle");var o=n.get("color");var s=0;o=o instanceof Array?o:[o];var l=[];var u=Math.PI/180;var h=-r[0].coord*u;var f=Math.min(i[0],i[1]);var c=Math.max(i[0],i[1]);var v=t.get("clockwise");for(var d=1;d<r.length;d++){var p=s++%o.length;l[p]=l[p]||[];l[p].push(new Is({shape:{cx:e.cx,cy:e.cy,r0:f,r:c,startAngle:h,endAngle:-r[d].coord*u,clockwise:v},silent:true}));h=-r[d].coord*u}for(var d=0;d<l.length;d++){this.group.add(sl(l[d],{style:C({fill:o[d%o.length]},n.getAreaStyle()),silent:true}))}}});var JP=["axisLine","axisTickLabel","axisName"];var QP=["splitLine","splitArea"];Gx.extend({type:"radiusAxis",axisPointerClass:"PolarAxisPointer",render:function(e,t){this.group.removeAll();if(!e.get("show")){return}var r=e.axis;var i=r.polar;var a=i.getAngleAxis();var n=r.getTicksCoords();var o=a.getExtent()[0];var s=r.getExtent();var l=tN(i,e,o);var u=new px(e,l);L(JP,u.add,u);this.group.add(u.getGroup());L(QP,function(t){if(e.get(t+".show")&&!r.scale.isBlank()){this["_"+t](e,i,o,s,n)}},this)},_splitLine:function(t,e,r,i,a){var n=t.getModel("splitLine");var o=n.getModel("lineStyle");var s=o.get("color");var l=0;s=s instanceof Array?s:[s];var u=[];for(var h=0;h<a.length;h++){var f=l++%s.length;u[f]=u[f]||[];u[f].push(new bs({shape:{cx:e.cx,cy:e.cy,r:a[h].coord},silent:true}))}for(var h=0;h<u.length;h++){this.group.add(sl(u[h],{style:C({stroke:s[h%s.length],fill:null},o.getLineStyle()),silent:true}))}},_splitArea:function(t,e,r,i,a){if(!a.length){return}var n=t.getModel("splitArea");var o=n.getModel("areaStyle");var s=o.get("color");var l=0;s=s instanceof Array?s:[s];var u=[];var h=a[0].coord;for(var f=1;f<a.length;f++){var c=l++%s.length;u[c]=u[c]||[];u[c].push(new Is({shape:{cx:e.cx,cy:e.cy,r0:h,r:a[f].coord,startAngle:0,endAngle:Math.PI*2},silent:true}));h=a[f].coord}for(var f=0;f<u.length;f++){this.group.add(sl(u[f],{style:C({fill:s[f%s.length]},o.getAreaStyle()),silent:true}))}}});function tN(t,e,r){return{position:[t.cx,t.cy],rotation:r/180*Math.PI,labelDirection:-1,tickDirection:-1,nameDirection:1,labelRotate:e.getModel("axisLabel").get("rotate"),z2:1}}var eN=dL.extend({makeElOption:function(t,e,r,i,a){var n=r.axis;if(n.dim==="angle"){this.animationThreshold=Math.PI/18}var o=n.polar;var s=o.getOtherAxis(n);var l=s.getExtent();var u;u=n["dataTo"+Zu(n.dim)](e);var h=i.get("type");if(h&&h!=="none"){var f=_L(i);var c=iN[h](n,o,u,l,f);c.style=f;t.graphicKey=c.type;t.pointer=c}var v=i.get("label.margin");var d=rN(e,r,i,o,v);wL(t,r,i,a,d)}});function rN(t,e,r,i,a){var n=e.axis;var o=n.dataToCoord(t);var s=i.getAngleAxis().getExtent()[0];s=s/180*Math.PI;var l=i.getRadiusAxis().getExtent();var u;var h;var f;if(n.dim==="radius"){var c=le();ve(c,c,s);ce(c,c,[i.cx,i.cy]);u=Hl([o,-a],c);var v=e.getModel("axisLabel").get("rotate")||0;var d=px.innerTextLayout(s,v*Math.PI/180,-1);h=d.textAlign;f=d.textVerticalAlign}else{var p=l[1];u=i.coordToPoint([p+a,o]);var g=i.cx;var m=i.cy;h=Math.abs(u[0]-g)/p<.3?"center":u[0]>g?"left":"right";f=Math.abs(u[1]-m)/p<.3?"middle":u[1]>m?"top":"bottom"}return{position:u,align:h,verticalAlign:f}}var iN={line:function(t,e,r,i,a){return t.dim==="angle"?{type:"Line",shape:TL(e.coordToPoint([i[0],r]),e.coordToPoint([i[1],r]))}:{type:"Circle",shape:{cx:e.cx,cy:e.cy,r:r}}},shadow:function(t,e,r,i,a){var n=Math.max(1,t.getBandWidth());var o=Math.PI/180;return t.dim==="angle"?{type:"Sector",shape:DL(e.cx,e.cy,i[0],i[1],(-r-n/2)*o,(-r+n/2)*o)}:{type:"Sector",shape:DL(e.cx,e.cy,r-n/2,r+n/2,0,Math.PI*2)}}};Gx.registerAxisPointerClass("PolarAxisPointer",eN);Yd(z(EP,"bar"));Jd({type:"polar"});var aN=hh.extend({type:"geo",coordinateSystem:null,layoutMode:"box",init:function(t){hh.prototype.init.apply(this,arguments);Qa(t,"label",["show"])},optionUpdated:function(){var t=this.option;var r=this;t.regions=Uw.getFilledRegions(t.regions,t.map,t.nameMap);this._optionModelMap=T(t.regions||[],function(t,e){if(e.name){t.set(e.name,new ru(e,r))}return t},it());this.updateSelectedMap(t.regions)},defaultOption:{zlevel:0,z:0,show:true,left:"center",top:"center",aspectScale:null,silent:false,map:"",boundingCoords:null,center:null,zoom:1,scaleLimit:null,label:{show:false,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444",color:"#eee"},emphasis:{label:{show:true,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},regions:[]},getRegionModel:function(t){return this._optionModelMap.get(t)||new ru(null,this,this.ecModel)},getFormattedLabel:function(t,e){var r=this.getRegionModel(t);var i=r.get("label."+e+".formatter");var a={name:t};if(typeof i==="function"){a.status=e;return i(a)}else if(typeof i==="string"){return i.replace("{a}",t!=null?t:"")}},setZoom:function(t){this.option.zoom=t},setCenter:function(t){this.option.center=t}});I(aN,h_);Jd({type:"geo",init:function(t,e){var r=new kw(e,true);this._mapDraw=r;this.group.add(r.group)},render:function(t,e,r,i){if(i&&i.type==="geoToggleSelect"&&i.from===this.uid){return}var a=this._mapDraw;if(t.get("show")){a.draw(t,e,r,this,i)}else{this._mapDraw.group.removeAll()}this.group.silent=t.get("silent")},dispose:function(){this._mapDraw&&this._mapDraw.remove()}});function nN(a,t){t.update="updateView";Zd(t,function(r,t){var i={};t.eachComponent({mainType:"geo",query:r},function(e){e[a](r.name);var t=e.coordinateSystem;L(t.regions,function(t){i[t.name]=e.isSelected(t.name)||false})});return{selected:i,name:r.name}})}nN("toggleSelected",{type:"geoToggleSelect",event:"geoselectchanged"});nN("select",{type:"geoSelect",event:"geoselected"});nN("unSelect",{type:"geoUnSelect",event:"geounselected"});var oN=["rect","polygon","keep","clear"];var sN=function(t,e){var r=t&&t.brush;if(!B(r)){r=r?[r]:[]}if(!r.length){return}var i=[];L(r,function(t){var e=t.hasOwnProperty("toolbox")?t.toolbox:[];if(e instanceof Array){i=i.concat(e)}});var a=t&&t.toolbox;if(B(a)){a=a[0]}if(!a){a={feature:{}};t.toolbox=[a]}var n=a.feature||(a.feature={});var o=n.brush||(n.brush={});var s=o.type||(o.type=[]);s.push.apply(s,i);lN(s);if(e&&!s.length){s.push.apply(s,oN)}};function lN(r){var e={};L(r,function(t){e[t]=1});r.length=0;L(e,function(t,e){r.push(e)})}var uN=L;function hN(t){if(t){for(var e in t){if(t.hasOwnProperty(e)){return true}}}}function fN(t,e,n){var r={};uN(e,function(i){var a=r[i]=o();uN(t[i],function(t,e){if(!pS.isValidType(e)){return}var r={type:e,visual:t};n&&n(r,i);a[e]=new pS(r);if(e==="opacity"){r=P(r);r.type="colorAlpha";a.__hidden.__alphaForOpacity=new pS(r)}})});return r;function o(){var t=function(){};t.prototype.__hidden=t.prototype;var e=new t;return e}}function cN(e,r,t){var i;L(t,function(t){if(r.hasOwnProperty(t)&&hN(r[t])){i=true}});i&&L(t,function(t){if(r.hasOwnProperty(t)&&hN(r[t])){e[t]=P(r[t])}else{delete e[t]}})}function vN(t,u,h,f,c,v){var d={};L(t,function(t){var e=pS.prepareVisualTypes(u[t]);d[t]=e});var p;function g(t){return h.getItemVisual(p,t)}function m(t,e){h.setItemVisual(p,t,e)}if(v==null){h.each(e)}else{h.each([v],e)}function e(t,e){p=v==null?t:e;var r=h.getRawDataItem(p);if(r&&r.visualMap===false){return}var i=f.call(c,t);var a=u[i];var n=d[i];for(var o=0,s=n.length;o<s;o++){var l=n[o];a[l]&&a[l].applyVisual(t,g,m)}}}function dN(t,v,d,p){var g={};L(t,function(t){var e=pS.prepareVisualTypes(v[t]);g[t]=e});function e(t,r){if(p!=null){p=r.getDimension(p)}function e(t){return r.getItemVisual(a,t)}function i(t,e){r.setItemVisual(a,t,e)}var a;while((a=t.next())!=null){var n=r.getRawDataItem(a);if(n&&n.visualMap===false){continue}var o=p!=null?r.get(p,a,true):a;var s=d(o);var l=v[s];var u=g[s];for(var h=0,f=u.length;h<f;h++){var c=u[h];l[c]&&l[c].applyVisual(o,e,i)}}}return{progress:e}}var pN={lineX:gN(0),lineY:gN(1),rect:{point:function(t,e,r){return t&&r.boundingRect.contain(t[0],t[1])},rect:function(t,e,r){return t&&r.boundingRect.intersect(t)}},polygon:{point:function(t,e,r){return t&&r.boundingRect.contain(t[0],t[1])&&_m(r.range,t[0],t[1])},rect:function(t,e,r){var i=r.range;if(!t||i.length<=1){return false}var a=t.x;var n=t.y;var o=t.width;var s=t.height;var l=i[0];if(_m(i,a,n)||_m(i,a+o,n)||_m(i,a,n+s)||_m(i,a+o,n+s)||Nr.create(t).contain(l[0],l[1])||yN(a,n,a+o,n,i)||yN(a,n,a,n+s,i)||yN(a+o,n,a+o,n+s,i)||yN(a,n+s,a+o,n+s,i)){return true}}}};function gN(n){var o=["x","y"];var s=["width","height"];return{point:function(t,e,r){if(t){var i=r.range;var a=t[n];return mN(a,i)}},rect:function(t,e,r){if(t){var i=r.range;var a=[t[o[n]],t[o[n]]+t[s[n]]];a[1]<a[0]&&a.reverse();return mN(a[0],i)||mN(a[1],i)||mN(i[0],a)||mN(i[1],a)}}}}function mN(t,e){return e[0]<=t&&t<=e[1]}function yN(t,e,r,i,a){for(var n=0,o=a[a.length-1];n<a.length;n++){var s=a[n];if(xN(t,e,r,i,s[0],s[1],o[0],o[1])){return true}o=s}}function xN(t,e,r,i,a,n,o,s){var l=wN(r-t,a-o,i-e,n-s);if(_N(l)){return false}var u=wN(a-t,a-o,n-e,n-s)/l;if(u<0||u>1){return false}var h=wN(r-t,a-t,i-e,n-e)/l;if(h<0||h>1){return false}return true}function _N(t){return t<=1e-6&&t>=-1e-6}function wN(t,e,r,i){return t*i-e*r}var bN=L;var SN=S;var MN=z;var IN=["dataToPoint","pointToData"];var TN=["grid","xAxis","yAxis","geo","graph","polar","radiusAxis","angleAxis","bmap"];function AN(t,e,r){var i=this._targetInfoList=[];var a={};var n=LN(e,t);bN(kN,function(t,e){if(!r||!r.include||SN(r.include,e)>=0){t(n,i,a)}})}var DN=AN.prototype;DN.setOutputRanges=function(t,e){this.matchOutputRanges(t,e,function(t,e,r){(t.coordRanges||(t.coordRanges=[])).push(e);if(!t.coordRange){t.coordRange=e;var i=ON[t.brushType](0,r,e);t.__rangeOffset={offset:RN[t.brushType](i.values,t.range,[1,1]),xyMinMax:i.xyMinMax}}})};DN.matchOutputRanges=function(t,i,a){bN(t,function(r){var t=this.findTargetInfo(r,i);if(t&&t!==true){L(t.coordSyses,function(t){var e=ON[r.brushType](1,t,r.range);a(r,e.values,t,i)})}},this)};DN.setInputRanges=function(t,a){bN(t,function(t){var e=this.findTargetInfo(t,a);if(D){$(!e||e===true||t.coordRange,"coordRange must be specified when coord index specified.");$(!e||e!==true||t.range,"range must be specified in global brush.")}t.range=t.range||[];if(e&&e!==true){t.panelId=e.panelId;var r=ON[t.brushType](0,e.coordSys,t.coordRange);var i=t.__rangeOffset;t.range=i?RN[t.brushType](r.values,i.offset,BN(r.xyMinMax,i.xyMinMax)):r.values}},this)};DN.makePanelOpts=function(r,i){return A(this._targetInfoList,function(t){var e=t.getPanelRect();return{panelId:t.panelId,defaultBrushType:i&&i(t),clipPath:UT(e),isTargetByCursor:YT(e,r,t.coordSysModel),getLinearBrushOtherExtent:XT(e)}})};DN.controlSeries=function(t,e,r){var i=this.findTargetInfo(t,r);return i===true||i&&SN(i.coordSyses,e.coordinateSystem)>=0};DN.findTargetInfo=function(t,e){var r=this._targetInfoList;var i=LN(e,t);for(var a=0;a<r.length;a++){var n=r[a];var o=t.panelId;if(o){if(n.panelId===o){return n}}else{for(var a=0;a<PN.length;a++){if(PN[a](i,n)){return n}}}}return true};function CN(t){t[0]>t[1]&&t.reverse();return t}function LN(t,e){return cn(t,e,{includeMainTypes:TN})}var kN={grid:function(t,i){var a=t.xAxisModels;var n=t.yAxisModels;var e=t.gridModels;var r=it();var o={};var s={};if(!a&&!n&&!e){return}bN(a,function(t){var e=t.axis.grid.model;r.set(e.id,e);o[e.id]=true});bN(n,function(t){var e=t.axis.grid.model;r.set(e.id,e);s[e.id]=true});bN(e,function(t){r.set(t.id,t);o[t.id]=true;s[t.id]=true});r.each(function(t){var e=t.coordinateSystem;var r=[];bN(e.getCartesians(),function(t,e){if(SN(a,t.getAxis("x").model)>=0||SN(n,t.getAxis("y").model)>=0){r.push(t)}});i.push({panelId:"grid--"+t.id,gridModel:t,coordSysModel:t,coordSys:r[0],coordSyses:r,getPanelRect:NN.grid,xAxisDeclared:o[t.id],yAxisDeclared:s[t.id]})})},geo:function(t,r){bN(t.geoModels,function(t){var e=t.coordinateSystem;r.push({panelId:"geo--"+t.id,geoModel:t,coordSysModel:t,coordSys:e,coordSyses:[e],getPanelRect:NN.geo})})}};var PN=[function(t,e){var r=t.xAxisModel;var i=t.yAxisModel;var a=t.gridModel;!a&&r&&(a=r.axis.grid.model);!a&&i&&(a=i.axis.grid.model);return a&&a===e.gridModel},function(t,e){var r=t.geoModel;return r&&r===e.geoModel}];var NN={grid:function(){return this.coordSys.grid.getRect().clone()},geo:function(){var t=this.coordSys;var e=t.getBoundingRect().clone();e.applyTransform(Wl(t));return e}};var ON={lineX:MN(EN,0),lineY:MN(EN,1),rect:function(t,e,r){var i=e[IN[t]]([r[0][0],r[1][0]]);var a=e[IN[t]]([r[0][1],r[1][1]]);var n=[CN([i[0],a[0]]),CN([i[1],a[1]])];return{values:n,xyMinMax:n}},polygon:function(r,i,t){var a=[[Infinity,-Infinity],[Infinity,-Infinity]];var e=A(t,function(t){var e=i[IN[r]](t);a[0][0]=Math.min(a[0][0],e[0]);a[1][0]=Math.min(a[1][0],e[1]);a[0][1]=Math.max(a[0][1],e[0]);a[1][1]=Math.max(a[1][1],e[1]);return e});return{values:e,xyMinMax:a}}};function EN(t,e,r,i){if(D){$(r.type==="cartesian2d","lineX/lineY brush is available only in cartesian2d.")}var a=r.getAxis(["x","y"][t]);var n=CN(A([0,1],function(t){return e?a.coordToData(a.toLocalCoord(i[t])):a.toGlobalCoord(a.dataToCoord(i[t]))}));var o=[];o[t]=n;o[1-t]=[NaN,NaN];return{values:n,xyMinMax:o}}var RN={lineX:MN(zN,0),lineY:MN(zN,1),rect:function(t,e,r){return[[t[0][0]-r[0]*e[0][0],t[0][1]-r[0]*e[0][1]],[t[1][0]-r[1]*e[1][0],t[1][1]-r[1]*e[1][1]]]},polygon:function(t,r,i){return A(t,function(t,e){return[t[0]-i[0]*r[e][0],t[1]-i[1]*r[e][1]]})}};function zN(t,e,r,i){return[e[0]-i[t]*r[0],e[1]-i[t]*r[1]]}function BN(t,e){var r=VN(t);var i=VN(e);var a=[r[0]/i[0],r[1]/i[1]];isNaN(a[0])&&(a[0]=1);isNaN(a[1])&&(a[1]=1);return a}function VN(t){return t?[t[0][1]-t[0][0],t[1][1]-t[1][0]]:[NaN,NaN]}var GN=["inBrush","outOfBrush"];var FN="__ecBrushSelect";var WN="__ecInBrushSelectEvent";var HN=Zv.VISUAL.BRUSH;Yd(HN,function(r,t,i){r.eachComponent({mainType:"brush"},function(t){i&&i.type==="takeGlobalCursor"&&t.setBrushOption(i.key==="brush"?i.brushOption:{brushType:false});var e=t.brushTargetManager=new AN(t.option,r);e.setInputRanges(t.areas,r)})});jd(HN,function(p,t,e){var g=[];var m;var y;p.eachComponent({mainType:"brush"},function(n,t){var s={brushId:n.id,brushIndex:t,brushName:n.name,areas:P(n.areas),selected:[]};g.push(s);var e=n.option;var r=e.brushLink;var i=[];var l=[];var u=[];var h=0;if(!t){m=e.throttleType;y=e.throttleDelay}var o=A(n.areas,function(t){return qN(C({boundingRect:KN[t.brushType](t)},t))});var f=fN(n.option,GN,function(t){t.mappingMethod="fixed"});B(r)&&L(r,function(t){i[t]=1});function c(t){return r==="all"||i[t]}function v(t){return!!t.length}p.eachSeries(function(t,e){var r=u[e]=[];t.subType==="parallel"?a(t,e,r):d(t,e,r)});function a(t,e){var r=t.coordinateSystem;h|=r.hasAxisBrushed();c(e)&&r.eachActiveState(t.getData(),function(t,e){t==="active"&&(l[e]=1)})}function d(e,t,r){var i=YN(e);if(!i||jN(n,t)){return}L(o,function(t){i[t.brushType]&&n.brushTargetManager.controlSeries(t,e,p)&&r.push(t);h|=v(r)});if(c(t)&&v(r)){var a=e.getData();a.each(function(t){if(XN(i,r,a,t)){l[t]=1}})}}p.eachSeries(function(t,e){var r={seriesId:t.id,seriesIndex:e,seriesName:t.name,dataIndex:[]};s.selected.push(r);var i=YN(t);var a=u[e];var n=t.getData();var o=c(e)?function(t){return l[t]?(r.dataIndex.push(n.getRawIndex(t)),"inBrush"):"outOfBrush"}:function(t){return XN(i,a,n,t)?(r.dataIndex.push(n.getRawIndex(t)),"inBrush"):"outOfBrush"};(c(e)?h:v(a))&&vN(GN,f,n,o)})});ZN(t,m,y,g,e)});function ZN(t,e,r,i,a){if(!a){return}var n=t.getZr();if(n[WN]){return}if(!n[FN]){n[FN]=UN}var o=Ac(n,FN,r,e);o(t,i)}function UN(t,e){if(!t.isDisposed()){var r=t.getZr();r[WN]=true;t.dispatchAction({type:"brushSelect",batch:e});r[WN]=false}}function XN(t,e,r,i){for(var a=0,n=e.length;a<n;a++){var o=e[a];if(t[o.brushType](i,r,o.selectors,o)){return true}}}function YN(t){var o=t.brushSelector;if(G(o)){var e=[];L(pN,function(n,t){e[t]=function(t,e,r,i){var a=e.getItemLayout(t);return n[o](a,r,i)}});return e}else if(V(o)){var r={};L(pN,function(t,e){r[e]=o});return r}return o}function jN(t,e){var r=t.option.seriesIndex;return r!=null&&r!=="all"&&(B(r)?S(r,e)<0:e!==r)}function qN(r){var i=r.selectors={};L(pN[r.brushType],function(e,t){i[t]=function(t){return e(t,i,r)}});return r}var KN={lineX:nt,lineY:nt,rect:function(t){return $N(t.range)},polygon:function(t){var e;var r=t.range;for(var i=0,a=r.length;i<a;i++){e=e||[[Infinity,-Infinity],[Infinity,-Infinity]];var n=r[i];n[0]<e[0][0]&&(e[0][0]=n[0]);n[0]>e[0][1]&&(e[0][1]=n[0]);n[1]<e[1][0]&&(e[1][0]=n[1]);n[1]>e[1][1]&&(e[1][1]=n[1])}return e&&$N(e)}};function $N(t){return new Nr(t[0][0],t[1][0],t[0][1]-t[0][0],t[1][1]-t[1][0])}var JN=["#ddd"];var QN=$d({type:"brush",dependencies:["geo","grid","xAxis","yAxis","parallel","series"],defaultOption:{toolbox:null,brushLink:null,seriesIndex:"all",geoIndex:null,xAxisIndex:null,yAxisIndex:null,brushType:"rect",brushMode:"single",transformable:true,brushStyle:{borderWidth:1,color:"rgba(120,140,180,0.3)",borderColor:"rgba(120,140,180,0.8)"},throttleType:"fixRate",throttleDelay:0,removeOnClick:true,z:1e4},areas:[],brushType:null,brushOption:{},coordInfoList:[],optionUpdated:function(t,e){var r=this.option;!e&&cN(r,t,["inBrush","outOfBrush"]);var i=r.inBrush=r.inBrush||{};r.outOfBrush=r.outOfBrush||{color:JN};if(!i.hasOwnProperty("liftZ")){i.liftZ=5}},setAreas:function(t){if(D){$(B(t));L(t,function(t){$(t.brushType,"Illegal areas")})}if(!t){return}this.areas=A(t,function(t){return tO(this.option,t)},this)},setBrushOption:function(t){this.brushOption=tO(this.option,t);this.brushType=this.brushOption.brushType}});function tO(t,e){return m({brushType:t.brushType,brushMode:t.brushMode,transformable:t.transformable,brushStyle:new ru(t.brushStyle).getItemStyle(),removeOnClick:t.removeOnClick,z:t.z},e,true)}Jd({type:"brush",init:function(t,e){this.ecModel=t;this.api=e;this.model;(this._brushController=new lT(e.getZr())).on("brush",R(this._onBrush,this)).mount()},render:function(t){this.model=t;return eO.apply(this,arguments)},updateTransform:eO,updateView:eO,dispose:function(){this._brushController.dispose()},_onBrush:function(t,e){var r=this.model.id;this.model.brushTargetManager.setOutputRanges(t,this.ecModel);(!e.isEnd||e.removeOnClick)&&this.api.dispatchAction({type:"brush",brushId:r,areas:P(t),$from:r})}});function eO(t,e,r,i){(!i||i.$from!==t.id)&&this._brushController.setPanels(t.brushTargetManager.makePanelOpts(r)).enableBrush(t.brushOption).updateCovers(t.areas.slice())}Zd({type:"brush",event:"brush"},function(e,t){t.eachComponent({mainType:"brush",query:e},function(t){t.setAreas(e.areas)})});Zd({type:"brushSelect",event:"brushSelected",update:"none"},function(){});var rO={};function iO(t,e){rO[t]=e}function aO(t){return rO[t]}var nO=Lc.toolbox.brush;function oO(t,e,r){this.model=t;this.ecModel=e;this.api=r;this._brushType;this._brushMode}oO.defaultOption={show:true,type:["rect","polygon","lineX","lineY","keep","clear"],icon:{rect:"M7.3,34.7 M0.4,10V-0.2h9.8 M89.6,10V-0.2h-9.8 M0.4,60v10.2h9.8 M89.6,60v10.2h-9.8 M12.3,22.4V10.5h13.1 M33.6,10.5h7.8 M49.1,10.5h7.8 M77.5,22.4V10.5h-13 M12.3,31.1v8.2 M77.7,31.1v8.2 M12.3,47.6v11.9h13.1 M33.6,59.5h7.6 M49.1,59.5 h7.7 M77.5,47.6v11.9h-13",polygon:"M55.2,34.9c1.7,0,3.1,1.4,3.1,3.1s-1.4,3.1-3.1,3.1 s-3.1-1.4-3.1-3.1S53.5,34.9,55.2,34.9z M50.4,51c1.7,0,3.1,1.4,3.1,3.1c0,1.7-1.4,3.1-3.1,3.1c-1.7,0-3.1-1.4-3.1-3.1 C47.3,52.4,48.7,51,50.4,51z M55.6,37.1l1.5-7.8 M60.1,13.5l1.6-8.7l-7.8,4 M59,19l-1,5.3 M24,16.1l6.4,4.9l6.4-3.3 M48.5,11.6 l-5.9,3.1 M19.1,12.8L9.7,5.1l1.1,7.7 M13.4,29.8l1,7.3l6.6,1.6 M11.6,18.4l1,6.1 M32.8,41.9 M26.6,40.4 M27.3,40.2l6.1,1.6 M49.9,52.1l-5.6-7.6l-4.9-1.2",lineX:"M15.2,30 M19.7,15.6V1.9H29 M34.8,1.9H40.4 M55.3,15.6V1.9H45.9 M19.7,44.4V58.1H29 M34.8,58.1H40.4 M55.3,44.4 V58.1H45.9 M12.5,20.3l-9.4,9.6l9.6,9.8 M3.1,29.9h16.5 M62.5,20.3l9.4,9.6L62.3,39.7 M71.9,29.9H55.4",lineY:"M38.8,7.7 M52.7,12h13.2v9 M65.9,26.6V32 M52.7,46.3h13.2v-9 M24.9,12H11.8v9 M11.8,26.6V32 M24.9,46.3H11.8v-9 M48.2,5.1l-9.3-9l-9.4,9.2 M38.9-3.9V12 M48.2,53.3l-9.3,9l-9.4-9.2 M38.9,62.3V46.4",keep:"M4,10.5V1h10.3 M20.7,1h6.1 M33,1h6.1 M55.4,10.5V1H45.2 M4,17.3v6.6 M55.6,17.3v6.6 M4,30.5V40h10.3 M20.7,40 h6.1 M33,40h6.1 M55.4,30.5V40H45.2 M21,18.9h62.9v48.6H21V18.9z",clear:"M22,14.7l30.9,31 M52.9,14.7L22,45.7 M4.7,16.8V4.2h13.1 M26,4.2h7.8 M41.6,4.2h7.8 M70.3,16.8V4.2H57.2 M4.7,25.9v8.6 M70.3,25.9v8.6 M4.7,43.2v12.6h13.1 M26,55.8h7.8 M41.6,55.8h7.8 M70.3,43.2v12.6H57.2"},title:P(nO.title)};var sO=oO.prototype;sO.render=sO.updateView=function(e,t,r){var i;var a;var n;t.eachComponent({mainType:"brush"},function(t){i=t.brushType;a=t.brushOption.brushMode||"single";n|=t.areas.length});this._brushType=i;this._brushMode=a;L(e.get("type",true),function(t){e.setIconStatus(t,(t==="keep"?a==="multiple":t==="clear"?n:t===i)?"emphasis":"normal")})};sO.getIcons=function(){var t=this.model;var e=t.get("icon",true);var r={};L(t.get("type",true),function(t){if(e[t]){r[t]=e[t]}});return r};sO.onclick=function(t,e,r){var i=this._brushType;var a=this._brushMode;if(r==="clear"){e.dispatchAction({type:"axisAreaSelect",intervals:[]});e.dispatchAction({type:"brush",command:"clear",areas:[]})}else{e.dispatchAction({type:"takeGlobalCursor",key:"brush",brushOption:{brushType:r==="keep"?i:i===r?false:r,brushMode:r==="keep"?a==="multiple"?"single":"multiple":a}})}};iO("brush",oO);Fd(sN);var lO=864e5;function uO(t,e,r){this._model=t}uO.prototype={constructor:uO,type:"calendar",dimensions:["time","value"],getDimensionsInfo:function(){return[{name:"time",type:"time"},"value"]},getRangeInfo:function(){return this._rangeInfo},getModel:function(){return this._model},getRect:function(){return this._rect},getCellWidth:function(){return this._sw},getCellHeight:function(){return this._sh},getOrient:function(){return this._orient},getFirstDayOfWeek:function(){return this._firstDayOfWeek},getDateInfo:function(t){t=Su(t);var e=t.getFullYear();var r=t.getMonth()+1;r=r<10?"0"+r:r;var i=t.getDate();i=i<10?"0"+i:i;var a=t.getDay();a=Math.abs((a+7-this.getFirstDayOfWeek())%7);return{y:e,m:r,d:i,day:a,time:t.getTime(),formatedDate:e+"-"+r+"-"+i,date:t}},getNextNDay:function(t,e){e=e||0;if(e===0){return this.getDateInfo(t)}t=new Date(this.getDateInfo(t).time);t.setDate(t.getDate()+e);return this.getDateInfo(t)},update:function(t,e){this._firstDayOfWeek=+this._model.getModel("dayLabel").get("firstDay");this._orient=this._model.get("orient");this._lineWidth=this._model.getModel("itemStyle").getItemStyle().lineWidth||0;this._rangeInfo=this._getRangeInfo(this._initRangeOption());var r=this._rangeInfo.weeks||1;var i=["width","height"];var a=this._model.get("cellSize").slice();var n=this._model.getBoxLayoutParams();var o=this._orient==="horizontal"?[r,7]:[7,r];L([0,1],function(t){if(u(a,t)){n[i[t]]=a[t]*o[t]}});var s={width:e.getWidth(),height:e.getHeight()};var l=this._rect=rh(n,s);L([0,1],function(t){if(!u(a,t)){a[t]=l[i[t]]/o[t]}});function u(t,e){return t[e]!=null&&t[e]!=="auto"}this._sw=a[0];this._sh=a[1]},dataToPoint:function(t,e){B(t)&&(t=t[0]);e==null&&(e=true);var r=this.getDateInfo(t);var i=this._rangeInfo;var a=r.formatedDate;if(e&&!(r.time>=i.start.time&&r.time<i.end.time+lO)){return[NaN,NaN]}var n=r.day;var o=this._getRangeInfo([i.start.time,a]).nthWeek;if(this._orient==="vertical"){return[this._rect.x+n*this._sw+this._sw/2,this._rect.y+o*this._sh+this._sh/2]}return[this._rect.x+o*this._sw+this._sw/2,this._rect.y+n*this._sh+this._sh/2]},pointToData:function(t){var e=this.pointToDate(t);return e&&e.time},dataToRect:function(t,e){var r=this.dataToPoint(t,e);return{contentShape:{x:r[0]-(this._sw-this._lineWidth)/2,y:r[1]-(this._sh-this._lineWidth)/2,width:this._sw-this._lineWidth,height:this._sh-this._lineWidth},center:r,tl:[r[0]-this._sw/2,r[1]-this._sh/2],tr:[r[0]+this._sw/2,r[1]-this._sh/2],br:[r[0]+this._sw/2,r[1]+this._sh/2],bl:[r[0]-this._sw/2,r[1]+this._sh/2]}},pointToDate:function(t){var e=Math.floor((t[0]-this._rect.x)/this._sw)+1;var r=Math.floor((t[1]-this._rect.y)/this._sh)+1;var i=this._rangeInfo.range;if(this._orient==="vertical"){return this._getDateByWeeksAndDay(r,e-1,i)}return this._getDateByWeeksAndDay(e,r-1,i)},convertToPixel:z(hO,"dataToPoint"),convertFromPixel:z(hO,"pointToData"),_initRangeOption:function(){var t=this._model.get("range");var e=t;if(B(e)&&e.length===1){e=e[0]}if(/^\d{4}$/.test(e)){t=[e+"-01-01",e+"-12-31"]}if(/^\d{4}[\/|-]\d{1,2}$/.test(e)){var r=this.getDateInfo(e);var i=r.date;i.setMonth(i.getMonth()+1);var a=this.getNextNDay(i,-1);t=[r.formatedDate,a.formatedDate]}if(/^\d{4}[\/|-]\d{1,2}[\/|-]\d{1,2}$/.test(e)){t=[e,e]}var n=this._getRangeInfo(t);if(n.start.time>n.end.time){t.reverse()}return t},_getRangeInfo:function(t){t=[this.getDateInfo(t[0]),this.getDateInfo(t[1])];var e;if(t[0].time>t[1].time){e=true;t.reverse()}var r=Math.floor(t[1].time/lO)-Math.floor(t[0].time/lO)+1;var i=new Date(t[0].time);var a=i.getDate();var n=t[1].date.getDate();i.setDate(a+r-1);if(i.getDate()!==n){var o=i.getTime()-t[1].time>0?1:-1;while(i.getDate()!==n&&(i.getTime()-t[1].time)*o>0){r-=o;i.setDate(a+r-1)}}var s=Math.floor((r+t[0].day+6)/7);var l=e?-s+1:s-1;e&&t.reverse();return{range:[t[0].formatedDate,t[1].formatedDate],start:t[0],end:t[1],allDay:r,weeks:s,nthWeek:l,fweek:t[0].day,lweek:t[1].day}},_getDateByWeeksAndDay:function(t,e,r){var i=this._getRangeInfo(r);if(t>i.weeks||t===0&&e<i.fweek||t===i.weeks&&e>i.lweek){return false}var a=(t-1)*7-i.fweek+e;var n=new Date(i.start.time);n.setDate(i.start.d+a);return this.getDateInfo(n)}};uO.dimensions=uO.prototype.dimensions;uO.getDimensionsInfo=uO.prototype.getDimensionsInfo;uO.create=function(r,i){var a=[];r.eachComponent("calendar",function(t){var e=new uO(t,r,i);a.push(e);t.coordinateSystem=e});r.eachSeries(function(t){if(t.get("coordinateSystem")==="calendar"){t.coordinateSystem=a[t.get("calendarIndex")||0]}});return a};function hO(t,e,r,i){var a=r.calendarModel;var n=r.seriesModel;var o=a?a.coordinateSystem:n?n.coordinateSystem:null;return o===this?o[t](i):null}ef.register("calendar",uO);var fO=hh.extend({type:"calendar",coordinateSystem:null,defaultOption:{zlevel:0,z:2,left:80,top:60,cellSize:20,orient:"horizontal",splitLine:{show:true,lineStyle:{color:"#000",width:1,type:"solid"}},itemStyle:{color:"#fff",borderWidth:1,borderColor:"#ccc"},dayLabel:{show:true,firstDay:0,position:"start",margin:"50%",nameMap:"en",color:"#000"},monthLabel:{show:true,position:"start",margin:5,align:"center",nameMap:"en",formatter:null,color:"#000"},yearLabel:{show:true,position:null,margin:30,formatter:null,color:"#ccc",fontFamily:"sans-serif",fontWeight:"bolder",fontSize:20}},init:function(t,e,r,i){var a=oh(t);fO.superApply(this,"init",arguments);cO(t,a)},mergeOption:function(t,e){fO.superApply(this,"mergeOption",arguments);cO(this.option,t)}});function cO(t,e){var r=t.cellSize;if(!B(r)){r=t.cellSize=[r,r]}else if(r.length===1){r[1]=r[0]}var i=A([0,1],function(t){if(ah(e,t)){r[t]="auto"}return r[t]!=null&&r[t]!=="auto"});nh(t,e,{type:"box",ignoreSize:i})}var vO={EN:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],CN:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"]};var dO={EN:["S","M","T","W","T","F","S"],CN:["日","一","二","三","四","五","六"]};Jd({type:"calendar",_tlpoints:null,_blpoints:null,_firstDayOfMonth:null,_firstDayPoints:null,render:function(t,e,r){var i=this.group;i.removeAll();var a=t.coordinateSystem;var n=a.getRangeInfo();var o=a.getOrient();this._renderDayRect(t,n,i);this._renderLines(t,n,o,i);this._renderYearText(t,n,o,i);this._renderMonthText(t,o,i);this._renderWeekText(t,n,o,i)},_renderDayRect:function(t,e,r){var i=t.coordinateSystem;var a=t.getModel("itemStyle").getItemStyle();var n=i.getCellWidth();var o=i.getCellHeight();for(var s=e.start.time;s<=e.end.time;s=i.getNextNDay(s,1).time){var l=i.dataToRect([s],false).tl;var u=new Bs({shape:{x:l[0],y:l[1],width:n,height:o},cursor:"default",style:a});r.add(u)}},_renderLines:function(r,t,i,a){var n=this;var o=r.coordinateSystem;var s=r.getModel("splitLine.lineStyle").getLineStyle();var l=r.get("splitLine.show");var e=s.lineWidth;this._tlpoints=[];this._blpoints=[];this._firstDayOfMonth=[];this._firstDayPoints=[];var u=t.start;for(var h=0;u.time<=t.end.time;h++){c(u.formatedDate);if(h===0){u=o.getDateInfo(t.start.y+"-"+t.start.m)}var f=u.date;f.setMonth(f.getMonth()+1);u=o.getDateInfo(f)}c(o.getNextNDay(t.end.time,1).formatedDate);function c(t){n._firstDayOfMonth.push(o.getDateInfo(t));n._firstDayPoints.push(o.dataToRect([t],false).tl);var e=n._getLinePointsOfOneWeek(r,t,i);n._tlpoints.push(e[0]);n._blpoints.push(e[e.length-1]);l&&n._drawSplitline(e,s,a)}l&&this._drawSplitline(n._getEdgesPoints(n._tlpoints,e,i),s,a);l&&this._drawSplitline(n._getEdgesPoints(n._blpoints,e,i),s,a)},_getEdgesPoints:function(t,e,r){var i=[t[0].slice(),t[t.length-1].slice()];var a=r==="horizontal"?0:1;i[0][a]=i[0][a]-e/2;i[1][a]=i[1][a]+e/2;return i},_drawSplitline:function(t,e,r){var i=new Ps({z2:20,shape:{points:t},style:e});r.add(i)},_getLinePointsOfOneWeek:function(t,e,r){var i=t.coordinateSystem;e=i.getDateInfo(e);var a=[];for(var n=0;n<7;n++){var o=i.getNextNDay(e.time,n);var s=i.dataToRect([o.time],false);a[2*o.day]=s.tl;a[2*o.day+1]=s[r==="horizontal"?"bl":"tr"]}return a},_formatterLabel:function(t,e){if(typeof t==="string"&&t){return Gu(t,e)}if(typeof t==="function"){return t(e)}return e.nameMap},_yearTextPositionControl:function(t,e,r,i,a){e=e.slice();var n=["center","bottom"];if(i==="bottom"){e[1]+=a;n=["center","top"]}else if(i==="left"){e[0]-=a}else if(i==="right"){e[0]+=a;n=["center","top"]}else{e[1]-=a}var o=0;if(i==="left"||i==="right"){o=Math.PI/2}return{rotation:o,position:e,style:{textAlign:n[0],textVerticalAlign:n[1]}}},_renderYearText:function(t,e,r,i){var a=t.getModel("yearLabel");if(!a.get("show")){return}var n=a.get("margin");var o=a.get("position");if(!o){o=r!=="horizontal"?"top":"left"}var s=[this._tlpoints[this._tlpoints.length-1],this._blpoints[0]];var l=(s[0][0]+s[1][0])/2;var u=(s[0][1]+s[1][1])/2;var h=r==="horizontal"?0:1;var f={top:[l,s[h][1]],bottom:[l,s[1-h][1]],left:[s[1-h][0],u],right:[s[h][0],u]};var c=e.start.y;if(+e.end.y>+e.start.y){c=c+"-"+e.end.y}var v=a.get("formatter");var d={start:e.start.y,end:e.end.y,nameMap:c};var p=this._formatterLabel(v,d);var g=new ws({z2:30});Ll(g.style,a,{text:p}),g.attr(this._yearTextPositionControl(g,f[o],r,o,n));i.add(g)},_monthTextPositionControl:function(t,e,r,i,a){var n="left";var o="top";var s=t[0];var l=t[1];if(r==="horizontal"){l=l+a;if(e){n="center"}if(i==="start"){o="bottom"}}else{s=s+a;if(e){o="middle"}if(i==="start"){n="right"}}return{x:s,y:l,textAlign:n,textVerticalAlign:o}},_renderMonthText:function(t,e,r){var i=t.getModel("monthLabel");if(!i.get("show")){return}var a=i.get("nameMap");var n=i.get("margin");var o=i.get("position");var s=i.get("align");var l=[this._tlpoints,this._blpoints];if(G(a)){a=vO[a.toUpperCase()]||[]}var u=o==="start"?0:1;var h=e==="horizontal"?0:1;n=o==="start"?-n:n;var f=s==="center";for(var c=0;c<l[u].length-1;c++){var v=l[u][c].slice();var d=this._firstDayOfMonth[c];if(f){var p=this._firstDayPoints[c];v[h]=(p[h]+l[0][c+1][h])/2}var g=i.get("formatter");var m=a[+d.m-1];var y={yyyy:d.y,yy:(d.y+"").slice(2),MM:d.m,M:+d.m,nameMap:m};var x=this._formatterLabel(g,y);var _=new ws({z2:30});N(Ll(_.style,i,{text:x}),this._monthTextPositionControl(v,f,e,o,n));r.add(_)}},_weekTextPositionControl:function(t,e,r,i,a){var n="center";var o="middle";var s=t[0];var l=t[1];var u=r==="start";if(e==="horizontal"){s=s+i+(u?1:-1)*a[0]/2;n=u?"right":"left"}else{l=l+i+(u?1:-1)*a[1]/2;o=u?"bottom":"top"}return{x:s,y:l,textAlign:n,textVerticalAlign:o}},_renderWeekText:function(t,e,r,i){var a=t.getModel("dayLabel");if(!a.get("show")){return}var n=t.coordinateSystem;var o=a.get("position");var s=a.get("nameMap");var l=a.get("margin");var u=n.getFirstDayOfWeek();if(G(s)){s=dO[s.toUpperCase()]||[]}var h=n.getNextNDay(e.end.time,7-e.lweek).time;var f=[n.getCellWidth(),n.getCellHeight()];l=cu(l,f[r==="horizontal"?0:1]);if(o==="start"){h=n.getNextNDay(e.start.time,-(7+e.fweek)).time;l=-l}for(var c=0;c<7;c++){var v=n.getNextNDay(h,c);var d=n.dataToRect([v.time],false).center;var p=c;p=Math.abs((c+u)%7);var g=new ws({z2:30});N(Ll(g.style,a,{text:s[p]}),this._weekTextPositionControl(d,r,o,l,f));i.add(g)}}});$d({type:"title",layoutMode:{type:"box",ignoreSize:true},defaultOption:{zlevel:0,z:6,show:true,text:"",target:"blank",subtext:"",subtarget:"blank",left:0,top:0,backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,padding:5,itemGap:10,textStyle:{fontSize:18,fontWeight:"bolder",color:"#333"},subtextStyle:{color:"#aaa"}}});Jd({type:"title",render:function(t,e,r){this.group.removeAll();if(!t.get("show")){return}var i=this.group;var a=t.getModel("textStyle");var n=t.getModel("subtextStyle");var o=t.get("textAlign");var s=t.get("textBaseline");var l=new ws({style:Ll({},a,{text:t.get("text"),textFill:a.getTextColor()},{disableBox:true}),z2:10});var u=l.getBoundingRect();var h=t.get("subtext");var f=new ws({style:Ll({},n,{text:h,textFill:n.getTextColor(),y:u.height+t.get("itemGap"),textVerticalAlign:"top"},{disableBox:true}),z2:10});var c=t.get("link");var v=t.get("sublink");var d=t.get("triggerEvent",true);l.silent=!c&&!d;f.silent=!v&&!d;if(c){l.on("click",function(){window.open(c,"_"+t.get("target"))})}if(v){f.on("click",function(){window.open(v,"_"+t.get("subtarget"))})}l.eventData=f.eventData=d?{componentType:"title",componentIndex:t.componentIndex}:null;i.add(l);h&&i.add(f);var p=i.getBoundingRect();var g=t.getBoxLayoutParams();g.width=p.width;g.height=p.height;var m=rh(g,{width:r.getWidth(),height:r.getHeight()},t.get("padding"));if(!o){o=t.get("left")||t.get("right");if(o==="middle"){o="center"}if(o==="right"){m.x+=m.width}else if(o==="center"){m.x+=m.width/2}}if(!s){s=t.get("top")||t.get("bottom");if(s==="center"){s="middle"}if(s==="bottom"){m.y+=m.height}else if(s==="middle"){m.y+=m.height/2}s=s||"top"}i.attr("position",[m.x,m.y]);var y={textAlign:o,textVerticalAlign:s};l.setStyle(y);f.setStyle(y);p=i.getBoundingRect();var x=m.margin;var _=t.getItemStyle(["color","opacity"]);_.fill=t.get("backgroundColor");var w=new Bs({shape:{x:p.x-x[3],y:p.y-x[0],width:p.width+x[1]+x[3],height:p.height+x[0]+x[2],r:t.get("borderRadius")},style:_,silent:true});hl(w);i.add(w)}});hh.registerSubTypeDefaulter("dataZoom",function(){return"slider"});var pO=["x","y","z","radius","angle","single"];var gO=["cartesian2d","polar","singleAxis"];function mO(t){return S(gO,t)>=0}function yO(t,o){t=t.slice();var s=A(t,Zu);o=(o||[]).slice();var l=A(o,Zu);return function(a,n){L(t,function(t,e){var r={name:t,capital:s[e]};for(var i=0;i<o.length;i++){r[o[i]]=t+l[i]}a.call(n,r)})}}var xO=yO(pO,["axisIndex","axis","index","id"]);function _O(a,n,o){return function(t){var e={nodes:[],records:{}};n(function(t){e.records[t.name]={}});if(!t){return e}u(t,e);var r;do{r=false;a(i)}while(r);function i(t){if(!s(t,e)&&l(t,e)){u(t,e);r=true}}return e};function s(t,e){return S(e.nodes,t)>=0}function l(t,r){var i=false;n(function(e){L(o(t,e)||[],function(t){r.records[e.name][t]&&(i=true)})});return i}function u(t,r){r.nodes.push(t);n(function(e){L(o(t,e)||[],function(t){r.records[e.name][t]=true})})}}var wO=L;var bO=du;var SO=function(t,e,r,i){this._dimName=t;this._axisIndex=e;this._valueWindow;this._percentWindow;this._dataExtent;this._minMaxSpan;this.ecModel=i;this._dataZoomModel=r};SO.prototype={constructor:SO,hostedBy:function(t){return this._dataZoomModel===t},getDataValueWindow:function(){return this._valueWindow.slice()},getDataPercentWindow:function(){return this._percentWindow.slice()},getTargetSeriesModels:function(){var i=[];var a=this.ecModel;a.eachSeries(function(t){if(mO(t.get("coordinateSystem"))){var e=this._dimName;var r=a.queryComponents({mainType:e+"Axis",index:t.get(e+"AxisIndex"),id:t.get(e+"AxisId")})[0];if(this._axisIndex===(r&&r.componentIndex)){i.push(t)}}},this);return i},getAxisModel:function(){return this.ecModel.getComponent(this._dimName+"Axis",this._axisIndex)},getOtherAxisModel:function(){var t=this._dimName;var e=this.ecModel;var r=this.getAxisModel();var i=t==="x"||t==="y";var a;var n;if(i){n="gridIndex";a=t==="x"?"y":"x"}else{n="polarIndex";a=t==="angle"?"radius":"angle"}var o;e.eachComponent(a+"Axis",function(t){if((t.get(n)||0)===(r.get(n)||0)){o=t}});return o},getMinMaxSpan:function(){return P(this._minMaxSpan)},calculateDataWindow:function(e){var i=this._dataExtent;var t=this.getAxisModel();var a=t.axis.scale;var n=this._dataZoomModel.getRangePropMode();var o=[0,100];var s=[e.start,e.end];var l=[];wO(["startValue","endValue"],function(t){l.push(e[t]!=null?a.parse(e[t]):null)});wO([0,1],function(t){var e=l[t];var r=s[t];if(n[t]==="percent"){if(r==null){r=o[t]}e=a.parse(fu(r,o,i,true))}else{r=fu(e,i,o,true)}l[t]=e;s[t]=r});return{valueWindow:bO(l),percentWindow:bO(s)}},reset:function(t){if(t!==this._dataZoomModel){return}var e=this.getTargetSeriesModels();this._dataExtent=MO(this,this._dimName,e);var r=this.calculateDataWindow(t.option);this._valueWindow=r.valueWindow;this._percentWindow=r.percentWindow;AO(this);TO(this)},restore:function(t){if(t!==this._dataZoomModel){return}this._valueWindow=this._percentWindow=null;TO(this,true)},filterData:function(t,e){if(t!==this._dataZoomModel){return}var i=this._dimName;var r=this.getTargetSeriesModels();var a=t.get("filterMode");var f=this._valueWindow;if(a==="none"){return}wO(r,function(r){var u=r.getData();var h=u.mapDimension(i,true);if(!h.length){return}if(a==="weakFilter"){u.filterSelf(function(t){var e;var r;var i;for(var a=0;a<h.length;a++){var n=u.get(h[a],t);var o=!isNaN(n);var s=n<f[0];var l=n>f[1];if(o&&!s&&!l){return true}o&&(i=true);s&&(e=true);l&&(r=true)}return i&&e&&r})}else{wO(h,function(t){if(a==="empty"){r.setData(u.map(t,function(t){return!n(t)?NaN:t}))}else{var e={};e[t]=f;u.selectRange(e)}})}wO(h,function(t){u.setApproximateExtent(f,t)})});function n(t){return t>=f[0]&&t<=f[1]}}};function MO(t,e,r){var i=[Infinity,-Infinity];wO(r,function(t){var r=t.getData();if(r){wO(r.mapDimension(e,true),function(t){var e=r.getApproximateExtent(t);e[0]<i[0]&&(i[0]=e[0]);e[1]>i[1]&&(i[1]=e[1])})}});if(i[1]<i[0]){i=[NaN,NaN]}IO(t,i);return i}function IO(t,e){var r=t.getAxisModel();var i=r.getMin(true);var a=r.get("type")==="category";var n=a&&r.getCategories().length;if(i!=null&&i!=="dataMin"&&typeof i!=="function"){e[0]=i}else if(a){e[0]=n>0?0:NaN}var o=r.getMax(true);if(o!=null&&o!=="dataMax"&&typeof o!=="function"){e[1]=o}else if(a){e[1]=n>0?n-1:NaN}if(!r.get("scale",true)){e[0]>0&&(e[0]=0);e[1]<0&&(e[1]=0)}return e}function TO(t,e){var r=t.getAxisModel();var i=t._percentWindow;var a=t._valueWindow;if(!i){return}var n=mu(a,[0,500]);n=Math.min(n,20);var o=e||i[0]===0&&i[1]===100;r.setRange(o?null:+a[0].toFixed(n),o?null:+a[1].toFixed(n))}function AO(i){var a=i._minMaxSpan={};var n=i._dataZoomModel;wO(["min","max"],function(t){a[t+"Span"]=n.get(t+"Span");var e=n.get(t+"ValueSpan");if(e!=null){a[t+"ValueSpan"]=e;e=i.getAxisModel().axis.scale.parse(e);if(e!=null){var r=i._dataExtent;a[t+"Span"]=fu(r[0]+e,r,[0,100],true)}}})}var DO=L;var CO=xO;var LO=$d({type:"dataZoom",dependencies:["xAxis","yAxis","zAxis","radiusAxis","angleAxis","singleAxis","series"],defaultOption:{zlevel:0,z:4,orient:null,xAxisIndex:null,yAxisIndex:null,filterMode:"filter",throttle:null,start:0,end:100,startValue:null,endValue:null,minSpan:null,maxSpan:null,minValueSpan:null,maxValueSpan:null,rangeMode:null},init:function(t,e,r){this._dataIntervalByAxis={};this._dataInfo={};this._axisProxies={};this.textStyleModel;this._autoThrottle=true;this._rangePropMode=["percent","percent"];var i=kO(t);this.mergeDefaultAndTheme(t,r);this.doInit(i)},mergeOption:function(t){var e=kO(t);m(this.option,t,true);this.doInit(e)},doInit:function(t){var r=this.option;if(!y.canvasSupported){r.realtime=false}this._setDefaultThrottle(t);PO(this,t);DO([["start","startValue"],["end","endValue"]],function(t,e){if(this._rangePropMode[e]==="value"){r[t[0]]=null}},this);this.textStyleModel=this.getModel("textStyle");this._resetTarget();this._giveAxisProxies()},_giveAxisProxies:function(){var o=this._axisProxies;this.eachTargetAxis(function(t,e,r,i){var a=this.dependentModels[t.axis][e];var n=a.__dzAxisProxy||(a.__dzAxisProxy=new SO(t.name,e,this,i));o[t.name+"_"+e]=n},this)},_resetTarget:function(){var r=this.option;var t=this._judgeAutoMode();CO(function(t){var e=t.axisIndex;r[e]=Ja(r[e])},this);if(t==="axisIndex"){this._autoSetAxisIndex()}else if(t==="orient"){this._autoSetOrient()}},_judgeAutoMode:function(){var e=this.option;var r=false;CO(function(t){if(e[t.axisIndex]!=null){r=true}},this);var t=e.orient;if(t==null&&r){return"orient"}else if(!r){if(t==null){e.orient="horizontal"}return"axisIndex"}},_autoSetAxisIndex:function(){var n=true;var e=this.get("orient",true);var o=this.option;var t=this.dependentModels;if(n){var r=e==="vertical"?"y":"x";if(t[r+"Axis"].length){o[r+"AxisIndex"]=[0];n=false}else{DO(t.singleAxis,function(t){if(n&&t.get("orient",true)===e){o.singleAxisIndex=[t.componentIndex];n=false}})}}if(n){CO(function(t){if(!n){return}var e=[];var r=this.dependentModels[t.axis];if(r.length&&!e.length){for(var i=0,a=r.length;i<a;i++){if(r[i].get("type")==="category"){e.push(i)}}}o[t.axisIndex]=e;if(e.length){n=false}},this)}if(n){this.ecModel.eachSeries(function(n){if(this._isSeriesHasAllAxesTypeOf(n,"value")){CO(function(t){var e=o[t.axisIndex];var r=n.get(t.axisIndex);var i=n.get(t.axisId);var a=n.ecModel.queryComponents({mainType:t.axis,index:r,id:i})[0];if(D){if(!a){throw new Error(t.axis+' "'+X(r,i,0)+'" not found')}}r=a.componentIndex;if(S(e,r)<0){e.push(r)}})}},this)}},_autoSetOrient:function(){var e;this.eachTargetAxis(function(t){!e&&(e=t.name)},this);this.option.orient=e==="y"?"vertical":"horizontal"},_isSeriesHasAllAxesTypeOf:function(i,a){var n=true;CO(function(t){var e=i.get(t.axisIndex);var r=this.dependentModels[t.axis][e];if(!r||r.get("type")!==a){n=false}},this);return n},_setDefaultThrottle:function(t){if(t.hasOwnProperty("throttle")){this._autoThrottle=false}if(this._autoThrottle){var e=this.ecModel.option;this.option.throttle=e.animation&&e.animationDurationUpdate>0?100:20}},getFirstTargetAxisModel:function(){var r;CO(function(t){if(r==null){var e=this.get(t.axisIndex);if(e.length){r=this.dependentModels[t.axis][e[0]]}}},this);return r},eachTargetAxis:function(r,i){var a=this.ecModel;CO(function(e){DO(this.get(e.axisIndex),function(t){r.call(i,e,t,this,a)},this)},this)},getAxisProxy:function(t,e){return this._axisProxies[t+"_"+e]},getAxisModel:function(t,e){var r=this.getAxisProxy(t,e);return r&&r.getAxisModel()},setRawRange:function(e,t){var r=this.option;DO([["start","startValue"],["end","endValue"]],function(t){if(e[t[0]]!=null||e[t[1]]!=null){r[t[0]]=e[t[0]];r[t[1]]=e[t[1]]}},this);!t&&PO(this,e)},getPercentRange:function(){var t=this.findRepresentativeAxisProxy();if(t){return t.getDataPercentWindow()}},getValueRange:function(t,e){if(t==null&&e==null){var r=this.findRepresentativeAxisProxy();if(r){return r.getDataValueWindow()}}else{return this.getAxisProxy(t,e).getDataValueWindow()}},findRepresentativeAxisProxy:function(t){if(t){return t.__dzAxisProxy}var e=this._axisProxies;for(var r in e){if(e.hasOwnProperty(r)&&e[r].hostedBy(this)){return e[r]}}for(var r in e){if(e.hasOwnProperty(r)&&!e[r].hostedBy(this)){return e[r]}}},getRangePropMode:function(){return this._rangePropMode.slice()}});function kO(e){var r={};DO(["start","end","startValue","endValue","throttle"],function(t){e.hasOwnProperty(t)&&(r[t]=e[t])});return r}function PO(t,a){var n=t._rangePropMode;var o=t.get("rangeMode");DO([["start","startValue"],["end","endValue"]],function(t,e){var r=a[t[0]]!=null;var i=a[t[1]]!=null;if(r&&!i){n[e]="percent"}else if(!r&&i){n[e]="value"}else if(o){n[e]=o[e]}else if(r){n[e]="percent"}})}var NO=fc.extend({type:"dataZoom",render:function(t,e,r,i){this.dataZoomModel=t;this.ecModel=e;this.api=r},getTargetCoordInfo:function(){var t=this.dataZoomModel;var a=this.ecModel;var n={};t.eachTargetAxis(function(t,e){var r=a.getComponent(t.axis,e);if(r){var i=r.getCoordSysModel();i&&o(i,r,n[i.mainType]||(n[i.mainType]=[]),i.componentIndex)}},this);function o(t,e,r,i){var a;for(var n=0;n<r.length;n++){if(r[n].model===t){a=r[n];break}}if(!a){r.push(a={model:t,axisModels:[],coordIndex:i})}a.axisModels.push(e)}return n}});var OO=LO.extend({type:"dataZoom.slider",layoutMode:"box",defaultOption:{show:true,right:"ph",top:"ph",width:"ph",height:"ph",left:null,bottom:null,backgroundColor:"rgba(47,69,84,0)",dataBackground:{lineStyle:{color:"#2f4554",width:.5,opacity:.3},areaStyle:{color:"rgba(47,69,84,0.3)",opacity:.3}},borderColor:"#ddd",fillerColor:"rgba(167,183,204,0.4)",handleIcon:"M8.2,13.6V3.9H6.3v9.7H3.1v14.9h3.3v9.7h1.8v-9.7h3.3V13.6H8.2z M9.7,24.4H4.8v-1.4h4.9V24.4z M9.7,19.1H4.8v-1.4h4.9V19.1z",handleSize:"100%",handleStyle:{color:"#a7b7cc"},labelPrecision:null,labelFormatter:null,showDetail:true,showDataShadow:"auto",realtime:true,zoomLock:false,textStyle:{color:"#333"}}});var EO=Bs;var RO=fu;var zO=du;var BO=R;var VO=L;var GO=7;var FO=1;var WO=30;var HO="horizontal";var ZO="vertical";var UO=5;var XO=["line","bar","candlestick","scatter"];var YO=NO.extend({type:"dataZoom.slider",init:function(t,e){this._displayables={};this._orient;this._range;this._handleEnds;this._size;this._handleWidth;this._handleHeight;this._location;this._dragging;this._dataShadowInfo;this.api=e},render:function(t,e,r,i){YO.superApply(this,"render",arguments);Ac(this,"_dispatchZoomAction",this.dataZoomModel.get("throttle"),"fixRate");this._orient=t.get("orient");if(this.dataZoomModel.get("show")===false){this.group.removeAll();return}if(!i||i.type!=="dataZoom"||i.from!==this.uid){this._buildView()}this._updateView()},remove:function(){YO.superApply(this,"remove",arguments);Dc(this,"_dispatchZoomAction")},dispose:function(){YO.superApply(this,"dispose",arguments);Dc(this,"_dispatchZoomAction")},_buildView:function(){var t=this.group;t.removeAll();this._resetLocation();this._resetInterval();var e=this._displayables.barGroup=new Or;this._renderBackground();this._renderHandle();this._renderDataShadow();t.add(e);this._positionGroup()},_resetLocation:function(){var t=this.dataZoomModel;var e=this.api;var r=this._findCoordRect();var i={width:e.getWidth(),height:e.getHeight()};var a=this._orient===HO?{right:i.width-r.x-r.width,top:i.height-WO-GO,width:r.width,height:WO}:{right:GO,top:r.y,width:WO,height:r.height};var n=oh(t.option);L(["right","top","width","height"],function(t){if(n[t]==="ph"){n[t]=a[t]}});var o=rh(n,i,t.padding);this._location={x:o.x,y:o.y};this._size=[o.width,o.height];this._orient===ZO&&this._size.reverse()},_positionGroup:function(){var t=this.group;var e=this._location;var r=this._orient;var i=this.dataZoomModel.getFirstTargetAxisModel();var a=i&&i.get("inverse");var n=this._displayables.barGroup;var o=(this._dataShadowInfo||{}).otherAxisInverse;n.attr(r===HO&&!a?{scale:o?[1,1]:[1,-1]}:r===HO&&a?{scale:o?[-1,1]:[-1,-1]}:r===ZO&&!a?{scale:o?[1,-1]:[1,1],rotation:Math.PI/2}:{scale:o?[-1,-1]:[-1,1],rotation:Math.PI/2});var s=t.getBoundingRect([n]);t.attr("position",[e.x-s.x,e.y-s.y])},_getViewExtent:function(){return[0,this._size[0]]},_renderBackground:function(){var t=this.dataZoomModel;var e=this._size;var r=this._displayables.barGroup;r.add(new EO({silent:true,shape:{x:0,y:0,width:e[0],height:e[1]},style:{fill:t.get("backgroundColor")},z2:-40}));r.add(new EO({shape:{x:0,y:0,width:e[0],height:e[1]},style:{fill:"transparent"},z2:0,onclick:R(this._onClickPanelClick,this)}))},_renderDataShadow:function(){var t=this._dataShadowInfo=this._prepareDataShadowInfo();if(!t){return}var e=this._size;var r=t.series;var i=r.getRawData();var a=r.getShadowDim?r.getShadowDim():t.otherDim;if(a==null){return}var n=i.getDataExtent(a);var o=(n[1]-n[0])*.3;n=[n[0]-o,n[1]+o];var s=[0,e[1]];var l=[0,e[0]];var u=[[e[0],0],[0,0]];var h=[];var f=l[1]/(i.count()-1);var c=0;var v=Math.round(i.count()/e[0]);var d;i.each([a],function(t,e){if(v>0&&e%v){c+=f;return}var r=t==null||isNaN(t)||t==="";var i=r?0:RO(t,n,s,true);if(r&&!d&&e){u.push([u[u.length-1][0],0]);h.push([h[h.length-1][0],0])}else if(!r&&d){u.push([c,0]);h.push([c,0])}u.push([c,i]);h.push([c,i]);c+=f;d=r});var p=this.dataZoomModel;this._displayables.barGroup.add(new ks({shape:{points:u},style:C({fill:p.get("dataBackgroundColor")},p.getModel("dataBackground.areaStyle").getAreaStyle()),silent:true,z2:-20}));this._displayables.barGroup.add(new Ps({shape:{points:h},style:p.getModel("dataBackground.lineStyle").getLineStyle(),silent:true,z2:-19}))},_prepareDataShadowInfo:function(){var e=this.dataZoomModel;var s=e.get("showDataShadow");if(s===false){return}var l;var u=this.ecModel;e.eachTargetAxis(function(n,o){var t=e.getAxisProxy(n.name,o).getTargetSeriesModels();L(t,function(t){if(l){return}if(s!==true&&S(XO,t.get("type"))<0){return}var e=u.getComponent(n.axis,o).axis;var r=jO(n.name);var i;var a=t.coordinateSystem;if(r!=null&&a.getOtherAxis){i=a.getOtherAxis(e).inverse}r=t.getData().mapDimension(r);l={thisAxis:e,series:t,thisDim:n.name,otherDim:r,otherAxisInverse:i}},this)},this);return l},_renderHandle:function(){var t=this._displayables;var n=t.handles=[];var o=t.handleLabels=[];var s=this._displayables.barGroup;var e=this._size;var l=this.dataZoomModel;s.add(t.filler=new EO({draggable:true,cursor:qO(this._orient),drift:BO(this._onDragMove,this,"all"),onmousemove:function(t){jt(t.event)},ondragstart:BO(this._showDataInfo,this,true),ondragend:BO(this._onDragEnd,this),onmouseover:BO(this._showDataInfo,this,true),onmouseout:BO(this._showDataInfo,this,false),style:{fill:l.get("fillerColor"),textPosition:"inside"}}));s.add(new EO(hl({silent:true,shape:{x:0,y:0,width:e[0],height:e[1]},style:{stroke:l.get("dataBackgroundColor")||l.get("borderColor"),lineWidth:FO,fill:"rgba(0,0,0,0)"}})));VO([0,1],function(t){var e=jl(l.get("handleIcon"),{cursor:qO(this._orient),draggable:true,drift:BO(this._onDragMove,this,t),onmousemove:function(t){jt(t.event)},ondragend:BO(this._onDragEnd,this),onmouseover:BO(this._showDataInfo,this,true),onmouseout:BO(this._showDataInfo,this,false)},{x:-1,y:0,width:2,height:2});var r=e.getBoundingRect();this._handleHeight=cu(l.get("handleSize"),this._size[1]);this._handleWidth=r.width/r.height*this._handleHeight;e.setStyle(l.getModel("handleStyle").getItemStyle());var i=l.get("handleColor");if(i!=null){e.style.fill=i}s.add(n[t]=e);var a=l.textStyleModel;this.group.add(o[t]=new ws({silent:true,invisible:true,style:{x:0,y:0,text:"",textVerticalAlign:"middle",textAlign:"center",textFill:a.getTextColor(),textFont:a.getFont()},z2:10}))},this)},_resetInterval:function(){var t=this._range=this.dataZoomModel.getPercentRange();var e=this._getViewExtent();this._handleEnds=[RO(t[0],[0,100],e,true),RO(t[1],[0,100],e,true)]},_updateInterval:function(t,e){var r=this.dataZoomModel;var i=this._handleEnds;var a=this._getViewExtent();var n=r.findRepresentativeAxisProxy().getMinMaxSpan();var o=[0,100];CI(e,i,a,r.get("zoomLock")?"all":t,n.minSpan!=null?RO(n.minSpan,o,a,true):null,n.maxSpan!=null?RO(n.maxSpan,o,a,true):null);var s=this._range;var l=this._range=zO([RO(i[0],a,o,true),RO(i[1],a,o,true)]);return!s||s[0]!==l[0]||s[1]!==l[1]},_updateView:function(t){var i=this._displayables;var a=this._handleEnds;var e=zO(a.slice());var n=this._size;VO([0,1],function(t){var e=i.handles[t];var r=this._handleHeight;e.attr({scale:[r/2,r/2],position:[a[t],n[1]/2-r/2]})},this);i.filler.setShape({x:e[0],y:0,width:e[1]-e[0],height:n[1]});this._updateDataInfo(t)},_updateDataInfo:function(t){var e=this.dataZoomModel;var n=this._displayables;var o=n.handleLabels;var s=this._orient;var l=["",""];if(e.get("showDetail")){var r=e.findRepresentativeAxisProxy();if(r){var i=r.getAxisModel().axis;var a=this._range;var u=t?r.calculateDataWindow({start:a[0],end:a[1]}).valueWindow:r.getDataValueWindow();l=[this._formatLabel(u[0],i),this._formatLabel(u[1],i)]}}var h=zO(this._handleEnds.slice());f.call(this,0);f.call(this,1);function f(t){var e=Wl(n.handles[t].parent,this.group);var r=Zl(t===0?"right":"left",e);var i=this._handleWidth/2+UO;var a=Hl([h[t]+(t===0?-i:i),this._size[1]/2],e);o[t].setStyle({x:a[0],y:a[1],textVerticalAlign:s===HO?"middle":r,textAlign:s===HO?r:"center",text:l[t]})}},_formatLabel:function(t,e){var r=this.dataZoomModel;var i=r.get("labelFormatter");var a=r.get("labelPrecision");if(a==null||a==="auto"){a=e.getPixelPrecision()}var n=t==null||isNaN(t)?"":e.type==="category"||e.type==="time"?e.scale.getLabel(Math.round(t)):t.toFixed(Math.min(a,20));return V(i)?i(t,n):G(i)?i.replace("{value}",n):n},_showDataInfo:function(t){t=this._dragging||t;var e=this._displayables.handleLabels;e[0].attr("invisible",!t);e[1].attr("invisible",!t)},_onDragMove:function(t,e,r){this._dragging=true;var i=this._displayables.barGroup.getLocalTransform();var a=Hl([e,r],i,true);var n=this._updateInterval(t,a[0]);var o=this.dataZoomModel.get("realtime");this._updateView(!o);n&&o&&this._dispatchZoomAction()},_onDragEnd:function(){this._dragging=false;this._showDataInfo(false);var t=this.dataZoomModel.get("realtime");!t&&this._dispatchZoomAction()},_onClickPanelClick:function(t){var e=this._size;var r=this._displayables.barGroup.transformCoordToLocal(t.offsetX,t.offsetY);if(r[0]<0||r[0]>e[0]||r[1]<0||r[1]>e[1]){return}var i=this._handleEnds;var a=(i[0]+i[1])/2;var n=this._updateInterval("all",r[0]-a);this._updateView();n&&this._dispatchZoomAction()},_dispatchZoomAction:function(){var t=this._range;this.api.dispatchAction({type:"dataZoom",from:this.uid,dataZoomId:this.dataZoomModel.id,start:t[0],end:t[1]})},_findCoordRect:function(){var r;VO(this.getTargetCoordInfo(),function(t){if(!r&&t.length){var e=t[0].model.coordinateSystem;r=e.getRect&&e.getRect()}});if(!r){var t=this.api.getWidth();var e=this.api.getHeight();r={x:t*.2,y:e*.2,width:t*.6,height:e*.6}}return r}});function jO(t){var e={x:"y",y:"x",radius:"angle",angle:"radius"};return e[t]}function qO(t){return t==="vertical"?"ns-resize":"ew-resize"}LO.extend({type:"dataZoom.inside",defaultOption:{disabled:false,zoomLock:false,zoomOnMouseWheel:true,moveOnMouseMove:true,moveOnMouseWheel:false,preventDefaultMouseMove:true}});var KO="\0_ec_dataZoom_roams";function $O(t,i){var e=tE(t);var a=i.dataZoomId;var n=i.coordId;L(e,function(t,e){var r=t.dataZoomInfos;if(r[a]&&S(i.allCoordIds,n)<0){delete r[a];t.count--}});rE(e);var r=e[n];if(!r){r=e[n]={coordId:n,dataZoomInfos:{},count:0};r.controller=eE(t,r);r.dispatchAction=z(iE,t)}!r.dataZoomInfos[a]&&r.count++;r.dataZoomInfos[a]=i;var o=aE(r.dataZoomInfos);r.controller.enable(o.controlType,o.opt);r.controller.setPointerChecker(i.containsPoint);Ac(r,"dispatchAction",i.dataZoomModel.get("throttle",true),"fixRate")}function JO(t,r){var e=tE(t);L(e,function(t){t.controller.dispose();var e=t.dataZoomInfos;if(e[r]){delete e[r];t.count--}});rE(e)}function QO(t){return t.type+"\0_"+t.id}function tE(t){var e=t.getZr();return e[KO]||(e[KO]={})}function eE(t,o){var e=new pw(t.getZr());L(["pan","zoom","scrollMove"],function(n){e.on(n,function(i){var a=[];L(o.dataZoomInfos,function(t){if(!i.isAvailableBehavior(t.dataZoomModel.option)){return}var e=(t.getRange||{})[n];var r=e&&e(o.controller,i);!t.dataZoomModel.get("disabled",true)&&r&&a.push({dataZoomId:t.dataZoomId,start:r[0],end:r[1]})});a.length&&o.dispatchAction(a)})});return e}function rE(r){L(r,function(t,e){if(!t.count){t.controller.dispose();delete r[e]}})}function iE(t,e){t.dispatchAction({type:"dataZoom",batch:e})}function aE(t){var i;var a="type_";var n={type_true:2,type_move:1,type_false:0,type_undefined:-1};var o=true;L(t,function(t){var e=t.dataZoomModel;var r=e.get("disabled",true)?false:e.get("zoomLock",true)?"move":true;if(n[a+r]>n[a+i]){i=r}o&=e.get("preventDefaultMouseMove",true)});return{controlType:i,opt:{zoomOnMouseWheel:true,moveOnMouseMove:true,moveOnMouseWheel:true,preventDefaultMouseMove:!!o}}}var nE=R;var oE=NO.extend({type:"dataZoom.inside",init:function(t,e){this._range},render:function(o,t,s,e){oE.superApply(this,"render",arguments);this._range=o.getPercentRange();L(this.getTargetCoordInfo(),function(t,a){var n=A(t,function(t){return QO(t.model)});L(t,function(e){var i=e.model;var r={};L(["pan","zoom","scrollMove"],function(t){r[t]=nE(sE[t],this,e,a)},this);$O(s,{coordId:QO(i),allCoordIds:n,containsPoint:function(t,e,r){return i.coordinateSystem.containPoint([e,r])},dataZoomId:o.id,dataZoomModel:o,getRange:r})},this)},this)},dispose:function(){JO(this.api,this.dataZoomModel.id);oE.superApply(this,"dispose",arguments);this._range=null}});var sE={zoom:function(t,e,r,i){var a=this._range;var n=a.slice();var o=t.axisModels[0];if(!o){return}var s=uE[e](null,[i.originX,i.originY],o,r,t);var l=(s.signal>0?s.pixelStart+s.pixelLength-s.pixel:s.pixel-s.pixelStart)/s.pixelLength*(n[1]-n[0])+n[0];var u=Math.max(1/i.scale,0);n[0]=(n[0]-l)*u+l;n[1]=(n[1]-l)*u+l;var h=this.dataZoomModel.findRepresentativeAxisProxy().getMinMaxSpan();CI(0,n,[0,100],0,h.minSpan,h.maxSpan);this._range=n;if(a[0]!==n[0]||a[1]!==n[1]){return n}},pan:lE(function(t,e,r,i,a,n){var o=uE[i]([n.oldX,n.oldY],[n.newX,n.newY],e,a,r);return o.signal*(t[1]-t[0])*o.pixel/o.pixelLength}),scrollMove:lE(function(t,e,r,i,a,n){var o=uE[i]([0,0],[n.scrollDelta,n.scrollDelta],e,a,r);return o.signal*(t[1]-t[0])*n.scrollDelta})};function lE(l){return function(t,e,r,i){var a=this._range;var n=a.slice();var o=t.axisModels[0];if(!o){return}var s=l(n,o,t,e,r,i);CI(s,n,[0,100],"all");this._range=n;if(a[0]!==n[0]||a[1]!==n[1]){return n}}}var uE={grid:function(t,e,r,i,a){var n=r.axis;var o={};var s=a.model.coordinateSystem.getRect();t=t||[0,0];if(n.dim==="x"){o.pixel=e[0]-t[0];o.pixelLength=s.width;o.pixelStart=s.x;o.signal=n.inverse?1:-1}else{o.pixel=e[1]-t[1];o.pixelLength=s.height;o.pixelStart=s.y;o.signal=n.inverse?-1:1}return o},polar:function(t,e,r,i,a){var n=r.axis;var o={};var s=a.model.coordinateSystem;var l=s.getRadiusAxis().getExtent();var u=s.getAngleAxis().getExtent();t=t?s.pointToCoord(t):[0,0];e=s.pointToCoord(e);if(r.mainType==="radiusAxis"){o.pixel=e[0]-t[0];o.pixelLength=l[1]-l[0];o.pixelStart=l[0];o.signal=n.inverse?1:-1}else{o.pixel=e[1]-t[1];o.pixelLength=u[1]-u[0];o.pixelStart=u[0];o.signal=n.inverse?-1:1}return o},singleAxis:function(t,e,r,i,a){var n=r.axis;var o=a.model.coordinateSystem.getRect();var s={};t=t||[0,0];if(n.orient==="horizontal"){s.pixel=e[0]-t[0];s.pixelLength=o.width;s.pixelStart=o.x;s.signal=n.inverse?1:-1}else{s.pixel=e[1]-t[1];s.pixelLength=o.height;s.pixelStart=o.y;s.signal=n.inverse?-1:1}return s}};Wd({getTargetSeries:function(t){var a=it();t.eachComponent("dataZoom",function(t){t.eachTargetAxis(function(t,e,r){var i=r.getAxisProxy(t.name,e);L(i.getTargetSeriesModels(),function(t){a.set(t.uid,t)})})});return a},modifyOutputEnd:true,overallReset:function(t,i){t.eachComponent("dataZoom",function(t){t.eachTargetAxis(function(t,e,r){r.getAxisProxy(t.name,e).reset(r,i)});t.eachTargetAxis(function(t,e,r){r.getAxisProxy(t.name,e).filterData(r,i)})});t.eachComponent("dataZoom",function(t){var e=t.findRepresentativeAxisProxy();var r=e.getDataPercentWindow();var i=e.getDataValueWindow();t.setRawRange({start:r[0],end:r[1],startValue:i[0],endValue:i[1]},true)})}});Zd("dataZoom",function(r,t){var i=_O(R(t.eachComponent,t,"dataZoom"),xO,function(t,e){return t.get(e.axisIndex)});var a=[];t.eachComponent({mainType:"dataZoom",query:r},function(t,e){a.push.apply(a,i(t).nodes)});L(a,function(t,e){t.setRawRange({start:r.start,end:r.end,startValue:r.startValue,endValue:r.endValue})})});var hE=L;var fE=function(t){var e=t&&t.visualMap;if(!B(e)){e=e?[e]:[]}hE(e,function(t){if(!t){return}if(cE(t,"splitList")&&!cE(t,"pieces")){t.pieces=t.splitList;delete t.splitList}var e=t.pieces;if(e&&B(e)){hE(e,function(t){if(F(t)){if(cE(t,"start")&&!cE(t,"min")){t.min=t.start}if(cE(t,"end")&&!cE(t,"max")){t.max=t.end}}})}})};function cE(t,e){return t&&t.hasOwnProperty&&t.hasOwnProperty(e)}hh.registerSubTypeDefaulter("visualMap",function(t){return!t.categories&&(!(t.pieces?t.pieces.length>0:t.splitNumber>0)||t.calculable)?"continuous":"piecewise"});var vE=Zv.VISUAL.COMPONENT;jd(vE,{createOnAllSeries:true,reset:function(r,t){var i=[];t.eachComponent("visualMap",function(t){var e=r.pipelineContext;if(!t.isTargetSeries(r)||e&&e.large){return}i.push(dN(t.stateList,t.targetVisuals,R(t.getValueState,t),t.getDataDimension(r.getData())))});return i}});jd(vE,{createOnAllSeries:true,reset:function(a,t){var n=a.getData();var o=[];t.eachComponent("visualMap",function(t){if(t.isTargetSeries(a)){var e=t.getVisualMeta(R(dE,null,a,t))||{stops:[],outerColors:[]};var r=t.getDataDimension(n);var i=n.getDimensionInfo(r);if(i!=null){e.dimension=i.index;o.push(e)}}});a.getData().setVisual("visualMeta",o)}});function dE(t,e,r,i){var a=e.targetVisuals[i];var n=pS.prepareVisualTypes(a);var o={color:t.getData().getVisual("color")};for(var s=0,l=n.length;s<l;s++){var u=n[s];var h=a[u==="opacity"?"__alphaForOpacity":u];h&&h.applyVisual(r,f,c)}return o.color;function f(t){return o[t]}function c(t,e){o[t]=e}}var pE={get:function(t,e,r){var i=P((gE[t]||{})[e]);return r?B(i)?i[i.length-1]:i:i}};var gE={color:{active:["#006edd","#e0ffff"],inactive:["rgba(0,0,0,0)"]},colorHue:{active:[0,360],inactive:[0,0]},colorSaturation:{active:[.3,1],inactive:[0,0]},colorLightness:{active:[.9,.5],inactive:[0,0]},colorAlpha:{active:[.3,1],inactive:[0,0]},opacity:{active:[.3,1],inactive:[0,0]},symbol:{active:["circle","roundRect","diamond"],inactive:["none"]},symbolSize:{active:[10,50],inactive:[0,0]}};var mE=pS.mapVisual;var yE=pS.eachVisual;var xE=B;var _E=L;var wE=du;var bE=fu;var SE=nt;var ME=$d({type:"visualMap",dependencies:["series"],stateList:["inRange","outOfRange"],replacableOptionKeys:["inRange","outOfRange","target","controller","color"],dataBound:[-Infinity,Infinity],layoutMode:{type:"box",ignoreSize:true},defaultOption:{show:true,zlevel:0,z:4,seriesIndex:"all",min:0,max:200,dimension:null,inRange:null,outOfRange:null,left:0,right:null,top:null,bottom:0,itemWidth:null,itemHeight:null,inverse:false,orient:"vertical",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",contentColor:"#5793f3",inactiveColor:"#aaa",borderWidth:0,padding:5,textGap:10,precision:0,color:null,formatter:null,text:null,textStyle:{color:"#333"}},init:function(t,e,r){this._dataExtent;this.targetVisuals={};this.controllerVisuals={};this.textStyleModel;this.itemSize;this.mergeDefaultAndTheme(t,r)},optionUpdated:function(t,e){var r=this.option;if(!y.canvasSupported){r.realtime=false}!e&&cN(r,t,this.replacableOptionKeys);this.textStyleModel=this.getModel("textStyle");this.resetItemSize();this.completeVisualOption()},resetVisual:function(t){var e=this.stateList;t=R(t,this);this.controllerVisuals=fN(this.option.controller,e,t);this.targetVisuals=fN(this.option.target,e,t)},getTargetSeriesIndices:function(){var t=this.option.seriesIndex;var r=[];if(t==null||t==="all"){this.ecModel.eachSeries(function(t,e){r.push(e)})}else{r=Ja(t)}return r},eachTargetSeries:function(e,r){L(this.getTargetSeriesIndices(),function(t){e.call(r,this.ecModel.getSeriesByIndex(t))},this)},isTargetSeries:function(e){var r=false;this.eachTargetSeries(function(t){t===e&&(r=true)});return r},formatValueText:function(t,e,r){var i=this.option;var a=i.precision;var n=this.dataBound;var o=i.formatter;var s;var l;r=r||["<",">"];if(B(t)){t=t.slice();s=true}l=e?t:s?[u(t[0]),u(t[1])]:u(t);if(G(o)){return o.replace("{value}",s?l[0]:l).replace("{value2}",s?l[1]:l)}else if(V(o)){return s?o(t[0],t[1]):o(t)}if(s){if(t[0]===n[0]){return r[0]+" "+l[1]}else if(t[1]===n[1]){return r[1]+" "+l[0]}else{return l[0]+" - "+l[1]}}else{return l}function u(t){return t===n[0]?"min":t===n[1]?"max":(+t).toFixed(Math.min(a,20))}},resetExtent:function(){var t=this.option;var e=wE([t.min,t.max]);this._dataExtent=e},getDataDimension:function(t){var e=this.option.dimension;var r=t.dimensions;if(e==null&&!r.length){return}if(e!=null){return t.getDimension(e)}var i=t.dimensions;for(var a=i.length-1;a>=0;a--){var n=i[a];var o=t.getDimensionInfo(n);if(!o.isCalculationCoord){return n}}},getExtent:function(){return this._dataExtent.slice()},completeVisualOption:function(){var t=this.ecModel;var e=this.option;var r={inRange:e.inRange,outOfRange:e.outOfRange};var i=e.target||(e.target={});var a=e.controller||(e.controller={});m(i,r);m(a,r);var u=this.isCategory();n.call(this,i);n.call(this,a);o.call(this,i,"inRange","outOfRange");s.call(this,a);function n(i){if(xE(e.color)&&!i.inRange){i.inRange={color:e.color.slice().reverse()}}i.inRange=i.inRange||{color:t.get("gradientColor")};_E(this.stateList,function(t){var e=i[t];if(G(e)){var r=pE.get(e,"active",u);if(r){i[t]={};i[t][e]=r}else{delete i[t]}}},this)}function o(t,e,r){var i=t[e];var a=t[r];if(i&&!a){a=t[r]={};_E(i,function(t,e){if(!pS.isValidType(e)){return}var r=pE.get(e,"inactive",u);if(r!=null){a[e]=r;if(e==="color"&&!a.hasOwnProperty("opacity")&&!a.hasOwnProperty("colorAlpha")){a.opacity=[0,0]}}})}}function s(n){var o=(n.inRange||{}).symbol||(n.outOfRange||{}).symbol;var s=(n.inRange||{}).symbolSize||(n.outOfRange||{}).symbolSize;var l=this.get("inactiveColor");_E(this.stateList,function(t){var e=this.itemSize;var r=n[t];if(!r){r=n[t]={color:u?l:[l]}}if(r.symbol==null){r.symbol=o&&P(o)||(u?"roundRect":["roundRect"])}if(r.symbolSize==null){r.symbolSize=s&&P(s)||(u?e[0]:[e[0],e[0]])}r.symbol=mE(r.symbol,function(t){return t==="none"||t==="square"?"roundRect":t});var i=r.symbolSize;if(i!=null){var a=-Infinity;yE(i,function(t){t>a&&(a=t)});r.symbolSize=mE(i,function(t){return bE(t,[0,a],[0,e[0]],true)})}},this)}},resetItemSize:function(){this.itemSize=[parseFloat(this.get("itemWidth")),parseFloat(this.get("itemHeight"))]},isCategory:function(){return!!this.option.categories},setSelected:SE,getValueState:SE,getVisualMeta:SE});var IE=[20,140];var TE=ME.extend({type:"visualMap.continuous",defaultOption:{align:"auto",calculable:false,range:null,realtime:true,itemHeight:null,itemWidth:null,hoverLink:true,hoverLinkDataSize:null,hoverLinkOnHandle:null},optionUpdated:function(t,e){TE.superApply(this,"optionUpdated",arguments);this.resetExtent();this.resetVisual(function(t){t.mappingMethod="linear";t.dataExtent=this.getExtent()});this._resetRange()},resetItemSize:function(){TE.superApply(this,"resetItemSize",arguments);var t=this.itemSize;this._orient==="horizontal"&&t.reverse();(t[0]==null||isNaN(t[0]))&&(t[0]=IE[0]);(t[1]==null||isNaN(t[1]))&&(t[1]=IE[1])},_resetRange:function(){var t=this.getExtent();var e=this.option.range;if(!e||e.auto){t.auto=1;this.option.range=t}else if(B(e)){if(e[0]>e[1]){e.reverse()}e[0]=Math.max(e[0],t[0]);e[1]=Math.min(e[1],t[1])}},completeVisualOption:function(){ME.prototype.completeVisualOption.apply(this,arguments);L(this.stateList,function(t){var e=this.option.controller[t].symbolSize;if(e&&e[0]!==e[1]){e[0]=0}},this)},setSelected:function(t){this.option.range=t.slice();this._resetRange()},getSelected:function(){var t=this.getExtent();var e=du((this.get("range")||[]).slice());e[0]>t[1]&&(e[0]=t[1]);e[1]>t[1]&&(e[1]=t[1]);e[0]<t[0]&&(e[0]=t[0]);e[1]<t[0]&&(e[1]=t[0]);return e},getValueState:function(t){var e=this.option.range;var r=this.getExtent();return(e[0]<=r[0]||e[0]<=t)&&(e[1]>=r[1]||t<=e[1])?"inRange":"outOfRange"},findTargetDataIndices:function(i){var a=[];this.eachTargetSeries(function(t){var r=[];var e=t.getData();e.each(this.getDataDimension(e),function(t,e){i[0]<=t&&t<=i[1]&&r.push(e)},this);a.push({seriesId:t.id,dataIndex:r})},this);return a},getVisualMeta:function(r){var t=AE(this,"outOfRange",this.getExtent());var e=AE(this,"inRange",this.option.range.slice());var i=[];function a(t,e){i.push({value:t,color:r(t,e)})}var n=0;var o=0;var s=e.length;var l=t.length;for(;o<l&&(!e.length||t[o]<=e[0]);o++){if(t[o]<e[n]){a(t[o],"outOfRange")}}for(var u=1;n<s;n++,u=0){u&&i.length&&a(e[n],"outOfRange");a(e[n],"inRange")}for(var u=1;o<l;o++){if(!e.length||e[e.length-1]<t[o]){if(u){i.length&&a(i[i.length-1].value,"outOfRange");u=0}a(t[o],"outOfRange")}}var h=i.length;return{stops:i,outerColors:[h?i[0].color:"transparent",h?i[h-1].color:"transparent"]}}});function AE(t,e,r){if(r[0]===r[1]){return r.slice()}var i=200;var a=(r[1]-r[0])/i;var n=r[0];var o=[];for(var s=0;s<=i&&n<r[1];s++){o.push(n);n+=a}o.push(r[1]);return o}var DE=Jd({type:"visualMap",autoPositionValues:{left:1,right:1,top:1,bottom:1},init:function(t,e){this.ecModel=t;this.api=e;this.visualMapModel},render:function(t,e,r,i){this.visualMapModel=t;if(t.get("show")===false){this.group.removeAll();return}this.doRender.apply(this,arguments)},renderBackground:function(t){var e=this.visualMapModel;var r=Nu(e.get("padding")||0);var i=t.getBoundingRect();t.add(new Bs({z2:-1,silent:true,shape:{x:i.x-r[3],y:i.y-r[0],width:i.width+r[3]+r[1],height:i.height+r[0]+r[2]},style:{fill:e.get("backgroundColor"),stroke:e.get("borderColor"),lineWidth:e.get("borderWidth")}}))},getControllerVisual:function(r,i,a){a=a||{};var t=a.forceState;var e=this.visualMapModel;var n={};if(i==="symbol"){n.symbol=e.get("itemSymbol")}if(i==="color"){var o=e.get("contentColor");n.color=o}function s(t){return n[t]}function l(t,e){n[t]=e}var u=e.controllerVisuals[t||e.getValueState(r)];var h=pS.prepareVisualTypes(u);L(h,function(t){var e=u[t];if(a.convertOpacityToAlpha&&t==="opacity"){t="colorAlpha";e=u.__alphaForOpacity}if(pS.dependsOn(t,i)){e&&e.applyVisual(r,s,l)}});return n[i]},positionGroup:function(t){var e=this.visualMapModel;var r=this.api;ih(t,e.getBoxLayoutParams(),{width:r.getWidth(),height:r.getHeight()})},doRender:nt});function CE(t,e,r){var i=t.option;var a=i.align;if(a!=null&&a!=="auto"){return a}var n={width:e.getWidth(),height:e.getHeight()};var o=i.orient==="horizontal"?1:0;var s=[["left","right","width"],["top","bottom","height"]];var l=s[o];var u=[0,null,10];var h={};for(var f=0;f<3;f++){h[s[1-o][f]]=u[f];h[l[f]]=f===2?r[0]:i[l[f]]}var c=[["x","width",3],["y","height",0]][o];var v=rh(h,n,i.padding);return l[(v.margin[c[2]]||0)+v[c[0]]+v[c[1]]*.5<n[c[1]]*.5?0:1]}function LE(e){L(e||[],function(t){if(e.dataIndex!=null){e.dataIndexInside=e.dataIndex;e.dataIndex=null}});return e}var kE=fu;var PE=L;var NE=Math.min;var OE=Math.max;var EE=12;var RE=6;var zE=DE.extend({type:"visualMap.continuous",init:function(){zE.superApply(this,"init",arguments);this._shapes={};this._dataInterval=[];this._handleEnds=[];this._orient;this._useHandle;this._hoverLinkDataIndices=[];this._dragging;this._hovering},doRender:function(t,e,r,i){if(!i||i.type!=="selectDataRange"||i.from!==this.uid){this._buildView()}},_buildView:function(){this.group.removeAll();var t=this.visualMapModel;var e=this.group;this._orient=t.get("orient");this._useHandle=t.get("calculable");this._resetInterval();this._renderBar(e);var r=t.get("text");this._renderEndsText(e,r,0);this._renderEndsText(e,r,1);this._updateView(true);this.renderBackground(e);this._updateView();this._enableHoverLinkToSeries();this._enableHoverLinkFromSeries();this.positionGroup(e)},_renderEndsText:function(t,e,r){if(!e){return}var i=e[1-r];i=i!=null?i+"":"";var a=this.visualMapModel;var n=a.get("textGap");var o=a.itemSize;var s=this._shapes.barGroup;var l=this._applyTransform([o[0]/2,r===0?-n:o[1]+n],s);var u=this._applyTransform(r===0?"bottom":"top",s);var h=this._orient;var f=this.visualMapModel.textStyleModel;this.group.add(new ws({style:{x:l[0],y:l[1],textVerticalAlign:h==="horizontal"?"middle":u,textAlign:h==="horizontal"?u:"center",text:i,textFont:f.getFont(),textFill:f.getTextColor()}}))},_renderBar:function(t){var e=this.visualMapModel;var r=this._shapes;var i=e.itemSize;var a=this._orient;var n=this._useHandle;var o=CE(e,this.api,i);var s=r.barGroup=this._createBarGroup(o);s.add(r.outOfRange=BE());s.add(r.inRange=BE(null,n?HE(this._orient):null,R(this._dragHandle,this,"all",false),R(this._dragHandle,this,"all",true)));var l=e.textStyleModel.getTextRect("国");var u=OE(l.width,l.height);if(n){r.handleThumbs=[];r.handleLabels=[];r.handleLabelPoints=[];this._createHandle(s,0,i,u,a,o);this._createHandle(s,1,i,u,a,o)}this._createIndicator(s,i,u,a);t.add(s)},_createHandle:function(t,e,r,i,a){var n=R(this._dragHandle,this,e,false);var o=R(this._dragHandle,this,e,true);var s=BE(VE(e,i),HE(this._orient),n,o);s.position[0]=r[0];t.add(s);var l=this.visualMapModel.textStyleModel;var u=new ws({draggable:true,drift:n,onmousemove:function(t){jt(t.event)},ondragend:o,style:{x:0,y:0,text:"",textFont:l.getFont(),textFill:l.getTextColor()}});this.group.add(u);var h=[a==="horizontal"?i/2:i*1.5,a==="horizontal"?e===0?-(i*1.5):i*1.5:e===0?-i/2:i/2];var f=this._shapes;f.handleThumbs[e]=s;f.handleLabelPoints[e]=h;f.handleLabels[e]=u},_createIndicator:function(t,e,r,i){var a=BE([[0,0]],"move");a.position[0]=e[0];a.attr({invisible:true,silent:true});t.add(a);var n=this.visualMapModel.textStyleModel;var o=new ws({silent:true,invisible:true,style:{x:0,y:0,text:"",textFont:n.getFont(),textFill:n.getTextColor()}});this.group.add(o);var s=[i==="horizontal"?r/2:RE+3,0];var l=this._shapes;l.indicator=a;l.indicatorLabel=o;l.indicatorLabelPoint=s},_dragHandle:function(t,e,r,i){if(!this._useHandle){return}this._dragging=!e;if(!e){var a=this._applyTransform([r,i],this._shapes.barGroup,true);this._updateInterval(t,a[1]);this._updateView()}if(e===!this.visualMapModel.get("realtime")){this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:this._dataInterval.slice()})}if(e){!this._hovering&&this._clearHoverLinkToSeries()}else if(WE(this.visualMapModel)){this._doHoverLinkToSeries(this._handleEnds[t],false)}},_resetInterval:function(){var t=this.visualMapModel;var e=this._dataInterval=t.getSelected();var r=t.getExtent();var i=[0,t.itemSize[1]];this._handleEnds=[kE(e[0],r,i,true),kE(e[1],r,i,true)]},_updateInterval:function(t,e){e=e||0;var r=this.visualMapModel;var i=this._handleEnds;var a=[0,r.itemSize[1]];CI(e,i,a,t,0);var n=r.getExtent();this._dataInterval=[kE(i[0],a,n,true),kE(i[1],a,n,true)]},_updateView:function(t){var e=this.visualMapModel;var r=e.getExtent();var i=this._shapes;var a=[0,e.itemSize[1]];var n=t?a:this._handleEnds;var o=this._createBarVisual(this._dataInterval,r,n,"inRange");var s=this._createBarVisual(r,r,a,"outOfRange");i.inRange.setStyle({fill:o.barColor,opacity:o.opacity}).setShape("points",o.barPoints);i.outOfRange.setStyle({fill:s.barColor,opacity:s.opacity}).setShape("points",s.barPoints);this._updateHandle(n,o)},_createBarVisual:function(t,e,r,i){var a={forceState:i,convertOpacityToAlpha:true};var n=this._makeColorGradient(t,a);var o=[this.getControllerVisual(t[0],"symbolSize",a),this.getControllerVisual(t[1],"symbolSize",a)];var s=this._createBarPoints(r,o);return{barColor:new Ys(0,0,0,1,n),barPoints:s,handlesColor:[n[0].color,n[n.length-1].color]}},_makeColorGradient:function(t,e){var r=100;var i=[];var a=(t[1]-t[0])/r;i.push({color:this.getControllerVisual(t[0],"color",e),offset:0});for(var n=1;n<r;n++){var o=t[0]+a*n;if(o>t[1]){break}i.push({color:this.getControllerVisual(o,"color",e),offset:n/r})}i.push({color:this.getControllerVisual(t[1],"color",e),offset:1});return i},_createBarPoints:function(t,e){var r=this.visualMapModel.itemSize;return[[r[0]-e[0],t[0]],[r[0],t[0]],[r[0],t[1]],[r[0]-e[1],t[1]]]},_createBarGroup:function(t){var e=this._orient;var r=this.visualMapModel.get("inverse");return new Or(e==="horizontal"&&!r?{scale:t==="bottom"?[1,1]:[-1,1],rotation:Math.PI/2}:e==="horizontal"&&r?{scale:t==="bottom"?[-1,1]:[1,1],rotation:-Math.PI/2}:e==="vertical"&&!r?{scale:t==="left"?[1,-1]:[-1,-1]}:{scale:t==="left"?[1,1]:[-1,1]})},_updateHandle:function(i,a){if(!this._useHandle){return}var n=this._shapes;var o=this.visualMapModel;var s=n.handleThumbs;var l=n.handleLabels;PE([0,1],function(t){var e=s[t];e.setStyle("fill",a.handlesColor[t]);e.position[1]=i[t];var r=Hl(n.handleLabelPoints[t],Wl(e,this.group));l[t].setStyle({x:r[0],y:r[1],text:o.formatValueText(this._dataInterval[t]),textVerticalAlign:"middle",textAlign:this._applyTransform(this._orient==="horizontal"?t===0?"bottom":"top":"left",n.barGroup)})},this)},_showIndicator:function(t,e,r,i){var a=this.visualMapModel;var n=a.getExtent();var o=a.itemSize;var s=[0,o[1]];var l=kE(t,n,s,true);var u=this._shapes;var h=u.indicator;if(!h){return}h.position[1]=l;h.attr("invisible",false);h.setShape("points",GE(!!r,i,l,o[1]));var f={convertOpacityToAlpha:true};var c=this.getControllerVisual(t,"color",f);h.setStyle("fill",c);var v=Hl(u.indicatorLabelPoint,Wl(h,this.group));var d=u.indicatorLabel;d.attr("invisible",false);var p=this._applyTransform("left",u.barGroup);var g=this._orient;d.setStyle({text:(r?r:"")+a.formatValueText(e),textVerticalAlign:g==="horizontal"?p:"middle",textAlign:g==="horizontal"?"center":p,x:v[0],y:v[1]})},_enableHoverLinkToSeries:function(){var i=this;this._shapes.barGroup.on("mousemove",function(t){i._hovering=true;if(!i._dragging){var e=i.visualMapModel.itemSize;var r=i._applyTransform([t.offsetX,t.offsetY],i._shapes.barGroup,true,true);r[1]=NE(OE(0,r[1]),e[1]);i._doHoverLinkToSeries(r[1],0<=r[0]&&r[0]<=e[0])}}).on("mouseout",function(){i._hovering=false;!i._dragging&&i._clearHoverLinkToSeries()})},_enableHoverLinkFromSeries:function(){var t=this.api.getZr();if(this.visualMapModel.option.hoverLink){t.on("mouseover",this._hoverLinkFromSeriesMouseOver,this);t.on("mouseout",this._hideIndicator,this)}else{this._clearHoverLinkFromSeries()}},_doHoverLinkToSeries:function(t,e){var r=this.visualMapModel;var i=r.itemSize;if(!r.option.hoverLink){return}var a=[0,i[1]];var n=r.getExtent();t=NE(OE(a[0],t),a[1]);var o=FE(r,n,a);var s=[t-o,t+o];var l=kE(t,a,n,true);var u=[kE(s[0],a,n,true),kE(s[1],a,n,true)];s[0]<a[0]&&(u[0]=-Infinity);s[1]>a[1]&&(u[1]=Infinity);if(e){if(u[0]===-Infinity){this._showIndicator(l,u[1],"< ",o)}else if(u[1]===Infinity){this._showIndicator(l,u[0],"> ",o)}else{this._showIndicator(l,l,"≈ ",o)}}var h=this._hoverLinkDataIndices;var f=[];if(e||WE(r)){f=this._hoverLinkDataIndices=r.findTargetDataIndices(u)}var c=ln(h,f);this._dispatchHighDown("downplay",LE(c[0]));this._dispatchHighDown("highlight",LE(c[1]))},_hoverLinkFromSeriesMouseOver:function(t){var e=t.target;var r=this.visualMapModel;if(!e||e.dataIndex==null){return}var i=this.ecModel.getSeriesByIndex(e.seriesIndex);if(!r.isTargetSeries(i)){return}var a=i.getData(e.dataType);var n=a.get(r.getDataDimension(a),e.dataIndex,true);if(!isNaN(n)){this._showIndicator(n,n)}},_hideIndicator:function(){var t=this._shapes;t.indicator&&t.indicator.attr("invisible",true);t.indicatorLabel&&t.indicatorLabel.attr("invisible",true)},_clearHoverLinkToSeries:function(){this._hideIndicator();var t=this._hoverLinkDataIndices;this._dispatchHighDown("downplay",LE(t));t.length=0},_clearHoverLinkFromSeries:function(){this._hideIndicator();var t=this.api.getZr();t.off("mouseover",this._hoverLinkFromSeriesMouseOver);t.off("mouseout",this._hideIndicator)},_applyTransform:function(t,e,r,i){var a=Wl(e,i?null:this.group);return ql[B(t)?"applyTransform":"transformDirection"](t,a,r)},_dispatchHighDown:function(t,e){e&&e.length&&this.api.dispatchAction({type:t,batch:e})},dispose:function(){this._clearHoverLinkFromSeries();this._clearHoverLinkToSeries()},remove:function(){this._clearHoverLinkFromSeries();this._clearHoverLinkToSeries()}});function BE(t,e,r,i){return new ks({shape:{points:t},draggable:!!r,cursor:e,drift:r,onmousemove:function(t){jt(t.event)},ondragend:i})}function VE(t,e){return t===0?[[0,0],[e,0],[e,-e]]:[[0,0],[e,0],[e,e]]}function GE(t,e,r,i){return t?[[0,-NE(e,OE(r,0))],[RE,0],[0,NE(e,OE(i-r,0))]]:[[0,0],[5,-5],[5,5]]}function FE(t,e,r){var i=EE/2;var a=t.get("hoverLinkDataSize");if(a){i=kE(a,e,r,true)/2}return i}function WE(t){var e=t.get("hoverLinkOnHandle");return!!(e==null?t.get("realtime"):e)}function HE(t){return t==="vertical"?"ns-resize":"ew-resize"}var ZE={type:"selectDataRange",event:"dataRangeSelected",update:"update"};Zd(ZE,function(e,t){t.eachComponent({mainType:"visualMap",query:e},function(t){t.setSelected(e.selected)})});Fd(fE);var UE=ME.extend({type:"visualMap.piecewise",defaultOption:{selected:null,minOpen:false,maxOpen:false,align:"auto",itemWidth:20,itemHeight:14,itemSymbol:"roundRect",pieceList:null,categories:null,splitNumber:5,selectedMode:"multiple",itemGap:10,hoverLink:true,showLabel:null},optionUpdated:function(t,e){UE.superApply(this,"optionUpdated",arguments);this._pieceList=[];this.resetExtent();var r=this._mode=this._determineMode();XE[this._mode].call(this);this._resetSelected(t,e);var i=this.option.categories;this.resetVisual(function(t,e){if(r==="categories"){t.mappingMethod="category";t.categories=P(i)}else{t.dataExtent=this.getExtent();t.mappingMethod="piecewise";t.pieceList=A(this._pieceList,function(t){var t=P(t);if(e!=="inRange"){t.visual=null}return t})}})},completeVisualOption:function(){var i=this.option;var r={};var t=pS.listVisualTypes();var a=this.isCategory();L(i.pieces,function(e){L(t,function(t){if(e.hasOwnProperty(t)){r[t]=1}})});L(r,function(t,e){var r=0;L(this.stateList,function(t){r|=n(i,t,e)||n(i.target,t,e)},this);!r&&L(this.stateList,function(t){(i[t]||(i[t]={}))[e]=pE.get(e,t==="inRange"?"active":"inactive",a)})},this);function n(t,e,r){return t&&t[e]&&(F(t[e])?t[e].hasOwnProperty(r):t[e]===r)}ME.prototype.completeVisualOption.apply(this,arguments)},_resetSelected:function(t,e){var r=this.option;var i=this._pieceList;var a=(e?r:t).selected||{};r.selected=a;L(i,function(t,e){var r=this.getSelectedMapKey(t);if(!a.hasOwnProperty(r)){a[r]=true}},this);if(r.selectedMode==="single"){var n=false;L(i,function(t,e){var r=this.getSelectedMapKey(t);if(a[r]){n?a[r]=false:n=true}},this)}},getSelectedMapKey:function(t){return this._mode==="categories"?t.value+"":t.index+""},getPieceList:function(){return this._pieceList},_determineMode:function(){var t=this.option;return t.pieces&&t.pieces.length>0?"pieces":this.option.categories?"categories":"splitNumber"},setSelected:function(t){this.option.selected=P(t)},getValueState:function(t){var e=pS.findPieceIndex(t,this._pieceList);return e!=null?this.option.selected[this.getSelectedMapKey(this._pieceList[e])]?"inRange":"outOfRange":"outOfRange"},findTargetDataIndices:function(a){var r=[];this.eachTargetSeries(function(t){var i=[];var e=t.getData();e.each(this.getDataDimension(e),function(t,e){var r=pS.findPieceIndex(t,this._pieceList);r===a&&i.push(e)},this);r.push({seriesId:t.id,dataIndex:i})},this);return r},getRepresentValue:function(t){var e;if(this.isCategory()){e=t.value}else{if(t.value!=null){e=t.value}else{var r=t.interval||[];e=r[0]===-Infinity&&r[1]===Infinity?0:(r[0]+r[1])/2}}return e},getVisualMeta:function(a){if(this.isCategory()){return}var n=[];var o=[];var s=this;function r(t,e){var r=s.getRepresentValue({interval:t});if(!e){e=s.getValueState(r)}var i=a(r,e);if(t[0]===-Infinity){o[0]=i}else if(t[1]===Infinity){o[1]=i}else{n.push({value:t[0],color:i},{value:t[1],color:i})}}var t=this._pieceList.slice();if(!t.length){t.push({interval:[-Infinity,Infinity]})}else{var e=t[0].interval[0];e!==-Infinity&&t.unshift({interval:[-Infinity,e]});e=t[t.length-1].interval[1];e!==Infinity&&t.push({interval:[e,Infinity]})}var i=-Infinity;L(t,function(t){var e=t.interval;if(e){e[0]>i&&r([i,e[0]],"outOfRange");r(e.slice());i=e[1]}},this);return{stops:n,outerColors:o}}});var XE={splitNumber:function(){var t=this.option;var e=this._pieceList;var r=Math.min(t.precision,20);var i=this.getExtent();var a=t.splitNumber;a=Math.max(parseInt(a,10),1);t.splitNumber=a;var n=(i[1]-i[0])/a;while(+n.toFixed(r)!==n&&r<5){r++}t.precision=r;n=+n.toFixed(r);var o=0;if(t.minOpen){e.push({index:o++,interval:[-Infinity,i[0]],close:[0,0]})}for(var s=i[0],l=o+a;o<l;s+=n){var u=o===a-1?i[1]:s+n;e.push({index:o++,interval:[s,u],close:[1,1]})}if(t.maxOpen){e.push({index:o++,interval:[i[1],Infinity],close:[0,0]})}Du(e);L(e,function(t){t.text=this.formatValueText(t.interval)},this)},categories:function(){var t=this.option;L(t.categories,function(t){this._pieceList.push({text:this.formatValueText(t,true),value:t})},this);YE(t,this._pieceList)},pieces:function(){var t=this.option;var c=this._pieceList;L(t.pieces,function(t,e){if(!F(t)){t={value:t}}var r={text:"",index:e};if(t.label!=null){r.text=t.label}if(t.hasOwnProperty("value")){var i=r.value=t.value;r.interval=[i,i];r.close=[1,1]}else{var a=r.interval=[];var n=r.close=[0,0];var o=[1,0,1];var s=[-Infinity,Infinity];var l=[];for(var u=0;u<2;u++){var h=[["gte","gt","min"],["lte","lt","max"]][u];for(var f=0;f<3&&a[u]==null;f++){a[u]=t[h[f]];n[u]=o[f];l[u]=f===2}a[u]==null&&(a[u]=s[u])}l[0]&&a[1]===Infinity&&(n[0]=0);l[1]&&a[0]===-Infinity&&(n[1]=0);if(D){if(a[0]>a[1]){console.warn("Piece "+e+"is illegal: "+a+" lower bound should not greater then uppper bound.")}}if(a[0]===a[1]&&n[0]&&n[1]){r.value=a[0]}}r.visual=pS.retrieveVisuals(t);c.push(r)},this);YE(t,c);Du(c);L(c,function(t){var e=t.close;var r=[["<","≤"][e[1]],[">","≥"][e[0]]];t.text=t.text||this.formatValueText(t.value!=null?t.value:t.interval,false,r)},this)}};function YE(t,e){var r=t.inverse;if(t.orient==="vertical"?!r:r){e.reverse()}}var jE=DE.extend({type:"visualMap.piecewise",doRender:function(){var n=this.group;n.removeAll();var o=this.visualMapModel;var s=o.get("textGap");var t=o.textStyleModel;var l=t.getFont();var u=t.getTextColor();var h=this._getItemAlign();var f=o.itemSize;var e=this._getViewData();var r=e.endsText;var c=X(o.get("showLabel",true),!r);r&&this._renderEndsText(n,r[0],f,c,h);L(e.viewPieceList,i,this);r&&this._renderEndsText(n,r[1],f,c,h);Ju(o.get("orient"),n,o.get("itemGap"));this.renderBackground(n);this.positionGroup(n);function i(t){var e=t.piece;var r=new Or;r.onclick=R(this._onItemClick,this,e);this._enableHoverLink(r,t.indexInModelPieceList);var i=o.getRepresentValue(e);this._createItemSymbol(r,i,[0,0,f[0],f[1]]);if(c){var a=this.visualMapModel.getValueState(i);r.add(new ws({style:{x:h==="right"?-s:f[0]+s,y:f[1]/2,text:e.text,textVerticalAlign:"middle",textAlign:h,textFont:l,textFill:u,opacity:a==="outOfRange"?.5:1}}))}n.add(r)}},_enableHoverLink:function(t,r){t.on("mouseover",R(e,this,"highlight")).on("mouseout",R(e,this,"downplay"));function e(t){var e=this.visualMapModel;e.option.hoverLink&&this.api.dispatchAction({type:t,batch:LE(e.findTargetDataIndices(r))})}},_getItemAlign:function(){var t=this.visualMapModel;var e=t.option;if(e.orient==="vertical"){return CE(t,this.api,t.itemSize)}else{var r=e.align;if(!r||r==="auto"){r="left"}return r}},_renderEndsText:function(t,e,r,i,a){if(!e){return}var n=new Or;var o=this.visualMapModel.textStyleModel;n.add(new ws({style:{x:i?a==="right"?r[0]:0:r[0]/2,y:r[1]/2,textVerticalAlign:"middle",textAlign:i?a:"center",text:e,textFont:o.getFont(),textFill:o.getTextColor()}}));t.add(n)},_getViewData:function(){var t=this.visualMapModel;var e=A(t.getPieceList(),function(t,e){return{piece:t,indexInModelPieceList:e}});var r=t.get("text");var i=t.get("orient");var a=t.get("inverse");if(i==="horizontal"?a:!a){e.reverse()}else if(r){r=r.slice().reverse()}return{viewPieceList:e,endsText:r}},_createItemSymbol:function(t,e,r){t.add(cm(this.getControllerVisual(e,"symbol"),r[0],r[1],r[2],r[3],this.getControllerVisual(e,"color")))},_onItemClick:function(t){var e=this.visualMapModel;var r=e.option;var i=P(r.selected);var a=e.getSelectedMapKey(t);if(r.selectedMode==="single"){i[a]=true;L(i,function(t,e){i[e]=e===a})}else{i[a]=!i[a]}this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:i})}});Fd(fE);var qE=ku;var KE=Ru;function $E(t){Qa(t,"label",["show"])}var JE=$d({type:"marker",dependencies:["series","grid","polar","geo"],init:function(t,e,r,i){if(D){if(this.type==="marker"){throw new Error("Marker component is abstract component. Use markLine, markPoint, markArea instead.")}}this.mergeDefaultAndTheme(t,r);this.mergeOption(t,r,i.createdBySelf,true)},isAnimationEnabled:function(){if(y.node){return false}var t=this.__hostSeries;return this.getShallow("animation")&&t&&t.isAnimationEnabled()},mergeOption:function(t,i,e,a){var n=this.constructor;var o=this.mainType+"Model";if(!e){i.eachSeries(function(t){var e=t.get(this.mainType,true);var r=t[o];if(!e||!e.data){t[o]=null;return}if(!r){if(a){$E(e)}L(e.data,function(t){if(t instanceof Array){$E(t[0]);$E(t[1])}else{$E(t)}});r=new n(e,this,i);N(r,{mainType:this.mainType,seriesIndex:t.seriesIndex,name:t.name,createdBySelf:true});r.__hostSeries=t}else{r.mergeOption(e,i,true)}t[o]=r},this)}},formatTooltip:function(t){var e=this.getData();var r=this.getRawValue(t);var i=B(r)?A(r,qE).join(", "):qE(r);var a=e.getName(t);var n=KE(this.name);if(r!=null||a){n+="<br />"}if(a){n+=KE(a);if(r!=null){n+=" : "}}if(r!=null){n+=KE(i)}return n},getData:function(){return this._data},setData:function(t){this._data=t}});I(JE,jf);JE.extend({type:"markPoint",defaultOption:{zlevel:0,z:5,symbol:"pin",symbolSize:50,tooltip:{trigger:"item"},label:{show:true,position:"inside"},itemStyle:{borderWidth:2},emphasis:{label:{show:true}}}});var QE=S;function tR(t){return!(isNaN(parseFloat(t.x))&&isNaN(parseFloat(t.y)))}function eR(t){return!isNaN(parseFloat(t.x))&&!isNaN(parseFloat(t.y))}function rR(t,e,r,i,a,n){var o=[];var s=Zp(e,i);var l=s?e.getCalculationInfo("stackResultDimension"):i;var u=hR(e,l,t);var h=e.indicesOfNearest(l,u)[0];o[a]=e.get(r,h);o[n]=e.get(i,h);var f=pu(e.get(i,h));f=Math.min(f,20);if(f>=0){o[n]=+o[n].toFixed(f)}return o}var iR=z;var aR={min:iR(rR,"min"),max:iR(rR,"max"),average:iR(rR,"average")};function nR(t,e){var r=t.getData();var i=t.coordinateSystem;if(e&&!eR(e)&&!B(e.coord)&&i){var a=i.dimensions;var n=oR(e,r,i,t);e=P(e);if(e.type&&aR[e.type]&&n.baseAxis&&n.valueAxis){var o=QE(a,n.baseAxis.dim);var s=QE(a,n.valueAxis.dim);e.coord=aR[e.type](r,n.baseDataDim,n.valueDataDim,o,s);e.value=e.coord[s]}else{var l=[e.xAxis!=null?e.xAxis:e.radiusAxis,e.yAxis!=null?e.yAxis:e.angleAxis];for(var u=0;u<2;u++){if(aR[l[u]]){l[u]=hR(r,r.mapDimension(a[u]),l[u])}}e.coord=l}}return e}function oR(t,e,r,i){var a={};if(t.valueIndex!=null||t.valueDim!=null){a.valueDataDim=t.valueIndex!=null?e.getDimension(t.valueIndex):t.valueDim;a.valueAxis=r.getAxis(sR(i,a.valueDataDim));a.baseAxis=r.getOtherAxis(a.valueAxis);a.baseDataDim=e.mapDimension(a.baseAxis.dim)}else{a.baseAxis=i.getBaseAxis();a.valueAxis=r.getOtherAxis(a.baseAxis);a.baseDataDim=e.mapDimension(a.baseAxis.dim);a.valueDataDim=e.mapDimension(a.valueAxis.dim)}return a}function sR(t,e){var r=t.getData();var i=r.dimensions;e=r.getDimension(e);for(var a=0;a<i.length;a++){var n=r.getDimensionInfo(i[a]);if(n.name===e){return n.coordDim}}}function lR(t,e){return t&&t.containData&&e.coord&&!tR(e)?t.containData(e.coord):true}function uR(t,e,r,i){if(i<2){return t.coord&&t.coord[i]}return t.value}function hR(t,e,r){if(r==="average"){var i=0;var a=0;t.each(e,function(t,e){if(!isNaN(t)){i+=t;a++}});return i/a}else if(r==="median"){return t.getMedian(e)}else{return t.getDataExtent(e,true)[r==="max"?1:0]}}var fR=Jd({type:"marker",init:function(){this.markerGroupMap=it()},render:function(t,r,i){var e=this.markerGroupMap;e.each(function(t){t.__keep=false});var a=this.type+"Model";r.eachSeries(function(t){var e=t[a];e&&this.renderSeries(t,e,r,i)},this);e.each(function(t){!t.__keep&&this.group.remove(t.group)},this)},renderSeries:function(){}});function cR(s,l,u){var h=l.coordinateSystem;s.each(function(t){var e=s.getItemModel(t);var r;var i=cu(e.get("x"),u.getWidth());var a=cu(e.get("y"),u.getHeight());if(!isNaN(i)&&!isNaN(a)){r=[i,a]}else if(l.getMarkerPosition){r=l.getMarkerPosition(s.getValues(s.dimensions,t))}else if(h){var n=s.get(h.dimensions[0],t);var o=s.get(h.dimensions[1],t);r=h.dataToPoint([n,o])}if(!isNaN(i)){r[0]=i}if(!isNaN(a)){r[1]=a}s.setItemLayout(t,r)})}fR.extend({type:"markPoint",updateTransform:function(t,e,r){e.eachSeries(function(t){var e=t.markPointModel;if(e){cR(e.getData(),t,r);this.markerGroupMap.get(t.id).updateLayout(e)}},this)},renderSeries:function(t,i,e,r){var a=t.coordinateSystem;var n=t.id;var o=t.getData();var s=this.markerGroupMap;var l=s.get(n)||s.set(n,new sy);var u=vR(a,t,i);i.setData(u);cR(i.getData(),t,r);u.each(function(t){var e=u.getItemModel(t);var r=e.getShallow("symbolSize");if(typeof r==="function"){r=r(i.getRawValue(t),i.getDataParams(t))}u.setItemVisual(t,{symbolSize:r,color:e.get("itemStyle.color")||o.getVisual("color"),symbol:e.getShallow("symbol")})});l.updateData(u);this.group.add(l.group);u.eachItemGraphicEl(function(t){t.traverse(function(t){t.dataModel=i})});l.__keep=true;l.group.silent=i.get("silent")||t.get("silent")}});function vR(t,r,e){var i;if(t){i=A(t&&t.dimensions,function(t){var e=r.getData().getDimensionInfo(r.getData().mapDimension(t))||{};return C({name:t},e)})}else{i=[{name:"value",type:"float"}]}var a=new Ip(i,e);var n=A(e.get("data"),z(nR,r));if(t){n=O(n,z(lR,t))}a.initData(n,null,t?uR:function(t){return t.value});return a}Fd(function(t){t.markPoint=t.markPoint||{}});JE.extend({type:"markLine",defaultOption:{zlevel:0,z:5,symbol:["circle","arrow"],symbolSize:[8,16],precision:2,tooltip:{trigger:"item"},label:{show:true,position:"end"},lineStyle:{type:"dashed"},emphasis:{label:{show:true},lineStyle:{width:3}},animationEasing:"linear"}});var dR=function(t,e,r,i){var a=t.getData();var n=i.type;if(!B(i)&&(n==="min"||n==="max"||n==="average"||n==="median"||(i.xAxis!=null||i.yAxis!=null))){var o;var s;var l;if(i.yAxis!=null||i.xAxis!=null){s=i.yAxis!=null?"y":"x";o=e.getAxis(s);l=X(i.yAxis,i.xAxis)}else{var u=oR(i,a,e,t);s=u.valueDataDim;o=u.valueAxis;l=hR(a,s,n)}var h=s==="x"?0:1;var f=1-h;var c=P(i);var v={};c.type=null;c.coord=[];v.coord=[];c.coord[f]=-Infinity;v.coord[f]=Infinity;var d=r.get("precision");if(d>=0&&typeof l==="number"){l=+l.toFixed(Math.min(d,20))}c.coord[h]=v.coord[h]=l;i=[c,v,{type:n,valueIndex:i.valueIndex,value:l}]}i=[nR(t,i[0]),nR(t,i[1]),N({},i[2])];i[2].type=i[2].type||"";m(i[2],i[0]);m(i[2],i[1]);return i};function pR(t){return!isNaN(t)&&!isFinite(t)}function gR(t,e,r,i){var a=1-t;var n=i.dimensions[t];return pR(e[a])&&pR(r[a])&&e[t]===r[t]&&i.getAxis(n).containData(e[t])}function mR(t,e){if(t.type==="cartesian2d"){var r=e[0].coord;var i=e[1].coord;if(r&&i&&(gR(1,r,i,t)||gR(0,r,i,t))){return true}}return lR(t,e[0])&&lR(t,e[1])}function yR(t,e,r,i,a){var n=i.coordinateSystem;var o=t.getItemModel(e);var s;var l=cu(o.get("x"),a.getWidth());var u=cu(o.get("y"),a.getHeight());if(!isNaN(l)&&!isNaN(u)){s=[l,u]}else{if(i.getMarkerPosition){s=i.getMarkerPosition(t.getValues(t.dimensions,e))}else{var h=n.dimensions;var f=t.get(h[0],e);var c=t.get(h[1],e);s=n.dataToPoint([f,c])}if(n.type==="cartesian2d"){var v=n.getAxis("x");var d=n.getAxis("y");var h=n.dimensions;if(pR(t.get(h[0],e))){s[0]=v.toGlobalCoord(v.getExtent()[r?0:1])}else if(pR(t.get(h[1],e))){s[1]=d.toGlobalCoord(d.getExtent()[r?0:1])}}if(!isNaN(l)){s[0]=l}if(!isNaN(u)){s[1]=u}}t.setItemLayout(e,s)}fR.extend({type:"markLine",updateTransform:function(t,e,n){e.eachSeries(function(e){var t=e.markLineModel;if(t){var r=t.getData();var i=t.__from;var a=t.__to;i.each(function(t){yR(i,t,true,e,n);yR(a,t,false,e,n)});r.each(function(t){r.setItemLayout(t,[i.getItemLayout(t),a.getItemLayout(t)])});this.markerGroupMap.get(e.id).updateLayout()}},this)},renderSeries:function(a,r,t,n){var e=a.coordinateSystem;var i=a.id;var o=a.getData();var s=this.markerGroupMap;var l=s.get(i)||s.set(i,new AM);this.group.add(l.group);var u=xR(e,a,r);var h=u.from;var f=u.to;var c=u.line;r.__from=h;r.__to=f;r.setData(c);var v=r.get("symbol");var d=r.get("symbolSize");if(!B(v)){v=[v,v]}if(typeof d==="number"){d=[d,d]}u.from.each(function(t){p(h,t,true);p(f,t,false)});c.each(function(t){var e=c.getItemModel(t).get("lineStyle.color");c.setItemVisual(t,{color:e||h.getItemVisual(t,"color")});c.setItemLayout(t,[h.getItemLayout(t),f.getItemLayout(t)]);c.setItemVisual(t,{fromSymbolSize:h.getItemVisual(t,"symbolSize"),fromSymbol:h.getItemVisual(t,"symbol"),toSymbolSize:f.getItemVisual(t,"symbolSize"),toSymbol:f.getItemVisual(t,"symbol")})});l.updateData(c);u.line.eachItemGraphicEl(function(t,e){t.traverse(function(t){t.dataModel=r})});function p(t,e,r){var i=t.getItemModel(e);yR(t,e,r,a,n);t.setItemVisual(e,{symbolSize:i.get("symbolSize")||d[r?0:1],symbol:i.get("symbol",true)||v[r?0:1],color:i.get("itemStyle.color")||o.getVisual("color")})}l.__keep=true;l.group.silent=r.get("silent")||a.get("silent")}});function xR(t,r,e){var i;if(t){i=A(t&&t.dimensions,function(t){var e=r.getData().getDimensionInfo(r.getData().mapDimension(t))||{};return C({name:t},e)})}else{i=[{name:"value",type:"float"}]}var a=new Ip(i,e);var n=new Ip(i,e);var o=new Ip([],e);var s=A(e.get("data"),z(dR,r,t,e));if(t){s=O(s,z(mR,t))}var l=t?uR:function(t){return t.value};a.initData(A(s,function(t){return t[0]}),null,l);n.initData(A(s,function(t){return t[1]}),null,l);o.initData(A(s,function(t){return t[2]}));o.hasItemOption=true;return{from:a,to:n,line:o}}Fd(function(t){t.markLine=t.markLine||{}});JE.extend({type:"markArea",defaultOption:{zlevel:0,z:1,tooltip:{trigger:"item"},animation:false,label:{show:true,position:"top"},itemStyle:{borderWidth:0},emphasis:{label:{show:true,position:"top"}}}});var _R=function(t,e,r,i){var a=nR(t,i[0]);var n=nR(t,i[1]);var o=X;var s=a.coord;var l=n.coord;s[0]=o(s[0],-Infinity);s[1]=o(s[1],-Infinity);l[0]=o(l[0],Infinity);l[1]=o(l[1],Infinity);var u=x([{},a,n]);u.coord=[a.coord,n.coord];u.x0=a.x;u.y0=a.y;u.x1=n.x;u.y1=n.y;return u};function wR(t){return!isNaN(t)&&!isFinite(t)}function bR(t,e,r,i){var a=1-t;return wR(e[a])&&wR(r[a])}function SR(t,e){var r=e.coord[0];var i=e.coord[1];if(t.type==="cartesian2d"){if(r&&i&&(bR(1,r,i,t)||bR(0,r,i,t))){return true}}return lR(t,{coord:r,x:e.x0,y:e.y0})||lR(t,{coord:i,x:e.x1,y:e.y1})}function MR(t,e,r,i,a){var n=i.coordinateSystem;var o=t.getItemModel(e);var s;var l=cu(o.get(r[0]),a.getWidth());var u=cu(o.get(r[1]),a.getHeight());if(!isNaN(l)&&!isNaN(u)){s=[l,u]}else{if(i.getMarkerPosition){s=i.getMarkerPosition(t.getValues(r,e))}else{var h=t.get(r[0],e);var f=t.get(r[1],e);var c=[h,f];n.clampData&&n.clampData(c,c);s=n.dataToPoint(c,true)}if(n.type==="cartesian2d"){var v=n.getAxis("x");var d=n.getAxis("y");var h=t.get(r[0],e);var f=t.get(r[1],e);if(wR(h)){s[0]=v.toGlobalCoord(v.getExtent()[r[0]==="x0"?0:1])}else if(wR(f)){s[1]=d.toGlobalCoord(d.getExtent()[r[1]==="y0"?0:1])}}if(!isNaN(l)){s[0]=l}if(!isNaN(u)){s[1]=u}}return s}var IR=[["x0","y0"],["x1","y0"],["x1","y1"],["x0","y1"]];fR.extend({type:"markArea",updateTransform:function(t,e,n){e.eachSeries(function(i){var t=i.markAreaModel;if(t){var a=t.getData();a.each(function(e){var t=A(IR,function(t){return MR(a,e,t,i,n)});a.setItemLayout(e,t);var r=a.getItemGraphicEl(e);r.setShape("points",t)})}},this)},renderSeries:function(r,o,t,i){var e=r.coordinateSystem;var a=r.id;var n=r.getData();var s=this.markerGroupMap;var l=s.get(a)||s.set(a,{group:new Or});this.group.add(l.group);l.__keep=true;var u=TR(e,r,o);o.setData(u);u.each(function(e){u.setItemLayout(e,A(IR,function(t){return MR(u,e,t,r,i)}));u.setItemVisual(e,{color:n.getVisual("color")})});u.diff(l.__data).add(function(t){var e=new ks({shape:{points:u.getItemLayout(t)}});u.setItemGraphicEl(t,e);l.group.add(e)}).update(function(t,e){var r=l.__data.getItemGraphicEl(e);Gl(r,{shape:{points:u.getItemLayout(t)}},o,t);l.group.add(r);u.setItemGraphicEl(t,r)}).remove(function(t){var e=l.__data.getItemGraphicEl(t);l.group.remove(e)}).execute();u.eachItemGraphicEl(function(t,e){var r=u.getItemModel(e);var i=r.getModel("label");var a=r.getModel("emphasis.label");var n=u.getItemVisual(e,"color");t.useStyle(C(r.getModel("itemStyle").getItemStyle(),{fill:rr(n,.4),stroke:n}));t.hoverStyle=r.getModel("emphasis.itemStyle").getItemStyle();Cl(t.style,t.hoverStyle,i,a,{labelFetcher:o,labelDataIndex:e,defaultText:u.getName(e)||"",isRectText:true,autoColor:n});Al(t,{});t.dataModel=o});l.__data=u;l.group.silent=o.get("silent")||r.get("silent")}});function TR(t,i,e){var r;var a;var n=["x0","y0","x1","y1"];if(t){r=A(t&&t.dimensions,function(t){var e=i.getData();var r=e.getDimensionInfo(e.mapDimension(t))||{};return C({name:t},r)});a=new Ip(A(n,function(t,e){return{name:t,type:r[e%2].type}}),e)}else{r=[{name:"value",type:"float"}];a=new Ip(r,e)}var o=A(e.get("data"),z(_R,i,t,e));if(t){o=O(o,z(SR,t))}var s=t?function(t,e,r,i){return t.coord[Math.floor(i/2)][i%2]}:function(t){return t.value};a.initData(o,null,s);a.hasItemOption=true;return a}Fd(function(t){t.markArea=t.markArea||{}});var AR=function(t){var e=t&&t.timeline;if(!B(e)){e=e?[e]:[]}L(e,function(t){if(!t){return}DR(t)})};function DR(t){var e=t.type;var r={number:"value",time:"time"};if(r[e]){t.axisType=r[e];delete t.type}CR(t);if(LR(t,"controlPosition")){var i=t.controlStyle||(t.controlStyle={});if(!LR(i,"position")){i.position=t.controlPosition}if(i.position==="none"&&!LR(i,"show")){i.show=false;delete i.position}delete t.controlPosition}L(t.data||[],function(t){if(F(t)&&!B(t)){if(!LR(t,"value")&&LR(t,"name")){t.value=t.name}CR(t)}})}function CR(t){var e=t.itemStyle||(t.itemStyle={});var r=e.emphasis||(e.emphasis={});var i=t.label||(t.label||{});var a=i.normal||(i.normal={});var n={normal:1,emphasis:1};L(i,function(t,e){if(!n[e]&&!LR(a,e)){a[e]=t}});if(r.label&&!LR(i,"emphasis")){i.emphasis=r.label;delete r.label}}function LR(t,e){return t.hasOwnProperty(e)}hh.registerSubTypeDefaulter("timeline",function(){return"slider"});Zd({type:"timelineChange",event:"timelineChanged",update:"prepareAndUpdate"},function(t,e){var r=e.getComponent("timeline");if(r&&t.currentIndex!=null){r.setCurrentIndex(t.currentIndex);if(!r.get("loop",true)&&r.isIndexMax()){r.setPlayState(false)}}e.resetOption("timeline");return C({currentIndex:r.option.currentIndex},t)});Zd({type:"timelinePlayChange",event:"timelinePlayChanged",update:"update"},function(t,e){var r=e.getComponent("timeline");if(r&&t.playState!=null){r.setPlayState(t.playState)}});var kR=hh.extend({type:"timeline",layoutMode:"box",defaultOption:{zlevel:0,z:4,show:true,axisType:"time",realtime:true,left:"20%",top:null,right:"20%",bottom:0,width:null,height:40,padding:5,controlPosition:"left",autoPlay:false,rewind:false,loop:true,playInterval:2e3,currentIndex:0,itemStyle:{},label:{color:"#000"},data:[]},init:function(t,e,r){this._data;this._names;this.mergeDefaultAndTheme(t,r);this._initData()},mergeOption:function(t){kR.superApply(this,"mergeOption",arguments);this._initData()},setCurrentIndex:function(t){if(t==null){t=this.option.currentIndex}var e=this._data.count();if(this.option.loop){t=(t%e+e)%e}else{t>=e&&(t=e-1);t<0&&(t=0)}this.option.currentIndex=t},getCurrentIndex:function(){return this.option.currentIndex},isIndexMax:function(){return this.getCurrentIndex()>=this._data.count()-1},setPlayState:function(t){this.option.autoPlay=!!t},getPlayState:function(){return!!this.option.autoPlay},_initData:function(){var t=this.option;var e=t.data||[];var r=t.axisType;var a=this._names=[];if(r==="category"){var n=[];L(e,function(t,e){var r=en(t);var i;if(F(t)){i=P(t);i.value=e}else{i=e}n.push(i);if(!G(r)&&(r==null||isNaN(r))){r=""}a.push(r+"")});e=n}var i={category:"ordinal",time:"time"}[r]||"number";var o=this._data=new Ip([{name:"value",type:i}],this);o.initData(e,a)},getData:function(){return this._data},getCategories:function(){if(this.get("axisType")==="category"){return this._names.slice()}}});var PR=kR.extend({type:"timeline.slider",defaultOption:{backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,orient:"horizontal",inverse:false,tooltip:{trigger:"item"},symbol:"emptyCircle",symbolSize:10,lineStyle:{show:true,width:2,color:"#304654"},label:{position:"auto",show:true,interval:"auto",rotate:0,color:"#304654"},itemStyle:{color:"#304654",borderWidth:1},checkpointStyle:{symbol:"circle",symbolSize:13,color:"#c23531",borderWidth:5,borderColor:"rgba(194,53,49, 0.5)",animation:true,animationDuration:300,animationEasing:"quinticInOut"},controlStyle:{show:true,showPlayBtn:true,showPrevBtn:true,showNextBtn:true,itemSize:22,itemGap:12,position:"left",playIcon:"path://M31.6,53C17.5,53,6,41.5,6,27.4S17.5,1.8,31.6,1.8C45.7,1.8,57.2,13.3,57.2,27.4S45.7,53,31.6,53z M31.6,3.3 C18.4,3.3,7.5,14.1,7.5,27.4c0,13.3,10.8,24.1,24.1,24.1C44.9,51.5,55.7,40.7,55.7,27.4C55.7,14.1,44.9,3.3,31.6,3.3z M24.9,21.3 c0-2.2,1.6-3.1,3.5-2l10.5,6.1c1.899,1.1,1.899,2.9,0,4l-10.5,6.1c-1.9,1.1-3.5,0.2-3.5-2V21.3z",stopIcon:"path://M30.9,53.2C16.8,53.2,5.3,41.7,5.3,27.6S16.8,2,30.9,2C45,2,56.4,13.5,56.4,27.6S45,53.2,30.9,53.2z M30.9,3.5C17.6,3.5,6.8,14.4,6.8,27.6c0,13.3,10.8,24.1,24.101,24.1C44.2,51.7,55,40.9,55,27.6C54.9,14.4,44.1,3.5,30.9,3.5z M36.9,35.8c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H36c0.5,0,0.9,0.4,0.9,1V35.8z M27.8,35.8 c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H27c0.5,0,0.9,0.4,0.9,1L27.8,35.8L27.8,35.8z",nextIcon:"path://M18.6,50.8l22.5-22.5c0.2-0.2,0.3-0.4,0.3-0.7c0-0.3-0.1-0.5-0.3-0.7L18.7,4.4c-0.1-0.1-0.2-0.3-0.2-0.5 c0-0.4,0.3-0.8,0.8-0.8c0.2,0,0.5,0.1,0.6,0.3l23.5,23.5l0,0c0.2,0.2,0.3,0.4,0.3,0.7c0,0.3-0.1,0.5-0.3,0.7l-0.1,0.1L19.7,52 c-0.1,0.1-0.3,0.2-0.5,0.2c-0.4,0-0.8-0.3-0.8-0.8C18.4,51.2,18.5,51,18.6,50.8z",prevIcon:"path://M43,52.8L20.4,30.3c-0.2-0.2-0.3-0.4-0.3-0.7c0-0.3,0.1-0.5,0.3-0.7L42.9,6.4c0.1-0.1,0.2-0.3,0.2-0.5 c0-0.4-0.3-0.8-0.8-0.8c-0.2,0-0.5,0.1-0.6,0.3L18.3,28.8l0,0c-0.2,0.2-0.3,0.4-0.3,0.7c0,0.3,0.1,0.5,0.3,0.7l0.1,0.1L41.9,54 c0.1,0.1,0.3,0.2,0.5,0.2c0.4,0,0.8-0.3,0.8-0.8C43.2,53.2,43.1,53,43,52.8z",color:"#304654",borderColor:"#304654",borderWidth:1},emphasis:{label:{show:true,color:"#c23531"},itemStyle:{color:"#c23531"},controlStyle:{color:"#c23531",borderColor:"#c23531",borderWidth:2}},data:[]}});I(PR,jf);var NR=fc.extend({type:"timeline"});var OR=function(t,e,r,i){Fm.call(this,t,e,r);this.type=i||"value";this.model=null};OR.prototype={constructor:OR,getLabelModel:function(){return this.model.getModel("label")},isHorizontal:function(){return this.model.get("orient")==="horizontal"}};M(OR,Fm);var ER=R;var RR=L;var zR=Math.PI;NR.extend({type:"timeline.slider",init:function(t,e){this.api=e;this._axis;this._viewRect;this._timer;this._currentPointer;this._mainGroup;this._labelGroup},render:function(e,t,r,i){this.model=e;this.api=r;this.ecModel=t;this.group.removeAll();if(e.get("show",true)){var a=this._layout(e,r);var n=this._createGroup("mainGroup");var o=this._createGroup("labelGroup");var s=this._axis=this._createAxis(a,e);e.formatTooltip=function(t){return Ru(s.scale.getLabel(t))};RR(["AxisLine","AxisTick","Control","CurrentPointer"],function(t){this["_render"+t](a,n,s,e)},this);this._renderAxisLabel(a,o,s,e);this._position(a,e)}this._doPlayStop()},remove:function(){this._clearTimer();this.group.removeAll()},dispose:function(){this._clearTimer()},_layout:function(t,e){var r=t.get("label.position");var i=t.get("orient");var a=BR(t,e);if(r==null||r==="auto"){r=i==="horizontal"?a.y+a.height/2<e.getHeight()/2?"-":"+":a.x+a.width/2<e.getWidth()/2?"+":"-"}else if(isNaN(r)){r={horizontal:{top:"-",bottom:"+"},vertical:{left:"-",right:"+"}}[i][r]}var n={horizontal:"center",vertical:r>=0||r==="+"?"left":"right"};var o={horizontal:r>=0||r==="+"?"top":"bottom",vertical:"middle"};var s={horizontal:0,vertical:zR/2};var l=i==="vertical"?a.height:a.width;var u=t.getModel("controlStyle");var h=u.get("show",true);var f=h?u.get("itemSize"):0;var c=h?u.get("itemGap"):0;var v=f+c;var d=t.get("label.rotate")||0;d=d*zR/180;var p;var g;var m;var y;var x=u.get("position",true);var _=h&&u.get("showPlayBtn",true);var w=h&&u.get("showPrevBtn",true);var b=h&&u.get("showNextBtn",true);var S=0;var M=l;if(x==="left"||x==="bottom"){_&&(p=[0,0],S+=v);w&&(g=[S,0],S+=v);b&&(m=[M-f,0],M-=v)}else{_&&(p=[M-f,0],M-=v);w&&(g=[0,0],S+=v);b&&(m=[M-f,0],M-=v)}y=[S,M];if(t.get("inverse")){y.reverse()}return{viewRect:a,mainLength:l,orient:i,rotation:s[i],labelRotation:d,labelPosOpt:r,labelAlign:t.get("label.align")||n[i],labelBaseline:t.get("label.verticalAlign")||t.get("label.baseline")||o[i],playPosition:p,prevBtnPosition:g,nextBtnPosition:m,axisExtent:y,controlSize:f,controlGap:c}},_position:function(t,e){var r=this._mainGroup;var i=this._labelGroup;var a=t.viewRect;if(t.orient==="vertical"){var n=le();var o=a.x;var s=a.y+a.height;ce(n,n,[-o,-s]);ve(n,n,-zR/2);ce(n,n,[o,s]);a=a.clone();a.applyTransform(n)}var l=g(a);var u=g(r.getBoundingRect());var h=g(i.getBoundingRect());var f=r.position;var c=i.position;c[0]=f[0]=l[0][0];var v=t.labelPosOpt;if(isNaN(v)){var d=v==="+"?0:1;m(f,u,l,1,d);m(c,h,l,1,1-d)}else{var d=v>=0?0:1;m(f,u,l,1,d);c[1]=f[1]+v}r.attr("position",f);i.attr("position",c);r.rotation=i.rotation=t.rotation;p(r);p(i);function p(t){var e=t.position;t.origin=[l[0][0]-e[0],l[1][0]-e[1]]}function g(t){return[[t.x,t.x+t.width],[t.y,t.y+t.height]]}function m(t,e,r,i,a){t[i]+=r[i][a]-e[i][a]}},_createAxis:function(t,e){var r=e.getData();var i=e.get("axisType");var a=jg(e,i);a.getTicks=function(){return r.mapArray(["value"],function(t){return t})};var n=r.getDataExtent("value");a.setExtent(n[0],n[1]);a.niceTicks();var o=new OR("value",a,t.axisExtent,i);o.model=e;return o},_createGroup:function(t){var e=this["_"+t]=new Or;this.group.add(e);return e},_renderAxisLine:function(t,e,r,i){var a=r.getExtent();if(!i.get("lineStyle.show")){return}e.add(new Gs({shape:{x1:a[0],y1:0,x2:a[1],y2:0},style:N({lineCap:"round"},i.getModel("lineStyle").getLineStyle()),silent:true,z2:1}))},_renderAxisTick:function(t,s,l,u){var h=u.getData();var e=l.scale.getTicks();RR(e,function(t){var e=l.dataToCoord(t);var r=h.getItemModel(t);var i=r.getModel("itemStyle");var a=r.getModel("emphasis.itemStyle");var n={position:[e,0],onclick:ER(this._changeTimeline,this,t)};var o=GR(r,i,s,n);Al(o,a.getItemStyle());if(r.get("tooltip")){o.dataIndex=t;o.dataModel=u}else{o.dataIndex=o.dataModel=null}},this)},_renderAxisLabel:function(s,l,u,t){var e=u.getLabelModel();if(!e.get("show")){return}var h=t.getData();var r=u.getViewLabels();RR(r,function(t){var e=t.tickValue;var r=h.getItemModel(e);var i=r.getModel("label");var a=r.getModel("emphasis.label");var n=u.dataToCoord(t.tickValue);var o=new ws({position:[n,0],rotation:s.labelRotation-s.rotation,onclick:ER(this._changeTimeline,this,e),silent:false});Ll(o.style,i,{text:t.formattedLabel,textAlign:s.labelAlign,textVerticalAlign:s.labelBaseline});l.add(o);Al(o,Ll({},a))},this)},_renderControl:function(t,o,e,s){var l=t.controlSize;var u=t.rotation;var h=s.getModel("controlStyle").getItemStyle();var f=s.getModel("emphasis.controlStyle").getItemStyle();var c=[0,-l/2,l,l];var r=s.getPlayState();var i=s.get("inverse",true);a(t.nextBtnPosition,"controlStyle.nextIcon",ER(this._changeTimeline,this,i?"-":"+"));a(t.prevBtnPosition,"controlStyle.prevIcon",ER(this._changeTimeline,this,i?"+":"-"));a(t.playPosition,"controlStyle."+(r?"stopIcon":"playIcon"),ER(this._handlePlayClick,this,!r),true);function a(t,e,r,i){if(!t){return}var a={position:t,origin:[l/2,0],rotation:i?-u:0,rectHover:true,style:h,onclick:r};var n=VR(s,e,c,a);o.add(n);Al(n,f)}},_renderCurrentPointer:function(t,e,r,i){var a=i.getData();var n=i.getCurrentIndex();var o=a.getItemModel(n).getModel("checkpointStyle");var s=this;var l={onCreate:function(t){t.draggable=true;t.drift=ER(s._handlePointerDrag,s);t.ondragend=ER(s._handlePointerDragend,s);FR(t,n,r,i,true)},onUpdate:function(t){FR(t,n,r,i)}};this._currentPointer=GR(o,o,this._mainGroup,{},this._currentPointer,l)},_handlePlayClick:function(t){this._clearTimer();this.api.dispatchAction({type:"timelinePlayChange",playState:t,from:this.uid})},_handlePointerDrag:function(t,e,r){this._clearTimer();this._pointerChangeTimeline([r.offsetX,r.offsetY])},_handlePointerDragend:function(t){this._pointerChangeTimeline([t.offsetX,t.offsetY],true)},_pointerChangeTimeline:function(t,e){var r=this._toAxisCoord(t)[0];var i=this._axis;var a=du(i.getExtent().slice());r>a[1]&&(r=a[1]);r<a[0]&&(r=a[0]);this._currentPointer.position[0]=r;this._currentPointer.dirty();var n=this._findNearestTick(r);var o=this.model;if(e||n!==o.getCurrentIndex()&&o.get("realtime")){this._changeTimeline(n)}},_doPlayStop:function(){this._clearTimer();if(this.model.getPlayState()){this._timer=setTimeout(ER(t,this),this.model.get("playInterval"))}function t(){var t=this.model;this._changeTimeline(t.getCurrentIndex()+(t.get("rewind",true)?-1:1))}},_toAxisCoord:function(t){var e=this._mainGroup.getLocalTransform();return Hl(t,e,true)},_findNearestTick:function(a){var t=this.model.getData();var n=Infinity;var o;var s=this._axis;t.each(["value"],function(t,e){var r=s.dataToCoord(t);var i=Math.abs(r-a);if(i<n){n=i;o=e}});return o},_clearTimer:function(){if(this._timer){clearTimeout(this._timer);this._timer=null}},_changeTimeline:function(t){var e=this.model.getCurrentIndex();if(t==="+"){t=e+1}else if(t==="-"){t=e-1}this.api.dispatchAction({type:"timelineChange",currentIndex:t,from:this.uid})}});function BR(t,e){return rh(t.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()},t.get("padding"))}function VR(t,e,r,i){var a=al(t.get(e).replace(/^path:\/\//,""),P(i||{}),new Nr(r[0],r[1],r[2],r[3]),"center");return a}function GR(t,e,r,i,a,n){var o=e.get("color");if(!a){var s=t.get("symbol");a=cm(s,-1,-1,2,2,o);a.setStyle("strokeNoScale",true);r.add(a);n&&n.onCreate(a)}else{a.setColor(o);r.add(a);n&&n.onUpdate(a)}var l=e.getItemStyle(["color","symbol","symbolSize"]);a.setStyle(l);i=m({rectHover:true,z2:100},i,true);var u=t.get("symbolSize");u=u instanceof Array?u.slice():[+u,+u];u[0]/=2;u[1]/=2;i.scale=u;var h=t.get("symbolOffset");if(h){var f=i.position=i.position||[0,0];f[0]+=cu(h[0],u[0]);f[1]+=cu(h[1],u[1])}var c=t.get("symbolRotate");i.rotation=(c||0)*Math.PI/180||0;a.attr(i);a.updateTransform();return a}function FR(t,e,r,i,a){if(t.dragging){return}var n=i.getModel("checkpointStyle");var o=r.dataToCoord(i.getData().get(["value"],e));if(a||!n.get("animation",true)){t.attr({position:[o,0]})}else{t.stopAnimation(true);t.animateTo({position:[o,0]},n.get("animationDuration",true),n.get("animationEasing",true))}}Fd(AR);var WR=$d({type:"toolbox",layoutMode:{type:"box",ignoreSize:true},optionUpdated:function(){WR.superApply(this,"optionUpdated",arguments);L(this.option.feature,function(t,e){var r=aO(e);r&&m(t,r.defaultOption)})},defaultOption:{show:true,z:6,zlevel:0,orient:"horizontal",left:"right",top:"top",backgroundColor:"transparent",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemSize:15,itemGap:8,showTitle:true,iconStyle:{borderColor:"#666",color:"none"},emphasis:{iconStyle:{borderColor:"#3E98C5"}}}});Jd({type:"toolbox",render:function(h,f,c,l){var v=this.group;v.removeAll();if(!h.get("show")){return}var d=+h.get("itemSize");var u=h.get("feature")||{};var p=this._features||(this._features={});var g=[];L(u,function(t,e){g.push(e)});new op(this._featureNames||[],g).add(t).update(t).remove(z(t,null)).execute();this._featureNames=g;function t(t,e){var r=g[t];var i=g[e];var a=u[r];var n=new ru(a,h,h.ecModel);var o;if(r&&!i){if(HR(r)){o={model:n,onclick:n.option.onclick,featureName:r}}else{var s=aO(r);if(!s){return}o=new s(n,f,c)}p[r]=o}else{o=p[i];if(!o){return}o.model=n;o.ecModel=f;o.api=c}if(!r&&i){o.dispose&&o.dispose(f,c);return}if(!n.get("show")||o.unusable){o.remove&&o.remove(f,c);return}m(n,o,r);n.setIconStatus=function(t,e){var r=this.option;var i=this.iconPaths;r.iconStatus=r.iconStatus||{};r.iconStatus[t]=e;i[t]&&i[t].trigger(e)};if(o.render){o.render(n,f,c,l)}}function m(i,a,t){var n=i.getModel("iconStyle");var o=i.getModel("emphasis.iconStyle");var e=a.getIcons?a.getIcons():i.get("icon");var s=i.get("title")||{};if(typeof e==="string"){var r=e;var l=s;e={};s={};e[t]=r;s[t]=l}var u=i.iconPaths={};L(e,function(t,e){var r=jl(t,{},{x:-d/2,y:-d/2,width:d,height:d});r.setStyle(n.getItemStyle());r.hoverStyle=o.getItemStyle();Al(r);if(h.get("showTitle")){r.__title=s[e];r.on("mouseover",function(){var t=o.getItemStyle();r.setStyle({text:s[e],textPosition:t.textPosition||"bottom",textFill:t.fill||t.stroke||"#000",textAlign:t.textAlign||"center"})}).on("mouseout",function(){r.setStyle({textFill:null})})}r.trigger(i.get("iconStatus."+e)||"normal");v.add(r);r.on("click",R(a.onclick,a,f,c,e));u[e]=r})}Jk(v,h,c);v.add(Qk(v.getBoundingRect(),h));v.eachChild(function(t){var e=t.__title;var r=t.hoverStyle;if(r&&e){var i=bi(e,zi(r));var a=t.position[0]+v.position[0];var n=t.position[1]+v.position[1]+d;var o=false;if(n+i.height>c.getHeight()){r.textPosition="top";o=true}var s=o?-5-i.height:d+8;if(a+i.width/2>c.getWidth()){r.textPosition=["100%",s];r.textAlign="right"}else if(a-i.width/2<0){r.textPosition=[0,s];r.textAlign="left"}}})},updateView:function(t,e,r,i){L(this._features,function(t){t.updateView&&t.updateView(t.model,e,r,i)})},remove:function(e,r){L(this._features,function(t){t.remove&&t.remove(e,r)});this.group.removeAll()},dispose:function(e,r){L(this._features,function(t){t.dispose&&t.dispose(e,r)})}});function HR(t){return t.indexOf("my")===0}var ZR=Lc.toolbox.saveAsImage;function UR(t){this.model=t}UR.defaultOption={show:true,icon:"M4.7,22.9L29.3,45.5L54.7,23.4M4.6,43.6L4.6,58L53.8,58L53.8,43.6M29.2,45.1L29.2,0",title:ZR.title,type:"png",name:"",excludeComponents:["toolbox"],pixelRatio:1,lang:ZR.lang.slice()};UR.prototype.unusable=!y.canvasSupported;var XR=UR.prototype;XR.onclick=function(t,e){var r=this.model;var i=r.get("name")||t.get("title.0.text")||"echarts";var a=document.createElement("a");var n=r.get("type",true)||"png";a.download=i+"."+n;a.target="_blank";var o=e.getConnectedDataURL({type:n,backgroundColor:r.get("backgroundColor",true)||t.get("backgroundColor")||"#fff",excludeComponents:r.get("excludeComponents"),pixelRatio:r.get("pixelRatio")});a.href=o;if(typeof MouseEvent==="function"&&!y.browser.ie&&!y.browser.edge){var s=new MouseEvent("click",{view:window,bubbles:true,cancelable:false});a.dispatchEvent(s)}else{if(window.navigator.msSaveOrOpenBlob){var l=atob(o.split(",")[1]);var u=l.length;var h=new Uint8Array(u);while(u--){h[u]=l.charCodeAt(u)}var f=new Blob([h]);window.navigator.msSaveOrOpenBlob(f,i+"."+n)}else{var c=r.get("lang");var v=""+'<body style="margin:0;">'+'<img src="'+o+'" style="max-width:100%;" title="'+(c&&c[0]||"")+'" />'+"</body>";var d=window.open();d.document.write(v)}}};iO("saveAsImage",UR);var YR=Lc.toolbox.magicType;function jR(t){this.model=t}jR.defaultOption={show:true,type:[],icon:{line:"M4.1,28.9h7.1l9.3-22l7.4,38l9.7-19.7l3,12.8h14.9M4.1,58h51.4",bar:"M6.7,22.9h10V48h-10V22.9zM24.9,13h10v35h-10V13zM43.2,2h10v46h-10V2zM3.1,58h53.7",stack:"M8.2,38.4l-8.4,4.1l30.6,15.3L60,42.5l-8.1-4.1l-21.5,11L8.2,38.4z M51.9,30l-8.1,4.2l-13.4,6.9l-13.9-6.9L8.2,30l-8.4,4.2l8.4,4.2l22.2,11l21.5-11l8.1-4.2L51.9,30z M51.9,21.7l-8.1,4.2L35.7,30l-5.3,2.8L24.9,30l-8.4-4.1l-8.3-4.2l-8.4,4.2L8.2,30l8.3,4.2l13.9,6.9l13.4-6.9l8.1-4.2l8.1-4.1L51.9,21.7zM30.4,2.2L-0.2,17.5l8.4,4.1l8.3,4.2l8.4,4.2l5.5,2.7l5.3-2.7l8.1-4.2l8.1-4.2l8.1-4.1L30.4,2.2z",tiled:"M2.3,2.2h22.8V25H2.3V2.2z M35,2.2h22.8V25H35V2.2zM2.3,35h22.8v22.8H2.3V35z M35,35h22.8v22.8H35V35z"},title:P(YR.title),option:{},seriesIndex:{}};var qR=jR.prototype;qR.getIcons=function(){var t=this.model;var e=t.get("icon");var r={};L(t.get("type"),function(t){if(e[t]){r[t]=e[t]}});return r};var KR={line:function(t,e,r,i){if(t==="bar"){return m({id:e,type:"line",data:r.get("data"),stack:r.get("stack"),markPoint:r.get("markPoint"),markLine:r.get("markLine")},i.get("option.line")||{},true)}},bar:function(t,e,r,i){if(t==="line"){return m({id:e,type:"bar",data:r.get("data"),stack:r.get("stack"),markPoint:r.get("markPoint"),markLine:r.get("markLine")},i.get("option.bar")||{},true)}},stack:function(t,e,r,i){if(t==="line"||t==="bar"){return m({id:e,stack:"__ec_magicType_stack__"},i.get("option.stack")||{},true)}},tiled:function(t,e,r,i){if(t==="line"||t==="bar"){return m({id:e,stack:""},i.get("option.tiled")||{},true)}}};var $R=[["line","bar"],["stack","tiled"]];qR.onclick=function(f,t,c){var v=this.model;var e=v.get("seriesIndex."+c);if(!KR[c]){return}var d={series:[]};var r=function(t){var e=t.subType;var r=t.id;var i=KR[c](e,r,t,v);if(i){C(i,t.option);d.series.push(i)}var a=t.coordinateSystem;if(a&&a.type==="cartesian2d"&&(c==="line"||c==="bar")){var n=a.getAxesByScale("ordinal")[0];if(n){var o=n.dim;var s=o+"Axis";var l=f.queryComponents({mainType:s,index:t.get(name+"Index"),id:t.get(name+"Id")})[0];var u=l.componentIndex;d[s]=d[s]||[];for(var h=0;h<=u;h++){d[s][u]=d[s][u]||{}}d[s][u].boundaryGap=c==="bar"}}};L($R,function(t){if(S(t,c)>=0){L(t,function(t){v.setIconStatus(t,"normal")})}});v.setIconStatus(c,"emphasis");f.eachComponent({mainType:"series",query:e==null?null:{seriesIndex:e}},r);t.dispatchAction({type:"changeMagicType",currentType:c,newOption:d})};Zd({type:"changeMagicType",event:"magicTypeChanged",update:"prepareAndUpdate"},function(t,e){e.mergeOption(t.newOption)});iO("magicType",jR);var JR=Lc.toolbox.dataView;var QR=new Array(60).join("-");var tz="\t";function ez(t){var a={};var n=[];var o=[];t.eachRawSeries(function(t){var e=t.coordinateSystem;if(e&&(e.type==="cartesian2d"||e.type==="polar")){var r=e.getBaseAxis();if(r.type==="category"){var i=r.dim+"_"+r.index;if(!a[i]){a[i]={categoryAxis:r,valueAxis:e.getOtherAxis(r),series:[]};o.push({axisDim:r.dim,axisIndex:r.index})}a[i].series.push(t)}else{n.push(t)}}else{n.push(t)}});return{seriesGroupByCategoryAxis:a,other:n,meta:o}}function rz(t){var f=[];L(t,function(t,e){var r=t.categoryAxis;var i=t.valueAxis;var a=i.dim;var n=[" "].concat(A(t.series,function(t){return t.name}));var o=[r.model.getCategories()];L(t.series,function(t){o.push(t.getRawData().mapArray(a,function(t){return t}))});var s=[n.join(tz)];for(var l=0;l<o[0].length;l++){var u=[];for(var h=0;h<o.length;h++){u.push(o[h][l])}s.push(u.join(tz))}f.push(s.join("\n"))});return f.join("\n\n"+QR+"\n\n")}function iz(t){return A(t,function(t){var a=t.getRawData();var n=[t.name];var o=[];a.each(a.dimensions,function(){var t=arguments.length;var e=arguments[t-1];var r=a.getName(e);for(var i=0;i<t-1;i++){o[i]=arguments[i]}n.push((r?r+tz:"")+o.join(tz))});return n.join("\n")}).join("\n\n"+QR+"\n\n")}function az(t){var e=ez(t);return{value:O([rz(e.seriesGroupByCategoryAxis),iz(e.other)],function(t){return t.replace(/[\n\t\s]/g,"")}).join("\n\n"+QR+"\n\n"),meta:e.meta}}function nz(t){return t.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function oz(t){var e=t.slice(0,t.indexOf("\n"));if(e.indexOf(tz)>=0){return true}}var sz=new RegExp("["+tz+"]+","g");function lz(t){var e=t.split(/\n+/g);var r=nz(e.shift()).split(sz);var i=[];var a=A(r,function(t){return{name:t,data:[]}});for(var n=0;n<e.length;n++){var o=nz(e[n]).split(sz);i.push(o.shift());for(var s=0;s<o.length;s++){a[s]&&(a[s].data[n]=o[s])}}return{series:a,categories:i}}function uz(t){var e=t.split(/\n+/g);var r=nz(e.shift());var i=[];for(var a=0;a<e.length;a++){var n=nz(e[a]).split(sz);var o="";var s;var l=false;if(isNaN(n[0])){l=true;o=n[0];n=n.slice(1);i[a]={name:o,value:[]};s=i[a].value}else{s=i[a]=[]}for(var u=0;u<n.length;u++){s.push(+n[u])}if(s.length===1){l?i[a].value=s[0]:i[a]=s[0]}}return{name:r,data:i}}function hz(t,n){var e=t.split(new RegExp("\n*"+QR+"\n*","g"));var o={series:[]};L(e,function(t,e){if(oz(t)){var r=lz(t);var i=n[e];var a=i.axisDim+"Axis";if(i){o[a]=o[a]||[];o[a][i.axisIndex]={data:r.categories};o.series=o.series.concat(r.series)}}else{var r=uz(t);o.series.push(r)}});return o}function fz(t){this._dom=null;this.model=t}fz.defaultOption={show:true,readOnly:false,optionToContent:null,contentToOption:null,icon:"M17.5,17.3H33 M17.5,17.3H33 M45.4,29.5h-28 M11.5,2v56H51V14.8L38.4,2H11.5z M38.4,2.2v12.7H51 M45.4,41.7h-28",title:P(JR.title),lang:P(JR.lang),backgroundColor:"#fff",textColor:"#000",textareaColor:"#fff",textareaBorderColor:"#333",buttonColor:"#c23531",buttonTextColor:"#fff"};fz.prototype.onclick=function(t,e){var r=e.getDom();var i=this.model;if(this._dom){r.removeChild(this._dom)}var a=document.createElement("div");a.style.cssText="position:absolute;left:5px;top:5px;bottom:5px;right:5px;";a.style.backgroundColor=i.get("backgroundColor")||"#fff";var n=document.createElement("h4");var o=i.get("lang")||[];n.innerHTML=o[0]||i.get("title");n.style.cssText="margin: 10px 20px;";n.style.color=i.get("textColor");var s=document.createElement("div");var l=document.createElement("textarea");s.style.cssText="display:block;width:100%;overflow:auto;";var u=i.get("optionToContent");var h=i.get("contentToOption");var f=az(t);if(typeof u==="function"){var c=u(e.getOption());if(typeof c==="string"){s.innerHTML=c}else if(Z(c)){s.appendChild(c)}}else{s.appendChild(l);l.readOnly=i.get("readOnly");l.style.cssText="width:100%;height:100%;font-family:monospace;font-size:14px;line-height:1.6rem;";l.style.color=i.get("textColor");l.style.borderColor=i.get("textareaBorderColor");l.style.backgroundColor=i.get("textareaColor");l.value=f.value}var v=f.meta;var d=document.createElement("div");d.style.cssText="position:absolute;bottom:0;left:0;right:0;";var p="float:right;margin-right:20px;border:none;"+"cursor:pointer;padding:2px 5px;font-size:12px;border-radius:3px";var g=document.createElement("div");var m=document.createElement("div");p+=";background-color:"+i.get("buttonColor");p+=";color:"+i.get("buttonTextColor");var y=this;function x(){r.removeChild(a);y._dom=null}Xt(g,"click",x);Xt(m,"click",function(){var t;try{if(typeof h==="function"){t=h(s,e.getOption())}else{t=hz(l.value,v)}}catch(t){x();throw new Error("Data view format error "+t)}if(t){e.dispatchAction({type:"changeDataView",newOption:t})}x()});g.innerHTML=o[1];m.innerHTML=o[2];m.style.cssText=p;g.style.cssText=p;!i.get("readOnly")&&d.appendChild(m);d.appendChild(g);Xt(l,"keydown",function(t){if((t.keyCode||t.which)===9){var e=this.value;var r=this.selectionStart;var i=this.selectionEnd;this.value=e.substring(0,r)+tz+e.substring(i);this.selectionStart=this.selectionEnd=r+1;jt(t)}});a.appendChild(n);a.appendChild(s);a.appendChild(d);s.style.height=r.clientHeight-80+"px";r.appendChild(a);this._dom=a};fz.prototype.remove=function(t,e){this._dom&&e.getDom().removeChild(this._dom)};fz.prototype.dispose=function(t,e){this.remove(t,e)};function cz(t,i){return A(t,function(t,e){var r=i&&i[e];if(F(r)&&!B(r)){if(F(t)&&!B(t)){t=t.value}return C({value:t},r)}else{return t}})}iO("dataView",fz);Zd({type:"changeDataView",event:"dataViewChanged",update:"prepareAndUpdate"},function(t,i){var a=[];L(t.newOption.series,function(t){var e=i.getSeriesByName(t.name)[0];if(!e){a.push(N({type:"scatter"},t))}else{var r=e.get("data");a.push({name:t.name,data:cz(t.data,r)})}});i.mergeOption(C({series:a},t.newOption))});var vz=L;var dz="\0_ec_hist_store";function pz(o,t){var s=xz(o);vz(t,function(t,e){var r=s.length-1;for(;r>=0;r--){var i=s[r];if(i[e]){break}}if(r<0){var a=o.queryComponents({mainType:"dataZoom",subType:"select",id:e})[0];if(a){var n=a.getPercentRange();s[0][e]={dataZoomId:e,start:n[0],end:n[1]}}}});s.push(t)}function gz(t){var i=xz(t);var e=i[i.length-1];i.length>1&&i.pop();var a={};vz(e,function(t,e){for(var r=i.length-1;r>=0;r--){var t=i[r][e];if(t){a[e]=t;break}}});return a}function mz(t){t[dz]=null}function yz(t){return xz(t).length}function xz(t){var e=t[dz];if(!e){e=t[dz]=[{}]}return e}LO.extend({type:"dataZoom.select"});NO.extend({type:"dataZoom.select"});var _z=Lc.toolbox.dataZoom;var wz=L;var bz="\0_ec_\0toolbox-dataZoom_";function Sz(t,e,r){(this._brushController=new lT(r.getZr())).on("brush",R(this._onBrush,this)).mount();this._isZoomActive}Sz.defaultOption={show:true,icon:{zoom:"M0,13.5h26.9 M13.5,26.9V0 M32.1,13.5H58V58H13.5 V32.1",back:"M22,1.4L9.9,13.5l12.3,12.3 M10.3,13.5H54.9v44.6 H10.3v-26"},title:P(_z.title)};var Mz=Sz.prototype;Mz.render=function(t,e,r,i){this.model=t;this.ecModel=e;this.api=r;Dz(t,e,this,i,r);Az(t,e)};Mz.onclick=function(t,e,r){Iz[r].call(this)};Mz.remove=function(t,e){this._brushController.unmount()};Mz.dispose=function(t,e){this._brushController.dispose()};var Iz={zoom:function(){var t=!this._isZoomActive;this.api.dispatchAction({type:"takeGlobalCursor",key:"dataZoomSelect",dataZoomSelectActive:t})},back:function(){this._dispatchZoomAction(gz(this.ecModel))}};Mz._onBrush=function(t,e){if(!e.isEnd||!t.length){return}var s={};var l=this.ecModel;this._brushController.updateCovers([]);var r=new AN(Tz(this.model.option),l,{include:["grid"]});r.matchOutputRanges(t,l,function(t,e,r){if(r.type!=="cartesian2d"){return}var i=t.brushType;if(i==="rect"){a("x",r,e[0]);a("y",r,e[1])}else{a({lineX:"x",lineY:"y"}[i],r,e)}});pz(l,s);this._dispatchZoomAction(s);function a(t,e,r){var i=e.getAxis(t);var a=i.model;var n=u(t,a,l);var o=n.findRepresentativeAxisProxy(a).getMinMaxSpan();if(o.minValueSpan!=null||o.maxValueSpan!=null){r=CI(0,r.slice(),i.scale.getExtent(),0,o.minValueSpan,o.maxValueSpan)}n&&(s[n.id]={dataZoomId:n.id,startValue:r[0],endValue:r[1]})}function u(r,i,t){var a;t.eachComponent({mainType:"dataZoom",subType:"select"},function(t){var e=t.getAxisModel(r,i.componentIndex);e&&(a=t)});return a}};Mz._dispatchZoomAction=function(t){var r=[];wz(t,function(t,e){r.push(P(t))});r.length&&this.api.dispatchAction({type:"dataZoom",from:this.uid,batch:r})};function Tz(e){var r={};L(["xAxisIndex","yAxisIndex"],function(t){r[t]=e[t];r[t]==null&&(r[t]="all");(r[t]===false||r[t]==="none")&&(r[t]=[])});return r}function Az(t,e){t.setIconStatus("back",yz(e)>1?"emphasis":"normal")}function Dz(t,e,r,i,a){var n=r._isZoomActive;if(i&&i.type==="takeGlobalCursor"){n=i.key==="dataZoomSelect"?i.dataZoomSelectActive:false}r._isZoomActive=n;t.setIconStatus("zoom",n?"emphasis":"normal");var o=new AN(Tz(t.option),e,{include:["grid"]});r._brushController.setPanels(o.makePanelOpts(a,function(t){return t.xAxisDeclared&&!t.yAxisDeclared?"lineX":!t.xAxisDeclared&&t.yAxisDeclared?"lineY":"rect"})).enableBrush(n?{brushType:"auto",brushStyle:{lineWidth:0,fill:"rgba(0,0,0,0.2)"}}:false)}iO("dataZoom",Sz);Fd(function(i){if(!i){return}var o=i.dataZoom||(i.dataZoom=[]);if(!B(o)){i.dataZoom=o=[o]}var t=i.toolbox;if(t){if(B(t)){t=t[0]}if(t&&t.feature){var e=t.feature.dataZoom;r("xAxis",e);r("yAxis",e)}}function r(i,t){if(!t){return}var a=i+"Index";var n=t[a];if(n!=null&&n!=="all"&&!B(n)){n=n===false||n==="none"?[]:[n]}s(i,function(t,e){if(n!=null&&n!=="all"&&S(n,e)===-1){return}var r={type:"select",$fromToolbox:true,id:bz+i+e};r[a]=e;o.push(r)})}function s(t,e){var r=i[t];if(!B(r)){r=r?[r]:[]}wz(r,e)}});var Cz=Lc.toolbox.restore;function Lz(t){this.model=t}Lz.defaultOption={show:true,icon:"M3.8,33.4 M47,18.9h9.8V8.7 M56.3,20.1 C52.1,9,40.5,0.6,26.8,2.1C12.6,3.7,1.6,16.2,2.1,30.6 M13,41.1H3.1v10.2 M3.7,39.9c4.2,11.1,15.8,19.5,29.5,18 c14.2-1.6,25.2-14.1,24.7-28.5",title:Cz.title};var kz=Lz.prototype;kz.onclick=function(t,e,r){mz(t);e.dispatchAction({type:"restore",from:this.uid})};iO("restore",Lz);Zd({type:"restore",event:"restore",update:"prepareAndUpdate"},function(t,e){e.resetOption("recreate")});var Pz="urn:schemas-microsoft-com:vml";var Nz=typeof window==="undefined"?null:window;var Oz=false;var Ez=Nz&&Nz.document;function Rz(t){return zz(t)}var zz;if(Ez&&!y.canvasSupported){try{!Ez.namespaces.zrvml&&Ez.namespaces.add("zrvml",Pz);zz=function(t){return Ez.createElement("<zrvml:"+t+' class="zrvml">')}}catch(t){zz=function(t){return Ez.createElement("<"+t+' xmlns="'+Pz+'" class="zrvml">')}}}function Bz(){if(Oz||!Ez){return}Oz=true;var t=Ez.styleSheets;if(t.length<31){Ez.createStyleSheet().addRule(".zrvml","behavior:url(#default#VML)")}else{t[0].addRule(".zrvml","behavior:url(#default#VML)")}}var Vz=Co.CMD;var Gz=Math.round;var Fz=Math.sqrt;var Wz=Math.abs;var Hz=Math.cos;var Zz=Math.sin;var Uz=Math.max;if(!y.canvasSupported){var Xz=",";var Yz="progid:DXImageTransform.Microsoft";var jz=21600;var qz=jz/2;var Kz=1e5;var $z=1e3;var Jz=function(t){t.style.cssText="position:absolute;left:0;top:0;width:1px;height:1px;";t.coordsize=jz+","+jz;t.coordorigin="0,0"};var Qz=function(t){return String(t).replace(/&/g,"&amp;").replace(/"/g,"&quot;")};var tB=function(t,e,r){return"rgb("+[t,e,r].join(",")+")"};var eB=function(t,e){if(e&&t&&e.parentNode!==t){t.appendChild(e)}};var rB=function(t,e){if(e&&t&&e.parentNode===t){t.removeChild(e)}};var iB=function(t,e,r){return(parseFloat(t)||0)*Kz+(parseFloat(e)||0)*$z+r};var aB=function(t,e){if(typeof t==="string"){if(t.lastIndexOf("%")>=0){return parseFloat(t)/100*e}return parseFloat(t)}return t};var nB=function(t,e,r){var i=Xe(e);r=+r;if(isNaN(r)){r=1}if(i){t.color=tB(i[0],i[1],i[2]);t.opacity=r*i[3]}};var oB=function(t){var e=Xe(t);return[tB(e[0],e[1],e[2]),e[3]]};var sB=function(t,e,r){var i=e.fill;if(i!=null){if(i instanceof Xs){var a;var n=0;var o=[0,0];var s=0;var l=1;var u=r.getBoundingRect();var h=u.width;var f=u.height;if(i.type==="linear"){a="gradient";var c=r.transform;var v=[i.x*h,i.y*f];var d=[i.x2*h,i.y2*f];if(c){Lt(v,v,c);Lt(d,d,c)}var p=d[0]-v[0];var g=d[1]-v[1];n=Math.atan2(p,g)*180/Math.PI;if(n<0){n+=360}if(n<1e-6){n=0}}else{a="gradientradial";var v=[i.x*h,i.y*f];var c=r.transform;var m=r.scale;var y=h;var x=f;o=[(v[0]-u.x)/y,(v[1]-u.y)/x];if(c){Lt(v,v,c)}y/=m[0]*jz;x/=m[1]*jz;var _=Uz(y,x);s=2*0/_;l=2*i.r/_-s}var w=i.colorStops.slice();w.sort(function(t,e){return t.offset-e.offset});var b=w.length;var S=[];var M=[];for(var I=0;I<b;I++){var T=w[I];var A=oB(T.color);M.push(T.offset*l+s+" "+A[0]);if(I===0||I===b-1){S.push(A)}}if(b>=2){var D=S[0][0];var C=S[1][0];var L=S[0][1]*e.opacity;var k=S[1][1]*e.opacity;t.type=a;t.method="none";t.focus="100%";t.angle=n;t.color=D;t.color2=C;t.colors=M.join(",");t.opacity=k;t.opacity2=L}if(a==="radial"){t.focusposition=o.join(",")}}else{nB(t,i,e.opacity)}}};var lB=function(t,e){if(e.lineDash!=null){t.dashstyle=e.lineDash.join(" ")}if(e.stroke!=null&&!(e.stroke instanceof Xs)){nB(t,e.stroke,e.opacity)}};var uB=function(t,e,r,i){var a=e==="fill";var n=t.getElementsByTagName(e)[0];if(r[e]!=null&&r[e]!=="none"&&(a||!a&&r.lineWidth)){t[a?"filled":"stroked"]="true";if(r[e]instanceof Xs){rB(t,n)}if(!n){n=Rz(e)}a?sB(n,r,i):lB(n,r);eB(t,n)}else{t[a?"filled":"stroked"]="false";rB(t,n)}};var hB=[[],[],[]];var fB=function(t,e){var r=Vz.M;var i=Vz.C;var a=Vz.L;var n=Vz.A;var o=Vz.Q;var s=[];var l;var u;var h;var f;var c;var v;var d=t.data;var p=t.len();for(f=0;f<p;){h=d[f++];u="";l=0;switch(h){case r:u=" m ";l=1;c=d[f++];v=d[f++];hB[0][0]=c;hB[0][1]=v;break;case a:u=" l ";l=1;c=d[f++];v=d[f++];hB[0][0]=c;hB[0][1]=v;break;case o:case i:u=" c ";l=3;var g=d[f++];var m=d[f++];var y=d[f++];var x=d[f++];var _;var w;if(h===o){_=y;w=x;y=(y+2*g)/3;x=(x+2*m)/3;g=(c+2*g)/3;m=(v+2*m)/3}else{_=d[f++];w=d[f++]}hB[0][0]=g;hB[0][1]=m;hB[1][0]=y;hB[1][1]=x;hB[2][0]=_;hB[2][1]=w;c=_;v=w;break;case n:var b=0;var S=0;var M=1;var I=1;var T=0;if(e){b=e[4];S=e[5];M=Fz(e[0]*e[0]+e[1]*e[1]);I=Fz(e[2]*e[2]+e[3]*e[3]);T=Math.atan2(-e[1]/I,e[0]/M)}var A=d[f++];var D=d[f++];var C=d[f++];var L=d[f++];var k=d[f++]+T;var P=d[f++]+k+T;f++;var N=d[f++];var O=A+Hz(k)*C;var E=D+Zz(k)*L;var g=A+Hz(P)*C;var m=D+Zz(P)*L;var R=N?" wa ":" at ";if(Math.abs(O-g)<1e-4){if(Math.abs(P-k)>.01){if(N){O+=270/jz}}else{if(Math.abs(E-D)<1e-4){if(N&&O<A||!N&&O>A){m-=270/jz}else{m+=270/jz}}else if(N&&E<D||!N&&E>D){g+=270/jz}else{g-=270/jz}}}s.push(R,Gz(((A-C)*M+b)*jz-qz),Xz,Gz(((D-L)*I+S)*jz-qz),Xz,Gz(((A+C)*M+b)*jz-qz),Xz,Gz(((D+L)*I+S)*jz-qz),Xz,Gz((O*M+b)*jz-qz),Xz,Gz((E*I+S)*jz-qz),Xz,Gz((g*M+b)*jz-qz),Xz,Gz((m*I+S)*jz-qz));c=g;v=m;break;case Vz.R:var z=hB[0];var B=hB[1];z[0]=d[f++];z[1]=d[f++];B[0]=z[0]+d[f++];B[1]=z[1]+d[f++];if(e){Lt(z,z,e);Lt(B,B,e)}z[0]=Gz(z[0]*jz-qz);B[0]=Gz(B[0]*jz-qz);z[1]=Gz(z[1]*jz-qz);B[1]=Gz(B[1]*jz-qz);s.push(" m ",z[0],Xz,z[1]," l ",B[0],Xz,z[1]," l ",B[0],Xz,B[1]," l ",z[0],Xz,B[1]);break;case Vz.Z:s.push(" x ")}if(l>0){s.push(u);for(var V=0;V<l;V++){var G=hB[V];e&&Lt(G,G,e);s.push(Gz(G[0]*jz-qz),Xz,Gz(G[1]*jz-qz),V<l-1?Xz:"")}}}return s.join("")};ts.prototype.brushVML=function(t){var e=this.style;var r=this._vmlEl;if(!r){r=Rz("shape");Jz(r);this._vmlEl=r}uB(r,"fill",e,this);uB(r,"stroke",e,this);var i=this.transform;var a=i!=null;var n=r.getElementsByTagName("stroke")[0];if(n){var o=e.lineWidth;if(a&&!e.strokeNoScale){var s=i[0]*i[3]-i[1]*i[2];o*=Fz(Wz(s))}n.weight=o+"px"}var l=this.path||(this.path=new Co);if(this.__dirtyPath){l.beginPath();l.subPixelOptimize=false;this.buildPath(l,this.shape);l.toStatic();this.__dirtyPath=false}r.path=fB(l,this.transform);r.style.zIndex=iB(this.zlevel,this.z,this.z2);eB(t,r);if(e.text!=null){this.drawRectText(t,this.getBoundingRect())}else{this.removeRectText(t)}};ts.prototype.onRemove=function(t){rB(t,this._vmlEl);this.removeRectText(t)};ts.prototype.onAdd=function(t){eB(t,this._vmlEl);this.appendRectText(t)};var cB=function(t){return typeof t==="object"&&t.tagName&&t.tagName.toUpperCase()==="IMG"};ha.prototype.brushVML=function(t){var e=this.style;var r=e.image;var i;var a;if(cB(r)){var n=r.src;if(n===this._imageSrc){i=this._imageWidth;a=this._imageHeight}else{var o=r.runtimeStyle;var s=o.width;var l=o.height;o.width="auto";o.height="auto";i=r.width;a=r.height;o.width=s;o.height=l;this._imageSrc=n;this._imageWidth=i;this._imageHeight=a}r=n}else{if(r===this._imageSrc){i=this._imageWidth;a=this._imageHeight}}if(!r){return}var u=e.x||0;var h=e.y||0;var f=e.width;var c=e.height;var v=e.sWidth;var d=e.sHeight;var p=e.sx||0;var g=e.sy||0;var m=v&&d;var y=this._vmlEl;if(!y){y=Ez.createElement("div");Jz(y);this._vmlEl=y}var x=y.style;var _=false;var w;var b=1;var S=1;if(this.transform){w=this.transform;b=Fz(w[0]*w[0]+w[1]*w[1]);S=Fz(w[2]*w[2]+w[3]*w[3]);_=w[1]||w[2]}if(_){var M=[u,h];var I=[u+f,h];var T=[u,h+c];var A=[u+f,h+c];Lt(M,M,w);Lt(I,I,w);Lt(T,T,w);Lt(A,A,w);var D=Uz(M[0],I[0],T[0],A[0]);var C=Uz(M[1],I[1],T[1],A[1]);var L=[];L.push("M11=",w[0]/b,Xz,"M12=",w[2]/S,Xz,"M21=",w[1]/b,Xz,"M22=",w[3]/S,Xz,"Dx=",Gz(u*b+w[4]),Xz,"Dy=",Gz(h*S+w[5]));x.padding="0 "+Gz(D)+"px "+Gz(C)+"px 0";x.filter=Yz+".Matrix("+L.join("")+", SizingMethod=clip)"}else{if(w){u=u*b+w[4];h=h*S+w[5]}x.filter="";x.left=Gz(u)+"px";x.top=Gz(h)+"px"}var k=this._imageEl;var P=this._cropEl;if(!k){k=Ez.createElement("div");this._imageEl=k}var N=k.style;if(m){if(!(i&&a)){var O=new Image;var E=this;O.onload=function(){O.onload=null;i=O.width;a=O.height;N.width=Gz(b*i*f/v)+"px";N.height=Gz(S*a*c/d)+"px";E._imageWidth=i;E._imageHeight=a;E._imageSrc=r};O.src=r}else{N.width=Gz(b*i*f/v)+"px";N.height=Gz(S*a*c/d)+"px"}if(!P){P=Ez.createElement("div");P.style.overflow="hidden";this._cropEl=P}var R=P.style;R.width=Gz((f+p*f/v)*b);R.height=Gz((c+g*c/d)*S);R.filter=Yz+".Matrix(Dx="+-p*f/v*b+",Dy="+-g*c/d*S+")";if(!P.parentNode){y.appendChild(P)}if(k.parentNode!==P){P.appendChild(k)}}else{N.width=Gz(b*f)+"px";N.height=Gz(S*c)+"px";y.appendChild(k);if(P&&P.parentNode){y.removeChild(P);this._cropEl=null}}var z="";var B=e.opacity;if(B<1){z+=".Alpha(opacity="+Gz(B*100)+") "}z+=Yz+".AlphaImageLoader(src="+r+", SizingMethod=scale)";N.filter=z;y.style.zIndex=iB(this.zlevel,this.z,this.z2);eB(t,y);if(e.text!=null){this.drawRectText(t,this.getBoundingRect())}};ha.prototype.onRemove=function(t){rB(t,this._vmlEl);this._vmlEl=null;this._cropEl=null;this._imageEl=null;this.removeRectText(t)};ha.prototype.onAdd=function(t){eB(t,this._vmlEl);this.appendRectText(t)};var vB="normal";var dB={};var pB=0;var gB=100;var mB=document.createElement("div");var yB=function(t){var e=dB[t];if(!e){if(pB>gB){pB=0;dB={}}var r=mB.style;var i;try{r.font=t;i=r.fontFamily.split(",")[0]}catch(t){}e={style:r.fontStyle||vB,variant:r.fontVariant||vB,weight:r.fontWeight||vB,size:parseFloat(r.fontSize||12)|0,family:i||"Microsoft YaHei"};dB[t]=e;pB++}return e};var xB;_i("measureText",function(t,e){var r=Ez;if(!xB){xB=r.createElement("div");xB.style.cssText="position:absolute;top:-20000px;left:0;"+"padding:0;margin:0;border:none;white-space:pre;";Ez.body.appendChild(xB)}try{xB.style.font=e}catch(t){}xB.innerHTML="";xB.appendChild(r.createTextNode(t));return{width:xB.offsetWidth}});var _B=new Nr;var wB=function(t,e,r,i){var a=this.style;this.__dirty&&Hi(a,true);var n=a.text;n!=null&&(n+="");if(!n){return}if(a.rich){var o=Ei(n,a);n=[];for(var s=0;s<o.lines.length;s++){var l=o.lines[s].tokens;var u=[];for(var h=0;h<l.length;h++){u.push(l[h].text)}n.push(u.join(""))}n=n.join("\n")}var f;var c;var v=a.textAlign;var d=a.textVerticalAlign;var p=yB(a.font);var g=p.style+" "+p.variant+" "+p.weight+" "+p.size+'px "'+p.family+'"';r=r||bi(n,g,v,d,a.textPadding,a.textLineHeight);var m=this.transform;if(m&&!i){_B.copy(e);_B.applyTransform(m);e=_B}if(!i){var y=a.textPosition;var x=a.textDistance;if(y instanceof Array){f=e.x+aB(y[0],e.width);c=e.y+aB(y[1],e.height);v=v||"left"}else{var _=Ai(y,e,x);f=_.x;c=_.y;v=v||_.textAlign;d=d||_.textVerticalAlign}}else{f=e.x;c=e.y}f=Ii(f,r.width,v);c=Ti(c,r.height,d);c+=r.height/2;var w=Rz;var b=this._textVmlEl;var S;var M;var I;if(!b){b=w("line");S=w("path");M=w("textpath");I=w("skew");M.style["v-text-align"]="left";Jz(b);S.textpathok=true;M.on=true;b.from="0 0";b.to="1000 0.05";eB(b,I);eB(b,S);eB(b,M);this._textVmlEl=b}else{I=b.firstChild;S=I.nextSibling;M=S.nextSibling}var T=[f,c];var A=b.style;if(m&&i){Lt(T,T,m);I.on=true;I.matrix=m[0].toFixed(3)+Xz+m[2].toFixed(3)+Xz+m[1].toFixed(3)+Xz+m[3].toFixed(3)+",0,0";I.offset=(Gz(T[0])||0)+","+(Gz(T[1])||0);I.origin="0 0";A.left="0px";A.top="0px"}else{I.on=false;A.left=Gz(f)+"px";A.top=Gz(c)+"px"}M.string=Qz(n);try{M.style.font=g}catch(t){}uB(b,"fill",{fill:a.textFill,opacity:a.opacity},this);uB(b,"stroke",{stroke:a.textStroke,opacity:a.opacity,lineDash:a.lineDash},this);b.style.zIndex=iB(this.zlevel,this.z,this.z2);eB(t,b)};var bB=function(t){rB(t,this._textVmlEl);this._textVmlEl=null};var SB=function(t){eB(t,this._textVmlEl)};var MB=[la,ua,ha,ts,ws];for(var IB=0;IB<MB.length;IB++){var TB=MB[IB].prototype;TB.drawRectText=wB;TB.removeRectText=bB;TB.appendRectText=SB}ws.prototype.brushVML=function(t){var e=this.style;if(e.text!=null){this.drawRectText(t,{x:e.x||0,y:e.y||0,width:0,height:0},this.getBoundingRect(),true)}else{this.removeRectText(t)}};ws.prototype.onRemove=function(t){this.removeRectText(t)};ws.prototype.onAdd=function(t){this.appendRectText(t)}}function AB(t){return parseInt(t,10)}function DB(t,e){Bz();this.root=t;this.storage=e;var r=document.createElement("div");var i=document.createElement("div");r.style.cssText="display:inline-block;overflow:hidden;position:relative;width:300px;height:150px;";i.style.cssText="position:absolute;left:0;top:0;";t.appendChild(r);this._vmlRoot=i;this._vmlViewport=r;this.resize();var a=e.delFromStorage;var n=e.addToStorage;e.delFromStorage=function(t){a.call(e,t);if(t){t.onRemove&&t.onRemove(i)}};e.addToStorage=function(t){t.onAdd&&t.onAdd(i);n.call(e,t)};this._firstPaint=true}DB.prototype={constructor:DB,getType:function(){return"vml"},getViewportRoot:function(){return this._vmlViewport},getViewportRootOffset:function(){var t=this.getViewportRoot();if(t){return{offsetLeft:t.offsetLeft||0,offsetTop:t.offsetTop||0}}},refresh:function(){var t=this.storage.getDisplayList(true,true);this._paintList(t)},_paintList:function(t){var e=this._vmlRoot;for(var r=0;r<t.length;r++){var i=t[r];if(i.invisible||i.ignore){if(!i.__alreadyNotVisible){i.onRemove(e)}i.__alreadyNotVisible=true}else{if(i.__alreadyNotVisible){i.onAdd(e)}i.__alreadyNotVisible=false;if(i.__dirty){i.beforeBrush&&i.beforeBrush();(i.brushVML||i.brush).call(i,e);i.afterBrush&&i.afterBrush()}}i.__dirty=false}if(this._firstPaint){this._vmlViewport.appendChild(e);this._firstPaint=false}},resize:function(t,e){var t=t==null?this._getWidth():t;var e=e==null?this._getHeight():e;if(this._width!==t||this._height!==e){this._width=t;this._height=e;var r=this._vmlViewport.style;r.width=t+"px";r.height=e+"px"}},dispose:function(){this.root.innerHTML="";this._vmlRoot=this._vmlViewport=this.storage=null},getWidth:function(){return this._width},getHeight:function(){return this._height},clear:function(){if(this._vmlViewport){this.root.removeChild(this._vmlViewport)}},_getWidth:function(){var t=this.root;var e=t.currentStyle;return(t.clientWidth||AB(e.width))-AB(e.paddingLeft)-AB(e.paddingRight)|0},_getHeight:function(){var t=this.root;var e=t.currentStyle;return(t.clientHeight||AB(e.height))-AB(e.paddingTop)-AB(e.paddingBottom)|0}};function CB(t){return function(){Mr('In IE8.0 VML mode painter not support method "'+t+'"')}}L(["getLayer","insertLayer","eachLayer","eachBuiltinLayer","eachOtherLayer","getLayers","modLayer","delLayer","clearLayer","toDataURL","pathToImage"],function(t){DB.prototype[t]=CB(t)});Za("vml",DB);var LB="http://www.w3.org/2000/svg";function kB(t){return document.createElementNS(LB,t)}var PB=Co.CMD;var NB=Array.prototype.join;var OB="none";var EB=Math.round;var RB=Math.sin;var zB=Math.cos;var BB=Math.PI;var VB=Math.PI*2;var GB=180/BB;var FB=1e-4;function WB(t){return EB(t*1e4)/1e4}function HB(t){return t<FB&&t>-FB}function ZB(t,e){var r=e?t.textFill:t.fill;return r!=null&&r!==OB}function UB(t,e){var r=e?t.textStroke:t.stroke;return r!=null&&r!==OB}function XB(t,e){if(e){YB(t,"transform","matrix("+NB.call(e,",")+")")}}function YB(t,e,r){if(!r||r.type!=="linear"&&r.type!=="radial"){t.setAttribute(e,r)}}function jB(t,e,r){t.setAttributeNS("http://www.w3.org/1999/xlink",e,r)}function qB(t,e,r,i){if(ZB(e,r)){var a=r?e.textFill:e.fill;a=a==="transparent"?OB:a;if(t.getAttribute("clip-path")!=="none"&&a===OB){a="rgba(0, 0, 0, 0.002)"}YB(t,"fill",a);YB(t,"fill-opacity",e.fillOpacity!=null?e.fillOpacity*e.opacity:e.opacity)}else{YB(t,"fill",OB)}if(UB(e,r)){var n=r?e.textStroke:e.stroke;n=n==="transparent"?OB:n;YB(t,"stroke",n);var o=r?e.textStrokeWidth:e.lineWidth;var s=!r&&e.strokeNoScale?i.getLineScale():1;YB(t,"stroke-width",o/s);YB(t,"paint-order",r?"stroke":"fill");YB(t,"stroke-opacity",e.strokeOpacity!=null?e.strokeOpacity:e.opacity);var l=e.lineDash;if(l){YB(t,"stroke-dasharray",e.lineDash.join(","));YB(t,"stroke-dashoffset",EB(e.lineDashOffset||0))}else{YB(t,"stroke-dasharray","")}e.lineCap&&YB(t,"stroke-linecap",e.lineCap);e.lineJoin&&YB(t,"stroke-linejoin",e.lineJoin);e.miterLimit&&YB(t,"stroke-miterlimit",e.miterLimit)}else{YB(t,"stroke",OB)}}function KB(t){var e=[];var r=t.data;var i=t.len();for(var a=0;a<i;){var n=r[a++];var o="";var s=0;switch(n){case PB.M:o="M";s=2;break;case PB.L:o="L";s=2;break;case PB.Q:o="Q";s=4;break;case PB.C:o="C";s=6;break;case PB.A:var l=r[a++];var u=r[a++];var h=r[a++];var f=r[a++];var c=r[a++];var v=r[a++];var d=r[a++];var p=r[a++];var g=Math.abs(v);var m=HB(g-VB)&&!HB(g);var y=false;if(g>=VB){y=true}else if(HB(g)){y=false}else{y=(v>-BB&&v<0||v>BB)===!!p}var x=WB(l+h*zB(c));var _=WB(u+f*RB(c));if(m){if(p){v=VB-1e-4}else{v=-VB+1e-4}y=true;if(a===9){e.push("M",x,_)}}var w=WB(l+h*zB(c+v));var b=WB(u+f*RB(c+v));e.push("A",WB(h),WB(f),EB(d*GB),+y,+p,w,b);break;case PB.Z:o="Z";break;case PB.R:var w=WB(r[a++]);var b=WB(r[a++]);var S=WB(r[a++]);var M=WB(r[a++]);e.push("M",w,b,"L",w+S,b,"L",w+S,b+M,"L",w,b+M,"L",w,b);break}o&&e.push(o);for(var I=0;I<s;I++){e.push(WB(r[a++]))}}return e.join(" ")}var $B={};$B.brush=function(t){var e=t.style;var r=t.__svgEl;if(!r){r=kB("path");t.__svgEl=r}if(!t.path){t.createPathProxy()}var i=t.path;if(t.__dirtyPath){i.beginPath();i.subPixelOptimize=false;t.buildPath(i,t.shape);t.__dirtyPath=false;var a=KB(i);if(a.indexOf("NaN")<0){YB(r,"d",a)}}qB(r,e,false,t);XB(r,t.transform);if(e.text!=null){eV(t,t.getBoundingRect())}};var JB={};JB.brush=function(t){var e=t.style;var r=e.image;if(r instanceof HTMLImageElement){var i=r.src;r=i}if(!r){return}var a=e.x||0;var n=e.y||0;var o=e.width;var s=e.height;var l=t.__svgEl;if(!l){l=kB("image");t.__svgEl=l}if(r!==t.__imageSrc){jB(l,"href",r);t.__imageSrc=r}YB(l,"width",o);YB(l,"height",s);YB(l,"x",a);YB(l,"y",n);XB(l,t.transform);if(e.text!=null){eV(t,t.getBoundingRect())}};var QB={};var tV=new Nr;var eV=function(t,e,r){var i=t.style;t.__dirty&&Hi(i,true);var a=i.text;if(a==null){return}else{a+=""}var n=t.__textSvgEl;if(!n){n=kB("text");t.__textSvgEl=n}var o;var s;var l=i.textPosition;var u=i.textDistance;var h=i.textAlign||"left";if(typeof i.fontSize==="number"){i.fontSize+="px"}var f=i.font||[i.fontStyle||"",i.fontWeight||"",i.fontSize||"",i.fontFamily||""].join(" ")||yi;var c=rV(i.textVerticalAlign);r=bi(a,f,h,c,i.textPadding,i.textLineHeight);var v=r.lineHeight;if(l instanceof Array){o=e.x+l[0];s=e.y+l[1]}else{var d=Ai(l,e,u);o=d.x;s=d.y;c=rV(d.textVerticalAlign);h=d.textAlign}YB(n,"alignment-baseline",c);if(f){n.style.font=f}var p=i.textPadding;YB(n,"x",o);YB(n,"y",s);qB(n,i,true,t);if(t instanceof ws||t.style.transformText){XB(n,t.transform)}else{if(t.transform){tV.copy(e);tV.applyTransform(t.transform);e=tV}else{var g=t.transformCoordToGlobal(e.x,e.y);e.x=g[0];e.y=g[1];t.transform=ue(le())}var m=i.textOrigin;if(m==="center"){o=r.width/2+o;s=r.height/2+s}else if(m){o=m[0]+o;s=m[1]+s}var y=-i.textRotation||0;var x=le();ve(x,x,y);var g=[t.transform[4],t.transform[5]];ce(x,x,g);XB(n,x)}var _=a.split("\n");var w=_.length;var b=h;if(b==="left"){b="start";p&&(o+=p[3])}else if(b==="right"){b="end";p&&(o-=p[1])}else if(b==="center"){b="middle";p&&(o+=(p[3]-p[1])/2)}var S=0;if(c==="after-edge"){S=-r.height+v;p&&(S-=p[2])}else if(c==="middle"){S=(-r.height+v)/2;p&&(s+=(p[0]-p[2])/2)}else{p&&(S+=p[0])}if(t.__text!==a||t.__textFont!==f){var M=t.__tspanList||[];t.__tspanList=M;for(var I=0;I<w;I++){var T=M[I];if(!T){T=M[I]=kB("tspan");n.appendChild(T);YB(T,"alignment-baseline",c);YB(T,"text-anchor",b)}else{T.innerHTML=""}YB(T,"x",o);YB(T,"y",s+I*v+S);T.appendChild(document.createTextNode(_[I]))}for(;I<M.length;I++){n.removeChild(M[I])}M.length=w;t.__text=a;t.__textFont=f}else if(t.__tspanList.length){var A=t.__tspanList.length;for(var I=0;I<A;++I){var T=t.__tspanList[I];if(T){YB(T,"x",o);YB(T,"y",s+I*v+S)}}}};function rV(t){if(t==="middle"){return"middle"}else if(t==="bottom"){return"after-edge"}else{return"hanging"}}QB.drawRectText=eV;QB.brush=function(t){var e=t.style;if(e.text!=null){e.textPosition=[0,0];eV(t,{x:e.x||0,y:e.y||0,width:0,height:0},t.getBoundingRect())}};function iV(){}iV.prototype={diff:function(s,l,t){if(!t){t=function(t,e){return t===e}}this.equals=t;var u=this;s=s.slice();l=l.slice();var h=l.length;var f=s.length;var c=1;var e=h+f;var v=[{newPos:-1,components:[]}];var r=this.extractCommon(v[0],l,s,0);if(v[0].newPos+1>=h&&r+1>=f){var i=[];for(var a=0;a<l.length;a++){i.push(a)}return[{indices:i,count:l.length}]}function n(){for(var t=-1*c;t<=c;t+=2){var e;var r=v[t-1];var i=v[t+1];var a=(i?i.newPos:0)-t;if(r){v[t-1]=undefined}var n=r&&r.newPos+1<h;var o=i&&0<=a&&a<f;if(!n&&!o){v[t]=undefined;continue}if(!n||o&&r.newPos<i.newPos){e=nV(i);u.pushComponent(e.components,undefined,true)}else{e=r;e.newPos++;u.pushComponent(e.components,true,undefined)}a=u.extractCommon(e,l,s,t);if(e.newPos+1>=h&&a+1>=f){return aV(u,e.components,l,s)}else{v[t]=e}}c++}while(c<=e){var o=n();if(o){return o}}},pushComponent:function(t,e,r){var i=t[t.length-1];if(i&&i.added===e&&i.removed===r){t[t.length-1]={count:i.count+1,added:e,removed:r}}else{t.push({count:1,added:e,removed:r})}},extractCommon:function(t,e,r,i){var a=e.length;var n=r.length;var o=t.newPos;var s=o-i;var l=0;while(o+1<a&&s+1<n&&this.equals(e[o+1],r[s+1])){o++;s++;l++}if(l){t.components.push({count:l})}t.newPos=o;return s},tokenize:function(t){return t.slice()},join:function(t){return t.slice()}};function aV(t,e,r,i){var a=0;var n=e.length;var o=0;var s=0;for(;a<n;a++){var l=e[a];if(!l.removed){var u=[];for(var h=o;h<o+l.count;h++){u.push(h)}l.indices=u;o+=l.count;if(!l.added){s+=l.count}}else{var u=[];for(var h=s;h<s+l.count;h++){u.push(h)}l.indices=u;s+=l.count}}return e}function nV(t){return{newPos:t.newPos,components:t.components.slice(0)}}var oV=new iV;var sV=function(t,e,r){return oV.diff(t,e,r)};var lV="0";var uV="1";function hV(t,e,r,i,a){this._zrId=t;this._svgRoot=e;this._tagNames=typeof r==="string"?[r]:r;this._markLabel=i;this._domName=a||"_dom";this.nextId=0}hV.prototype.createElement=kB;hV.prototype.getDefs=function(t){var e=this._svgRoot;var i=this._svgRoot.getElementsByTagName("defs");if(i.length===0){if(t){i=e.insertBefore(this.createElement("defs"),e.firstChild);if(!i.contains){i.contains=function(t){var e=i.children;if(!e){return false}for(var r=e.length-1;r>=0;--r){if(e[r]===t){return true}}return false}}return i}else{return null}}else{return i[0]}};hV.prototype.update=function(t,e){if(!t){return}var r=this.getDefs(false);if(t[this._domName]&&r.contains(t[this._domName])){if(typeof e==="function"){e(t)}}else{var i=this.add(t);if(i){t[this._domName]=i}}};hV.prototype.addDom=function(t){var e=this.getDefs(true);e.appendChild(t)};hV.prototype.removeDom=function(t){var e=this.getDefs(false);if(e&&t[this._domName]){e.removeChild(t[this._domName]);t[this._domName]=null}};hV.prototype.getDoms=function(){var r=this.getDefs(false);if(!r){return[]}var i=[];L(this._tagNames,function(t){var e=r.getElementsByTagName(t);i=i.concat([].slice.call(e))});return i};hV.prototype.markAllUnused=function(){var t=this.getDoms();var e=this;L(t,function(t){t[e._markLabel]=lV})};hV.prototype.markUsed=function(t){if(t){t[this._markLabel]=uV}};hV.prototype.removeUnused=function(){var e=this.getDefs(false);if(!e){return}var t=this.getDoms();var r=this;L(t,function(t){if(t[r._markLabel]!==uV){e.removeChild(t)}})};hV.prototype.getSvgProxy=function(t){if(t instanceof ts){return $B}else if(t instanceof ha){return JB}else if(t instanceof ws){return QB}else{return $B}};hV.prototype.getTextSvgElement=function(t){return t.__textSvgEl};hV.prototype.getSvgElement=function(t){return t.__svgEl};function fV(t,e){hV.call(this,t,e,["linearGradient","radialGradient"],"__gradient_in_use__")}M(fV,hV);fV.prototype.addWithoutUpdate=function(n,o){if(o&&o.style){var s=this;L(["fill","stroke"],function(t){if(o.style[t]&&(o.style[t].type==="linear"||o.style[t].type==="radial")){var e=o.style[t];var r=s.getDefs(true);var i;if(e._dom){i=e._dom;if(!r.contains(e._dom)){s.addDom(i)}}else{i=s.add(e)}s.markUsed(o);var a=i.getAttribute("id");n.setAttribute(t,"url(#"+a+")")}})}};fV.prototype.add=function(t){var e;if(t.type==="linear"){e=this.createElement("linearGradient")}else if(t.type==="radial"){e=this.createElement("radialGradient")}else{Mr("Illegal gradient type.");return null}t.id=t.id||this.nextId++;e.setAttribute("id","zr"+this._zrId+"-gradient-"+t.id);this.updateDom(t,e);this.addDom(e);return e};fV.prototype.update=function(r){var i=this;hV.prototype.update.call(this,r,function(){var t=r.type;var e=r._dom.tagName;if(t==="linear"&&e==="linearGradient"||t==="radial"&&e==="radialGradient"){i.updateDom(r,r._dom)}else{i.removeDom(r);i.add(r)}})};fV.prototype.updateDom=function(t,e){if(t.type==="linear"){e.setAttribute("x1",t.x);e.setAttribute("y1",t.y);e.setAttribute("x2",t.x2);e.setAttribute("y2",t.y2)}else if(t.type==="radial"){e.setAttribute("cx",t.x);e.setAttribute("cy",t.y);e.setAttribute("r",t.r)}else{Mr("Illegal gradient type.");return}if(t.global){e.setAttribute("gradientUnits","userSpaceOnUse")}else{e.setAttribute("gradientUnits","objectBoundingBox")}e.innerHTML="";var r=t.colorStops;for(var i=0,a=r.length;i<a;++i){var n=this.createElement("stop");n.setAttribute("offset",r[i].offset*100+"%");var o=r[i].color;if(o.indexOf("rgba">-1)){var s=Xe(o)[3];var l=Ke(o);n.setAttribute("stop-color","#"+l);n.setAttribute("stop-opacity",s)}else{n.setAttribute("stop-color",r[i].color)}e.appendChild(n)}t._dom=e};fV.prototype.markUsed=function(t){if(t.style){var e=t.style.fill;if(e&&e._dom){hV.prototype.markUsed.call(this,e._dom)}e=t.style.stroke;if(e&&e._dom){hV.prototype.markUsed.call(this,e._dom)}}};function cV(t,e){hV.call(this,t,e,"clipPath","__clippath_in_use__")}M(cV,hV);cV.prototype.update=function(t){var e=this.getSvgElement(t);if(e){this.updateDom(e,t.__clipPaths,false)}var r=this.getTextSvgElement(t);if(r){this.updateDom(r,t.__clipPaths,true)}this.markUsed(t)};cV.prototype.updateDom=function(t,e,r){if(e&&e.length>0){var i=this.getDefs(true);var a=e[0];var n;var o;var s=r?"_textDom":"_dom";if(a[s]){o=a[s].getAttribute("id");n=a[s];if(!i.contains(n)){i.appendChild(n)}}else{o="zr"+this._zrId+"-clip-"+this.nextId;++this.nextId;n=this.createElement("clipPath");n.setAttribute("id",o);i.appendChild(n);a[s]=n}var l=this.getSvgProxy(a);if(a.transform&&a.parent.invTransform&&!r){var u=Array.prototype.slice.call(a.transform);fe(a.transform,a.parent.invTransform,a.transform);l.brush(a);a.transform=u}else{l.brush(a)}var h=this.getSvgElement(a);n.innerHTML="";n.appendChild(h.cloneNode());t.setAttribute("clip-path","url(#"+o+")");if(e.length>1){this.updateDom(n,e.slice(1),r)}}else{if(t){t.setAttribute("clip-path","none")}}};cV.prototype.markUsed=function(t){var e=this;if(t.__clipPaths&&t.__clipPaths.length>0){L(t.__clipPaths,function(t){if(t._dom){hV.prototype.markUsed.call(e,t._dom)}if(t._textDom){hV.prototype.markUsed.call(e,t._textDom)}})}};function vV(t,e){hV.call(this,t,e,["filter"],"__filter_in_use__","_shadowDom")}M(vV,hV);vV.prototype.addWithoutUpdate=function(t,e){if(e&&dV(e.style)){var r=e.style;var i;if(r._shadowDom){i=r._shadowDom;var a=this.getDefs(true);if(!a.contains(r._shadowDom)){this.addDom(i)}}else{i=this.add(e)}this.markUsed(e);var n=i.getAttribute("id");t.style.filter="url(#"+n+")"}};vV.prototype.add=function(t){var e=this.createElement("filter");var r=t.style;r._shadowDomId=r._shadowDomId||this.nextId++;e.setAttribute("id","zr"+this._zrId+"-shadow-"+r._shadowDomId);this.updateDom(t,e);this.addDom(e);return e};vV.prototype.update=function(t,e){var r=e.style;if(dV(r)){var i=this;hV.prototype.update.call(this,e,function(t){i.updateDom(e,t._shadowDom)})}else{this.remove(t,r)}};vV.prototype.remove=function(t,e){if(e._shadowDomId!=null){this.removeDom(e);t.style.filter=""}};vV.prototype.updateDom=function(t,e){var r=e.getElementsByTagName("feDropShadow");if(r.length===0){r=this.createElement("feDropShadow")}else{r=r[0]}var i=t.style;var a=t.scale?t.scale[0]||1:1;var n=t.scale?t.scale[1]||1:1;var o,s,l,u;if(i.shadowBlur||i.shadowOffsetX||i.shadowOffsetY){o=i.shadowOffsetX||0;s=i.shadowOffsetY||0;l=i.shadowBlur;u=i.shadowColor}else if(i.textShadowBlur){o=i.textShadowOffsetX||0;s=i.textShadowOffsetY||0;l=i.textShadowBlur;u=i.textShadowColor}else{this.removeDom(e,i);return}r.setAttribute("dx",o/a);r.setAttribute("dy",s/n);r.setAttribute("flood-color",u);var h=l/2/a;var f=l/2/n;var c=h+" "+f;r.setAttribute("stdDeviation",c);e.setAttribute("x","-100%");e.setAttribute("y","-100%");e.setAttribute("width",Math.ceil(l/2*200)+"%");e.setAttribute("height",Math.ceil(l/2*200)+"%");e.appendChild(r);i._shadowDom=e};vV.prototype.markUsed=function(t){var e=t.style;if(e&&e._shadowDom){hV.prototype.markUsed.call(this,e._shadowDom)}};function dV(t){return t&&(t.shadowBlur||t.shadowOffsetX||t.shadowOffsetY||t.textShadowBlur||t.textShadowOffsetX||t.textShadowOffsetY)}function pV(t){return parseInt(t,10)}function gV(t){if(t instanceof ts){return $B}else if(t instanceof ha){return JB}else if(t instanceof ws){return QB}else{return $B}}function mV(t,e){return e&&t&&e.parentNode!==t}function yV(t,e,r){if(mV(t,e)&&r){var i=r.nextSibling;i?t.insertBefore(e,i):t.appendChild(e)}}function xV(t,e){if(mV(t,e)){var r=t.firstChild;r?t.insertBefore(e,r):t.appendChild(e)}}function _V(t,e){if(e&&t&&e.parentNode===t){t.removeChild(e)}}function wV(t){return t.__textSvgEl}function bV(t){return t.__svgEl}var SV=function(t,e,r,i){this.root=t;this.storage=e;this._opts=r=N({},r||{});var a=kB("svg");a.setAttribute("xmlns","http://www.w3.org/2000/svg");a.setAttribute("version","1.1");a.setAttribute("baseProfile","full");a.style.cssText="user-select:none;position:absolute;left:0;top:0;";this.gradientManager=new fV(i,a);this.clipPathManager=new cV(i,a);this.shadowManager=new vV(i,a);var n=document.createElement("div");n.style.cssText="overflow:hidden;position:relative";this._svgRoot=a;this._viewport=n;t.appendChild(n);n.appendChild(a);this.resize(r.width,r.height);this._visibleList=[]};SV.prototype={constructor:SV,getType:function(){return"svg"},getViewportRoot:function(){return this._viewport},getViewportRootOffset:function(){var t=this.getViewportRoot();if(t){return{offsetLeft:t.offsetLeft||0,offsetTop:t.offsetTop||0}}},refresh:function(){var t=this.storage.getDisplayList(true);this._paintList(t)},setBackgroundColor:function(t){this._viewport.style.background=t},_paintList:function(t){this.gradientManager.markAllUnused();this.clipPathManager.markAllUnused();this.shadowManager.markAllUnused();var e=this._svgRoot;var r=this._visibleList;var i=t.length;var a=[];var n;for(n=0;n<i;n++){var o=t[n];var s=gV(o);var l=bV(o)||wV(o);if(!o.invisible){if(o.__dirty){s&&s.brush(o);this.clipPathManager.update(o);if(o.style){this.gradientManager.update(o.style.fill);this.gradientManager.update(o.style.stroke);this.shadowManager.update(l,o)}o.__dirty=false}a.push(o)}}var u=sV(r,a);var h;for(n=0;n<u.length;n++){var f=u[n];if(f.removed){for(var c=0;c<f.count;c++){var o=r[f.indices[c]];var l=bV(o);var v=wV(o);_V(e,l);_V(e,v)}}}for(n=0;n<u.length;n++){var f=u[n];if(f.added){for(var c=0;c<f.count;c++){var o=a[f.indices[c]];var l=bV(o);var v=wV(o);h?yV(e,l,h):xV(e,l);if(l){yV(e,v,l)}else if(h){yV(e,v,h)}else{xV(e,v)}yV(e,v,l);h=v||l||h;this.gradientManager.addWithoutUpdate(l,o);this.shadowManager.addWithoutUpdate(h,o);this.clipPathManager.markUsed(o)}}else if(!f.removed){for(var c=0;c<f.count;c++){var o=a[f.indices[c]];h=l=wV(o)||bV(o)||h;this.gradientManager.markUsed(o);this.gradientManager.addWithoutUpdate(l,o);this.shadowManager.markUsed(o);this.shadowManager.addWithoutUpdate(l,o);this.clipPathManager.markUsed(o)}}}this.gradientManager.removeUnused();this.clipPathManager.removeUnused();this.shadowManager.removeUnused();this._visibleList=a},_getDefs:function(t){var e=this._svgRoot;var i=this._svgRoot.getElementsByTagName("defs");if(i.length===0){if(t){var i=e.insertBefore(kB("defs"),e.firstChild);if(!i.contains){i.contains=function(t){var e=i.children;if(!e){return false}for(var r=e.length-1;r>=0;--r){if(e[r]===t){return true}}return false}}return i}else{return null}}else{return i[0]}},resize:function(t,e){var r=this._viewport;r.style.display="none";var i=this._opts;t!=null&&(i.width=t);e!=null&&(i.height=e);t=this._getSize(0);e=this._getSize(1);r.style.display="";if(this._width!==t||this._height!==e){this._width=t;this._height=e;var a=r.style;a.width=t+"px";a.height=e+"px";var n=this._svgRoot;n.setAttribute("width",t);n.setAttribute("height",e)}},getWidth:function(){return this._width},getHeight:function(){return this._height},_getSize:function(t){var e=this._opts;var r=["width","height"][t];var i=["clientWidth","clientHeight"][t];var a=["paddingLeft","paddingTop"][t];var n=["paddingRight","paddingBottom"][t];if(e[r]!=null&&e[r]!=="auto"){return parseFloat(e[r])}var o=this.root;var s=document.defaultView.getComputedStyle(o);return(o[i]||pV(s[r])||pV(o.style[r]))-(pV(s[a])||0)-(pV(s[n])||0)|0},dispose:function(){this.root.innerHTML="";this._svgRoot=this._viewport=this.storage=null},clear:function(){if(this._viewport){this.root.removeChild(this._viewport)}},pathToDataUrl:function(){this.refresh();var t=this._svgRoot.outerHTML;return"data:image/svg+xml;charset=UTF-8,"+t}};function MV(t){return function(){Mr('In SVG mode painter not support method "'+t+'"')}}L(["getLayer","insertLayer","eachLayer","eachBuiltinLayer","eachOtherLayer","getLayers","modLayer","delLayer","clearLayer","toDataURL","pathToImage"],function(t){SV.prototype[t]=MV(t)});Za("svg",SV);t.version=Ov;t.dependencies=Ev;t.PRIORITY=Zv;t.init=Nd;t.connect=Od;t.disConnect=Ed;t.disconnect=Rd;t.dispose=zd;t.getInstanceByDom=Bd;t.getInstanceById=Vd;t.registerTheme=Gd;t.registerPreprocessor=Fd;t.registerProcessor=Wd;t.registerPostUpdate=Hd;t.registerAction=Zd;t.registerCoordinateSystem=Ud;t.getCoordinateSystemDimensions=Xd;t.registerLayout=Yd;t.registerVisual=jd;t.registerLoading=Kd;t.extendComponentModel=$d;t.extendComponentView=Jd;t.extendSeriesModel=Qd;t.extendChartView=tp;t.setCanvasCreator=ep;t.registerMap=rp;t.getMap=ip;t.dataTool=ap;t.zrender=Ya;t.number=Lu;t.format=Yu;t.throttle=Tc;t.helper=mm;t.matrix=me;t.vector=Nt;t.color=ar;t.parseGeoJSON=Mm;t.parseGeoJson=Zm;t.util=Um;t.graphic=Xm;t.List=Ip;t.Model=ru;t.Axis=Fm;t.env=y;return t});