<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>危急值处理测试</title>
	<meta name="renderer" content="webkit">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=0">
	<link rel="stylesheet" href="../../src/layui/src/css/layui.css" media="all">
	<link rel="shortcut icon" href="../../../logo-16.png">
</head>
<body class="layui-layout-body">
	<div class="layui-fluid">
		<div class="layui-card">
			<div class="layui-card-header">
				危急值处理测试
			</div>
			<div class="layui-card-body">
				<div class="layui-btn-container">
					<button id="WarningUpload" class="layui-btn">上报</button>
					<button id="TimeOutReSend" class="layui-btn">超时重发</button>
					<button id="Confirm" class="layui-btn">确认</button>
					<button id="Handle" class="layui-btn">处理</button>
				</div>
			</div>
		</div>
	</div>
	<script src="../../src/layui/src/layui.js"></script>
	<script type="text/javascript" src="../config/system.js"></script>
	<script>
		layui.extend({
			uxutil:'ux/util'
		}).use(['uxutil','layer'],function(){
			var $=layui.$,
				uxutil = layui.uxutil;
			
			//上报
			$("#WarningUpload").on("click",function(){
				toServer(uxutil.path.ROOT+"/ServerWCF/IMService.svc/ST_UDTO_SCMsgByWarningUpload",{
					"entity":{
						"Id":"4660596289698038836",
						"WarningUploaderID":"5526566824471125183",
						"WarningUploaderName":"hujie",
						"WarningUpLoadNotifyNurseID":"5526566824471125183",
						"WarningUpLoadNotifyNurseName":"hujie",
						"WarningUploaderFlag":"1",
						"WarningUpLoadDateTime":"\/Date(" + new Date().getTime() + "+0000)\/"
					},
					"fields":"Id,WarningUploaderID,WarningUploaderName,WarningUpLoadNotifyNurseID,WarningUpLoadNotifyNurseName,WarningUploaderFlag,WarningUpLoadDateTime"
				});
			});
			//超时重发
			$("#TimeOutReSend").on("click",function(){
				toServer(uxutil.path.ROOT+"/ServerWCF/IMService.svc/ST_UDTO_SCMsgByTimeOutReSend",{
					"entity":{
						"Id":"4660596289698038836",
						"TimeOutCallUserID":"5526566824471125183",
						"WarningUploaderName":"hujie",
						"TimeOutCallRecUserID":"5526566824471125183",
						"TimeOutCallRecUserName":"hujie"
					}
				});
			});
			//确认
			$("#Confirm").on("click",function(){
				toServer(uxutil.path.ROOT+"/ServerWCF/IMService.svc/ST_UDTO_SCMsgByConfirm",{
					"entity":{
						"Id":"4660596289698038836",
						"ConfirmerID":"5526566824471125183",
						"ConfirmerName":"hujie",
						"ConfirmerCode":"",
						"ConfirmerCodeHIS":"",
						"ConfirmIPAddress":"",
						"ConfirmMemo":"",
						"RecDeptID":"5201570811375180860",
						
						"ConfirmNotifyDoctorCode":"hujie",
						"ConfirmNotifyDoctorCodeHIS":"hujie",
						"ConfirmNotifyDoctorID":"5526566824471125183",
						"ConfirmNotifyDoctorName":"hujie"
					}
				});
			});
			//处理
			$("#Handle").on("click",function(){
				toServer(uxutil.path.ROOT+"/ServerWCF/IMService.svc/ST_UDTO_AddSCMsgHandle",{
					"entity":{
						"MsgID":"4660596289698038836",
						"HandlerID":"5526566824471125183",
						"HandlerName":"hujie",
						"HandleDeptID":"5201570811375180860",
						"HandleNodeName":"站点A",
						"HandleNodeIPAddress":"192.168.101.11",
						"HandleDesc":"备注测试",
						
						"HandleTime":"\/Date(" + new Date().getTime() + "+0000)\/"
					}
				});
			});
			
			function toServer(url,data){
				uxutil.server.ajax({
					url:url,
					type:'post',
					data:JSON.stringify(data)
				},function(data){
					if(data.success){
						layer.msg('保存成功');
					}else{
						layer.msg(data.msg);
					}
				});
			}
		});
	</script>
</body>
</html>