<?xml version="1.0" encoding="utf-8"?>
<configuration>
 <configSections>
    <sectionGroup name="spring">
      <section name="context" type="Spring.Context.Support.ContextHandler, Spring.Core"/>
      <section name="parsers" type="Spring.Context.Support.NamespaceParsersSectionHandler, Spring.Core"/>
      <section name="objects" type="Spring.Context.Support.DefaultSectionHandler, Spring.Core"/>
    </sectionGroup>
    <section name="log4net" type="log4net.Config.Log4NetConfigurationSectionHandler, log4net"/>
    <section name="databaseSettings" type="System.Configuration.NameValueSectionHandler"/>
    <section name="oracle.manageddataaccess.client"
      type="OracleInternal.Common.ODPMSectionHandler, Oracle.ManagedDataAccess, Version=4.122.1.0, Culture=neutral, PublicKeyToken=89b483f429c47342"/>
  </configSections>
 <spring xmlns="http://www.springframework.net">
    <parsers>
      <parser type="Spring.Data.Config.DatabaseNamespaceParser, Spring.Data"/>
      <parser type="Spring.Transaction.Config.TxNamespaceParser, Spring.Data"/>
    </parsers>
    <context> 
      <resource uri="config://spring/objects"/>
      <resource uri="assembly://ZhiFang.ReportFormQueryPrint.ObjectFactory/ZhiFang.ReportFormQueryPrint.ObjectFactory.Config/Facade.xml"/>
    </context> 
    <objects xmlns="http://www.springframework.net" xmlns:aop="http://www.springframework.net/aop">
      <object id="serviceOperation" type="Spring.Aop.Support.SdkRegularExpressionMethodPointcut, Spring.Aop">
        <property name="Patterns">
          <list>
            <value>ZhiFang.ReportFormQueryPrint.ServiceWCF.*</value>
          </list>
        </property>
      </object>

      <object id="BeforeAdvice" type="ZhiFang.ReportFormQueryPrint.Interceptor.BeforeAdvice, ZhiFang.ReportFormQueryPrint.Interceptor" singleton="false"/>
      <object id="AfterAdvice" type="ZhiFang.ReportFormQueryPrint.Interceptor.AfterReturningAdvice, ZhiFang.ReportFormQueryPrint.Interceptor" singleton="false"/>
      <object id="ExceptAdvice" type="ZhiFang.ReportFormQueryPrint.Interceptor.ExceptAdvice, ZhiFang.ReportFormQueryPrint.Interceptor" singleton="false"/>
      <aop:config>
        <aop:advisor pointcut-ref="serviceOperation" advice-ref="BeforeAdvice"/>
        <!--<aop:advisor pointcut-ref="serviceOperation" advice-ref="AfterAdvice" />
        <aop:advisor pointcut-ref="serviceOperation" advice-ref="ExceptAdvice" />-->
      </aop:config>
    </objects>
  </spring>
 <appSettings>
    <!--数据工厂类参数-->
    <!--<add key="DBSourceType" value="ZhiFang.ReportFormQueryPrint.DAL.MSSQL.MSSQL2009"/>-->
    <!--<add key="DBSourceType" value="ZhiFang.ReportFormQueryPrint.DAL.MSSQL.MSSQL66"></add>-->
    <add key="DBSourceType" value="ZhiFang.ReportFormQueryPrint.DAL.MSSQL.ReportCenter"></add>
    <!--<add key="DBSourceType" value="DAL.ORACLE66"></add>-->
    <!--<add key="DBSourceType" value="ZhiFang.ReportFormQueryPrint.DAL.MSSQL.WebLis"></add>-->
    <!--数据库连接字符串-->
    <!--<add key="ReportFormQueryPrintConnectionString" value="data source=.;user id=sa;password=sa;initial catalog=digitlab" />-->
    <add key="ReportFormQueryPrintConnectionString" value="data source=.;user id=sa;password=sa;initial catalog=baogaoku"/>
   <!--对象内容缓村的时间（分钟）-->
    <add key="ModelCache" value="120"/>
    <!--Session间（分钟）-->
    <add key="SessionCacheTime" value="120"/>
    <!--报告内图片存放路径URL-->
    <add key="ReportFormImagesURL" value="FormImages/"/>
    <!--访问服务的MD5秘钥-->
    <add key="MD5Key_wuzhoufubao" value="123456"/>
    <!--报告内签名、logo等图片存放路径URL-->
    <add key="ReportFormImagesOtherURL" value="FormImages/Other"/>
    <!--存放XSL模板路径-->
    <add key="ModelCreatURL" value="XSL/Creat"/>
    <!--存放XSL显示模板路径-->
    <add key="ModelShowURL" value="XSL/Show"/>
    <!--应用程序虚拟目录(如是网站则填写"/")-->
    <add key="LocalhostURL" value="/ZhiFang.ReportFormQueryPrint/"/>
    <!--存放显示模板的XML配置路径-->
    <add key="XmlConfig" value="XmlConfig/ReportFromShowXslConfig.xml"/>
    <!--存放查询数据列表显示的XML配置路径-->
    <add key="PrintDataListConfig" value="XmlConfig/PrintDataListConfig.xml"/>
    <!--电子签名图片存放路径URL-->
    <add key="UserImagesURL" value="FormImages/UserImages"/>
    <!--微生物顶端步骤ID(细菌培养、细菌鉴定、药敏试验)-->
    <add key="TopMicroStepId" value="1,2,3"/>
    <!--查询界面报告单列表是否弹出医嘱项目0否1是-->
    <add key="ReportListPatItemShowFlag" value="0"/>
    <!--Weblis中心实验室名称-->
    <add key="CenterName" value="上海兰卫临床检验中心"/>
    <!--报告图片格式-->
    <add key="ReportFormImageType" value="JPEG"/>
    <!--报告图片精度-->
    <add key="JpegQuality" value="100"/>
    <!--默认报告查询条件日期相对当前日期的提前数如：当前时间为"2012-07-21"如果查询区间为"2012-07-19"到"2012-07-21"则配置为-2-->
    <add key="SearchBeforeDayNum" value="-2"/>
    <!--报告单列表最大数限制-->
    <add key="SearchReportFormLimit" value="10000"/>
    <!--是否读取Weblis数据条件：0否，1是。-->
    <add key="WeblisDBSQLFlag" value="0"/>
    <!--报告图片临时存放路径-->
    <add key="ReportFormImageDir" value="TmpReportImagePath"/>
    <!--html存放路径URL-->
    <!--add key="ReporthtmlURL" value="ReporthtmlFiles/"/-->
    <!-- 报表包含图片路径 -->
    <add key="ReportIncludeImage" value="D:\project\ljjPJ\TFS_产品\82-Weblis服务\产品通用\WebLisSXTY\WebLis\ReportFormImage"/>
    <!--禁用BrowserLink-->
    <add key="vs:EnableBrowserLink" value="false"/>
  </appSettings>
 <system.web>
    <compilation debug="true" targetFramework="4.0"/>
  </system.web>
 <system.serviceModel>
    <services>
      <service behaviorConfiguration="" name="ZhiFang.ReportFormQueryPrint.ServiceWCF.ReportFormService">
        <endpoint address="" behaviorConfiguration="ZhiFang.ReportFormQueryPrint.ReportFormServiceAspNetAjaxBehavior" binding="webHttpBinding"
          contract="ZhiFang.ReportFormQueryPrint.ServerContract.IReportFormService"/>
      </service>
      <service name="ZhiFang.ReportFormQueryPrint.ServiceWCF.DictionaryService">
        <endpoint address="" behaviorConfiguration="ZhiFang.ReportFormQueryPrint.ServiceWCF.DictionaryServiceAspNetAjaxBehavior" binding="webHttpBinding"
          contract="ZhiFang.ReportFormQueryPrint.ServerContract.IDictionaryService"/>
      </service>
      <service name="ZhiFang.ReportFormQueryPrint.ServiceWCF.ServiceTest">
        <endpoint address="" behaviorConfiguration="ZhiFang.ReportFormQueryPrint.ServiceWCF.ServiceTestAspNetAjaxBehavior" binding="webHttpBinding"
          contract="ZhiFang.ReportFormQueryPrint.ServerContract.IServiceTest"/>
      </service>
      <service name="ZhiFang.ReportFormQueryPrint.ServiceWCF.Customization.beijingwuzhoufubao">
        <endpoint address="" behaviorConfiguration="ZhiFang.ReportFormQueryPrint.ServiceWCF.Customization.beijingwuzhoufubaoAspNetAjaxBehavior"
          binding="webHttpBinding" contract="ZhiFang.ReportFormQueryPrint.ServiceWCF.Customization.beijingwuzhoufubao"/>
      </service>
    </services>
    <behaviors>
      <endpointBehaviors>
        <behavior name="ZhiFang.ReportFormQueryPrint.ReportFormServiceAspNetAjaxBehavior">
          <webHttp helpEnabled="true"/>
        </behavior>
        <behavior name="ZhiFang.ReportFormQueryPrint.ServiceWCF.DictionaryServiceAspNetAjaxBehavior">
          <webHttp helpEnabled="true"/>
        </behavior>
        <behavior name="ZhiFang.ReportFormQueryPrint.ServiceWCF.ServiceTestAspNetAjaxBehavior">
          <webHttp helpEnabled="true"/>
        </behavior>
        <behavior name="ZhiFang.ReportFormQueryPrint.ServiceWCF.Customization.beijingwuzhoufubaoAspNetAjaxBehavior">
          <webHttp helpEnabled="true"/>
        </behavior>
      </endpointBehaviors>
      <serviceBehaviors>
        <behavior name="">
          <serviceMetadata httpGetEnabled="true"/>
          <serviceDebug includeExceptionDetailInFaults="false"/>
        </behavior>
        <behavior name="DefaultBehavior">
          <serviceMetadata httpGetEnabled="true"/>
          <serviceDebug includeExceptionDetailInFaults="true"/>
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <serviceHostingEnvironment aspNetCompatibilityEnabled="true" multipleSiteBindingsEnabled="true"/>
    <bindings>
      <webHttpBinding>
        <binding closeTimeout="00:10:00" openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00" allowCookies="true" maxBufferSize="2147483647"
          maxBufferPoolSize="9223372036854775807" maxReceivedMessageSize="2147483647"/>
      </webHttpBinding>
    </bindings>
  </system.serviceModel>
 <system.webServer>
    <modules runAllManagedModulesForAllRequests="true"/>
    <!--
        若要在调试过程中浏览 Web 应用程序根目录，请将下面的值设置为 True。
        在部署之前将该值设置为 False 可避免泄露 Web 应用程序文件夹信息。
      -->
    <directoryBrowse enabled="true"/>
  </system.webServer>
 <system.data>
  <DbProviderFactories>
   <remove invariant="Oracle.ManagedDataAccess.Client"/>
   <add name="ODP.NET, Managed Driver" invariant="Oracle.ManagedDataAccess.Client" description="Oracle Data Provider for .NET, Managed Driver"
    type="Oracle.ManagedDataAccess.Client.OracleClientFactory, Oracle.ManagedDataAccess, Version=4.122.1.0, Culture=neutral, PublicKeyToken=89b483f429c47342"/>
  </DbProviderFactories>
 </system.data>
 <runtime>
  <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
   <dependentAssembly>
    <publisherPolicy apply="no"/>
    <assemblyIdentity name="Oracle.ManagedDataAccess" publicKeyToken="89b483f429c47342" culture="neutral"/>
   </dependentAssembly>
  </assemblyBinding>
 </runtime>
 <oracle.manageddataaccess.client>
  <version number="*">
   <dataSources>
    <dataSource alias="SampleDataSource" descriptor="(DESCRIPTION=(ADDRESS=(PROTOCOL=tcp)(HOST=localhost)(PORT=1521))(CONNECT_DATA=(SERVICE_NAME=ORCL))) "/>
   </dataSources>
  </version>
 </oracle.manageddataaccess.client>

</configuration>
